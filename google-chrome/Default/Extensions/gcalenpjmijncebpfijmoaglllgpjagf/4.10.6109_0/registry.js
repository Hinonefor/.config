'use strict';(r=>{const l=(()=>{let n=[];const g={},p={},l=(a,c,b)=>{a="string"===typeof a?[a]:a;const f=()=>a.every(a=>!!k[a]);var d=()=>{f()?b():n.push(d)};a.forEach(a=>{if(void 0===k[a]&&void 0===g[a]){const b=window.setTimeout(()=>{p[a]||(delete g[a],m.announce(a),m.loadFile(rea.extension.getURL(a+".js"),()=>{c?m.register(a,null,{}):console.log("registry: finished loading "+a+".js ")}))},0);g[a]=()=>{window.clearTimeout(b);delete g[a]}}});d()};var k={};const e={},q={};var m={log:(()=>{let a=0;
const c=[],b=()=>{const b=["debug"],c=["log"],e=["warn","info"],h=["error"],g=[...b,...c,...e,...h];80<=a&&h.push(...b);60<=a&&h.push(...c);60<=a&&h.push(...c);30<=a&&h.push(...e);g.forEach(a=>f[a]=h.includes(a)?console[a].bind(console):()=>{})},f={set:d=>{a=d;c.forEach(b=>{b(f,a)});b()},get:()=>a,verbose:(console.debug||(()=>{})).bind(console),addChangeListener:a=>{c.push(a)}};b();return f})(),init:()=>{},verify:a=>{const c=[];for(const b in e)e.hasOwnProperty(b)&&(3<e[b].length&&"###"===e[b].substr(0,
3)?console.log("registry.verify: development version detected @ "+b):e[b]!==a&&(console.warn("registry.verify: expected version "+a+" and detected "+e[b]+" @ "+b),c.push({name:b,version:e[b],expected:a})));return c},announce:a=>{p[a]=!0},register:(a,c,b,f)=>{if(!k[a]||f){e[a]=c;k[a]=b;delete p[a];let d;(d=g[a])&&d();a=n;for(n=[];a.length;)a.pop()()}},registerRaw:(a,c,b,f)=>{if(!q[a]||f)e[a]=c,q[a]=b},vendor:(a,c)=>l(a,!0,c),require:(a,c)=>l(a,!1,c),getRaw:(a,c)=>{let b;if(void 0!==(b=q[a]))c&&c(b);
else{const f=rea.extension.getURL(a);try{const d=new XMLHttpRequest;if(XMLHttpRequest.onlyasync){if(!c){console.warn("registry: async xhr without a callback!");return}d.open("GET",f);d.onload=()=>{c(d.responseText)};d.onerror=()=>{c()};d.send(null)}else d.open("GET",f,!1),d.send(null),(b=d.responseText)||console.warn("registry: content of "+a+" is null!"),c&&c(b)}catch(d){console.log("getRawContent "+d)}}return b},loadFile:(a,c)=>{a="string"===typeof a?[a]:a;let b=1;a.forEach(a=>{b++;try{rea.page.addScript(a,
d=>{d||console.warn("registry: self.load "+a+" failed! ");0==--b&&c&&c()})}catch(d){console.warn("registry: self.load "+a+" failed! ",d),0==--b&&c&&c()}});0==--b&&c&&c()},isDevVersion:a=>e[a]&&"###"===e[a].substr(0,3),get:(a,...c)=>{let b;a=k[a];"function"===typeof a?b=a.apply(this,c):a&&(b=a);return b}};return m})();window.setTimeout(l.init,1);r.Registry=l})("undefined"!==typeof rea?rea.globals:window);
