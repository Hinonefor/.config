'use strict';Registry.require("promise",()=>{const m=Registry.get("promise");let b,g;const r=(c,e,d,h,a,f,n)=>{let k=document.createElement("img");k.onload=()=>{{let a;a=g?g:document.createElement("canvas");a.height=d;a.width=e;g=a;b=g.getContext("2d")}f&&b.scale(f,f);b.drawImage(k,h,a);k.parentNode&&k.parentNode.removeChild(k);k=null;n&&n()};k.src=c},l=(c,e,d,h)=>{h="rgba("+h.join(",")+", 1)";b.fillStyle=h;b.beginPath();b.arc(c,e,d,0,2*Math.PI,!0);b.fill()},p=(c,e,d,h,a,f)=>{null==a&&(a=!0);a?(b.fillStyle=
"rgba("+f.join(",")+", 0.99)",b.fillRect(c,e,d,h)):(b.fillStyle="rgb("+f.join(",")+", 1)",b.beginPath(),b.moveTo(c,e),b.lineTo(c+d,e),b.lineTo(c+d,e+h),b.lineTo(c,e+h),b.lineTo(c,e),b.stroke())},q=(c,e,d,b,a,f)=>{l(c+a,e+a,a,f);l(d-a,e+a,a,f);l(c+a,b-a,a,f);l(d-a,b-a,a,f);p(c+a,e,d-c-2*a,b-e,!0,f);p(c,e+a,d-c,b-e-2*a,!0,f)};Registry.register("icon","7c765150",{toPNG:function(){return g.toDataURL()},getDataUriFromUrl:function(b){const e=m();let d=document.createElement("img"),c=!1,a=null;
const f=document.body||document.documentElement||document;f.appendChild(d);const g=()=>{a&&window.clearTimeout(a);c||e.reject()};a=window.setTimeout(()=>{a=null;g();c=!0},5E3);d.onload=()=>{a&&window.clearTimeout(a);let b,g;try{g=document.createElement("canvas"),g.width=d.width,g.height=d.height,g.getContext("2d").drawImage(d,0,0),b=g.toDataURL(),f.removeChild(d),d=null}catch(t){}c||e.resolve(b)};d.onerror=g;d.src=b;return e.promise()},createIconEx:function(c){const e=m();r(rea.extension.getURL("images/icon128.png"),
140,140,6,6,1,()=>{var d=116-(10<c?14:0)-(100<c?14:0)-(1E3<c?14:0)-(1E4<c?14:0);q(d,0,140,25,4,[200,0,0]);q(d+3,3,137,22,4,[190,0,0]);d+=4;b.font="22pt Arial bold";b.fillStyle="rgba("+[240,250,240].join()+", 1)";b.fillText(c,d,22);e.resolve(g.toDataURL())});return e.promise()}})});
