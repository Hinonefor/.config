'use strict';Registry.require("convert",()=>{const q=Registry.get("convert"),m=(a,c)=>{void 0==c&&(c=[]);c=new RegExp("(\\"+"/.+?|()[]{}\\".split("").concat(c).join("|\\")+")","g");return a.replace(c,"\\$1")},h=a=>({}).toString.apply(a).match(/\s([a-z|A-Z]+)/)[1],g=(a,c)=>{var b=h(a);if("Array"===b||"NodeList"===b)for(b=0;b<a.length&&!1!==c(a[b],b);b++);else if("XPathResult"===b)for(b=a.iterateNext();b&&!1!==c(b);)b=a.iterateNext();else for(const b in a)if(a.hasOwnProperty(b)&&!1===c(a[b],b))break},
l=(a,c,b,d)=>{if("Array"===h(b)){const a={};b.forEach(c=>{a[c]=!0});b=a}g(b||a,(e,f)=>{if(!b||b.hasOwnProperty(f)){let k;e=a[f];const g=h(e);"Undefined"==g||b&&d&&(k=h(b[f]))&&k!==g&&("Array"===k||"Object"===k)||("Object"==g?(c[f]={},l(e,c[f],b?b[f]:null)):"Array"==g?(c[f]=[],l(e,c[f])):c[f]=e)}});return c},n=a=>document.body?document.body.innerText:0<a.childNodes.length?n(a.childNodes[a.childNodes.length-1]):a.innerText,r=(()=>{const a={objs:{},push:function(c,b){0!==b&&1!==b&&(b=0);const d=p();
a.objs[d]={fn:c,prio:b};return d},remove:function(c){delete a.objs[c]},get:function(c){const b=[];for(let d=0;1>=d;d++)for(const e in a.objs)a.objs.hasOwnProperty(e)&&(a.objs[e].prio!==d||void 0!==c&&e!=c||b.push(a.objs[e].fn));return void 0===c?b:b[0]},finalize:function(c){if(void 0===c){c=a.get();for(var b=0;b<c.length;b++)c[b]()}else return a.objs[c]&&(b=a.objs[c].fn(),delete a.objs[c]),b}};return a})();var p=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const c=16*Math.random()|
0;return("x"==a?c:c&3|8).toString(16)});Registry.register("helper","7c765150",{createUniqueId:(a,c)=>q.Base64.encode(a+"_"+c).replace(/[^0-9a-zA-Z_\-]/g,""),getStringBetweenTags:(a,c,b)=>{const d=a.indexOf(c);if(-1==d)return"";if(!b)return a.substr(d+c.length);b=a.substr(d+c.length).indexOf(b);return-1==b?"":a.substr(d+c.length,b)},escapeForRegExpURL:m,escapeForRegExp:(a,c)=>m(a,["*"]),isLocalImage:a=>{let c=rea.extension.getURL("background.js");c=c.replace("background.js","")+"images/";
return a.length>=c.length&&c==a.substr(0,c.length)},getUrlArgs:a=>{const c={};var b=window.location.search.replace(/^\?/,""),d=window.location.hash.replace(/^#/,"");b?a&&d&&(b=b+"&"+d):b=d;a=b.split("&");for(b=0;b<a.length;b++){var e=a[b].split("=");2!=e.length&&(d=e[0],e=e.slice(1).join("="),e=[d,e]);c[e[0]]=decodeURIComponent(e[1])}return c},getSource:n,alert:a=>{window.setTimeout(()=>{alert(a)},1)},confirm:(a,c)=>{window.setTimeout(()=>{const b=confirm(a);c(b)},1)},prompt:(a,c,b)=>{window.setTimeout(()=>
{const d=prompt(a,c);b(d)},1)},filter:(a,c)=>a&&c?(a.match(c)||[]).join(""):"",toType:h,each:g,select:(a,c)=>{const b=[];g(a,a=>{c(a)&&b.push(a)});return b},map:(a,c)=>{const b=[];g(a,(a,e)=>{b.push(c(a,e))});return b},values:a=>(Object.values||(a=>Object.keys(a).map(b=>a[b])))(a),insert:(a,c,b,d)=>a.slice(0,c)+d+a.slice(c+Math.abs(b)),assign:(a,c)=>{a=a||{};Object.keys(c).forEach(b=>{a[b]=c[b]});return a},clean:r,sleep:a=>{const c=Date.now();for(;Date.now()-c<a;)for(let a=0;100>a;a++);},copy:l,adiff:(a,
c,b)=>{b=b||"both";const d=[];"both"==b?a.concat(c).forEach(b=>{a.includes(b)&&c.includes(b)||d.push(b)}):"notinfirst"==b&&c.forEach(b=>{a.includes(b)||d.push(b)});return d},getDebouncer:a=>(()=>{let c={};const b=a||1E3,d={clear:function(){g(c,(a,b)=>{window.clearTimeout(a)});c={}},is:function(a,b){const e=!!c[a];b&&d.add(a);return e},add:function(a,f){d.is(a)&&window.clearTimeout(c[a]);c[a]=window.setTimeout(()=>{delete c[a]},f||b)}};return d})(),createUUID:p,decodeHtml:a=>a.replace(/(?:&#x([a-fA-F0-9]+);|&#([0-9]+);)/g,
(a,b,d)=>b?String.fromCharCode(parseInt(b,16)):String.fromCharCode(parseInt(d,10))),encodeHtml:a=>a.replace(/[\u00A0-\u2666<>]/g,a=>"&#"+a.charCodeAt(0)+";"),safeFileName:a=>a.replace(/[:\?\/\\\*<>]/g,"-"),staticVars:{visible:void 0,invisible:"display: none;",visible_move:void 0,invisible_move:"position:absolute; left: -20000px; top: -200000px; width: 1px; height: 1px;"}})});
