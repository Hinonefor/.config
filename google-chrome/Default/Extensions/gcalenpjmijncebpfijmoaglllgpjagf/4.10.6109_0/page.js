'use strict';Registry.registerRaw("page.js","7c765150",(()=>({backup:function(a,I,w,Z){let p,q,b,D,K,A,S,H,fa,u,ha,L,ma;const d={};let e={safeWindow:d,safeDocument:{},eval,Context:{D:Z},exec_fn:function(a,b,e){p(new d.Function(a),b,e)},exec_csp:function(a,b,d){const c=`__u__${19831206*e.Context.M_r()+1}`;e.Message.send("csp",{id:c,src:a});e.exec_script(c,b,d)},exec_script:function(b,d,e){const c=a[b];delete a[b];p(c,d,e)}};const M=(b,d)=>{a.console.error(`Tampermonkey sandbox preparation ${d?
"("+d+") ":""}failed. This usually is caused by a third-party extension.`,b);if(d)return()=>{}};try{(()=>{const c=a=>{const c=function(c){return p(a,c,p(b.wrappedJSObject,arguments,[1]))};c.wrappedJSObject=a;return c},Y=(a,b)=>{let c;for(;null!==a&&void 0!==a&&!(c=fa(a,b));)a=H(a);return c},ia={i_N:()=>u=(()=>a=>!("prototype"in a))(),i_SS:()=>ha=(()=>(a,b,c)=>{const d=Y(a,b);if(!d||!d.set||u(d.set))return a[b]=c,!0})(),i_SG:()=>L=(()=>(a,b)=>{const c=Y(a,b);if(!c||!c.get||u(c.get))return a[b]})(),
F_a:()=>p=(()=>{"use strict";const b=a.Function.apply;return(a,c,d)=>{let e;L(a,"apply")===b?e=a.apply(c,d):ha(a,w,b)&&(e=a[w](c,d),delete a[w]);return e}})(),E_u:()=>function(b,c){if(e.exec_eval){const d=`__u__${19831206*e.Context.M_r()+1}`;a[d]=c;return e.Context.F_c(e.Context.eval,a,`(function(that){${b}})((()=>{const k="${d}",r=this[k];delete this[k];return r;})())`)}e.exec_csp(`(function(that){${b}})(this)`,c)},F_c:()=>c(a.Function.call),F_b:()=>q=c(a.Function.bind),F_tS:()=>c(a.Function.toString),
A_fE:()=>K=c(a.Array.prototype.forEach),A_sl:()=>b=c(a.Array.prototype.slice),A_sp:()=>c(a.Array.prototype.splice),A_sh:()=>c(a.Array.prototype.shift),A_j:()=>c(a.Array.prototype.join),A_pu:()=>D=c(a.Array.prototype.push),A_po:()=>c(a.Array.prototype.pop),A_m:()=>c(a.Array.prototype.map),A_c:()=>c(a.Array.prototype.concat),A_f:()=>c(a.Array.prototype.filter),A_iO:()=>c(a.Array.prototype.indexOf),O_k:()=>a.Object.keys,O_dP:()=>a.Object.defineProperties,O_dPy:()=>a.Object.defineProperty,O_gOPN:()=>
a.Object.getOwnPropertyNames,O_gOPD:()=>fa=a.Object.getOwnPropertyDescriptor,O_gOPDs:()=>a.Object.getOwnPropertyDescriptors||(a=>{const b={};for(const c in a)b[c]=ia.O_gOPD(a,c);return b}),O_gPO:()=>H=a.Object.getPrototypeOf,O_tS:()=>c(a.Object.prototype.toString),J_p:()=>S=a.JSON.parse,J_s:()=>A=a.JSON.stringify,c_l:()=>a.console.log.bind(a.console),c_i:()=>a.console.info.bind(a.console),c_w:()=>a.console.warn.bind(a.console),c_e:()=>a.console.error.bind(a.console),c_d:()=>a.console.debug.bind(a.console),
M_f:()=>a.Math.floor,M_r:()=>a.Math.random,M_m:()=>a.Math.max,M_i:()=>ma=c(a.MutationEvent.prototype.initMutationEvent),N_tS:()=>c(a.Number.prototype.toString),P_r:()=>a.Promise?a.Promise.resolve.bind(a.Promise):void 0,P_t:()=>a.Promise?c(a.Promise.prototype.then):void 0,P_c:()=>a.Promise?c(a.Promise.prototype.catch):void 0,R_rAAB:()=>a.FileReader?c(a.FileReader.prototype.readAsArrayBuffer):void 0,S_fCC:()=>a.String.fromCharCode,S_m:()=>c(a.String.prototype.match),S_su:()=>c(a.String.prototype.substr),
S_se:()=>c(a.String.prototype.search),S_sp:()=>c(a.String.prototype.split),S_r:()=>c(a.String.prototype.replace),S_cCA:()=>c(a.String.prototype.charCodeAt),S_tLC:()=>c(a.String.prototype.toLowerCase),S_tUC:()=>c(a.String.prototype.toUpperCase),D_pFS:()=>c(a.DOMParser.prototype.parseFromString),X_o:()=>c(a.XMLHttpRequest.prototype.open),X_sRH:()=>c(a.XMLHttpRequest.prototype.setRequestHeader),X_oMT:()=>c(a.XMLHttpRequest.prototype.overrideMimeType),X_gARH:()=>c(a.XMLHttpRequest.prototype.getAllResponseHeaders),
X_gRH:()=>c(a.XMLHttpRequest.prototype.getResponseHeader),X_s:()=>c(a.XMLHttpRequest.prototype.send),X_a:()=>c(a.XMLHttpRequest.prototype.abort),D_n:()=>a.Date.now};Object.keys(ia).forEach(a=>{try{e.Context[a]=ia[a]()}catch(O){e.Context[a]=M(O,`internal.${a}`)}});"String Array Object Number parseInt JSON Math Date Event MutationEvent console location Error Uint8Array Blob FileReader DOMParser XMLHttpRequest Function RegExp frames self top document location Promise".split(" ").forEach(b=>{try{d[b]=
a[b]}catch(O){d[b]=M(O,`window.${b}`)}});["postMessage","addEventListener","removeEventListener","setTimeout","setInterval","clearTimeout","clearInterval","alert","prompt","confirm","encodeURIComponent",(a=>a.a+a.b)({a:"decodeURI",b:"Component"}),"encodeURI","decodeURI","escape","unescape","atob","btoa","close"].forEach(b=>{try{const c=a[b];d[b]=function(){return p(c,a,arguments)}}catch(O){d[b]=M(O,`window.${b}`)}});e.createSafeDocument=a=>{"getElementById createEvent createElement dispatchEvent addEventListener removeEventListener".split(" ").forEach(b=>
{try{const c=a[b];e.safeDocument[b]=function(){return p(c,a,arguments)}}catch(ja){e.safeDocument[b]=M(ja,`document.${b}`)}})};e.createSafeDocument(I)})()}catch(c){return M(c)}try{e.Message=((a,b)=>{const c=function(){return p(b.dispatchEvent,b,arguments)},d=function(){return p(b.addEventListener,b,arguments)},e=function(){return p(b.removeEventListener,b,arguments)},u=(a,c)=>{const d=b.createEvent("MutationEvent");ma(d,a,!1,!1,null,null,null,A(c),d.ADDITION);return d};let q,v,w,N,H=1;const L={};let I=
[];const M=(a,b)=>{let c;a&&(c=L[a])&&(c(b),delete L[a])};let P=a=>{const b=S(a.attrName);"message.response"==b.m?M(b.r,b.a):q&&!1===q(b,b.r?a=>{a=u(w,{m:"message.response",a,r:b.r});c(a)}:()=>{})&&D(I,a)};return{init:function(a){N||(N=a);w=`2C_${N}`;v=`2P_${N}`;d(v,P,!1)},send:function(a,b,d){if(d){{const a=++H;L[H]=d;d=a}}else d=null;a=u(w,{m:a,a:b,r:d});c(a)},onMessage:{setListener:function(a,b){q=a;b||(K(I,a=>{P(a)}),I=null)}},cleanup:function(){P&&e(v,P,!1);P=null}}})(d,e.safeDocument),e.Message.init(w),
e.Message.onMessage.setListener(b=>{if(e)if("load"==b.m)e.Context.pageLoaded=!0;else if("DOMContentLoaded"==b.m)e.Context.domContentLoaded=!0;else if("cleanup"==b.m)e.Message.cleanup(),e=null;else if("next"==b.m)if(b.a.id)e.exec_script(b.a.id,e),e.exec_eval=!1;else{if(void 0===e.exec_eval)try{e.exec_eval=q(e.eval,a)("true")}catch(Y){e.exec_eval=!1}e.exec_eval?e.exec_fn(b.a.src,e):e.exec_csp(b.a.src,e)}else return!1},!0)}catch(c){return M(c)}},next:function(a,I,w,Z,p,q,b,D,K,A,S,H,fa,u,ha){{let p=
"";D&&(p+="let V = true;");A&&(p+="let EV = true;");K&&(p+="let ENV = true;");p+=`let logLevel = ${b};`;b="";if(fa||"complete"==document.readyState)b+="Context.pageLoaded |= true;Context.domContentLoaded |= true;";else if(u||"interactive"==document.readyState)b+="Context.domContentLoaded |= true;";a=`${p+`let contextId = "${a}";`+"const Event = function() {};const Window = function() {};Window.prototype = {};"+b}(${ha})(Context, contextId);\n`}return['const backup = this;(function TM_back() {const Context = backup.Context;const copy = function(src) {"use strict";const props = Context.O_gOPN(src);for (let kk, ii=0; (kk=props[ii]) !== undefined; ii++) {Context[kk] = src[kk];};};copy(backup);with (Context) {(() => {"use strict";copy({Context: Context,',
`V:!!${D},`,`ENV:!!${K},`,`TS:!!${S},`,`D:!!${H},`,`use:${q},`,`windowProps:${Z},`,`scripts:${I},`,`powers:${w},`,"_content: false,",`flags:${p},`,'write_listeners: []});const cleanup = evt => {Message.cleanup();safeWindow.removeEventListener("unload", cleanup, false);};safeWindow.addEventListener("unload", cleanup, false);Context.write_listeners.push(d => {Context.createSafeDocument(d);Message.init();});',a,"})();};})();"].join("")},environment:function(a,I){const w=a.V,Z=a.EV,p=a.D,q=a.Message,
b=a.safeWindow,D=window,K=a.safeDocument,A=a.flags,S=a.i_N,H=a.i_SS,fa=a.i_SG,u=a.F_a,ha=a.F_c,L=a.F_b,ma=a.F_tS,d=a.A_fE,e=a.A_sl,M=a.A_sp,c=a.A_pu,Y=a.A_po,ia=a.A_sh,aa=a.A_j,O=a.A_f,ja=a.A_iO,Ca=a.A_c,v=a.O_k,na=a.O_dP,N=a.O_dPy,Ea=a.O_gOPN,Fa=a.O_gOPD,Ga=a.O_gOPDs,Ha=a.O_tS,P=a.J_p,sa=a.J_s,x=a.c_l,Da=a.c_i,Q=a.c_w,oa=a.c_e,R=a.c_d,Ia=a.M_f,wa=a.M_r,xa=a.M_m,Ja=a.P_r,Ka=a.P_t,La=a.P_c,ba=a.S_fCC,pa=a.S_m,ya=a.S_su,za=a.S_sp,ca=a.S_r,ta=a.S_se,Aa=a.S_cCA,ua=a.S_tLC,Ma=a.S_tUC,Na=a.R_rAAB,Oa=a.D_pFS,
Pa=a.X_o,Qa=a.X_sRH,Ra=a.X_oMT,Sa=a.X_gARH,Ta=a.X_gRH,Ua=a.X_s,Va=a.X_a,Wa=a.N_tS,qa=a.D_n,ra=b.Promise||(()=>{Q("There is no browser Promise support!")});a.domContentLoaded|=0;a.pageLoaded|=0;a.domNodeInserted|=0;a.props={};const ka=(()=>{const E=[],B=a=>{if(document.body)a&&(a(),a=null);else{const b=["load","DOMNodeInserted","DOMContentLoaded"],c=()=>{d(b,a=>{K.removeEventListener(a,c,!1)});B(a)};d(b,a=>{K.addEventListener(a,c,!1)})}},e=d=>{c(E,()=>{b.setTimeout(d,1)});a.domContentLoaded&&m.runListeners()};
var m={runListeners:function(){let a;for(;a=ia(E);)a()},run:function(b){const d=()=>{va.create(b)};"document-start"==b.script.options.run_at?(p&&R(`env: run "${b.script.name}" ASAP -> document-start`),va.create(b)):"document-body"==b.script.options.run_at?(p&&R(`env: schedule "${b.script.name}" for document-body`),B(d)):"context-menu"==b.script.options.run_at?(p&&R(`env: run "${b.script.name}" ASAP -> context-menu`),va.create(b)):"document-end"==b.script.options.run_at?(p&&R(`env: schedule "${b.script.name}" for document-end`),
c(E,d),a.domContentLoaded&&m.runListeners()):(p&&R(`env: schedule "${b.script.name}" for document-idle`),e(d))}};return m})();(w||p)&&R(`env: initialized (content, id:${ya(I,0,10)}..., ${b.location.origin}${b.location.pathname}) `);const da={createUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const b=16*wa()|0;return Wa("x"==a?b:b&3|8,16)})},toType:function(a){return pa(Ha(a,{}),new b.RegExp("\\s([a-z|A-Z]+)"))[1]}},J={UTF8:{encode:function(a){return b.unescape(b.encodeURIComponent(a))},
decode:function(a){return b.decodeURIComponent(b.escape(a))}},Base64:{encode:function(a){let c="";for(let b=0;b<a.length;b++)c+=ba(Aa(a,b)&255);return b.btoa(c)},decode:function(a){return b.atob(a)}},str2arrbuf:function(a){const c=new b.Uint8Array(a.length);for(let b=0;b<a.length;b++)c[b]=Aa(a,b);return c.buffer},arrbuf2str:function(a){let c="";a=new b.Uint8Array(a);for(let b=0;b<a.length;b+=32687)c+=u(ba,null,a.subarray(b,b+32687));return c}},W=(()=>{const a={};let b;const e=b=>{let m=[],e=[];var g=
{postMessage:function(a){q.send("port.message",{response_id:b,value:a})},onMessage:{addListener:function(a){c(m,a)}},onDisconnect:{addListener:function(a){c(e,a)}},disconnect:function(){q.send("port.message",{response_id:b,disconnect:!0});g=e=m=null;delete a[b]}};a[b]={message:function(a){m&&d(m,b=>{b(a)})},disconnect:function(c){e&&d(e,a=>{a(c)});g=e=m=null;delete a[b]}};return g};return{message:function(c){let d;c.connect?b&&b(c.destination,e(c.response_id)):(d=a[c.response_id])?c.disconnect?d.disconnect():
d.message(c.value):p&&Q("ports: unkown id",c.response_id,c)},connect:function(a){const b=da.createUUID();q.send("port.message",{response_id:b,connect:!0,destination:a});return e(b)},onConnect:{addListener:function(a){b=a}}}})(),Ba=(()=>{const a={objs:{},push:function(b,c){0!==c&&1!==c&&(c=0);const d=Ia(19831206*wa()+1);a.objs[d]={fn:b,prio:c};return d},remove:function(b){delete a.objs[b]},get:function(b){const e=[];for(let m=0;1>=m;m++)d(v(a.objs),d=>{a.objs[d].prio!==m||void 0!==b&&d!=b||c(e,a.objs[d].fn)});
return void 0===b?e:e[0]},finalize:function(b){if(void 0===b){b=a.get();for(var c=0;c<b.length;c++)b[c]()}else return a.objs[b]&&(c=a.objs[b].fn(),delete a.objs[b]),c}};return a})(),g=A.statistics?(a,c)=>{b.setTimeout(()=>{q.send("api",{name:a,type:c},null)},1)}:()=>{},ea=(()=>{const a=(a,b)=>{g("GM_openInTab");let d=null,e=!1,m=null,u;const v=(()=>{const a=[];return{run:function(b){b&&c(a,b);if(d)for(;a.length;)Y(a)()}}})();let n=W.connect("openInTab");n.onMessage.addListener(a=>{a.tabId?e?n&&n.postMessage({close:!0}):
(d=a.tabId,v.run()):a.name?u=a.name:a.closed&&(e=!0,m&&(m(),m=void 0))});n.onDisconnect.addListener(()=>{n=null});n.postMessage({method:"openTab",url:a,options:b});a={};na(a,{close:{value:function(){g("GM_openInTab.close");e?p&&R("env: attempt to close already closed tab!"):n&&n.postMessage({close:!0})}},closed:{get:function(){g("GM_openInTab.closed");return e}},onclose:{get:function(){return m},set:function(a){g("GM_openInTab.onclose=");m=a}},name:{get:function(){return u},set:function(a){v.run(()=>
{g("GM_openInTab.name=");n&&n.postMessage({name:a})})}}});return a},e=function(a,c){g("GM_download");const d="Object"===da.toType(a)?a:{url:a,name:c},e=(a,c)=>{c=c||{};a&&b.setTimeout(()=>{u(a,c,[c])},1)};let m=W.connect("download");m.onMessage.addListener(a=>{try{a.load?d.onload&&e(d.onload,a.data):a.progress?d.onprogress&&e(d.onprogress,a.data):a.timeout?d.ontimeout&&e(d.ontimeout,a.data):d.onerror&&e(d.onerror,a.data)}catch(Xa){x("env: Error: TM_download - ",Xa,d)}});m.onDisconnect.addListener(()=>
{m=null});m.postMessage({details:d});return{abort:function(){if(m)return m.postMessage({cancel:!0}),m.disconnect(),m=null,!0}}},D={};return{log:function(){g("GM_log");u(x,this,arguments)},addStyle:(a,b)=>{g("GM_addStyle");const c=da.createUUID();q.send("addStyle",{css:a,id:c},b?()=>{b()}:null);return K.getElementById(c)},closeTab:a=>{g("window.close");q.send("closeTab",null,a?()=>{a()}:null)},focusTab:a=>{g("window.focus");q.send("focusTab",null,a?()=>{a()}:null)},setClipboard:(a,b,c)=>{g("GM_setClipboard");
q.send("setClipboard",{content:a,info:b,id:I},c?()=>{c()}:null)},syntaxCheck:(a,b)=>{q.send("syntaxCheck",{code:a},a=>{b(a)})},of:function(m){const n=m.script,E=(()=>{let a=[];const C=m.storage;let F=0;const f=(a,c)=>{if("string"===typeof a){const h=a[0];a=ya(a,1);switch(h){case "b":return"true"===a;case "n":return b.Number(a);case "x":return J.UTF8.decode(J.Base64.decode(a));case "o":try{return P(a)}catch(z){x(`values: parseValueFromStorage: ${z}`)}return c;default:return a}}else return c},r=(b,
c,h,F)=>{c!=h&&d(a,a=>{if(a&&a.key==b&&a.cb)try{a.cb(b,f(c),f(h),F)}catch(T){p&&Q(`values: change listener of "${b}" failed with: ${T.message}`)}})},e=a=>{k.postMessage({method:"saveStorageKey",uuid:n.uuid,key:a,value:C.data[a],id:I,ts:C.ts})};var k=W.connect("values");k.onMessage.addListener(a=>{a.storage&&d(v(a.storage.data),b=>{const c=C.data[b];C.data[b]=a.storage.data[b];const h=C.data[b];w&&x(`values: message - config key ${b}: ${c} -> ${h}`);r(b,c,h,!0)});a.removed&&(C[a.removed]=void 0)});
k.onDisconnect.addListener(()=>{p&&x("values: port disconnected")});k.postMessage({method:"addStorageListener",uuid:n.uuid,id:I});return{set:function(a,b){g("GM_setValue");const c=C.data[a];C.ts=qa();var h=C.data;{let a=(typeof b)[0];switch(a){case "o":try{b=a+sa(b)}catch(X){x(X),b=void 0}break;case "s":const c=ba(8232),l=ba(8233);if(-1!==ta(b,c)||-1!==ta(b,l))a="x",b=J.Base64.encode(J.UTF8.encode(b));b=a+b;break;default:b=a+b}}h[a]=b;e(a);r(a,c,C.data[a],!1)},get:function(a,b){g("GM_getValue");return f(C.data[a],
b)},remove:function(a){g("GM_deleteValue");const b=C.data[a];C.ts=qa();delete C.data[a];e(a);r(a,b,C.data[a],!1)},list:function(){g("GM_listValues");return v(C.data)},registerChangeListener:function(b,h){g("GM_addValueChangeListener");const f=++F;c(a,{id:f,key:b,cb:h});return f},unregisterChangeListener:function(b){g("GM_removeValueChangeListener");a=O(a,a=>a.id!==b?!0:!1)}}})(),B=(()=>({getText:function(a){g("GM_getResourceText");for(let b=0;b<n.resources.length;b++){const c=n.resources[b];if(c.name==
a&&!c.failed){try{if(null!==c.content)return J.UTF8.decode(c.content)}catch(f){}return""}}return null},getURL:function(a){g("GM_getResourceURL");for(let b=0;b<n.resources.length;b++){const c=n.resources[b];if(c.name==a&&!c.failed){if(null===c.content)return"";try{return`data:${c.meta||"application"};base64,${J.Base64.encode(c.content)}`}catch(f){}return c.url}}return null}}))(),H=(()=>({set:function(a,b){g("GM_setTab");q.send("tabs",{action:"set",uuid:n.uuid,tab:a},b?()=>{b()}:null)},get:function(a){g("GM_getTab");
q.send("tabs",{action:"get",uuid:n.uuid},a?b=>{a(b||{})}:null)},getAll:function(a){g("GM_getTabs");q.send("tabs",{action:"list",uuid:n.uuid},a?b=>{a(b||{})}:null)}}))(),M=a=>{g("GM_xmlhttpRequest");let h=!1;const F=a.context;delete a.context;const f=(()=>{const a={};d(v(b.XMLHttpRequest.__proto__),b=>{a[b]=!0});const c=()=>{};d(v(b.XMLHttpRequest),l=>{a[l]||(c[l]=b.XMLHttpRequest[l])});return c})();let r=()=>{h=!0};const e=(a,c,l)=>{c=c||{};!a||h&&!l||b.setTimeout(()=>{c.__proto__=f;u(a,c,[c])},1)};
"object"===typeof a.url&&a.url.href&&(a.url=a.url.href);const k=(a,c)=>{const l=new b.FileReader;l.onload=()=>{c(J.arrbuf2str(l.result))};Na(l,a)},t=(a,f)=>{let l,d,h,y=da.toType(a);if("Blob"===y||"File"===y)k(a,b=>{f({type:y,value:b,meta:a.type,name:a.name,lastModified:a.lastModified})});else if("FormData"===y)if(d=a.keys&&a.getAll?a.keys():null){let b;const y={};for(l=[];!(b=d.next()).done;)c(l,b.value);h=()=>{if(l.length){const b=Y(l);let c=a.getAll(b);-1===ta(b,/\[\]$/)&&(c=c[0]);t(c,a=>{y[b]=
a;h()})}else f({type:"FormData",value:y})};h()}else f({error:y});else if(!(y=da.toType(a))||"Array"!==y&&"Object"!==y)f({value:a});else{let c,r,F=0;d=0;"Object"===y?(l=v(a),r=a=>a<l.length?l[a]:null,c={}):(r=b=>b<a.length?b:null,c=[]);h=()=>{const l=r(F);null===l?f({type:y,value:c}):t(a[l],a=>{a.error?f(a):(c[l]=a,F++,1024>d++?h():(d=0,b.setTimeout(h,1)))})};h()}},la=a=>{const b={};a&&a.split("\n").forEach(a=>{(a=a.match(/^([^:]+): ?(.*)/))&&(b[a[1].toLowerCase()]=a[2]||"")});return b},U=(a,c,l,f)=>
{if("text"==l)a="document"==c?a.document:a;else if("arraybuffer"==c)a=J.str2arrbuf(a);else if("blob"==c)a=new b.Blob([J.str2arrbuf(a)],{type:f});else if("json"==c)a=P(a);else if("document"==c){if(a.error){Q("GM_xmlhttpRequest:",a.error);return}c=new b.DOMParser;return Oa(c,a.document,a.contentType)}return a};let z=!0;(b=>{if(a.url){const c=a.url.substr(0,5);if(-1!=["data:","blob:"].indexOf(c))return z=!1,b()}if(!a.data)return b();t(a.data,c=>{c.error?(z=!1,Q("GM_xmlhttpRequest:",`unable to handle data type ${c.error}. Going to use default xhr as fallback.`)):
(a.binary&&(c.type="Blob"),a.data=c,a.data_type="typified");b()})})(()=>{"use strict";if(!h)if(z){let f=W.connect("xhr"),t=[];a.headers&&d(v(a.headers),b=>{"cookie"===ua(b)&&(a.cookie=a.headers[b],delete a.headers[b])});f.postMessage({method:"xhr",details:a,callbacks:{onloadstart:!!a.onloadstart,onload:!!a.onload,onreadystatechange:!!a.onreadystatechange,onerror:!0,ontimeout:!!a.ontimeout,onprogress:!!a.onprogress,onpartial:!0},id:I,url:b.location.href,uuid:n.uuid});f.onMessage.addListener(b=>{b.data&&
F&&(b.data.context=F);if(b.data&&b.onload){t.length&&(b.data.response_data=aa(t,""),t=null);if(b.data.response_data){const c=b.data.response_data,l=b.data;d(["response_data"],a=>{delete b.data[a]});const f={response:function(b,c){g(`${"GM_xmlhttpRequest"}.response[${a.responseType||"unknown"}]`);const l=a.responseType?ua(a.responseType):"";let f="binary/octet-stream";c&&(f=la(c.responseHeaders)["content-type"]||f);return U(b,l,null,f)},responseText:function(b){g("GM_xmlhttpRequest.responseText");
const c=a.responseType?ua(a.responseType):"";return U(b,c,"text")},responseXML:function(a){g("GM_xmlhttpRequest.responseXML");return U({document:a,contentType:"text/xml"},"document")}};d(v(f),a=>{N(b.data,a,{get:function(){try{return f[a](c,l)}catch(Ya){Q("GM_xmlhttpRequest:",Ya)}}})})}e(a.onreadystatechange,b.data);e(a.onload,b.data)}else if(b.onreadystatechange)4!=b.data.readyState&&e(a.onreadystatechange,b.data);else if(b.onpartial)c(t,b.data.partial);else if(b.onerror)b.exception&&oa(b.exception),
e(a.onerror,b.data);else{const c=O(["onloadstart","onprogress","ontimeout"],a=>!!b[a])[0]||"onerror";e(a[c],b.data)}});w&&f.onDisconnect.addListener(()=>{x("env: GM_xmlhttpRequest.onDisconnect! :)")});r=()=>{g("GM_xmlhttpRequest.abort");f&&(f.disconnect(),f=null,h=!0,e(a.onabort,null,!0))}}else{const c=new b.XMLHttpRequest;void 0===a.async&&(a.async=!0);Pa(c,a.method,a.url,a.async,a.user,a.password);a.headers&&d(v(a.headers),b=>{Qa(c,b,a.headers[b])});a.overrideMimeType&&Ra(c,a.overrideMimeType);
a.responseType&&(c.responseType=a.responseType);d("abort error load loadstart progress readystatechange timeout".split(" "),b=>{const l="abort"==b;c[`on${b}`]=()=>{var f="";let d=a.url;if(2<c.readyState&&(f=Sa(c),4==c.readyState)){f&&(f=ca(f,/TM-finalURL[0-9a-zA-Z]*: .*[\r\n]{1,2}/,""));let a;try{a=Ta(c,`TM-finalURL${A.short_id}`)}catch(ab){}a&&(d=a)}f={readyState:c.readyState,status:"",statusText:"",responseHeaders:f,finalUrl:d,context:F};4==c.readyState&&(c.responseType?f.response=c.response:(f.responseText=
c.responseText,f.responseXML=c.responseXML),f.status=c.status,f.statusText=c.statusText);e(a[`on${b}`],f,l)}});Ua(c,a.data);r=()=>{g("GM_xmlhttpRequest.abort");Va(c);h=!0}}});return{abort:function(){r()}}},K=a=>{const b={};d(v(a),c=>{b[c]=a[c]});b.id=I;g("GM_notification");b.text||b.highlight?q.send("notification",b,a=>{if(b.onclick&&a.clicked)b.onclick();if(b.ondone)b.ondone(!0===a.clicked)}):Q("GM_notification: neither a message text nor highlight options were given!")};let L;const R=()=>{if(L)return L;
const a=m.script,b={id:1,enabled:1,hash:1,fileURL:1},c={script:{}};d(v(a),f=>{b[f]||(c.script[f]=a[f])});const f=a.options.updateURL||a.options.fileURL;c.script["run-at"]=a.options.override.run_at||a.options.run_at;c.script.excludes=a.options.override.orig_excludes;c.script.includes=a.options.override.orig_includes;c.script.matches=a.options.override.orig_matches;c.script.grant=a.grant;c.script.unwrap=!1;c.scriptMetaStr=m.header;c.scriptSource=m.code;c.scriptWillUpdate=!!f;c.scriptUpdateURL=f;c.version=
A.version;c.scriptHandler="Tampermonkey";c.isIncognito=A.inIncognitoContext;c.isFirstPartyIsolation=A.isFirstPartyIsolation;c.downloadMode=A.downloadMode;return L=c};let V;const S=(a,b)=>{g("GM_webRequest");const c=()=>{V==f&&(V=null);f=null};V&&V.disconnect();var f=V=W.connect("webRequest");b&&f.onMessage.addListener(a=>{b(a.type,a.message||"ok",a.details)});f.onDisconnect.addListener(c);f.postMessage({rules:a,uuid:n.uuid});return{abort:function(){g("GM_webRequest.abort");f&&f.disconnect();c()}}},
U=(()=>{let a=0;const c={},d={register:function(f,e,h){g("GM_registerMenuCommand");const r=++a,t=W.connect("registerMenuCommand");t.onMessage.addListener(a=>{"run"===a&&b.setTimeout(e,1)});t.onDisconnect.addListener(()=>{d.unregister(r)});t.postMessage({method:"register",name:f,uuid:n.uuid,accessKey:h});w&&x(`env: ${"registerMenuCommand"} ${ma(e)}`);c[r]=t.disconnect;return r},unregister:function(a){g("GM_unregisterMenuCommand");w&&x(`env: ${"unregisterMenuCommand"} ${a}`);let b;if(b=c[a])b(),delete c[a]}};
return d})(),la=(()=>{"use strict";const a=(a,c)=>({action:a,uuid:n.uuid,url:b.location.href,details:c});return{set:function(b,c){g("GM_cookie.set");q.send("cookie",a("set",b),c?a=>{c(a.error)}:null)},delete:function(b,c){g("GM_cookie.delete");q.send("cookie",a("delete",b),c?a=>{c(a.error)}:null)},list:function(b,c){g("GM_cookie.list");q.send("cookie",a("list",b),c?a=>{c(a.cookies,a.error)}:null)}}})();D[m.script.uuid]=D[m.script.uuid]||{getInfo:R,registerMenuCommand:U.register,unregisterMenuCommand:U.unregister,
download:e,webRequest:S,openInTab:a,setValue:E.set,getValue:E.get,deleteValue:E.remove,listValues:E.list,addValueChangeListener:E.registerChangeListener,removeValueChangeListener:E.unregisterChangeListener,getResourceText:B.getText,getResourceURL:B.getURL,notification:K,xmlhttpRequest:M,cookie:la,setTab:H.set,getTab:H.get,getTabs:H.getAll};return D[m.script.uuid]}}})();var va=(()=>{const E=(a,b,c,e)=>{const h=Ga(b);d(v(h),c=>{const f=h[c];if(!f||!f.get||S(f.get)||e)"function"===typeof b[c]?a[c]=L(b[c],
b):(()=>{N(a,c,{get:function(){"use strict";return b[c]}})})()});d(v(c),b=>{a[b]=c[b]});return a},B=(a,c,d,e,g)=>{const f=c[d],r=typeof f;e&&"string"===r?c[d]=new b.Function(f):g&&"function"===r&&(c[d]=function(){return u(f,g,arguments)});return u(a,D,c)},V=(a,c,e,g)=>{const h={attrChange:0,attrName:null,bubbles:!0,cancelBubble:!1,cancelable:!1,clipboardData:void 0,currentTarget:null,defaultPrevented:!1,eventPhase:0,newValue:null,prevValue:null,relatedNode:null,returnValue:!0,srcElement:null,target:null,
timeStamp:qa()};e="string"===typeof e?new b.Function(e):e;const f=new Event;d(v(h),a=>{f[a]=h[a]});d(v(c),a=>{f[a]=c[a]});f.type=a;u(e,g,[f])},m=(a,b,c,e)=>{void 0===e&&(e=(a,b)=>b);d(Ca(["GM_info","GM.info"],b),b=>{let f;const d=c[b];d&&(f=e(b,d))&&(a[b]=f)})},n=(a,b)=>{void 0===b&&(b=100);return b&&a&&(a==document||n(a.parentNode,b-1))},I=(()=>{let b=null;return c=>{b||(b={instance:c,is_open:!1},d(["write","writeln","open","close"],e=>{b[e]=c[e];c[e]=function(){let h=!1;-1!=ja(["write","writeln",
"open"],e)?b.is_open?h=!0:b.is_open=!0:"close"===e&&(b.is_open=!1);!h&&b.is_open&&q.send("document.write");const g=document.documentElement,f=u(b[e],c,arguments);if(!h&&b.is_open)return g!==document.documentElement&&(b.instance!==c&&(b=null,I(document)),d(a.write_listeners,a=>{a(document)})),f}}))}})(),K={},J=[],O=[],P=(d,e,h)=>{let g;O.forEach(a=>{a.object===d&&(g=!0)});if(!g){const g={object:d,addEventListener:d.addEventListener,removeEventListener:d.removeEventListener};O.push(g);const f=[],r=
a=>{for(let b=0;b<f.length;b++)if(f[b].fn===a)return b};d.removeEventListener=function(a,b,c){c=!!c;let d,e,t;if(void 0!==(d=r(b))&&(e=f[d].listeners)){if(t=e[`${a}-${c}`])u(g.removeEventListener,this,[a,t,c]),delete e[`${a}-${c}`];Ea(e).length||M(f,d,1)}else return u(g.removeEventListener,this,arguments)};const m=(a,d,f,e)=>{if(d){let c=J.length;d=b.parseInt(aa(["DOMContentLoaded"==f?1:2,e?1:2,e?d:3-d,qa()],"0"));for(f=0;f<J.length;f++)if(e=J[f],!e||!e.prio||e.prio>d){c=f;break}M(J,c,0,{prio:d,fn:a})}else c(J,
{fn:a})};d.addEventListener=function(d,t,G){(w||Z)&&x(`env: addEventListener ${d}`);const k=this;if(t&&(1==e&&"load"==d||"DOMContentLoaded"==d||"DOMNodeInserted"==d)){G=!!G;var z;try{try{throw new b.Error;}catch(T){const a=/tms_[0-9a-f_]+/;var y=T.stack||T.stacktrace;if(y){const b=za(y,"\n");for(let c,d=0;d<b.length&&(!(c=pa(b[d],a))||!(z=K[c[0]]));d++);}else{const c=(d,f)=>{void 0===f&&(f=10);if(0===f)return null;if(d.caller){let l,e;try{return e=ma(d.caller),pa(e,new b.RegExp("^function[^(]+"))&&
(void 0).length&&(l=pa((void 0)[0],a))?l[0]:c(d.caller,f-1)}catch(Za){p&&Q("env: unable to detect caller context",Za)}}return null};let d;if(d=c(arguments.callee))z=K[d]}}}catch(T){p&&oa(`env: Error: event ${d}`,T)}if(z&&"document-idle"!==z.run_at&&(z=null,"load"==d?a.pageLoaded&&(z=()=>{var a=t,c=k.document||k;(w||Z)&&x("env: postLoadEvent!");c=c||document;V("load",{attrName:"null",newValue:"null",prevValue:"null",eventPhase:b.Event.AT_TARGET,attrChange:b.MutationEvent.ADDITION,target:c,relatedNode:c,
srcElement:c},a,k)},m(z,e,d,G)):"DOMContentLoaded"==d&&a.domContentLoaded&&(z=()=>{var a=t,c=k.document||k;(w||Z)&&x("env: postDomEventListener!");c=c||document;V("DOMContentLoaded",{attrName:"null",newValue:"null",prevValue:"null",eventPhase:b.Event.AT_TARGET,attrChange:b.MutationEvent.ADDITION,target:c,relatedNode:c,srcElement:c},a,k)},m(z,e,d,G)),z)){b.setTimeout(()=>{if(J.length){const a=ia(J);a&&a.fn&&a.fn()}},1);return}y=function(a){return B(ha,[t,this,h(a)],0,!0,k)};void 0===(z=r(t))&&(z=f.length,
c(f,{fn:t,listeners:{}}));f[z].listeners[`${d}-${G}`]=y;return u(g.addEventListener,k,[d,y,G])}return u(g.addEventListener,k,arguments)};try{const a=()=>"[native code]";[d.addEventListener,d.removeEventListener].forEach(b=>{H(b,"toString",a)})}catch(k){}}},W=a=>{a.__evaluate||(na(a,{__evaluate:{value:a.evaluate,enumerable:!1,configurable:!1}}),a.evaluate=function(a,b,c,d,f){w&&x(`env: document.evaluate ${a}`);b||(b=this);let e;if("undefined"!=typeof XPathResult){let g=a,k=null;try{e=this.__evaluate(g,
b,c,d,f)}catch(G){k=G}let t=!1;try{t|=!!e.snapshotLength}catch(G){}try{t|=!!e.singleNodeValue}catch(G){}if(t||"."==a[0]||n(b))w&&x(`env: queried document for ${g}`);else{w&&x(`env: query added elem for ${g}`);g=("/"==a[0]?".":"./")+a;try{e=this.__evaluate(g,b,c,d,f)}catch(G){}}w&&x("env: query returned ",e,k);if(!t&&k)throw k;}else w&&x("env: XPathResult == undefined, but selectNodes via ",a),e=b.selectNodes(a);return e},c(Ba,()=>{a.evaluate=a.__evaluate}))},Y=(c,e)=>{const g=["eval"],m={};d(v(c),
a=>{c[a].context_prop&&(m[(a.split(".")||[])[1]]=!0)});const p=(a,c,e,k)=>{const f=b=>b===c?a:b,h=(a,b,c,d)=>{c||(c=a);const e=a[b];a=function(){"use strict";let a=u(e,c,arguments);d&&(a=d(a));return a};a.__proto__=e;a.prototype=e.prototype;return a},r=c=>{let d;const e=c.substr(2);let f;N(a,c,{get:function(){return d},set:function(c){"use strict";(d=c)&&!f?(f=function(){if("function"===typeof d)return u(d,a,arguments)},b.addEventListener(e,f,!0)):!d&&f&&(b.removeEventListener(e,f,!0),f=null)}})},z=(b,
d,e,g)=>{let l,t,k;const h={enumerable:!0,configurable:!0};(k="function"===typeof d)?h.get=d:h.get=function(){"use strict";g&&g.get_cb&&u(g.get_cb,this,[arguments,z]);return t?l:f(c[b])};if("function"===typeof e)h.set=e;else if(!k||e)h.set=c=>{g&&g.overwrite?N(a,b,{value:c,enumerable:!0,configurable:!0}):(l=c,t=!0)};N(a,b,h)};d(v(k),a=>{e[a]=e[a]||!1!==k[a]});const y=A.sandbox_allow_getters,p=A.detect_constructors_by_keys;d(v(e),b=>{let d,l,t,G,n,T,q,w,E,C,la,x,F,U;try{let X;(X=Fa(c,b))&&X.get&&(n=!S(X.get));
try{if(!(l=k[b])||l.needs_grant&&!0!==m[b])if((d=e[b])&&d.event)F=!0;else if(X&&X.get)if(n)if(y)q=!0;else return;else q=()=>{"use strict";return f(u(X.get,D))};else"function"===(G=typeof(t=c[b]))?d.proto?T=!0:(X.enumerable||!(p&&v(t).length||!S(t)))&&-1==ja(g,b)&&"bind"in t?la=!0:C=!0:"number"===G||"string"===G?q=!0:C=!0;else if(l.wrap)T=!0,x=l.that;else if(l.direct)C=!0;else if(l.enhance)U=l.enhance;else if(l.get||l.set)q=l.get,w=l.set,E=l.opts}catch(bb){q=w=!0}if(U)a[b]=U;else if(!n||y)F?r(b):q||w?
z(b,q,w,E):T?a[b]=h(c,b,x,f):C?a[b]=f(c[b]):la&&(a[b]=L(c[b],c))}catch($a){Q(`env: error while creating a new sandbox[${b}]: ${$a.message}`)}});return a};return(()=>{const c=new Window,g={setTimeout:{enhance:function(){"use strict";return B(b.setTimeout,arguments,0,!0,c)}},setInterval:{enhance:function(){"use strict";return B(b.setInterval,arguments,0,!0,c)}},close:{needs_grant:!0,get:function(){"use strict";return b.self==b.top?a=>ea.closeTab(a):b.close}},focus:{needs_grant:!0,get:function(){return a=>{"use strict";
return ea.focusTab(a)}}},location:{get:!0,set:function(a){"use strict";b.location.href=a}},name:{get:function(){"use strict";return fa(D,"name")},set:function(a){"use strict";H(D,"name",a)}},event:{get:!0,set:!0,opts:{overwrite:!0}},document:{get:function(){"use strict";const a=b.document;e(a);return a}},clearInterval:{get:function(){"use strict";return b.clearInterval}},clearTimeout:{get:function(){"use strict";return b.clearTimeout}},addEventListener:{enhance:function(){"use strict";return B(b.addEventListener,arguments,
1,!0)}},removeEventListener:{enhance:function(){"use strict";return B(b.removeEventListener,arguments,1,!0)}}};(()=>{let a=xa(b.frames.length,7);g.length={get:!0,opts:{get_cb:function(c,d){"use strict";c=b.frames.length;for(let e=a;e<c;e++)d(b.String(e),{get:!0});a=xa(c,a)}}};for(let c=0;c<a;c++)g[b.String(c)]={get:!0}})();d(v(b),a=>{b[a]!=D&&(g[a]=g[a]||{enhance:b[a]})});const h=p(c,D,a.windowProps,g),k={context:h,filter:function(a){"use strict";return a==D?h:a},filterEvent:function(a){const b={};for(const c in a)if("function"===
typeof a[c])b[c]=(()=>{const b=c;return function(){return u(a[b],a,arguments)}})();else{const d=k.filter(a[c]);b[c]=d}return b}};return k})()},ba=()=>E({},b.console,{debug:R,log:x,info:Da,warn:Q,error:oa},!1),ka=(e,g,h,m,q,f)=>{let r=null;const n=()=>"[Tampermonkey property]";try{const k=m.sandboxes[e.uuid],t=["context","fapply"],p=[void 0,void 0],w=m.elements[e.uuid];d(v(w),a=>{const b=w[a];b.overwrite?(c(t,a),c(p,b.value)):b.context_prop||(c(t,a),c(p,`context.${a}`),b.getter?N(k,a,{get:b.getter}):
k[a]=b.value);b.protect&&k[a]&&H(k[a],"toString",n)});let z;r=aa(["((context, fapply, console) => {","with (context) {","(module => {",'"use strict";',"try {",A.measure_scripts?`console.time("${z=`SCRIPT RUN TIME[${e.name.replace(/\W+/g," ")}]`}");\n`:"","fapply(module, context, [",aa(p,","),"]);",A.measure_scripts?`console.timeEnd("${z}");\n`:"","} catch (e) {","if (e.message && e.stack) {","console.error(\"ERROR: Execution of script '",ca(e.name,new b.RegExp("[\"']","g"),"\\$1"),"' failed! \" + e.message);",
'console.log(e.stack.replace(/(\\\\(eval at )?<anonymous>[: ]?)|([\\s.]*at Object.tms_[\\s\\S.]*)/g, ""));',"} else {","console.error(e);","}","}","})","(function ",q,"(",aa(t,","),") {",A.enforce_strict_mode?'"use strict";\n':"",h,g,"\n","})","}","})(that.context, that.fapply, that.console);\n",f?`//# sourceURL=${f}\n`:""],"");const y={context:k,fapply:u,console:ba()};a.E_u(r,y)}catch(k){ea.syntaxCheck(aa([h,g],""),a=>{let c="";if(a.errors){const b=za(h,"\n").length-1;let e="";a.errors&&d(v(a.errors),
c=>{if((c=a.errors[c])&&0<=c.line&&c.reason){const a=c.line;e+=aa([a>b?"script:":"require:"," (",c.code,") ",ca(c.reason,/.$/,"")," on line: ",a>b?a-b:a," at character: ",c.character,"\n"],"")}});c=`JSHINT output:\n${e}`}else c=g;const f=k.stack?ca(k.stack,/(\\(eval at )?<anonymous>[: ]?)|([\s.]*at Object.tms_[\s\S.]*)/g,""):"";p||a.errors?oa(`Syntax error @ "${e.name}"!\n##########################\n${c}##########################\n\n${f}`):oa(`Syntax error @ "${e.name}"!\n\n`,f);b.setTimeout(()=>
{throw k;},1)})}};return{create:function(q){const n=q.script,h={},E=-1!==ja(n.grant,"none"),F=`${n.namespace}_${E}`;void 0===a.props[F]&&(a.props[F]={sandboxes:{},elements:{}},c(Ba,()=>{a.props[F]=null}));h.CDATA={value:function(a){g("CDATA");this.src=a;this.toXMLString=this.toString=function(){return this.src}}};h.uneval={value:function(a){g("window.uneval");try{return`\\$1 = ${sa(a)};`}catch(y){x(y)}}};h.define={value:void 0};h.module={value:void 0};h.exports={value:void 0};const f={},r={},B={},
k=ea.of(q);g(n.options.run_at||"<default>","run_at");if(E)g("none","grant");else{g("sandbox","grant");h.window={value:"context",overwrite:!0};const a={window:D};d(v(a),b=>{const c=`unsafe${ca(b,/^(.)/g,a=>Ma(a))}`;h[c]={value:a[b]};-1!=ja(n.grant,c)&&g(c,"grant")});h.console={value:ba()};h.cloneInto={value:function(a){g("compat.cloneInto");return a}};h.exportFunction={value:function(a,b,c){g("compat.exportFunction");c&&void 0!==c.defineAs&&(b[c.defineAs]=a);return a}};h.createObjectIn={value:function(a,
b){g("compat.createObjectIn");const c={};b&&void 0!==b.defineAs&&(a[b.defineAs]=c);return c}};f.addStyle=ea.addStyle;f.deleteValue=k.deleteValue;f.listValues=k.listValues;f.getValue=k.getValue;f.setValue=k.setValue;f.log=ea.log;f.registerMenuCommand=k.registerMenuCommand;f.unregisterMenuCommand=k.unregisterMenuCommand;f.openInTab=k.openInTab;f.addValueChangeListener=k.addValueChangeListener;f.removeValueChangeListener=k.removeValueChangeListener;B.xmlhttpRequest=k.xmlhttpRequest;B.download=k.download;
f.webRequest=k.webRequest;B.setClipboard=ea.setClipboard;f.getTab=k.getTab;f.setTab=k.setTab;f.saveTab=k.setTab;f.getTabs=k.getTabs;f.getResourceText=k.getResourceText;B.getResourceURL=k.getResourceURL;const b=a=>function(){const b=Ja(u(a,this,arguments));H(b,"then",a=>Ka(b,a));H(b,"catch",a=>La(b,a));return b},c=(a,b)=>{let c;const e=new ra((e,f)=>{const g={},l=b.onload,h=b.ontimeout,k=b.onerror;d(v(b),a=>{g[a]=b[a]});g.onerror=function(a){f(a);k&&u(k,this,arguments)};g.ontimeout=function(a){f(a);
h&&u(h,this,arguments)};g.onload=function(a){e(a);l&&u(l,this,arguments)};const m=a(g).abort;!0===c?m():c=m});H(e,"abort",()=>{c?c():c=!0});return e};d(v(B),a=>{r[`GM_${a}`]={value:B[a]}});r["GM.getResourceUrl"]={getter:function(){return b(B.getResourceURL)}};r["GM.xmlHttpRequest"]={value:function(a){return c(B.xmlhttpRequest,a)}};r["GM.download"]={value:function(a){return c(B.download,a)}};r["GM.setClipboard"]={value:function(a,b){return new ra(c=>{B.setClipboard(a,b,c)})}};r.GM_notification={value:function(a,
b,c,e){let f=null;const g="timeout text image title highlight silent".split(" ");let h=null;const l={};"object"===typeof a&&(h=a);h?(d(g,a=>{l[a]=h[a]}),f=h.ondone,e=h.onclick,"function"===typeof b&&(f=b)):(l.image=c,l.title=b,l.text=a);l.text&&(l.image=l.image||n.icon64||n.icon,l.title=l.title||n.name);l.onclick=e;l.ondone=f;k.notification(l)}};r["GM.notification"]={value:function(a){return"object"!==typeof a?Q("GM.notification(details): received no details"):new ra((b,c)=>{d(v(a),a=>{});k.notification(a)})}};
r.GM_cookie={value:(()=>{const a=k.cookie,b=(b,c,d)=>(a[b]||(()=>{}))(c,d);d(v(a),c=>{b[c]=a[c]});return b})()};r["GM.cookie"]={value:(()=>{const a=(a,b)=>new ra((c,d)=>{"list"==a?r.GM_cookie.value(a,b,(a,b)=>{b?d(b):c(a)}):r.GM_cookie.value(a,b,a=>{a?d(a):c()})});d(v(k.cookie),b=>{a[b]=c=>a(b,c)});return a})()};d(v(f),a=>{const c=f[a];r[`GM_${a}`]={value:c};r[`GM.${a}`]={getter:function(){return b(c)}}});r["window.close"]={context_prop:!0};r["window.focus"]={context_prop:!0}}r.GM_info=r["GM.info"]=
{getter:k.getInfo};const t={};h.GM={value:t,protect:!0};m(h,n.grant,r,(a,b)=>{if("GM."===a.substr(0,3))a=a.split(".")[1],N(t,a,{get:b.getter?b.getter:()=>b.value});else return b.protect=!0,b});n.options.compat_prototypes&&((w||p)&&x("env: option: add toSource"),b.Object.prototype.toSource||na(b.Object.prototype,{toSource:{value:function(){g("Object.toSource");var a=da.toType(this);if("String"===a)return`(String("${ca(this,new b.RegExp('"',"g"),'\\"')}"))`;if("Number"===a)return`(Number("${b.Number(this)}"))`;
if("Array"===a){a="(new Array(";for(let b=0;b<this.length;b++){const c=da.toType(this[b]);a="Null"===c?a+"null":"Undefined"===c?a+"undefined":a+this[b].toSource();b+1<this.length&&(a+=",")}return a+="))"}return`JSON.parse(unescape("${b.escape(sa(this))}"))`},enumerable:!1,writable:!0,configurable:!0}}),(w||p)&&x("env: option: add some array generics"),d("indexOf lastIndexOf filter forEach every map some slice".split(" "),a=>{if("function"!==typeof b.Array[a]){const c={};c[a]={value:function(c){g(`Array.${a}`);
return u(b.Array.prototype[a],c,u(e.wrappedJSObject,arguments,[1]))},enumerable:!1,writable:!0,configurable:!0};na(b.Array,c)}}));let G="";if(E)var A=new Window;else{const a=Y(h,b=>{W(b);I(b);P(b,2,a.filterEvent)});A={run_at:n.options.run_at,uuid:n.uuid};G=`tms_${ca(n.uuid,/-/g,"_")}`;K[G]=A;P(a.context,1,a.filterEvent);A=a.context}a.props[F].sandboxes[n.uuid]=A;a.props[F].elements[n.uuid]=h;(w||p)&&R(`env: execute script ${n.name} @ the ${E?"un":""}safe context now!`);ka(n,q.code,q.requires,a.props[F],
G,q.source_url)}}})();(()=>{if(A.external_connect){var a;if(a=D.external){const b=(a,b)=>{q.send("external.message",a,a=>{b&&b(a)})};try{na(a,{Tampermonkey:{get:function(){return{getVersion:function(a){b({method:"getVersion"},a)},isInstalled:function(a,c,d){"function"===typeof c&&(d=c,c=null);b({method:"isInstalled",script:{name:a,namespace:c}},d)}}},configurable:!0}})}catch(V){}}}})();q.onMessage.setListener(b=>{const c=b.a;"load"==b.m?(a.pageLoaded=!0,ka.runListeners()):"DOMContentLoaded"==b.m?
(a.domContentLoaded=!0,ka.runListeners()):"setForeignAttr"==b.m?D[c.attr]=c.value:"port.message"==b.m?W.message(c):"executeScript"==b.m?ka.run(b.a):"cleanup"==b.m?q.cleanup():p&&x("env: unkown method",b)});p&&x("Tampermonkey started");d(a.scripts,a=>{ka.run(a)})}}))());
