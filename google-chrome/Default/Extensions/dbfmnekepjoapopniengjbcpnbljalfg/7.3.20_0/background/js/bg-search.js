"use strict";var _InfinitySearch_={name:"search",seId:"dd3af9cc97ad7de8984baaf59514bb52",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/mychromesearch.png",types:[{name:"web",url:"https://mychromesearch.com/search?ac=1826515628&q=%s"},{name:"images",url:"https://www.google.com/search?tbm=isch&q=%s"},{name:"news",url:"https://www.google.com/search?tbm=nws&q=%s"},{name:"videos",url:"https://www.google.com/search?tbm=vid&q=%s"},{name:"maps",url:"https://www.google.com/maps/preview?q=%s"}]},_Google_={name:"google",seId:"a22dcc25c75de3f58cb518e32c576865",logo:infinity.static+"/search-logos/google.png",desc:"google_desc",types:[{name:"web",url:"https://www.google.com/search?q=%s&ie=UTF-8"},{name:"images",url:"https://www.google.com/search?isource=infinity&iname=google&tbm=isch&q=%s"},{name:"news",url:"https://www.google.com/search?isource=infinity&iname=google&tbm=nws&q=%s"},{name:"videos",url:"https://www.google.com/search?isource=infinity&iname=google&tbm=vid&q=%s"},{name:"maps",url:"https://www.google.com/maps/preview?isource=infinity&iname=google&q=%s"}]},_Baidu_={name:"baidu",seId:"0c47016a8cd2d631bc618d4f3a741335",logo:infinity.static+"/search-logos/baidu.png",types:[{name:"web",url:"https://www.baidu.com/s?tn=web&isource=infinity&iname=baidu&itype=web&ie=utf-8&wd=%s"},{name:"images",url:"https://image.baidu.com/search/index?isource=infinity&iname=baidu&tn=baiduimage&word=%s"},{name:"news",url:"https://news.baidu.com/ns?isource=infinity&iname=baidu&tn=news&ie=utf-8&word=%s"},{name:"videos",url:"https://video.baidu.com/v?isource=infinity&iname=baidu&ie=utf-8&word=%s"},{name:"maps",url:"http://map.baidu.com/?isource=infinity&iname=baidu&newmap=1&ie=utf-8&s=s%26wd%3D%s"}]},_Yahoo_={name:"yahoo",seId:"c26068f55492ef9e93e05e34a3b31139",logo:infinity.static+"/search-logos/yahoo.png",types:[{name:"web",url:"https://searchexclus.com/?a=gsp_infinitynewtab_00_00_ssg00&q=%s"},{name:"images",url:"https://images.search.yahoo.com/search/images?isource=infinity&iname=yahoo&p=%s"},{name:"news",url:infinity.isZh()?"https://hk.news.yahoo.com/search?isource=infinity&iname=yahoo&p=%s":"https://news.search.yahoo.com/search?isource=infinity&iname=yahoo&p=%s"},{name:"videos",url:"https://video.search.yahoo.com/search/video?isource=infinity&iname=yahoo&p=%s"}]},_Bing_={name:"Bing",seId:"5a6afaa65c95a841f6149c4e1591a637",logo:infinity.static+"/search-logos/bing.png",types:[{name:"web",url:infinity.isZh()?"https://cn.bing.com/search?q=%s":"www.infinitynewtab.com/bing/?q=%s"},{name:"images",url:infinity.isZh()?"https://cn.bing.com/images/search?q=%s":"https://bing.com/images/search?q=%s"},{name:"news",url:(infinity.isZh(),"https://global.bing.com/news/search?q=%s")},{name:"videos",url:(infinity.isZh(),"https://www.bing.com/videos/search?q=%s")},{name:"maps",url:infinity.isZh()?"https://cn.bing.com/ditu/?q=%s":"https://www.bing.com/ditu/?q=%s"}]},_YandexRU_={name:"YandexRU",seId:"ff1ca8c4e6661d52440b7f2e15cb6a13",logo:infinity.static+"/search-logos/russia-yandex.png",types:[{name:"web",url:"https://yandex.ru/search/?clid=2324058&isource=infinity&itype=web&iname=yandex&text=%s"},{name:"images",url:"https://yandex.ru/images/search?clid=2324058&isource=infinity&itype=images&iname=yandex&text=%s"},{name:"news",url:"https://news.yandex.ru/yandsearch?clid=2324058&rpt=nnews2&isource=infinity&itype=news&iname=yandex&text=%s"},{name:"videos",url:"https://yandex.ru/video/search?clid=2324058&isource=infinity&itype=videos&iname=yandex&text=%s"}]},bgSearch={updateSearchSuggestionsFailCount:0,init:function(){var e=this;"ru"==chrome.i18n.getUILanguage()&&(e.searches.current=_YandexRU_),infinity.init("infinity-searches",e.searches),e.checkCloudSearchEngine(),e.checkCloudSearchSuggestions(),e.handleMessage()},searches:{current:infinity.isZh()?_Baidu_:_InfinitySearch_,all:[_Yahoo_,_Baidu_,_Bing_,_YandexRU_],additions:[],customEngines:[]},handleMessage:function(){infinity.onMessage("uploadCustomSearchEngineIcon2Qiuniu",function(e,i,n){return infinity.uploadBase64Img({src:e.src,pre:900,scope:"custom-search-engine/",info:"basic-custom/",timeout:1e4,tokenTimeout:1e4},function(e,i){n(!e&&i)}),!0})},oldSearchNameToNewCurrentSearch:function(e){try{var i={search:_InfinitySearch_,Yahoo:_Yahoo_,Google:_Google_,"百度":_Baidu_,Bing:_Bing_};return!!i[e]&&i[e]}catch(e){return!1}},checkCloudSearchEngine:function(){var i=this;infinity.alarms.onAlarm("updateBaiduSearch",function(e){i.onUpdateBaiduSearch()}),infinity.alarms.create("updateBaiduSearch",{periodInMinutes:60}),infinity.onMessage("recoverySuccess",function(){i.onUpdateBaiduSearch()})},onUpdateBaiduSearch:function(){var e=infinity.api+"/se.php?t="+infinity.randomId("t");$.ajax({url:e,dataType:"json"}).done(function(n){if(n.link){var e=infinity.get("infinity-searches");e&&("0c47016a8cd2d631bc618d4f3a741335"==e.current.seId&&e.current.types.map(function(e,i){"web"==e.name&&(e.url="https://www.baidu.com/"+n.link+"&isource=infinity&iname=baidu&itype=web&ie=utf-8&wd=%s")}),e.all.map(function(e,i){"0c47016a8cd2d631bc618d4f3a741335"==e.seId&&e.types.map(function(e,i){"web"==e.name&&(e.url="https://www.baidu.com/"+n.link+"&isource=infinity&iname=baidu&itype=web&ie=utf-8&wd=%s")})}),infinity.set("infinity-searches",e))}})},checkCloudSearchSuggestions:function(){var i=this;$.ajax({url:infinity.staticPro+"/apis/infinity-basic/search-suggestions.json",dataType:"json",cache:!1}).done(function(e){i.updateSearchSuggestionsFailCount=0,infinity.set("infinity-search-suggestions",e,!0,function(){infinity.sendMessage("searchSuggestionsChange")}),0<e.frequency&&setTimeout(function(){i.checkCloudSearchSuggestions()},e.frequency)}).fail(function(){i.updateSearchSuggestionsFailCount++,setTimeout(function(){i.checkCloudSearchSuggestions()},60*(10<i.updateSearchSuggestionsFailCount?10:1)*1e3)})}};