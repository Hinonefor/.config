"use strict";infinity.modules["bookmarks-bookmarks"]=function(){return new Vue({el:"#v-bookmarks",data:{isInit:!1,input:"",folders:[],bookmarks:[],currentFolderId:"",showBookmarks:!1,searching:!1,isShowNoSearchResults:!1,isLoading:!0},created:function(){var n=this;n.onsearch=$.debounce(300,!1,n.searched),n.init(),$(".i-bookmarks").one("transitionend",function(o){o.preventDefault(),n.getBookmarks("recent",function(){n.isLoading=!1})}),chrome.bookmarks.onCreated.addListener(function(){n.init()}),chrome.bookmarks.onRemoved.addListener(function(){n.init()}),chrome.bookmarks.onChanged.addListener(function(){n.init()}),chrome.bookmarks.onMoved.addListener(function(){n.init()}),chrome.bookmarks.onImportEnded.addListener(function(){n.init()}),n.onOpen()},methods:{close:function(){iView.hideSideBar()},onOpen:function(){$(".i-bookmarks").on("transitionend",function(o){0<=o.target.className.indexOf("i-bookmarks")&&0<=o.target.className.indexOf("i-side-show")&&setTimeout(function(){$("#bookmarks-search")[0].focus()},50)})},init:function(){var n=this;n.getAllFolders(function(o){n.folders=o})},getAllFolders:function(o){var e,r=[];e=o,chrome.bookmarks.getTree(function(o){!function o(n){for(var e=0;e<n.length;e++)n[e].hasOwnProperty("children")&&r.push(n[e]);for(var e=0;e<n.length;e++)n[e].hasOwnProperty("children")&&o(n[e].children)}(o[0].children);var n=r.filter(function(o,n){return 0!=o.children.length&&!o.children.every(function(o,n){return o.hasOwnProperty("children")})});e&&e(n)})},getBookmarks:function(o,n){var e=this;e.input="",e.searching=!1,e.isShowNoSearchResults=!1,"recent"==(e.currentFolderId=o)?chrome.bookmarks.getRecent(50,function(o){e.showBookmarks=!1,e.bookmarks=o,e.showBookmarks=!0,n&&n()}):chrome.bookmarks.getSubTree(o,function(n){e.showBookmarks=!1;try{e.bookmarks=n[0].children.filter(function(o){return!o.hasOwnProperty("children")}),setTimeout(function(){e.showBookmarks=!0},50)}catch(o){e.bookmarks=n[0].children,setTimeout(function(){e.showBookmarks=!0},50)}})},openBookmarkManager:function(o){infinity.open("openBookmarkManager","chrome://bookmarks/",o,!0)},openbookmark:function(o,n){infinity.open("isOpenBookmarkInNewTab",o,n)},searchBookmarks:function(){this.searching=!0,this.onsearch()},searched:function(){var n=this;""==n.input||" "==n.input?(n.searching=!1,n.getBookmarks(n.currentFolderId)):chrome.bookmarks.search(n.input,function(o){0==o.length?n.isShowNoSearchResults=!0:n.isShowNoSearchResults=!1,n.bookmarks=o})}}})};