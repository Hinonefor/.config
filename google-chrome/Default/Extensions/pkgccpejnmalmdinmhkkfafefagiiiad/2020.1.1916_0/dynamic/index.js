let DynamicTool=(()=>{const TOOL_NAME_TPL="DYNAMIC_TOOL:#TOOL-NAME#";let render=toolName=>{let html=localStorage.getItem(TOOL_NAME_TPL.replace("#TOOL-NAME#",toolName));if(!html)return void(confirm("检测到当前指定的工具还未安装，这就去设置页面安装工具！")?location.replace("../options/index.html"):window.close());document.write(html);let list=document.querySelectorAll("dynamic[data-source]");if(list.length){let allJs=[];for(let t=0;t<list.length;t++){let e=list[t],l=e.getAttribute("data-type"),o=e.getAttribute("data-source")||"";o.split(",").forEach(t=>{if(-1!==t.indexOf("?")){let e=t.split("?");e.pop(),t=e.join("")}let e=localStorage.getItem(t);if(e)if(/^https:\/\//.test(e))fetch(e).then(t=>t.text()).then(o=>{if(localStorage.setItem(t,o),"js"===l)allJs.push(e);else{let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}});else if("js"===l)allJs.push(e);else{let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}})}allJs.length&&eval(allJs.join(";"))}},init=()=>{let t=((location.search.replace("?","").split("&").filter(t=>/^tool=/.test(t)).pop()||"").split("=")[1]||"").split("?")[0];t?render(t):location.replace("../options/index.html")};return{init:init}})();DynamicTool.init();