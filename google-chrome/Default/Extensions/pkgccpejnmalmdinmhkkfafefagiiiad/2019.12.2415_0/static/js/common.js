export let MSG_TYPE={STABLE_EXTENSION_ID:"pkgccpejnmalmdinmhkkfafefagiiiad",DOWNLOAD_FROM_GITHUB:"https://github.com/zxlie/FeHelper/tree/master/apps/static/screenshot/crx",GET_OPTIONS:"get_options",SET_OPTIONS:"set_options",OPEN_OPTION_PAGE:"open_option_page",MENU_SAVED:"menu_saved",JSON_PAGE_FORMAT:"JSON_PAGE_FORMAT",JSON_PAGE_FORMAT_REQUEST:"JSON_PAGE_FORMAT_REQUEST",JSON_FORMAT:"json-format",TAB_CREATED_OR_UPDATED:"TAB_CREATED_OR_UPDATED",OPEN_PAGE:"open_page"};export default MSG_TYPE;Date.prototype.format=function(e){let t=function(e,t){let r="",i=e<0,n=String(Math.abs(e));return n.length<t&&(r=new Array(t-n.length+1).join("0")),(i?"-":"")+r+n};if("string"!=typeof e)return this.toString();let r=function(t,r){e=e.replace(t,r)},i=this.getFullYear(),n=this.getMonth()+1,a=this.getDate(),c=this.getHours(),o=this.getMinutes(),l=this.getSeconds(),p=this.getMilliseconds();return r(/yyyy/g,t(i,4)),r(/yy/g,t(parseInt(i.toString().slice(2),10),2)),r(/MM/g,t(n,2)),r(/M/g,n),r(/dd/g,t(a,2)),r(/d/g,a),r(/HH/g,t(c,2)),r(/H/g,c),r(/hh/g,t(c%12,2)),r(/h/g,c%12),r(/mm/g,t(o,2)),r(/m/g,o),r(/ss/g,t(l,2)),r(/s/g,l),r(/SSS/g,t(p,3)),r(/S/g,p),e},window.toast=function(e){window.clearTimeout(window.feHelperAlertMsgTid);let t=document.querySelector("#fehelper_alertmsg");if(t)t.querySelector("p").innerHTML=e,t.style.display="block";else{let r=document.createElement("div");r.innerHTML='<div id="fehelper_alertmsg" style="position:fixed;top:5px;right:5px;z-index:1000000"><p style="background:#000;display:inline-block;color:#fff;text-align:center;padding:10px 10px;margin:0 auto;font-size:14px;border-radius:4px;">'+e+"</p></div>",t=r.childNodes[0],document.body.appendChild(t)}window.feHelperAlertMsgTid=window.setTimeout(function(){t.style.display="none"},3e3)};export let JsonEnDecode={uniEncode:function(e){return escape(e).replace(/%u/gi,"\\u").replace(/%7b/gi,"{").replace(/%7d/gi,"}").replace(/%3a/gi,":").replace(/%2c/gi,",").replace(/%27/gi,"'").replace(/%22/gi,'"').replace(/%5b/gi,"[").replace(/%5d/gi,"]").replace(/%3D/gi,"=").replace(/%08/gi,"\b").replace(/%0D/gi,"\r").replace(/%0C/gi,"\f").replace(/%09/gi,"\t").replace(/%20/gi," ").replace(/%0A/gi,"\n").replace(/%3E/gi,">").replace(/%3C/gi,"<").replace(/%3F/gi,"?")},uniDecode:function(e){e=e.replace(/(\\)?\\u/gi,"%u").replace("%u0025","%25");let t=(e=unescape(e.toString().replace(/%2B/g,"+"))).match(/(%u00([0-9A-F]{2}))/gi);if(t)for(let r=0;r<t.length;r++){let i=t[r].substring(1,3);Number("0x"+i)>=128&&(e=e.replace(t[r],i))}return e=unescape(e.toString().replace(/%2B/g,"+"))},urlDecode:function(e){try{return decodeURIComponent(e)}catch(t){return e}},urlDecodeByFetch:function(e){return new Promise((t,r)=>{try{fetch(`data:text/javascript;charset=utf8,${e.replace(/"/g,"%22").replace(/#/g,"%23")}`).then(e=>e.text(),e=>{r&&r(e)}).then(e=>{t&&t(e)})}catch(r){t&&t(e)}})},urlDecodeByIframe:function(e,t){return t=t||"utf8",new Promise((r,i)=>{let n=document.querySelector("#_urlDecode_iframe_");n&&n.remove(),(n=document.createElement("iframe")).setAttribute("id","_urlDecode_iframe_"),n.style.display="none",n.width="0",n.height="0",n.scrolling="no",n.allowtransparency="true",n.frameborder="0",n.src="about:blank",document.body.appendChild(n),window._urlDecodeCallback=window._urlDecodeCallback||function(e){r&&r(e.data),n.remove()},window.removeEventListener("message",window._urlDecodeCallback),window.addEventListener("message",window._urlDecodeCallback,!1);try{n.contentWindow.document.write("<html><scrip"+`t charset="${t}" src="data:text/javascript;charset=${t},parent.postMessage(\`${e.replace(/"/g,"%22").replace(/#/g,"%23")}\`)"></scrip`+"t></html>")}catch(e){i&&i(e)}})}};