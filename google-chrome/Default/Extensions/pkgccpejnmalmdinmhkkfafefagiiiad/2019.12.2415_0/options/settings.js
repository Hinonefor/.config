import MSG_TYPE from"../static/js/common.js";export default(()=>{let t={OPT_ITEM_CONTEXTMENUS:!0,JSON_PAGE_FORMAT:!0,FORBID_OPEN_IN_NEW_TAB:!1,MAX_JSON_KEYS_NUMBER:1e4,AUTO_TEXT_DECODE:!1},e={MENU_JSON_FORMAT:{icon:"★",text:"JSON格式化",contexts:["page","selection","editable"]},MENU_MORE_FE_TOOLS:{icon:"☃",text:"更多FE工具"},MENU_DOWNLOAD_CRX:{icon:"↬",text:"下载/分享插件"}},o=()=>Object.keys(t);return{getAllOpts:o,setOptsFromBgPage:function(t){o().forEach(e=>{t.some(t=>"string"==typeof t&&t===e?(localStorage.setItem(e,"true"),!0):!("object"!=typeof t||!t.hasOwnProperty(e)||(localStorage.setItem(e,t[e]),0)))||localStorage.setItem(e,"false")})},getOptsFromBgPage:function(e){if(e&&"function"==typeof e){let n={};o().forEach(e=>{let o=localStorage.getItem(e);n[e]=null!==o?o:t[e]}),e.call(null,n)}},getOptions:function(t){chrome.runtime.sendMessage({type:MSG_TYPE.GET_OPTIONS},t)},setOptions:function(t){chrome.runtime.sendMessage({type:MSG_TYPE.SET_OPTIONS,items:t})},getMenuOpts:function(){return e}}})();