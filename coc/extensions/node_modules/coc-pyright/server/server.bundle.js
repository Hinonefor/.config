!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=61)}([function(e,t){e.exports=require("path")},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);function s(e,t){if(0===t.end)return{line:0,column:0};e>=t.end&&(e=t.end-1);const n=t.getItemContaining(e);r(n>=0&&n<=t.length);const s=t.getItemAt(n);return r(void 0!==s),{line:n,column:e-s.start}}t.convertOffsetToPosition=s,t.convertOffsetsToRange=function(e,t,n){return{start:s(e,n),end:s(t,n)}},t.convertPositionToOffset=function(e,t){if(!(e.line>=t.count))return t.getItemAt(e.line).start+e.column}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e){return e.start+e.length}e.create=function(e,t){if(e<0)throw new Error("start must be non-negative");if(t<0)throw new Error("length must be non-negative");return{start:e,length:t}},e.getEnd=t,e.contains=function(e,n){return n>=e.start&&n<t(e)},e.extend=function e(n,r){r&&(Array.isArray(r)?r.forEach(t=>{e(n,t)}):(r.start<n.start&&(n.length+=n.start-r.start,n.start=r.start),t(r)>t(n)&&(n.length+=t(r)-t(n))))}}(t.TextRange||(t.TextRange={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const s=n(15),i=n(63);t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.RequestType1=i.RequestType1,t.RequestType2=i.RequestType2,t.RequestType3=i.RequestType3,t.RequestType4=i.RequestType4,t.RequestType5=i.RequestType5,t.RequestType6=i.RequestType6,t.RequestType7=i.RequestType7,t.RequestType8=i.RequestType8,t.RequestType9=i.RequestType9,t.ResponseError=i.ResponseError,t.ErrorCodes=i.ErrorCodes,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.NotificationType1=i.NotificationType1,t.NotificationType2=i.NotificationType2,t.NotificationType3=i.NotificationType3,t.NotificationType4=i.NotificationType4,t.NotificationType5=i.NotificationType5,t.NotificationType6=i.NotificationType6,t.NotificationType7=i.NotificationType7,t.NotificationType8=i.NotificationType8,t.NotificationType9=i.NotificationType9;const o=n(29);t.MessageReader=o.MessageReader,t.StreamMessageReader=o.StreamMessageReader,t.IPCMessageReader=o.IPCMessageReader,t.SocketMessageReader=o.SocketMessageReader;const a=n(30);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=n(20);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const l=n(64);t.CancellationTokenSource=l.CancellationTokenSource,t.CancellationToken=l.CancellationToken;const u=n(65);var p,d,h,f,g,m,y,_;r(n(66)),r(n(68)),function(e){e.type=new i.NotificationType("$/cancelRequest")}(p||(p={})),function(e){e.type=new i.NotificationType("$/progress")}(d||(d={}));t.ProgressType=class{constructor(){this._=void 0}},t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(f=t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(f=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new i.NotificationType("$/setTraceNotification")}(g=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new i.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(y=t.ConnectionErrors||(t.ConnectionErrors={}));class T extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,T.prototype)}}function v(e,t,n,r){let o=0,a=0,v=0;const b="2.0";let E,C,x=void 0,S=Object.create(null),k=void 0,w=Object.create(null),I=new Map,F=new u.LinkedMap,N=Object.create(null),R=Object.create(null),P=h.Off,A=f.Text,D=_.New,O=new c.Emitter,L=new c.Emitter,M=new c.Emitter,U=new c.Emitter,$=new c.Emitter;function W(e){return"req-"+e.toString()}function B(e,t){var n;i.isRequestMessage(t)?e.set(W(t.id),t):i.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++v).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}function V(e){}function q(){return D===_.Listening}function j(){return D===_.Closed}function z(){return D===_.Disposed}function H(){D!==_.New&&D!==_.Listening||(D=_.Closed,L.fire(void 0))}function K(){E||0===F.size||(E=setImmediate(()=>{E=void 0,function(){if(0===F.size)return;let e=F.shift();try{i.isRequestMessage(e)?function(e){if(z())return;function n(n,r,s){let o={jsonrpc:b,id:e.id};n instanceof i.ResponseError?o.error=n.toJson():o.result=void 0===n?null:n,Y(o,r,s),t.write(o)}function r(n,r,s){let i={jsonrpc:b,id:e.id,error:n.toJson()};Y(i,r,s),t.write(i)}!function(e){if(P===h.Off||!C)return;if(A===f.Text){let t=void 0;P===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Received request '${e.method} - (${e.id})'.`,t)}else Q("receive-request",e)}(e);let o,a,c=S[e.method];c&&(o=c.type,a=c.handler);let u=Date.now();if(a||x){let c=new l.CancellationTokenSource,p=String(e.id);R[p]=c;try{let l;l=void 0===e.params||void 0!==o&&0===o.numberOfParams?a?a(c.token):x(e.method,c.token):s.array(e.params)&&(void 0===o||o.numberOfParams>1)?a?a(...e.params,c.token):x(e.method,...e.params,c.token):a?a(e.params,c.token):x(e.method,e.params,c.token);let d=l;l?d.then?d.then(t=>{delete R[p],n(t,e.method,u)},t=>{delete R[p],t instanceof i.ResponseError?r(t,e.method,u):t&&s.string(t.message)?r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}):(delete R[p],n(l,e.method,u)):(delete R[p],function(n,r,s){void 0===n&&(n=null);let i={jsonrpc:b,id:e.id,result:n};Y(i,r,s),t.write(i)}(l,e.method,u))}catch(t){delete R[p],t instanceof i.ResponseError?n(t,e.method,u):t&&s.string(t.message)?r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else r(new i.ResponseError(i.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):i.isNotificationMessage(e)?function(e){if(z())return;let t,r=void 0;if(e.method===p.type.method)t=e=>{let t=e.id,n=R[String(t)];n&&n.cancel()};else{let n=w[e.method];n&&(t=n.handler,r=n.type)}if(t||k)try{!function(e){if(P===h.Off||!C||e.method===m.type.method)return;if(A===f.Text){let t=void 0;P===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Received notification '${e.method}'.`,t)}else Q("receive-notification",e)}(e),void 0===e.params||void 0!==r&&0===r.numberOfParams?t?t():k(e.method):s.array(e.params)&&(void 0===r||r.numberOfParams>1)?t?t(...e.params):k(e.method,...e.params):t?t(e.params):k(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else M.fire(e)}(e):i.isResponseMessage(e)?function(e){if(z())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=N[t];if(function(e,t){if(P===h.Off||!C)return;if(A===f.Text){let n=void 0;if(P===h.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";C.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else C.log(`Received response ${e.id} without active response promise.`,n)}else Q("receive-response",e)}(e,r),r){delete N[t];try{if(e.error){let t=e.error;r.reject(new i.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(s.string(t.id)||s.number(t.id)){let e=String(t.id),n=N[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{K()}}()}))}e.onClose(H),e.onError((function(e){O.fire([e,void 0,void 0])})),t.onClose(H),t.onError((function(e){O.fire(e)}));let G=e=>{try{if(i.isNotificationMessage(e)&&e.method===p.type.method){let n=W(e.params.id),s=F.get(n);if(i.isRequestMessage(s)){let i=r&&r.cancelUndispatched?r.cancelUndispatched(s,V):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return F.delete(n),i.id=s.id,Y(i,e.method,Date.now()),void t.write(i)}}B(F,e)}finally{K()}};function Y(e,t,n){if(P!==h.Off&&C)if(A===f.Text){let r=void 0;P===h.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),C.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else Q("send-response",e)}function Q(e,t){if(!C||P===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};C.log(n)}function X(){if(j())throw new T(y.Closed,"Connection is closed.");if(z())throw new T(y.Disposed,"Connection is disposed.")}function J(e){return void 0===e?null:e}function Z(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=J(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(J(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let ee={sendNotification:(e,...n)=>{let r,i;if(X(),s.string(e))switch(r=e,n.length){case 0:i=null;break;case 1:i=n[0];break;default:i=n}else r=e.method,i=Z(e,n);let o={jsonrpc:b,method:r,params:i};!function(e){if(P!==h.Off&&C)if(A===f.Text){let t=void 0;P===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Sending notification '${e.method}'.`,t)}else Q("send-notification",e)}(o),t.write(o)},onNotification:(e,t)=>{X(),s.func(e)?k=e:t&&(s.string(e)?w[e]={type:void 0,handler:t}:w[e.method]={type:e,handler:t})},onProgress:(e,t,n)=>{if(I.has(t))throw new Error(`Progress handler for token ${t} already registered`);return I.set(t,n),{dispose:()=>{I.delete(t)}}},sendProgress:(e,t,n)=>{ee.sendNotification(d.type,{token:t,value:n})},onUnhandledProgress:U.event,sendRequest:(e,...n)=>{let r,a;X(),function(){if(!q())throw new Error("Call listen() first.")}();let c=void 0;if(s.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:l.CancellationToken.is(n[0])?(a=null,c=n[0]):a=J(n[0]);break;default:const e=n.length-1;l.CancellationToken.is(n[e])?(c=n[e],a=2===n.length?J(n[0]):n.slice(0,e).map(e=>J(e))):a=n.map(e=>J(e))}else{r=e.method,a=Z(e,n);let t=e.numberOfParams;c=l.CancellationToken.is(n[t])?n[t]:void 0}let u=o++,d=new Promise((e,n)=>{let s={jsonrpc:b,id:u,method:r,params:a},o={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(P!==h.Off&&C)if(A===f.Text){let t=void 0;P===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Sending request '${e.method} - (${e.id})'.`,t)}else Q("send-request",e)}(s);try{t.write(s)}catch(e){o.reject(new i.ResponseError(i.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),o=null}o&&(N[String(u)]=o)});return c&&c.onCancellationRequested(()=>{ee.sendNotification(p.type,{id:u})}),d},onRequest:(e,t)=>{X(),s.func(e)?x=e:t&&(s.string(e)?S[e]={type:void 0,handler:t}:S[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,i=f.Text;void 0!==n&&(s.boolean(n)?r=n:(r=n.sendNotification||!1,i=n.traceFormat||f.Text)),P=e,A=i,C=P===h.Off?void 0:t,!r||j()||z()||ee.sendNotification(g.type,{value:h.toString(e)})},onError:O.event,onClose:L.event,onUnhandledNotification:M.event,onDispose:$.event,dispose:()=>{if(z())return;D=_.Disposed,$.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(N).forEach(e=>{N[e].reject(n)}),N=Object.create(null),R=Object.create(null),F=new u.LinkedMap,s.func(t.dispose)&&t.dispose(),s.func(e.dispose)&&e.dispose()},listen:()=>{X(),function(){if(q())throw new T(y.AlreadyListening,"Connection is already listening")}(),D=_.Listening,e.listen(G)},inspect:()=>{console.log("inspect")}};return ee.onNotification(m.type,e=>{P!==h.Off&&C&&C.log(e.message,P===h.Verbose?e.verbose:void 0)}),ee.onNotification(d.type,e=>{const t=I.get(e.token);t?t(e.value):U.fire(e)}),ee}t.ConnectionError=T,function(e){e.is=function(e){let t=e;return t&&s.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(_||(_={})),t.createMessageConnection=function(e,n,r,s){var i;return r||(r=t.NullLogger),v(void 0!==(i=e).listen&&void 0===i.read?e:new o.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n),r,s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(37);function s(e){return e.flowNode}t.cleanNodeAnalysisInfo=function(e){const t=e;delete t.scope,delete t.declaration,delete t.flowNode,delete t.afterFlowNode,delete t.fileInfo},t.getImportInfo=function(e){return e.importInfo},t.setImportInfo=function(e,t){e.importInfo=t},t.getScope=function(e){return e.scope},t.setScope=function(e,t){e.scope=t},t.getDeclaration=function(e){return e.declaration},t.setDeclaration=function(e,t){e.declaration=t},t.getFlowNode=s,t.setFlowNode=function(e,t){e.flowNode=t},t.getAfterFlowNode=function(e){return e.afterFlowNode},t.setAfterFlowNode=function(e,t){e.afterFlowNode=t},t.getFileInfo=function(e){return e.fileInfo},t.setFileInfo=function(e,t){e.fileInfo=t},t.getCodeFlowExpressions=function(e){return e.codeFlowExpressions},t.setCodeFlowExpressions=function(e,t){e.codeFlowExpressions=t},t.isCodeUnreachable=function(e){let t=e;for(;t;){const e=s(t);if(e)return!!(e.flags&r.FlowFlags.Unreachable);t=t.parent}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(2),i=n(3),o=n(18),a=n(24),c=n(10);function l(e,t){if(t<e.start||t>i.TextRange.getEnd(e))return;const n=(new c.ParseTreeWalker).visitNode(e);for(const e of n)if(e){const n=l(e,t);if(n)return n}return e}function u(e){const t={0:"+",1:"+=",2:"=",3:"&",4:"&=",5:"~",6:"|",7:"|=",8:"^",9:"^=",10:"/",11:"/=",12:"==",13:"//",14:"//=",15:">",16:">=",17:"<<",18:"<<=",19:"<",20:"<=",21:"@",22:"@=",23:"%",24:"%=",25:"*",26:"*=",27:"!=",28:"**",29:"**=",30:">>",31:">>=",32:"-",33:"-=",35:"and",36:"or",37:"not",38:"is",39:"is not",40:"in",41:"not in"};return t[e]?t[e]:"unknown"}function p(e){let t,n=e,s=!1;for(;n;){switch(42===n.nodeType&&t===n.name&&(s=!0),n.nodeType){case 29:if(n.parameters.some(e=>e===t)){if(s)return n}else if(t===n.suite)return n;break;case 10:if(t===n.suite)return n;break;case 33:case 37:case 31:return n}t=n,n=n.parent}r.fail("Did not find evaluation scope")}t.getNodeDepth=function(e){let t=0,n=e;for(;n;)t++,n=n.parent;return t},t.findNodeByPosition=function(e,t,n){const r=s.convertPositionToOffset(t,n);if(void 0!==r)return l(e,r)},t.findNodeByOffset=l,t.printExpression=function e(t,n=0){switch(t.nodeType){case 39:return t.value;case 36:return e(t.leftExpression,n)+"."+t.memberName.value;case 9:return e(t.leftExpression,n)+"("+t.arguments.map(t=>{let r="";return 1===t.argumentCategory?r="*":2===t.argumentCategory&&(r="**"),t.name&&(r+=t.name.value+"="),r+=e(t.valueExpression,n),r}).join(", ")+")";case 24:return e(t.baseExpression,n)+"["+t.items.items.map(t=>e(t,n)).join(", ")+"]";case 56:return u(t.operator)+" "+e(t.expression,n);case 7:return e(t.leftExpression,n)+" "+u(t.operator)+" "+e(t.rightExpression,n);case 41:{let e=t.value.toString();return t.isImaginary&&(e+="j"),e}case 49:return 1&n&&t.typeAnnotation?e(t.typeAnnotation,n):t.strings.map(t=>e(t,n)).join(" ");case 50:{let e="";return 8&t.token.flags&&(e+="r"),16&t.token.flags&&(e+="u"),32&t.token.flags&&(e+="b"),64&t.token.flags&&(e+="f"),4&t.token.flags?1&t.token.flags?e+=`'''${t.token.escapedValue}'''`:e+=`"""${t.token.escapedValue}"""`:1&t.token.flags?e+=`'${t.token.escapedValue}'`:e+=`"${t.token.escapedValue}"`,e}case 3:return e(t.leftExpression,n)+" = "+e(t.rightExpression,n);case 4:return e(t.name,n)+" := "+e(t.rightExpression,n);case 55:return e(t.valueExpression,n)+": "+e(t.typeAnnotation,n);case 5:return e(t.leftExpression,n)+" "+u(t.operator)+" "+e(t.rightExpression,n);case 6:return"await "+e(t.expression,n);case 52:return e(t.ifExpression,n)+" if "+e(t.testExpression,n)+" else "+e(t.elseExpression,n);case 32:return`[${t.entries.map(t=>e(t,n)).join(", ")}]`;case 57:return"*"+e(t.expression,n);case 53:{const r=t.expressions.map(t=>e(t,n));return 1===r.length?`(${r[0]}, )`:`(${r.join(", ")})`}case 61:return t.expression?"yield "+e(t.expression,n):"yield";case 62:return"yield from "+e(t.expression,n);case 18:return"...";case 33:{let r="<ListExpression>";if(o.isExpressionNode(t.expression))r=e(t.expression,n);else if(17===t.expression.nodeType){r=`${e(t.expression.keyExpression,n)}: ${e(t.expression.valueExpression,n)}`}return r+" "+t.comprehensions.map(t=>34===t.nodeType?`${t.isAsync?"async ":""}for `+e(t.targetExpression,n)+` in ${e(t.iterableExpression,n)}`:`if ${e(t.testExpression,n)}`).join(" ")}case 47:{let r="";return t.startValue&&(r+=e(t.startValue,n)),t.endValue&&(r+=": "+e(t.endValue,n)),t.stepValue&&(r+=": "+e(t.stepValue,n)),r}case 31:return"lambda "+t.parameters.map(t=>{let r="";return 1===t.category?r+="*":2===t.category&&(r+="**"),t.name&&(r+=t.name.value),t.defaultValue&&(r+=" = "+e(t.defaultValue,n)),r}).join(", ")+": "+e(t.expression,n);case 11:if(31===t.constType)return"True";if(14===t.constType)return"False";if(8===t.constType)return"__debug__";if(24===t.constType)return"None";break;case 15:return`{ ${t.entries.map(t=>17===t.nodeType?`${e(t.keyExpression,n)}: `+`${e(t.valueExpression,n)}`:e(t,n))} }`;case 16:return`**${e(t.expandExpression,n)}`;case 46:return t.entries.map(t=>e(t,n)).join(", ")}return"<Expression>"},t.printOperator=u,t.getEnclosingClass=function(e,t=!1){let n=e.parent;for(;n;){if(10===n.nodeType)return n;if(37===n.nodeType)return;if(29===n.nodeType&&t)return;n=n.parent}},t.getEnclosingModule=function(e){let t=e.parent;for(;t;){if(37===t.nodeType)return t;t=t.parent}r.fail("Module node not found")},t.getEnclosingClassOrModule=function(e,t=!1){let n=e.parent;for(;n;){if(10===n.nodeType)return n;if(37===n.nodeType)return n;if(29===n.nodeType&&t)return;n=n.parent}},t.getEnclosingFunction=function(e){let t=e.parent;for(;t;){if(29===t.nodeType)return t;if(10===t.nodeType)return;t=t.parent}},t.getEvaluationNodeForAssignmentExpression=function(e){let t=p(e);for(;void 0!==t;){switch(t.nodeType){case 29:case 31:case 37:return t;case 10:return}t=t.parent}},t.getEvaluationScopeNode=p,t.getExecutionScopeNode=function(e){let t=p(e);for(;10===t.nodeType||33===t.nodeType;)t=p(t.parent);return t},t.isNodeContainedWithin=function(e,t){let n=e.parent;for(;n;){if(n===t)return!0;n=n.parent}return!1},t.isSuiteEmpty=function(e){for(const t of e.statements){if(48!==t.nodeType)return!1;for(const e of t.statements)if(18===e.nodeType);else if(49!==e.nodeType)return!1}return!0},t.isMatchingExpression=function e(t,n){return 39===t.nodeType&&39===n.nodeType?t.value===n.value:36===t.nodeType&&36===n.nodeType&&(e(t.leftExpression,n.leftExpression)&&t.memberName.value===n.memberName.value)},t.isWithinDefaultParamInitializer=function(e){let t,n=e;for(;n;){if(42===n.nodeType&&t===n.defaultValue)return!0;if(31===n.nodeType||29===n.nodeType||10===n.nodeType||37===n.nodeType)return!1;t=n,n=n.parent}return!1},t.getDocString=function(e){if(0===e.length)return;if(48!==e[0].nodeType)return;const t=e[0];if(0===t.statements.length||49!==t.statements[0].nodeType)return;const n=t.statements[0];return 0==(64&n.strings[0].token.flags)?a.decodeDocString(n.strings[0].value):void 0},t.isAssignmentToDefaultsFollowingNamedTuple=function(e){if(9!==e.nodeType||!e.parent||3!==e.parent.nodeType||39!==e.parent.leftExpression.nodeType||!e.parent.parent||48!==e.parent.parent.nodeType)return!1;const t=e.parent.leftExpression.value,n=e.parent.parent;if(n.statements[0]!==e.parent||!n.parent||37!==n.parent.nodeType&&51!==n.parent.nodeType)return!1;const r=n.parent;let s=r.statements.findIndex(e=>e===n);if(s<0)return!1;for(s++;s<r.statements.length;){const e=r.statements[s];if(48!==e.nodeType)break;if(49!==e.statements[0].nodeType){if(3===e.statements[0].nodeType){const n=e.statements[0];if(36===n.leftExpression.nodeType&&"__defaults__"===n.leftExpression.memberName.value){const e=n.leftExpression.leftExpression;if(36===e.nodeType&&"__new__"===e.memberName.value&&39===e.leftExpression.nodeType&&e.leftExpression.value===t)return!0}}break}s++}return!1}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";function r(e,t){return e.line<t.line?-1:e.line>t.line?1:e.column<t.column?-1:e.column>t.column?1:0}function s(){return{line:0,column:0}}Object.defineProperty(t,"__esModule",{value:!0}),t.comparePositions=r,t.getEmptyPosition=s,t.doRangesOverlap=function(e,t){return!(r(t.start,e.end)>=0)&&!(r(e.start,t.end)>=0)},t.doesRangeContain=function(e,t){return r(e.start,t)>=0&&r(e.end,t)<=0},t.rangesAreEqual=function(e,t){return 0===r(e.start,t.start)&&0===r(e.end,t.end)},t.getEmptyRange=function(){return{start:{line:0,column:0},end:{line:0,column:0}}};t.Diagnostic=class{constructor(e,t,n){this.category=e,this.message=t,this.range=n,this._relatedInfo=[]}addAction(e){void 0===this._actions?this._actions=[e]:this._actions.push(e)}getActions(){return this._actions}setRule(e){this._rule=e}getRule(){return this._rule}addRelatedInfo(e,t,n){this._relatedInfo.push({filePath:t,message:e,range:n})}getRelatedInfo(){return this._relatedInfo}};class i{constructor(){this._messages=[],this._childAddenda=[]}addMessage(e){this._messages.push(e)}createAddendum(){const e=new i;return this.addAddendum(e),e}getString(e=5,t=5){let n=this._getLinesRecursive(e);n.length>t&&(n=n.slice(0,t),n.push("..."));const r=n.join("\n");return r.length>0?"\n"+r:""}getMessageCount(){return this._messages.length}addAddendum(e){this._childAddenda.push(e)}_getLinesRecursive(e){if(e<=0)return[];const t=[];for(const n of this._childAddenda)t.push(...n._getLinesRecursive(e-1));const n=this._messages.length>0?"  ":"";return this._messages.concat(t).map(e=>n+e)}}t.DiagnosticAddendum=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),s=n(0);function i(e){return e.substr(0,Math.max(o(e),e.lastIndexOf(s.sep)))}function o(e){if(e.charAt(0)===s.sep){if(e.charAt(1)!==s.sep)return 1;const t=e.indexOf(s.sep,2);if(t<0)return 2;const n=e.indexOf(s.sep,t+1);return n<0?t+1:n+1}return":"===e.charAt(1)&&e.charAt(2)===s.sep?3:0}function a(e){const t=c(e),n=o(t),r=t.substring(0,n),i=t.substring(n).split(s.sep);i.length>0&&!i[i.length-1]&&i.pop();const a=[r,...i],l=[a[0]];for(let e=1;e<a.length;e++){const t=a[e];if(t&&"."!==t){if(".."===t)if(l.length>1){if(".."!==l[l.length-1]){l.pop();continue}}else if(l[0])continue;l.push(t)}}return l}function c(e){return e.replace(/[\\/]/g,s.sep)}function l(e,...t){e&&(e=c(e));for(let n of t)n&&(n=c(n),e=e&&0===o(n)?u(e)+n:n);return e}function u(e){return p(e)?e:e+s.sep}function p(e){if(0===e.length)return!1;const t=e.charCodeAt(e.length-1);return 47===t||92===t}function d(e){return p(e)?e.substr(0,e.length-1):e}function h(e){return c(s.normalize(e))}function f(e,t){let n=h(l(e,t));n.endsWith(".py")||n.endsWith(".pyi")||(n=u(n));const r=a(n),i=/[^\w\s/]/g;r.length>0&&(r[0]=d(r[0]));let o="",c=!0;for(let e of r)"**"===e?o+="(/[^/.][^/]*)*?":(c||(e=s.sep+e),o+=e.replace(i,e=>"*"===e?"[^/]*":"?"===e?"[^/]":"\\"+e),c=!1);return o}function g(e,t){let n=h(l(e,t));n.endsWith(".py")||n.endsWith(".pyi")||(n=u(n));const r=a(n);r.length>0&&(r[0]=d(r[0]));let i="",o=!0;for(let e of r){if("**"===e)break;if(e.match(/[*?]/))break;o||(e=s.sep+e),i+=e,o=!1}return i}t.forEachAncestorDirectory=function(e,t){for(;;){const n=t(e);if(void 0!==n)return n;const r=i(e);if(r===e)return;e=r}},t.getDirectoryPath=i,t.getRootLength=o,t.getPathComponents=a,t.getRelativePath=function(e,t){if(!e.startsWith(u(t)))return;const n=a(e);let r=".";for(let e=a(t).length;e<n.length;e++)r+=s.sep+n[e];return r},t.makeDirectories=function(e,t){if(!e.startsWith(t))return;const n=a(e);let s=t;for(let e=a(t).length;e<n.length;e++)s=l(s,n[e]),r.existsSync(s)||r.mkdirSync(s)},t.normalizeSlashes=c,t.combinePaths=l,t.ensureTrailingDirectorySeparator=u,t.hasTrailingDirectorySeparator=p,t.stripTrailingDirectorySeparator=d,t.getFileExtension=function(e){return s.extname(e)},t.getFileName=function(e){return s.basename(e)},t.stripFileExtension=function(e){const t=s.extname(e);return e.substr(0,e.length-t.length)},t.normalizePath=h,t.isDirectory=function(e){let t;try{t=r.statSync(e)}catch(e){return!1}return t.isDirectory()},t.isFile=function(e){let t;try{t=r.statSync(e)}catch(e){return!1}return t.isFile()},t.getFileSystemEntries=function(e){try{const t=r.readdirSync(e||".").sort(),n=[],s=[];for(const i of t){if("."===i||".."===i)continue;const t=l(e,i);let o;try{o=r.statSync(t)}catch(e){continue}o.isFile()?n.push(i):o.isDirectory()&&s.push(i)}return{files:n,directories:s}}catch(e){return{files:[],directories:[]}}},t.getWildcardRegexPattern=f,t.getWildcardRoot=g,t.getFileSpec=function(e,t){let n=f(e,t);n=`^(${n})($|${"/"===s.sep?"/":"\\\\"})`;const r=new RegExp(n);return{wildcardRoot:g(e,t),regExp:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);t.ParseTreeWalker=class{walk(e){const t=this.visitNode(e);t.length>0&&this.walkMultiple(t)}walkMultiple(e){e.forEach(e=>{e&&this.walk(e)})}visitNode(e){switch(e.nodeType){case 1:if(this.visitArgument(e))return[e.name,e.valueExpression];break;case 2:if(this.visitAssert(e))return[e.testExpression,e.exceptionExpression];break;case 3:if(this.visitAssignment(e))return[e.leftExpression,e.rightExpression,e.typeAnnotationComment];break;case 4:if(this.visitAssignmentExpression(e))return[e.name,e.rightExpression];break;case 5:if(this.visitAugmentedAssignment(e))return[e.leftExpression,e.rightExpression];break;case 6:if(this.visitAwait(e))return[e.expression];break;case 7:if(this.visitBinaryOperation(e))return[e.leftExpression,e.rightExpression];break;case 8:if(this.visitBreak(e))return[];break;case 9:if(this.visitCall(e))return[e.leftExpression,...e.arguments];break;case 10:if(this.visitClass(e))return[...e.decorators,e.name,...e.arguments,e.suite];break;case 52:if(this.visitTernary(e))return[e.ifExpression,e.testExpression,e.elseExpression];break;case 11:if(this.visitConstant(e))return[];break;case 12:if(this.visitContinue(e))return[];break;case 13:if(this.visitDecorator(e))return[e.leftExpression,...e.arguments||[]];break;case 14:if(this.visitDel(e))return e.expressions;break;case 15:if(this.visitDictionary(e))return e.entries;break;case 17:if(this.visitDictionaryKeyEntry(e))return[e.keyExpression,e.valueExpression];break;case 16:if(this.visitDictionaryExpandEntry(e))return[e.expandExpression];break;case 0:if(this.visitError(e))return[e.child];break;case 19:if(this.visitIf(e))return[e.testExpression,e.ifSuite,e.elseSuite];break;case 20:if(this.visitImport(e))return e.list;break;case 21:if(this.visitImportAs(e))return[e.module,e.alias];break;case 22:if(this.visitImportFrom(e))return[e.module,...e.imports];break;case 23:if(this.visitImportFromAs(e))return[e.name,e.alias];break;case 24:if(this.visitIndex(e))return[e.baseExpression,e.items];break;case 25:if(this.visitIndexItems(e))return e.items;break;case 18:if(this.visitEllipsis(e))return[];break;case 26:if(this.visitExcept(e))return[e.typeExpression,e.name,e.exceptSuite];break;case 27:if(this.visitFor(e))return[e.targetExpression,e.iterableExpression,e.forSuite,e.elseSuite];break;case 28:if(this.visitFormatString(e))return e.expressions;break;case 29:if(this.visitFunction(e))return[...e.decorators,e.name,...e.parameters,e.returnTypeAnnotation,e.suite];break;case 30:if(this.visitGlobal(e))return e.nameList;break;case 31:if(this.visitLambda(e))return[...e.parameters,e.expression];break;case 32:if(this.visitList(e))return e.entries;break;case 33:if(this.visitListComprehension(e))return[e.expression,...e.comprehensions];break;case 34:if(this.visitListComprehensionFor(e))return[e.targetExpression,e.iterableExpression];break;case 35:if(this.visitListComprehensionIf(e))return[e.testExpression];break;case 36:if(this.visitMemberAccess(e))return[e.leftExpression,e.memberName];break;case 37:if(this.visitModule(e))return[...e.statements];break;case 38:if(this.visitModuleName(e))return e.nameParts;break;case 39:if(this.visitName(e))return[];break;case 40:if(this.visitNonlocal(e))return e.nameList;break;case 41:if(this.visitNumber(e))return[];break;case 42:if(this.visitParameter(e))return[e.name,e.typeAnnotation,e.defaultValue];break;case 43:if(this.visitPass(e))return[];break;case 44:if(this.visitRaise(e))return[e.typeExpression,e.valueExpression,e.tracebackExpression];break;case 45:if(this.visitReturn(e))return[e.returnExpression];break;case 46:if(this.visitSet(e))return e.entries;break;case 47:if(this.visitSlice(e))return[e.startValue,e.endValue,e.stepValue];break;case 48:if(this.visitStatementList(e))return e.statements;break;case 50:if(this.visitString(e))return[];break;case 49:if(this.visitStringList(e))return[e.typeAnnotation,...e.strings];break;case 51:if(this.visitSuite(e))return[...e.statements];break;case 53:if(this.visitTuple(e))return e.expressions;break;case 54:if(this.visitTry(e))return[e.trySuite,...e.exceptClauses,e.elseSuite,e.finallySuite];break;case 55:if(this.visitTypeAnnotation(e))return[e.valueExpression,e.typeAnnotation];break;case 56:if(this.visitUnaryOperation(e))return[e.expression];break;case 57:if(this.visitUnpack(e))return[e.expression];break;case 58:if(this.visitWhile(e))return[e.testExpression,e.whileSuite,e.elseSuite];break;case 59:if(this.visitWith(e))return[...e.withItems,e.suite];break;case 60:if(this.visitWithItem(e))return[e.expression,e.target];break;case 61:if(this.visitYield(e))return[e.expression];break;case 62:if(this.visitYieldFrom(e))return[e.expression];break;default:r.fail("Unexpected node type")}return[]}visitArgument(e){return!0}visitAssert(e){return!0}visitAssignment(e){return!0}visitAssignmentExpression(e){return!0}visitAugmentedAssignment(e){return!0}visitAwait(e){return!0}visitBinaryOperation(e){return!0}visitBreak(e){return!0}visitCall(e){return!0}visitClass(e){return!0}visitTernary(e){return!0}visitContinue(e){return!0}visitConstant(e){return!0}visitDecorator(e){return!0}visitDel(e){return!0}visitDictionary(e){return!0}visitDictionaryKeyEntry(e){return!0}visitDictionaryExpandEntry(e){return!0}visitError(e){return!0}visitEllipsis(e){return!0}visitIf(e){return!0}visitImport(e){return!0}visitImportAs(e){return!0}visitImportFrom(e){return!0}visitImportFromAs(e){return!0}visitIndex(e){return!0}visitIndexItems(e){return!0}visitExcept(e){return!0}visitFor(e){return!0}visitFormatString(e){return!0}visitFunction(e){return!0}visitGlobal(e){return!0}visitLambda(e){return!0}visitList(e){return!0}visitListComprehension(e){return!0}visitListComprehensionFor(e){return!0}visitListComprehensionIf(e){return!0}visitMemberAccess(e){return!0}visitModule(e){return!0}visitModuleName(e){return!0}visitName(e){return!0}visitNonlocal(e){return!0}visitNumber(e){return!0}visitParameter(e){return!0}visitPass(e){return!0}visitRaise(e){return!0}visitReturn(e){return!0}visitSet(e){return!0}visitSlice(e){return!0}visitStatementList(e){return!0}visitString(e){return!0}visitStringList(e){return!0}visitSuite(e){return!0}visitTuple(e){return!0}visitTry(e){return!0}visitTypeAnnotation(e){return!0}visitUnaryOperation(e){return!0}visitUnpack(e){return!0}visitWhile(e){return!0}visitWith(e){return!0}visitWithItem(e){return!0}visitYield(e){return!0}visitYieldFrom(e){return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=/^[A-Z0-9_]+$/,s=/^[_]+$/;function i(e){return e.length>2&&e.startsWith("__")&&!e.endsWith("__")}function o(e){return e.length>1&&e.startsWith("_")&&!e.startsWith("__")}t.isPrivateName=i,t.isProtectedName=o,t.isPrivateOrProtectedName=function(e){return i(e)||o(e)},t.isDunderName=function(e){return e.length>4&&e.startsWith("__")&&e.endsWith("__")},t.isConstantName=function(e){return!!e.match(r)&&!e.match(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);var s,i,o,a,c,l,u;function p(e){return 2===e.category||1===e.category||10===e.category&&void 0===e.subtypes.find(e=>!p(e))}function d(e,n,r=0){if(e.category!==n.category)return!1;if(r>t.maxTypeRecursionCount)return!0;switch(e.category){case 7:{const t=n;if(!i.isSameGenericClass(e,t,r+1))return!1;const s=e.typeArguments||[],o=t.typeArguments||[],a=Math.max(s.length,o.length);for(let e=0;e<a;e++){if(!d(e<s.length?s[e]:l.create(),e<o.length?o[e]:l.create(),r+1))return!1}return!0}case 8:{const t=n;return e.literalValue===t.literalValue&&d(e.classType,t.classType,r+1)}case 5:{const t=n,s=e.details.parameters,i=t.details.parameters;if(s.length!==i.length)return!1;for(let n=0;n<s.length;n++){const o=s[n],c=i[n];if(o.category!==c.category)return!1;if(o.name!==c.name)return!1;if(!d(a.getEffectiveParameterType(e,n),a.getEffectiveParameterType(t,n),r+1))return!1}let o=e.details.declaredReturnType;e.specializedTypes&&e.specializedTypes.returnType&&(o=e.specializedTypes.returnType);let c=t.details.declaredReturnType;return t.specializedTypes&&t.specializedTypes.returnType&&(c=t.specializedTypes.returnType),!!(!o&&!c||o&&c&&d(o,c,r+1))&&e.details.declaration===t.details.declaration}case 6:{const t=n;if(e.overloads.length!==t.overloads.length)return!1;for(let n=0;n<e.overloads.length;n++)if(!d(e.overloads[n],t.overloads[n]))return!1;return!0}case 10:{const t=n,s=e.subtypes,i=t.subtypes;return s.length===i.length&&void 0===s.find(e=>!u.containsType(t,e,r+1))}case 11:{const t=n;if(e.name!==t.name)return!1;const s=e.boundType,i=t.boundType;if(s){if(!i||!d(s,i,r+1))return!1}else if(i)return!1;if(e.isContravariant!==t.isContravariant)return!1;if(e.isCovariant!==t.isCovariant)return!1;const o=e.constraints,a=t.constraints;if(o.length!==a.length)return!1;for(let e=0;e<o.length;e++)if(!d(o[e],a[e],r+1))return!1;return!0}case 9:{const t=n;return e.fields===t.fields||0===e.fields.size&&0===t.fields.size}}return!0}function h(e,t){if(10===e.category){const n=e.subtypes.filter(e=>!t(e));if(n.length<e.subtypes.length)return f(n)}return e}function f(e){if(0===(e=e.filter(e=>4!==e.category)).length)return c.create();if(1===e.length)return e[0];let t=[];for(const n of e)10===n.category?t=t.concat(n.subtypes):t.push(n);t=t.sort((e,t)=>8===e.category&&void 0!==e.literalValue?1:8===t.category&&void 0!==t.literalValue?-1:0);const n=[t[0]];if(t.forEach((e,t)=>{t>0&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(d(r,t))return;if(8===r.category&&8===t.category){if(g(r,t)&&void 0===r.literalValue)return;if(i.isBuiltIn(r.classType,"bool")&&void 0!==t.literalValue&&!t.literalValue===r.literalValue)return void(e[n]=o.create(r.classType))}}e.push(t)}(n,e)}),1===n.length)return n[0];const r=u.create();return u.addTypes(r,n),r}function g(e,t){return!!d(e,t)||8===t.category&&void 0!==t.literalValue&&d(e,t=o.create(t.classType))}t.maxTypeRecursionCount=16,function(e){const t={category:0};e.create=function(){return t}}(t.UnboundType||(t.UnboundType={})),function(e){const t={category:1};e.create=function(){return t}}(s=t.UnknownType||(t.UnknownType={})),function(e){e.create=function(e){return{category:9,fields:e||new Map,loaderFields:new Map}},e.getField=function(e,t){let n=e.fields.get(t);return!n&&e.loaderFields&&(n=e.loaderFields.get(t)),n}}(t.ModuleType||(t.ModuleType={})),function(e){function n(e,t,n,r){return{category:7,details:{name:e,flags:t,typeSourceId:n,baseClasses:[],fields:new Map,typeParameters:[],docString:r},skipAbstractClassTest:!1}}function r(e,t){return!!(1&e.details.flags)&&(void 0===t||e.details.name===t)}function i(e,n,r=0){if(r>t.maxTypeRecursionCount)return!0;if(e.details===n.details)return!0;const i=e.details.aliasClass?e.details.aliasClass.details:e.details,o=n.details.aliasClass?n.details.aliasClass.details:n.details;if(i===o)return!0;if(i.name!==o.name||i.flags!==o.flags||i.typeSourceId!==o.typeSourceId||i.baseClasses.length!==o.baseClasses.length||i.typeParameters.length!==o.typeParameters.length)return!1;for(let e=0;e<i.baseClasses.length;e++)if(!d(i.baseClasses[e],o.baseClasses[e],r+1))return!1;if((i.metaClass||o.metaClass)&&(!i.metaClass||!o.metaClass||!d(i.metaClass,o.metaClass)))return!1;for(let e=0;e<i.typeParameters.length;e++)if(!d(i.typeParameters[e],o.typeParameters[e],r+1))return!1;const a=i.dataClassParameters||[],c=o.dataClassParameters||[];if(a.length!==c.length)return!1;for(let e=0;e<a.length;e++)if(a[e].category!==c[e].category||a[e].name!==c[e].name||a[e].hasDefault!==c[e].hasDefault||!d(a[e].type,c[e].type,r+1))return!1;if(i.fields!==o.fields){if(i.fields.size!==o.fields.size)return!1;let e=!0;if(i.fields.forEach((t,n)=>{const i=o.fields.get(n);if(i){d(t.getUndeclaredType()||s.create(),i.getUndeclaredType()||s.create(),r+1)||(e=!1)}else e=!1}),!e)return!1}return!0}e.create=n,e.cloneForSpecialization=function(e,t,r=!1){const s=n(e.details.name,e.details.flags,e.details.typeSourceId);return s.details=e.details,s.typeArguments=t,r&&(s.skipAbstractClassTest=!0),s},e.isGeneric=function(e){return e.details.typeParameters.length>0&&void 0===e.typeArguments},e.isSpecialBuiltIn=function(e,t){return!!(2&e.details.flags)&&(void 0===t||e.details.name===t)},e.isBuiltIn=r,e.isProtocol=function(e){return void 0!==e.details.baseClasses.find(e=>!(7!==e.category||!r(e,"Protocol")))},e.hasAbstractMethods=function(e){return!!(256&e.details.flags)&&!e.skipAbstractClassTest},e.supportsAbstractMethods=function(e){return!!(128&e.details.flags)},e.isDataClass=function(e){return!!(4&e.details.flags)},e.isSkipSynthesizedInit=function(e){return!!(8&e.details.flags)},e.isTypedDictClass=function(e){return!!(16&e.details.flags)},e.isCanOmitDictValues=function(e){return!!(32&e.details.flags)},e.isEnumClass=function(e){return!!(64&e.details.flags)},e.isPropertyClass=function(e){return!!(512&e.details.flags)},e.isFinal=function(e){return!!(1024&e.details.flags)},e.getDataClassParameters=function(e){return e.details.dataClassParameters||[]},e.getTypeParameters=function(e){return e.details.aliasClass?e.details.aliasClass.details.typeParameters:e.details.typeParameters},e.isSameGenericClass=i,e.isDerivedFrom=function e(t,n,o){if(i(t,n))return o&&o.push(t),!0;if(r(t)&&r(n,"object"))return o&&o.push(n),!0;const a=t.details.aliasClass||t;for(const r of a.details.baseClasses)if(7===r.category){if(e(r,n,o))return o&&o.push(t),!0}else if(p(r))return o&&o.push(s.create()),!0;return!1}}(i=t.ClassType||(t.ClassType={})),function(e){function t(e){return{category:8,classType:e}}e.create=t,e.cloneWithLiteral=function(e,n){const r=t(e.classType);return r.literalValue=n,r}}(o=t.ObjectType||(t.ObjectType={})),function(e){function t(e,t){return{category:5,details:{flags:e,parameters:[],docString:t}}}e.create=t,e.clone=function(e,n=!1){const r=t(e.details.flags,e.details.docString),s=n?1:0;return r.details={flags:e.details.flags,parameters:e.details.parameters.slice(s),declaredReturnType:e.details.declaredReturnType,declaration:e.details.declaration,builtInName:e.details.builtInName,docString:e.details.docString},n&&(r.details.flags&=-4,r.details.flags|=4,r.ignoreFirstParamOfDeclaration=!0),e.specializedTypes&&(r.specializedTypes={parameterTypes:e.specializedTypes.parameterTypes.slice(s),returnType:e.specializedTypes.returnType}),r.inferredReturnType=e.inferredReturnType,r},e.cloneForSpecialization=function(e,n){const s=t(e.details.flags,e.details.docString);return s.details=e.details,r(n.parameterTypes.length===e.details.parameters.length),s.specializedTypes=n,s},e.isInstanceMethod=function(e){return 0==(7&e.details.flags)},e.isConstructorMethod=function(e){return 0!=(1&e.details.flags)},e.isStaticMethod=function(e){return 0!=(4&e.details.flags)},e.isClassMethod=function(e){return 0!=(2&e.details.flags)},e.isAbstractMethod=function(e){return 0!=(8&e.details.flags)},e.isGenerator=function(e){return 0!=(16&e.details.flags)},e.isSynthesizedMethod=function(e){return 0!=(64&e.details.flags)},e.isSkipConstructorCheck=function(e){return 0!=(128&e.details.flags)},e.isOverloaded=function(e){return 0!=(256&e.details.flags)},e.isDefaultParameterCheckDisabled=function(e){return 0!=(32&e.details.flags)},e.isAsync=function(e){return 0!=(512&e.details.flags)},e.isWrapReturnTypeInAwait=function(e){return 0!=(1024&e.details.flags)},e.isStubDefinition=function(e){return 0!=(2048&e.details.flags)},e.isFinal=function(e){return 0!=(4096&e.details.flags)},e.hasUnannotatedParams=function(e){return 0!=(8192&e.details.flags)},e.getEffectiveParameterType=function(e,t){return r(t<e.details.parameters.length),e.specializedTypes?e.specializedTypes.parameterTypes[t]:e.details.parameters[t].type},e.addParameter=function(e,t){e.details.parameters.push(t)},e.getSpecializedReturnType=function(e){return e.specializedTypes&&e.specializedTypes.returnType?e.specializedTypes.returnType:e.details.declaredReturnType}}(a=t.FunctionType||(t.FunctionType={})),function(e){e.create=function(){return{category:6,overloads:[]}},e.addOverload=function(e,t){e.overloads.push(t)}}(t.OverloadedFunctionType||(t.OverloadedFunctionType={})),function(e){const t={category:3};e.create=function(){return t}}(t.NoneType||(t.NoneType={})),function(e){const t={category:4};e.create=function(){return t}}(c=t.NeverType||(t.NeverType={})),function(e){const t={category:2,isEllipsis:!1},n={category:2,isEllipsis:!0};e.create=function(e=!1){return e?n:t}}(l=t.AnyType||(t.AnyType={})),function(e){e.create=function(){return{category:10,subtypes:[]}},e.addTypes=function(e,t){for(const n of t)r(10!==n.category),r(4!==n.category),e.subtypes.push(n)},e.containsType=function(e,t,n=0){return void 0!==e.subtypes.find(e=>d(e,t,n+1))}}(u=t.UnionType||(t.UnionType={})),function(e){e.create=function(e){return{category:11,name:e,constraints:[],isCovariant:!1,isContravariant:!1}},e.addConstraint=function(e,t){e.constraints.push(t)}}(t.TypeVarType||(t.TypeVarType={})),t.isNoneOrNever=function(e){return 3===e.category||4===e.category},t.isAnyOrUnknown=p,t.isUnbound=function(e){return 0===e.category},t.isPossiblyUnbound=function e(t){return 0===t.category||10===t.category&&void 0!==t.subtypes.find(t=>e(t))},t.isTypeSame=d,t.removeAnyFromUnion=function(e){return h(e,e=>p(e))},t.removeUnknownFromUnion=function(e){return h(e,e=>1===e.category)},t.removeUnboundFromUnion=function(e){return h(e,e=>0===e.category)},t.removeNoneFromUnion=function(e){return h(e,e=>3===e.category)},t.removeFromUnion=h,t.combineTypes=f,t.isSameWithoutLiteralValue=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(27),s=n(19),i=n(12),o=n(53);function a(e,t){if(10===e.category){const n=[];return e.subtypes.forEach(e=>{const r=t(e);r&&n.push(r)}),i.combineTypes(n)}return t(e)||i.NeverType.create()}function c(e){return 8===e.category?(void 0!==e.literalValue&&(e=i.ObjectType.create(e.classType)),e):10===e.category?a(e,e=>c(e)):e}function l(e,t){if(3===e.category)return!0;if(8===e.category){if(h(e,"__len__",t))return!0;if(h(e,"__bool__",t))return!0;if(i.ClassType.isBuiltIn(e.classType,"bool")&&!1===e.literalValue)return!0}return!1}function u(e){if(i.isNoneOrNever(e))return!1;if(8===e.category){if(i.ClassType.isBuiltIn(e.classType,"Tuple")&&e.classType.typeArguments&&0===e.classType.typeArguments.length)return!1;if(i.ClassType.isBuiltIn(e.classType,"bool")&&!1===e.literalValue)return!1}return!0}function p(e,t){if(i.ClassType.isGeneric(t))return e;return d(e,m(t),!1)}function d(e,t,n=!1,r=0){if(r>100)return i.AnyType.create();if(!E(e))return e;if(t&&!n&&0===t.size())return e;if(i.isAnyOrUnknown(e))return e;if(i.isNoneOrNever(e))return e;if(11===e.category){if(t){const n=t.get(e.name);if(n)return n}return!t||n?T(e,r+1):e}if(10===e.category){const s=[];return e.subtypes.forEach(e=>{s.push(d(e,t,n,r+1))}),i.combineTypes(s)}if(8===e.category){const s=_(e.classType,t,n,r+1);if(i.ClassType.isBuiltIn(s,"Type")){const e=s.typeArguments;if(e&&e.length>=1){const s=e[0];if(8===s.category)return d(s.classType,t,n,r+1);if(11===s.category&&t){const e=t.get(s.name);if(e&&8===e.category)return e.classType}}}return s===e.classType?e:i.ObjectType.create(s)}return 7===e.category?_(e,t,n,r+1):5===e.category?v(e,t,n,r+1):6===e.category?function(e,t,n,r){const s=e.overloads.map(e=>v(e,t,n,r)),o=i.OverloadedFunctionType.create();return s.forEach(e=>{i.OverloadedFunctionType.addOverload(o,e)}),o}(e,t,n,r+1):e}function h(e,t,n,r=0){if(8===e.category)return f(e.classType,t,n,r)}function f(e,t,n,s=0){const o=0!=(16&s);if(7===e.category){if(4&s&&i.ClassType.isBuiltIn(e,"object"))return;if(0==(1&s)){const n=e.details.fields;if(0==(8&s)){const r=n.get(t);if(r&&r.isInstanceMember()&&(!o||r.hasTypedDeclarations()))return{symbol:r,isInstanceMember:!0,classType:e}}const r=n.get(t);if(r&&r.isClassMember()&&(!o||r.hasTypedDeclarations())){let t=!1;if(i.ClassType.isDataClass(e)||i.ClassType.isTypedDictClass(e)){const e=r.getDeclarations();e.length>0&&1===e[0].type&&(t=!0)}return{symbol:r,isInstanceMember:t,classType:e}}}if(0==(2&s))for(const r of e.details.baseClasses){const i=f(p(r,e),t,n,-2&s);if(i)return i}}else if(i.isAnyOrUnknown(e))return{symbol:r.Symbol.createWithType(0,i.UnknownType.create()),isInstanceMember:!1,classType:i.UnknownType.create()}}function g(e,t){for(const n of t)e.find(e=>e===n)||e.push(n)}function m(e){return y(i.ClassType.getTypeParameters(e),e.typeArguments)}function y(e,t){const n=new o.TypeVarMap;return e.forEach((e,r)=>{const s=e.name;let o;o=t?r>=t.length?i.AnyType.create():t[r]:T(e),n.set(s,o,!1)}),n}function _(e,t,n,r){if(0===i.ClassType.getTypeParameters(e).length)return e;let s=[],o=!1;return e.typeArguments?s=e.typeArguments.map(e=>{const s=d(e,t,n,r+1);return s!==e&&(o=!0),s}):i.ClassType.getTypeParameters(e).forEach(e=>{let r;t&&t.get(e.name)?(r=t.get(e.name),o=!0):(r=n?T(e):e,r!==e&&(o=!0)),s.push(r)}),o?i.ClassType.cloneForSpecialization(e,s):e}function T(e,t=0){return e.boundType?d(e.boundType,void 0,!1,t+1):e.constraints.length>0?i.combineTypes(e.constraints):i.UnknownType.create()}function v(e,t,n,r){const s=e.specializedTypes&&e.specializedTypes.returnType?e.specializedTypes.returnType:e.details.declaredReturnType,o=s?d(s,t,n,r+1):void 0;let a=s!==o;const c={parameterTypes:[],returnType:o};for(let s=0;s<e.details.parameters.length;s++){const o=i.FunctionType.getEffectiveParameterType(e,s),l=d(o,t,n,r+1);c.parameterTypes.push(l),o!==l&&(a=!0)}return a?i.FunctionType.cloneForSpecialization(e,c):e}function b(e){if(8===e.category){const t=e.classType;if(i.ClassType.isBuiltIn(t)){const e=t.details.name;if("Generator"===e||"AsyncGenerator"===e)return t.typeArguments;if("Iterator"===e||"AsyncIterator"===e||"AsyncIterable"===e)return t.typeArguments}}}function E(e,t=0){switch(e.category){case 7:return e.typeArguments?!(t>i.maxTypeRecursionCount)&&void 0!==e.typeArguments.find(e=>E(e,t+1)):0!==i.ClassType.getTypeParameters(e).length;case 8:return!(t>i.maxTypeRecursionCount)&&E(e.classType,t+1);case 5:{if(t>i.maxTypeRecursionCount)return!1;for(let n=0;n<e.details.parameters.length;n++)if(E(i.FunctionType.getEffectiveParameterType(e,n),t+1))return!0;const n=e.specializedTypes&&e.specializedTypes.returnType?e.specializedTypes.returnType:e.details.declaredReturnType;return!(!n||!E(n,t+1))}case 6:return void 0!==e.overloads.find(e=>E(e,t+1));case 10:return void 0!==e.subtypes.find(e=>E(e,t+1));case 11:return!0}return!1}function C(e){const t=e.literalValue;if(void 0===t)return"";let n;if("string"==typeof t){n=`${"bytes"===e.classType.details.name?"b":""}'${t.toString()}'`}else n="boolean"==typeof t?t?"True":"False":t.toString();return n}t.isOptionalType=function(e){return 10===e.category&&e.subtypes.some(e=>i.isNoneOrNever(e))},t.doForSubtypes=a,t.areTypesSame=function(e){if(e.length<2)return!0;for(let t=1;t<e.length;t++)if(!i.isTypeSame(e[0],e[t]))return!1;return!0},t.stripLiteralValue=c,t.stripLiteralTypeArgsValue=function e(t,n=0){if(n>i.maxTypeRecursionCount)return t;if(7===t.category&&t.typeArguments){const r=t.typeArguments.map(t=>e(c(t),n+1));return i.ClassType.cloneForSpecialization(t,r,t.skipAbstractClassTest)}if(8===t.category)return t.classType.typeArguments&&(t=i.ObjectType.create(e(t.classType,n+1))),t;if(10===t.category)return a(t,t=>e(t,n+1));if(5===t.category){if(t.specializedTypes){const r={parameterTypes:t.specializedTypes.parameterTypes.map(t=>e(c(t),n+1)),returnType:t.specializedTypes.returnType?e(c(t.specializedTypes.returnType),n+1):void 0};t=i.FunctionType.cloneForSpecialization(t,r)}return t}if(6===t.category){const r=i.OverloadedFunctionType.create();return r.overloads=t.overloads.map(t=>e(t,n+1)),r}return t},t.transformTypeObjectToClass=function(e){if(8!==e.category)return e;const t=e.classType;if(!i.ClassType.isBuiltIn(t,"Type"))return e;if(!t.typeArguments||t.typeArguments.length<1)return e;const n=t.typeArguments[0];return 8!==n.category?e:n.classType},t.canBeFalsy=l,t.canBeTruthy=u,t.getSpecializedTupleType=function(e){let t;if(7===e.category?t=e:8===e.category&&(t=e.classType),t&&i.ClassType.isBuiltIn(t,"Tuple"))return t},t.isEllipsisType=function(e){return!(2!==e.category||!e.isEllipsis)||7===e.category&&i.ClassType.isBuiltIn(e,"ellipsis")},t.isNoReturnType=function(e){if(8===e.category){const t=e.classType;if(i.ClassType.isBuiltIn(t,"NoReturn"))return!0}return!1},t.isProperty=function(e){return 8===e.category&&i.ClassType.isPropertyClass(e.classType)},t.partiallySpecializeType=p,t.specializeType=d,t.lookUpObjectMember=h,t.lookUpClassMember=f,t.addDefaultFunctionParameters=function(e){i.FunctionType.addParameter(e,{category:1,name:"args",type:i.AnyType.create()}),i.FunctionType.addParameter(e,{category:2,name:"kwargs",type:i.AnyType.create()})},t.getMetaclass=function e(t,n=0){if(!(n>i.maxTypeRecursionCount)){if(t.details.metaClass)return 7===t.details.metaClass.category?t.details.metaClass:i.UnknownType.create();for(const r of t.details.baseClasses)if(7===r.category){const t=e(r,n+1);if(t)return t}}},t.addTypeVarsToListIfUnique=g,t.getTypeVarArgumentsRecursive=function e(t){const n=t=>{const n=[];return t.typeArguments&&t.typeArguments.forEach(t=>{g(n,e(t))}),n};if(11===t.category)return[t];if(7===t.category)return n(t);if(8===t.category)return n(t.classType);if(10===t.category){const n=[];for(const r of t.subtypes)g(n,e(r));return n}if(5===t.category){const n=[];return t.details.parameters.forEach(t=>{g(n,e(t.type))}),t.details.declaredReturnType&&g(n,e(t.details.declaredReturnType)),n}return[]},t.selfSpecializeClassType=function(e,t=!1){if(!i.ClassType.isGeneric(e)&&!t)return e;const n=i.ClassType.getTypeParameters(e);return i.ClassType.cloneForSpecialization(e,n,t)},t.stripFirstParameter=function(e){return e.details.parameters.length>0&&0===e.details.parameters[0].category?i.FunctionType.clone(e,!0):e},t.setTypeArgumentsRecursive=function e(t,n,r,s=0){switch(t.category){case 10:t.subtypes.forEach(t=>{e(t,n,r,s+1)});break;case 7:t.typeArguments&&t.typeArguments.forEach(t=>{e(t,n,r,s+1)});break;case 8:e(t.classType,n,r,s+1);break;case 5:t.specializedTypes?(t.specializedTypes.parameterTypes.forEach(t=>{e(t,n,r,s+1)}),t.specializedTypes.returnType&&e(t.specializedTypes.returnType,n,r,s+1)):(t.details.parameters.forEach(t=>{e(t.type,n,r,s+1)}),t.details.declaredReturnType&&e(t.details.declaredReturnType,n,r,s+1));break;case 6:t.overloads.forEach(t=>{e(t,n,r,s+1)});break;case 11:r.has(t.name)||r.set(t.name,n,r.isNarrowable(t.name))}},t.buildTypeVarMapFromSpecializedClass=m,t.buildTypeVarMap=y,t.derivesFromClassRecursive=function e(t,n){if(i.ClassType.isSameGenericClass(t,n))return!0;for(const r of t.details.baseClasses)if(7===r.category&&e(r,n))return!0;return!1},t.removeFalsinessFromType=function(e){return a(e,e=>{if(8===e.category){if(void 0!==e.literalValue)return e.literalValue?e:void 0;if(i.ClassType.isBuiltIn(e.classType,"bool"))return i.ObjectType.cloneWithLiteral(e,!0)}if(u(e))return e})},t.removeTruthinessFromType=function(e,t){return a(e,e=>{if(8===e.category){if(void 0!==e.literalValue)return e.literalValue?void 0:e;if(i.ClassType.isBuiltIn(e.classType,"bool"))return i.ObjectType.cloneWithLiteral(e,!1)}if(l(e,t))return e})},t.getSymbolFromBaseClasses=function e(t,n,r=0){if(!(r>i.maxTypeRecursionCount))for(const s of t.details.baseClasses){if(7!==s.category)return;{const t=s.details.fields.get(n);if(t&&t.isClassMember())return{class:s,symbol:t};const i=e(s,n,r+1);if(i)return i}}},t.getDeclaredGeneratorYieldType=function(e,t){const n=i.FunctionType.getSpecializedReturnType(e);if(n){const e=b(n);return e&&e.length>=1&&7===t.category?i.ObjectType.create(i.ClassType.cloneForSpecialization(t,[e[0]])):n}},t.getDeclaredGeneratorSendType=function(e){const t=i.FunctionType.getSpecializedReturnType(e);if(t){const e=b(t);return e&&e.length>=2?e[1]:i.UnknownType.create()}},t.getDeclaredGeneratorReturnType=function(e){const t=i.FunctionType.getSpecializedReturnType(e);if(t){const e=b(t);return e&&e.length>=3?e[2]:i.UnknownType.create()}},t.convertClassToObject=function(e){return a(e,e=>7===e.category?i.ObjectType.create(e):e)},t.getMembersForClass=function(e,t,n){!function e(t,n,r,o=0){if(o>i.maxTypeRecursionCount)return;t.details.baseClasses.forEach(t=>{7===t.category&&e(t,n,r,o+1)});const a=i.ClassType.isTypedDictClass(t);t.details.fields.forEach((e,t)=>{(e.isClassMember()||r&&e.isInstanceMember())&&(a&&s.isTypedDictMemberAccessedThroughIndex(e)||n.get(t)||n.set(t,e))})}(e,t,n)},t.getMembersForModule=function(e,t){e.loaderFields&&e.loaderFields.forEach((e,n)=>{t.set(n,e)}),e.fields.forEach((e,n)=>{t.set(n,e)})},t.containsUnknown=function e(t,n=!1,r=0){if(r>i.maxTypeRecursionCount)return!1;if(1===t.category)return!0;if(10===t.category){for(const s of t.subtypes)if(e(s,n,r+1))return!0;return!1}if(8===t.category)return e(t.classType,!1,r+1);if(7===t.category){if(t.typeArguments&&!n)for(const s of t.typeArguments)if(e(s,n,r+1))return!0;return!1}if(6===t.category)return t.overloads.some(t=>e(t,!1,r+1));if(5===t.category){for(let n=0;n<t.details.parameters.length;n++){if(e(i.FunctionType.getEffectiveParameterType(t,n),!1,r+1))return!0}return!1}return!1},t.getConcreteTypeFromTypeVar=T,t.requiresSpecialization=E,t.printLiteralValue=C,t.printLiteralType=function(e){const t=C(e);return t?`Literal[${t}]`:""}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);t.ErrorCodes=s.ErrorCodes,t.ResponseError=s.ResponseError,t.CancellationToken=s.CancellationToken,t.CancellationTokenSource=s.CancellationTokenSource,t.Disposable=s.Disposable,t.Event=s.Event,t.Emitter=s.Emitter,t.Trace=s.Trace,t.TraceFormat=s.TraceFormat,t.SetTraceNotification=s.SetTraceNotification,t.LogTraceNotification=s.LogTraceNotification,t.RequestType=s.RequestType,t.RequestType0=s.RequestType0,t.NotificationType=s.NotificationType,t.NotificationType0=s.NotificationType0,t.MessageReader=s.MessageReader,t.MessageWriter=s.MessageWriter,t.ConnectionStrategy=s.ConnectionStrategy,t.StreamMessageReader=s.StreamMessageReader,t.StreamMessageWriter=s.StreamMessageWriter,t.IPCMessageReader=s.IPCMessageReader,t.IPCMessageWriter=s.IPCMessageWriter,t.createClientPipeTransport=s.createClientPipeTransport,t.createServerPipeTransport=s.createServerPipeTransport,t.generateRandomPipeName=s.generateRandomPipeName,t.createClientSocketTransport=s.createClientSocketTransport,t.createServerSocketTransport=s.createServerSocketTransport,t.ProgressType=s.ProgressType,r(n(69)),r(n(70));const i=n(80),o=n(81);!function(e){let t,n,r,s,a;!function(e){e.type=i.CallHierarchyRequest.type}(t=e.CallHierarchyRequest||(e.CallHierarchyRequest={})),function(e){e.CallsFrom=i.CallHierarchyDirection.CallsFrom,e.CallsTo=i.CallHierarchyDirection.CallsTo}(n=e.CallHierarchyDirection||(e.CallHierarchyDirection={})),function(e){e.type=o.WorkDoneProgress.type}(r=e.WorkDoneProgress||(e.WorkDoneProgress={})),function(e){e.type=o.WorkDoneProgressCreateRequest.type}(s=e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})),function(e){e.type=o.WorkDoneProgressCancelNotification.type}(a=e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={}))}(t.Proposed||(t.Proposed={})),t.createProtocolConnection=function(e,t,n,r){return s.createMessageConnection(e,t,n,r)}},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function s(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=s,t.stringArray=function(e){return s(e)&&e.every(e=>r(e))}},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";var r;function s(e){return e>>8==3}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.V24=516]="V24",e[e.V25=517]="V25",e[e.V26=518]="V26",e[e.V27=519]="V27",e[e.V30=768]="V30",e[e.V31=769]="V31",e[e.V32=770]="V32",e[e.V33=771]="V33",e[e.V34=772]="V34",e[e.V35=773]="V35",e[e.V36=774]="V36",e[e.V37=775]="V37",e[e.V38=776]="V38"}(r=t.PythonVersion||(t.PythonVersion={})),t.latestStablePythonVersion=r.V38,t.latestPythonVersion=r.V38,t.versionToString=function(e){return`${e>>8&255}.${255&e}`},t.versionFromString=function(e){const t=e.split(".");if(2!==t.length)return;const n=parseInt(t[0],10),i=parseInt(t[1],10);if(isNaN(n)||isNaN(i))return;if(n>255||i>255)return;const o=256*n+i;return void 0!==r[o]&&s(o)?o:void 0},t.is3x=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);let s=1;function i(e,t){t.start<e.start&&(e.length+=e.start-t.start,e.start=t.start),r.TextRange.getEnd(t)>r.TextRange.getEnd(e)&&(e.length=r.TextRange.getEnd(t)-e.start)}t.getNextNodeId=function(){return s++},t.extendRange=i,function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:37,id:s++,statements:[]}}}(t.ModuleNode||(t.ModuleNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:51,id:s++,statements:[]}}}(t.SuiteNode||(t.SuiteNode={})),function(e){e.create=function(e,t,n,r){const o={start:e.start,length:e.length,nodeType:19,id:s++,testExpression:t,ifSuite:n,elseSuite:r};return t.parent=o,n.parent=o,i(o,t),i(o,n),r&&(i(o,r),r.parent=o),o}}(t.IfNode||(t.IfNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:58,id:s++,testExpression:t,whileSuite:n};return t.parent=r,n.parent=r,i(r,n),r}}(t.WhileNode||(t.WhileNode={})),function(e){e.create=function(e,t,n,r){const o={start:e.start,length:e.length,nodeType:27,id:s++,targetExpression:t,iterableExpression:n,forSuite:r};return t.parent=o,n.parent=o,r.parent=o,i(o,r),o}}(t.ForNode||(t.ForNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:34,id:s++,targetExpression:t,iterableExpression:n};return t.parent=r,n.parent=r,i(r,t),i(r,n),r}}(t.ListComprehensionForNode||(t.ListComprehensionForNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:35,id:s++,testExpression:t};return t.parent=n,i(n,t),n}}(t.ListComprehensionIfNode||(t.ListComprehensionIfNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:54,id:s++,trySuite:t,exceptClauses:[]};return t.parent=n,i(n,t),n}}(t.TryNode||(t.TryNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:26,id:s++,exceptSuite:t};return t.parent=n,i(n,t),n}}(t.ExceptNode||(t.ExceptNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:29,id:s++,decorators:[],name:t,parameters:[],suite:n};return t.parent=r,n.parent=r,i(r,n),r}}(t.FunctionNode||(t.FunctionNode={})),function(e){e.create=function(e,t){return{start:e.start,length:e.length,nodeType:42,id:s++,category:t}}}(t.ParameterNode||(t.ParameterNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:10,id:s++,decorators:[],name:t,arguments:[],suite:n};return t.parent=r,n.parent=r,i(r,n),r},e.createDummyForDecorators=function(e){const t={start:0,length:0,nodeType:10,id:s++,decorators:e,name:{start:0,length:0,id:0,nodeType:39,token:{type:7,start:0,length:0,comments:[],value:""},value:""},arguments:[],suite:{start:0,length:0,id:0,nodeType:51,statements:[]}};return e.forEach(e=>{e.parent=t,i(t,e)}),t}}(t.ClassNode||(t.ClassNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:59,id:s++,withItems:[],suite:t};return t.parent=n,i(n,t),n}}(t.WithNode||(t.WithNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:60,id:s++,expression:e};return e.parent=t,t}}(t.WithItemNode||(t.WithItemNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:13,id:s++,leftExpression:t,arguments:void 0};return t.parent=n,i(n,t),n}}(t.DecoratorNode||(t.DecoratorNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:48,id:s++,statements:[]}}}(t.StatementListNode||(t.StatementListNode={})),t.isExpressionNode=function(e){switch(e.nodeType){case 0:case 56:case 7:case 4:case 55:case 6:case 52:case 57:case 53:case 9:case 33:case 24:case 47:case 61:case 62:case 36:case 31:case 39:case 11:case 18:case 41:case 50:case 28:case 49:case 15:case 16:case 32:case 46:return!0;default:return!1}},function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:0,id:s++,category:t,child:n};return n&&(n.parent=r,i(r,n)),r}}(t.ErrorNode||(t.ErrorNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:56,id:s++,operator:n,expression:t};return t.parent=r,i(r,t),r}}(t.UnaryOperationNode||(t.UnaryOperationNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:7,id:s++,leftExpression:e,operator:n,rightExpression:t};return e.parent=r,t.parent=r,i(r,t),r}}(t.BinaryOperationNode||(t.BinaryOperationNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:4,id:s++,name:e,rightExpression:t};return e.parent=n,t.parent=n,i(n,t),n}}(t.AssignmentExpressionNode||(t.AssignmentExpressionNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:3,id:s++,leftExpression:e,rightExpression:t};return e.parent=n,t.parent=n,i(n,t),n}}(t.AssignmentNode||(t.AssignmentNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:55,id:s++,valueExpression:e,typeAnnotation:t};return e.parent=n,t.parent=n,i(n,t),n}}(t.TypeAnnotationNode||(t.TypeAnnotationNode={})),function(e){e.create=function(e,t,n,r){const o={start:e.start,length:e.length,nodeType:5,id:s++,leftExpression:e,operator:n,rightExpression:t,destExpression:r};return e.parent=o,t.parent=o,r.parent=o,i(o,t),o}}(t.AugmentedAssignmentNode||(t.AugmentedAssignmentNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:6,id:s++,expression:t};return t.parent=n,i(n,t),n}}(t.AwaitNode||(t.AwaitNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:52,id:s++,ifExpression:e,testExpression:t,elseExpression:n};return e.parent=r,t.parent=r,n.parent=r,i(r,n),r}}(t.TernaryNode||(t.TernaryNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:57,id:s++,expression:t};return t.parent=n,i(n,t),n}}(t.UnpackNode||(t.UnpackNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:53,id:s++,expressions:[]}}}(t.TupleNode||(t.TupleNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:9,id:s++,leftExpression:e,arguments:[]};return e.parent=t,t}}(t.CallNode||(t.CallNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:33,id:s++,expression:e,comprehensions:[]};return e.parent=t,t}}(t.ListComprehensionNode||(t.ListComprehensionNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:25,id:s++,items:n};return n.forEach(e=>{e.parent=r}),i(r,t),r}}(t.IndexItemsNode||(t.IndexItemsNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:24,id:s++,baseExpression:e,items:t};return e.parent=n,t.parent=n,i(n,t),n}}(t.IndexNode||(t.IndexNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:47,id:s++}}}(t.SliceNode||(t.SliceNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:61,id:s++,expression:t};return t&&(t.parent=n,i(n,t)),n}}(t.YieldNode||(t.YieldNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:62,id:s++,expression:t};return t.parent=n,i(n,t),n}}(t.YieldFromNode||(t.YieldFromNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:36,id:s++,leftExpression:e,memberName:t};return e.parent=n,t.parent=n,i(n,t),n}}(t.MemberAccessNode||(t.MemberAccessNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:31,id:s++,parameters:[],expression:t};return t.parent=n,i(n,t),n}}(t.LambdaNode||(t.LambdaNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:39,id:s++,token:e,value:e.value}}}(t.NameNode||(t.NameNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:11,id:s++,constType:e.keywordType}}}(t.ConstantNode||(t.ConstantNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:18,id:s++}}}(t.EllipsisNode||(t.EllipsisNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:41,id:s++,value:e.value,isInteger:e.isInteger,isImaginary:e.isImaginary}}}(t.NumberNode||(t.NumberNode={})),function(e){e.create=function(e,t,n){return{start:e.start,length:e.length,nodeType:50,id:s++,token:e,value:t,hasUnescapeErrors:n}}}(t.StringNode||(t.StringNode={})),function(e){e.create=function(e,t,n,r){const i={start:e.start,length:e.length,nodeType:28,id:s++,token:e,value:t,hasUnescapeErrors:n,expressions:r};return r.forEach(e=>{e.parent=i}),i}}(t.FormatStringNode||(t.FormatStringNode={})),function(e){e.create=function(e){const t={start:e[0].start,length:e[0].length,nodeType:49,id:s++,strings:e};return e.length>0&&(e.forEach(e=>{e.parent=t}),i(t,e[e.length-1])),t}}(t.StringListNode||(t.StringListNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:15,id:s++,entries:[]}}}(t.DictionaryNode||(t.DictionaryNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:17,id:s++,keyExpression:e,valueExpression:t};return e.parent=n,t.parent=n,i(n,t),n}}(t.DictionaryKeyEntryNode||(t.DictionaryKeyEntryNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:16,id:s++,expandExpression:e};return e.parent=t,t}}(t.DictionaryExpandEntryNode||(t.DictionaryExpandEntryNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:46,id:s++,entries:[]}}}(t.SetNode||(t.SetNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:32,id:s++,entries:[]}}}(t.ListNode||(t.ListNode={})),function(e){e.create=function(e,t,n){const r={start:e.start,length:e.length,nodeType:1,id:s++,valueExpression:t,argumentCategory:n};return t.parent=r,i(r,t),r}}(t.ArgumentNode||(t.ArgumentNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:14,id:s++,expressions:[]}}}(t.DelNode||(t.DelNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:43,id:s++}}}(t.PassNode||(t.PassNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:20,id:s++,list:[]}}}(t.ImportNode||(t.ImportNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:38,id:s++,leadingDots:0,nameParts:[]}}}(t.ModuleNameNode||(t.ModuleNameNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:21,id:s++,module:e};return e.parent=t,t}}(t.ImportAsNode||(t.ImportAsNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:22,id:s++,module:t,imports:[],isWildcardImport:!1,usesParens:!1};return t.parent=n,i(n,t),n}}(t.ImportFromNode||(t.ImportFromNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:23,id:s++,name:e};return e.parent=t,t}}(t.ImportFromAsNode||(t.ImportFromAsNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:30,id:s++,nameList:[]}}}(t.GlobalNode||(t.GlobalNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:40,id:s++,nameList:[]}}}(t.NonlocalNode||(t.NonlocalNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:2,id:s++,testExpression:t};return t.parent=n,i(n,t),n}}(t.AssertNode||(t.AssertNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:8,id:s++}}}(t.BreakNode||(t.BreakNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:12,id:s++}}}(t.ContinueNode||(t.ContinueNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:45,id:s++}}}(t.ReturnNode||(t.ReturnNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:44,id:s++}}}(t.RaiseNode||(t.RaiseNode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(26);t.getLastTypedDeclaredForSymbol=function(e){const t=e.getTypedDeclarations();if(t.length>0)return t[t.length-1]},t.isTypedDictMemberAccessedThroughIndex=function(e){const t=e.getTypedDeclarations();if(t.length>0){if(1===t[t.length-1].type)return!0}return!1},t.isFinalVariable=function(e){return e.getDeclarations().some(e=>r.isFinalVariableDeclaration(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,s=this._callbacks.length;r<s;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),s=0,i=n.length;s<i;s++)try{t.push(n[s].apply(r[s],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{let i;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),i={dispose:()=>{this._callbacks.remove(e,t),i.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}s._noop=function(){},t.Emitter=s},function(e,t,n){"use strict";const r=n(0),s={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},i={...s,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:r.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?i:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._startTime=Date.now()}getDurationInMilliseconds(){return Date.now()-this._startTime}getDurationInSeconds(){return this.getDurationInMilliseconds()/1e3}}t.Duration=r;class s{constructor(){this.totalTime=0,this.isTiming=!1}timeOperation(e){if(this.isTiming)e();else{this.isTiming=!0;const t=new r;e(),this.totalTime+=t.getDurationInMilliseconds(),this.isTiming=!1}}subtractFromTime(e){if(this.isTiming){this.isTiming=!1;const t=new r;e(),this.totalTime-=t.getDurationInMilliseconds(),this.isTiming=!0}else e()}printTime(){const e=this.totalTime/1e3;return(Math.round(100*e)/100).toString()+"sec"}}t.TimingStat=s;class i{constructor(){this.totalDuration=new r,this.findFilesTime=new s,this.readFileTime=new s,this.tokenizeFileTime=new s,this.parseFileTime=new s,this.resolveImportsTime=new s,this.cycleDetectionTime=new s,this.bindTime=new s,this.typeCheckerTime=new s}printSummary(e){e.log(`Completed in ${this.totalDuration.getDurationInSeconds()}sec`)}printDetails(e){e.log(""),e.log("Timing stats"),e.log("Find Source Files:    "+this.findFilesTime.printTime()),e.log("Read Source Files:    "+this.readFileTime.printTime()),e.log("Tokenize:             "+this.tokenizeFileTime.printTime()),e.log("Parse:                "+this.parseFileTime.printTime()),e.log("Resolve Imports:      "+this.resolveImportsTime.printTime()),e.log("Bind:                 "+this.bindTime.printTime()),e.log("Check:                "+this.typeCheckerTime.printTime()),e.log("Detect Cycles:        "+this.cycleDetectionTime.printTime())}}t.TimingStats=i,t.timingStats=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(118);t.computeCompletionSimilarity=function(e,t){if(t.startsWith(e))return 1;const n=t.toLocaleLowerCase(),s=e.toLocaleLowerCase();if(n.startsWith(s))return.75;let i=n.length,o=Number.MAX_VALUE;for(;i>0;){const e=r.default(n.substr(0,i),s);e<o&&(o=e),i--}return o>=e.length?0:.5*((e.length-o)/e.length)},t.hashString=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeDocString=function(e){const t=e.replace(/\r/g,"").replace(/\t/g,"        ").split("\n");let n=Number.MAX_VALUE;t.forEach((e,r)=>{if(t.length<=1||r>0){const t=e.trimLeft();t&&(n=Math.min(n,e.length-t.length))}});const r=[];for(n<Number.MAX_VALUE&&t.forEach((e,t)=>{0===t?r.push(e.trimRight()):r.push(e.substr(n).trimRight())});r.length>0&&0===r[0].length;)r.shift();for(;r.length>0&&0===r[r.length-1].length;)r.pop();return r.join("\n")},t.extractParameterDocumentation=function(e,t){if(!e||!t)return;const n=e.split("\n");for(const e of n){const n=e.trim();let r=n.indexOf("@param "+t);if(r>=0)return n.substr(r+7);if(r=n.indexOf(":param "+t),r>=0)return n.substr(r+7);if(r=n.indexOf(t+": "),r>=0)return n.substr(r);if(r=n.indexOf(t+" ("),r>=0)return n.substr(r)}},t.convertDocStringToMarkdown=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),s=n(3),i=n(5),o=n(11);function a(e){let t="";for(let n=0;n<e.leadingDots;n++)t+=".";return t+=e.nameParts.map(e=>e.value).join("."),t}t.getTopLevelImports=function(e){const t={orderedImports:[],mapByFilePath:new Map};let n=!1,r=!1;return e.statements.forEach(e=>{48===e.nodeType?e.statements.forEach(e=>{20===e.nodeType?(r=!0,function(e,t,n){e.list.forEach(r=>{const s=i.getImportInfo(r.module);let o;s&&s.isImportFound&&(o=s.resolvedPaths[s.resolvedPaths.length-1]);const c={node:e,subnode:r,importResult:s,resolvedPath:o,moduleName:a(r.module),followsNonImportStatement:n};t.orderedImports.push(c),o&&(t.mapByFilePath.has(o)||t.mapByFilePath.set(o,c))})}(e,t,n),n=!1):22===e.nodeType?(r=!0,function(e,t,n){const r=i.getImportInfo(e.module);let s;r&&r.isImportFound&&(s=r.resolvedPaths[r.resolvedPaths.length-1]);const o={node:e,importResult:r,resolvedPath:s,moduleName:a(e.module),followsNonImportStatement:n};if(t.orderedImports.push(o),s){const e=t.mapByFilePath.get(s);(!e||20===e.node.nodeType||e.moduleName.length>o.moduleName.length)&&t.mapByFilePath.set(s,o)}}(e,t,n),n=!1):n=r}):n=r}),t},t.getTextEditsForAutoImportSymbolAddition=function(e,t,n){const i=[];let o;if(t.node&&22===t.node.nodeType&&!t.node.imports.some(t=>t.name.value===e)){for(const n of t.node.imports){if(n.name.value>e)break;o=n}const a=o?s.TextRange.getEnd(o):t.node.imports.length>0?t.node.imports[0].start:t.node.start+t.node.length,c=r.convertOffsetToPosition(a,n.tokenizerOutput.lines);i.push({range:{start:c,end:c},replacementText:o?", "+e:e+", "})}return i},t.getTextEditsForAutoImportInsertion=function(e,t,n,i,a){const c=[];let l,u=`from ${n} import ${e}`;if(t.orderedImports.length>0){let e=!0,o=t.orderedImports[0],c=0;for(const r of t.orderedImports){const s=r.importResult?r.importResult.importType:c;if(i<s){!e&&c<i&&(u=a.tokenizerOutput.predominantEndOfLineSequence+u);break}if(i===s&&r.moduleName>n)break;if(r.followsNonImportStatement){i>c&&(u=a.tokenizerOutput.predominantEndOfLineSequence+u);break}r===t.orderedImports[t.orderedImports.length-1]&&i>s&&(u=a.tokenizerOutput.predominantEndOfLineSequence+u),e=!e&&i<c&&i===s,c=s,o=r}o?(e?u+=a.tokenizerOutput.predominantEndOfLineSequence:u=a.tokenizerOutput.predominantEndOfLineSequence+u,l=r.convertOffsetToPosition(e?o.node.start:s.TextRange.getEnd(o.node),a.tokenizerOutput.lines)):l={line:0,column:0}}else{l={line:0,column:0};let e=!1;for(const t of a.parseTree.statements){let n=!0;if(48===t.nodeType&&1===t.statements.length){const e=t.statements[0];49===e.nodeType?n=!1:3===e.nodeType&&39===e.leftExpression.nodeType&&o.isDunderName(e.leftExpression.value)&&(n=!1)}if(n){l=r.convertOffsetToPosition(t.start,a.tokenizerOutput.lines),e=!1;break}l=r.convertOffsetToPosition(t.start+t.length,a.tokenizerOutput.lines),e=!0}u+=a.tokenizerOutput.predominantEndOfLineSequence+a.tokenizerOutput.predominantEndOfLineSequence,e?u=a.tokenizerOutput.predominantEndOfLineSequence+u:u+=a.tokenizerOutput.predominantEndOfLineSequence}return c.push({range:{start:l,end:l},replacementText:u}),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasTypeForDeclaration=function(e){switch(e.type){case 0:case 4:case 5:case 3:return!0;case 2:return!!e.node.typeAnnotation;case 1:return!!e.typeAnnotationNode;case 6:return!1}},t.areDeclarationsSame=function(e,t){return e.type===t.type&&(e.path===t.path&&(e.range.start.line===t.range.start.line&&e.range.start.column===t.range.start.column))},t.isFinalVariableDeclaration=function(e){return 1===e.type&&!!e.isFinal}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(26);let s=1;t.indeterminateSymbolId=0;class i{constructor(e=4){this.id=s++,this._flags=e}static createWithType(e,t){const n=new i(e);return n._undeclaredType=t,n}isInitiallyUnbound(){return!!(1&this._flags)}setIsExternallyHidden(){this._flags|=2}isExternallyHidden(){return!!(2&this._flags)}setIsIgnoredForProtocolMatch(){this._flags|=32}isIgnoredForProtocolMatch(){return!!(32&this._flags)}setIsClassMember(){this._flags|=4}isClassMember(){return!!(4&this._flags)}setIsInstanceMember(){this._flags|=8}isInstanceMember(){return!!(8&this._flags)}setIsPrivateMember(){this._flags|=16}isPrivateMember(){return!!(16&this._flags)}addDeclaration(e){if(this._declarations){const t=this._declarations.findIndex(t=>r.areDeclarationsSame(t,e));if(t<0)this._declarations.push(e);else{const n=this._declarations[t];r.hasTypeForDeclaration(e)?(this._declarations[t]=e,1===n.type&&1===e.type&&!e.inferredTypeSource&&n.inferredTypeSource&&(e.inferredTypeSource=n.inferredTypeSource)):1===e.type&&1===n.type&&(e.isFinal&&(n.isFinal=!0),!n.inferredTypeSource&&e.inferredTypeSource&&(n.inferredTypeSource=e.inferredTypeSource))}}else this._declarations=[e]}hasDeclarations(){return!!this._declarations&&this._declarations.length>0}getDeclarations(){return this._declarations?this._declarations:[]}hasTypedDeclarations(){return!!this._undeclaredType||this.getDeclarations().some(e=>r.hasTypeForDeclaration(e))}getTypedDeclarations(){return this.getDeclarations().filter(e=>r.hasTypeForDeclaration(e))}getUndeclaredType(){return this._undeclaredType}}t.Symbol=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(14);t.Event=r.Event;const s=n(82),i=n(83),o=n(40),a=n(41);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(14));const c=n(84),l=n(86),u=n(89);!function(e){e.uriToFilePath=c.uriToFilePath,e.resolveGlobalNodePath=c.resolveGlobalNodePath,e.resolveGlobalYarnPath=c.resolveGlobalYarnPath,e.resolve=c.resolve,e.resolveModulePath=c.resolveModulePath}(t.Files||(t.Files={}));let p=!1,d=void 0;function h(e){if(null!==e)return e}!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(d=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(p?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let n=process.argv[t];if("--clientProcessId"===n&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=n.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();class f{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n;const s=new l.PieceTreeTextBufferBuilder;s.acceptChunk(r);const i=s.finish(!0);this._tree=i.create(1)}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const{start:t,end:n}=e,[r,s]=n.line+1>this.lineCount?[this.lineCount,this._tree.getLineLength(this.lineCount)+1]:[n.line+1,n.character+1],i=new u.Range(t.line+1,t.character+1,r,s);return this._tree.getValueInRange(i)}return this._tree.getLinesRawContent()}update(e,t){const{text:n,range:r}=e;if(null==r)throw new Error(`FullPieceTreeTextDocument#update called with invalid event range ${r}`);const s=this.offsetAt(r.start),i=this.offsetAt(r.end);this._tree.delete(s,i-s),this._tree.insert(s,n),this._version=t}positionAt(e){const t=Math.min(e,this._tree.getLength()),n=this._tree.getPositionAt(t);return r.Position.create(n.lineNumber-1,n.column-1)}offsetAt(e){if(e.line<0)return 0;const t=Math.max(1,e.character+1);return Math.min(this._tree.getOffsetAt(e.line+1,t),this._tree.getLength())}get lineCount(){return this._tree.getLineCount()}}t.TextDocuments=class{constructor(e=r.TextDocumentSyncKind.Full){this._documents=Object.create(null),this._syncKind=e,this._onDidChangeContent=new r.Emitter,this._onDidOpen=new r.Emitter,this._onDidClose=new r.Emitter,this._onDidSave=new r.Emitter,this._onWillSave=new r.Emitter}get syncKind(){return this._syncKind}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=r.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t,n=e.textDocument;switch(this.syncKind){case r.TextDocumentSyncKind.Full:t=r.TextDocument.create(n.uri,n.languageId,n.version,n.text);break;case r.TextDocumentSyncKind.Incremental:t=new f(n.uri,n.languageId,n.version,n.text);break;default:throw new Error(`Invalid TextDocumentSyncKind: ${this.syncKind}`)}this._documents[n.uri]=t;let s=Object.freeze({document:t});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges;if(0===n.length)return;let s=this._documents[t.uri];if(!s||!function(e){return o.func(e.update)}(s))return;const{version:i}=t;if(null==i||void 0===i)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);switch(this.syncKind){case r.TextDocumentSyncKind.Full:let e=n[n.length-1];s.update(e,i),this._onDidChangeContent.fire(Object.freeze({document:s}));break;case r.TextDocumentSyncKind.Incremental:let t=n.reduce((e,t)=>(e.update(t,i),e),s);this._onDidChangeContent.fire(Object.freeze({document:t}));break;case r.TextDocumentSyncKind.None:}}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}},function(e){e.create=function(){return new g}}(t.BulkRegistration||(t.BulkRegistration={}));class g{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const n=o.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);const r=a.generateUuid();this._registrations.push({id:r,method:n,registerOptions:t||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}}!function(e){e.create=function(){return new m(void 0,[])}}(t.BulkUnregistration||(t.BulkUnregistration={}));class m{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(r.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=o.string(e)?e:e.method,n=this._unregistrations.get(t);if(!n)return!1;let s={unregisterations:[n]};return this._connection.sendRequest(r.UnregistrationRequest.type,s).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${n.id} failed.`)}),!0}}class y{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(r.MessageType.Error,e)}warn(e){this.send(r.MessageType.Warning,e)}info(e){this.send(r.MessageType.Info,e)}log(e){this.send(r.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(r.LogMessageNotification.type,{type:e,message:t})}}class _{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let n={type:r.MessageType.Error,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(h)}showWarningMessage(e,...t){let n={type:r.MessageType.Warning,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(h)}showInformationMessage(e,...t){let n={type:r.MessageType.Info,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(h)}}class T{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof g?this.registerMany(e):e instanceof m?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,t,n){const s=o.string(t)?t:t.method,i=a.generateUuid();let c={registrations:[{id:i,method:s,registerOptions:n||{}}]};return e.isAttached||e.attach(this._connection),this._connection.sendRequest(r.RegistrationRequest.type,c).then(t=>(e.add({id:i,method:s}),e),e=>(this.connection.console.info(`Registering request handler for ${s} failed.`),Promise.reject(e)))}registerSingle2(e,t){const n=o.string(e)?e:e.method,s=a.generateUuid();let i={registrations:[{id:s,method:n,registerOptions:t||{}}]};return this._connection.sendRequest(r.RegistrationRequest.type,i).then(e=>r.Disposable.create(()=>{this.unregisterSingle(s,n)}),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let n={unregisterations:[{id:e,method:t}]};return this._connection.sendRequest(r.UnregistrationRequest.type,n).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this._connection.sendRequest(r.RegistrationRequest.type,t).then(()=>new m(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const v=i.WorkspaceFoldersFeature(s.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(n=e)&&n.edit?e:{edit:e};var n;return this._connection.sendRequest(r.ApplyWorkspaceEditRequest.type,t)}}));class b{constructor(){this._trace=r.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==r.Trace.Off&&this._connection.sendNotification(r.LogTraceNotification.type,{message:e,verbose:this._trace===r.Trace.Verbose?t:void 0})}}class E{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this._connection.sendNotification(r.TelemetryEventNotification.type,e)}}function C(e,t){return function(n){return t(e(n))}}function x(e,t){return function(n){return t(e(n))}}function S(e,t){return function(n){return t(e(n))}}function k(e,t){return function(n){return t(e(n))}}function w(e,t){return function(n){return t(e(n))}}function I(e,t){return function(n){return t(e(n))}}t.combineConsoleFeatures=C,t.combineTelemetryFeatures=x,t.combineTracerFeatures=S,t.combineClientFeatures=k,t.combineWindowFeatures=w,t.combineWorkspaceFeatures=I,t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,C),tracer:n(e.tracer,t.tracer,S),telemetry:n(e.telemetry,t.telemetry,x),client:n(e.client,t.client,k),window:n(e.window,t.window,w),workspace:n(e.workspace,t.workspace,I)}},t.createConnection=function(e,t,n,s){let i,a,c,l;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=n,n=s),r.ConnectionStrategy.is(e)?l=e:(a=e,c=t,l=n),function(e,t,n,s){if(!e&&!t&&process.argv.length>2){let n=void 0,s=void 0,o=process.argv.slice(2);for(let a=0;a<o.length;a++){let c=o[a];if("--node-ipc"===c){e=new r.IPCMessageReader(process),t=new r.IPCMessageWriter(process);break}if("--stdio"===c){e=process.stdin,t=process.stdout;break}if("--socket"===c){n=parseInt(o[a+1]);break}if("--pipe"===c){s=o[a+1];break}var i=c.split("=");if("--socket"===i[0]){n=parseInt(i[1]);break}if("--pipe"===i[0]){s=i[1];break}}if(n){let s=r.createServerSocketTransport(n);e=s[0],t=s[1]}else if(s){let n=r.createServerPipeTransport(s);e=n[0],t=n[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+a);if(!t)throw new Error("Connection output stream is not set. "+a);if(o.func(e.read)&&o.func(e.on)){let t=e;t.on("end",()=>{process.exit(p?0:1)}),t.on("close",()=>{process.exit(p?0:1)})}const c=s&&s.console?new(s.console(y)):new y,l=r.createProtocolConnection(e,t,c,n);c.rawAttach(l);const u=s&&s.tracer?new(s.tracer(b)):new b,h=s&&s.telemetry?new(s.telemetry(E)):new E,f=s&&s.client?new(s.client(T)):new T,g=s&&s.window?new(s.window(_)):new _,m=s&&s.workspace?new(s.workspace(v)):new v,C=[c,u,h,f,g,m];let x=void 0,S=void 0,k=void 0,w={listen:()=>l.listen(),sendRequest:(e,...t)=>l.sendRequest(o.string(e)?e:e.method,...t),onRequest:(e,t)=>l.onRequest(e,t),sendNotification:(e,t)=>{const n=o.string(e)?e:e.method;1===arguments.length?l.sendNotification(n):l.sendNotification(n,t)},onNotification:(e,t)=>l.onNotification(e,t),onProgress:l.onProgress,sendProgress:l.sendProgress,onInitialize:e=>S=e,onInitialized:e=>l.onNotification(r.InitializedNotification.type,e),onShutdown:e=>x=e,onExit:e=>k=e,get console(){return c},get telemetry(){return h},get tracer(){return u},get client(){return f},get window(){return g},get workspace(){return m},onDidChangeConfiguration:e=>l.onNotification(r.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>l.onNotification(r.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>l.onNotification(r.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>l.onNotification(r.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>l.onNotification(r.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>l.onNotification(r.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>l.onRequest(r.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>l.onNotification(r.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>l.sendNotification(r.PublishDiagnosticsNotification.type,e),onHover:e=>l.onRequest(r.HoverRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),void 0)),onCompletion:e=>l.onRequest(r.CompletionRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onCompletionResolve:e=>l.onRequest(r.CompletionResolveRequest.type,e),onSignatureHelp:e=>l.onRequest(r.SignatureHelpRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),void 0)),onDeclaration:e=>l.onRequest(r.DeclarationRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onDefinition:e=>l.onRequest(r.DefinitionRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onTypeDefinition:e=>l.onRequest(r.TypeDefinitionRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onImplementation:e=>l.onRequest(r.ImplementationRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onReferences:e=>l.onRequest(r.ReferencesRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onDocumentHighlight:e=>l.onRequest(r.DocumentHighlightRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onDocumentSymbol:e=>l.onRequest(r.DocumentSymbolRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onWorkspaceSymbol:e=>l.onRequest(r.WorkspaceSymbolRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onCodeAction:e=>l.onRequest(r.CodeActionRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onCodeLens:e=>l.onRequest(r.CodeLensRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onCodeLensResolve:e=>l.onRequest(r.CodeLensResolveRequest.type,e),onDocumentFormatting:e=>l.onRequest(r.DocumentFormattingRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),void 0)),onDocumentRangeFormatting:e=>l.onRequest(r.DocumentRangeFormattingRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),void 0)),onDocumentOnTypeFormatting:e=>l.onRequest(r.DocumentOnTypeFormattingRequest.type,e),onRenameRequest:e=>l.onRequest(r.RenameRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),void 0)),onPrepareRename:e=>l.onRequest(r.PrepareRenameRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),void 0)),onDocumentLinks:e=>l.onRequest(r.DocumentLinkRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onDocumentLinkResolve:e=>l.onRequest(r.DocumentLinkResolveRequest.type,e),onDocumentColor:e=>l.onRequest(r.DocumentColorRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onColorPresentation:e=>l.onRequest(r.ColorPresentationRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onFoldingRanges:e=>l.onRequest(r.FoldingRangeRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onSelectionRanges:e=>l.onRequest(r.SelectionRangeRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),F.attachPartialResult(l,t))),onExecuteCommand:e=>l.onRequest(r.ExecuteCommandRequest.type,(t,n)=>e(t,n,F.attachWorkDone(l,t),void 0)),dispose:()=>l.dispose()};for(let e of C)e.attach(w);return l.onRequest(r.InitializeRequest.type,e=>{const t=e.processId;o.number(t)&&void 0===d&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(p?0:1)}},3e3),o.string(e.trace)&&(u.trace=r.Trace.fromString(e.trace));for(let t of C)t.initialize(e.capabilities);if(S){return function(e){return o.thenable(e)?e:Promise.resolve(e)}(S(e,(new r.CancellationTokenSource).token,F.attachWorkDone(l,e),void 0)).then(e=>{if(e instanceof r.ResponseError)return e;let t=e;t||(t={capabilities:{}});let n=t.capabilities;n||(n={},t.capabilities=n),void 0===n.textDocumentSync||null===n.textDocumentSync?n.textDocumentSync=o.number(w.__textDocumentSync)?w.__textDocumentSync:r.TextDocumentSyncKind.None:o.number(n.textDocumentSync)||o.number(n.textDocumentSync.change)||(n.textDocumentSync.change=o.number(w.__textDocumentSync)?w.__textDocumentSync:r.TextDocumentSyncKind.None);for(let e of C)e.fillServerCapabilities(n);return t})}{let e={capabilities:{textDocumentSync:r.TextDocumentSyncKind.None}};for(let t of C)t.fillServerCapabilities(e.capabilities);return e}}),l.onRequest(r.ShutdownRequest.type,()=>(p=!0,x?x((new r.CancellationTokenSource).token):void 0)),l.onNotification(r.ExitNotification.type,()=>{try{k&&k()}finally{p?process.exit(0):process.exit(1)}}),l.onNotification(r.SetTraceNotification.type,e=>{u.trace=r.Trace.fromString(e.value)}),w}(a,c,l,i)};const F=n(90);!function(e){e.all={__brand:"features",window:F.ProgressFeature}}(t.ProposedFeatures||(t.ProposedFeatures={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),s=n(15);let i=8192,o=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0],c="\r\n";class l{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(i)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var s=(Math.ceil((this.index+t.length)/i)+1)*i;0===this.index?(this.buffer=Buffer.allocUnsafe(s),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],s)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==o||this.buffer[t+1]!==a||this.buffer[t+2]!==o||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(c).forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),s=t.substr(n+1).trim();e[r]=s});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&s.func(t.listen)&&s.func(t.dispose)&&s.func(t.onError)&&s.func(t.onClose)&&s.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class u{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${s.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=u;class p extends u{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new l(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=p;t.IPCMessageReader=class extends u{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends p{constructor(e,t="utf-8"){super(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),s=n(15);let i="Content-Length: ",o="\r\n";!function(e){e.is=function(e){let t=e;return t&&s.func(t.dispose)&&s.func(t.onClose)&&s.func(t.onError)&&s.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${s.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a;t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[i,n.toString(),o,o];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose(),this.socket.destroy()}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[i,n.toString(),o,o];try{this.sending=!0,this.socket.write(r.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},function(e,t,n){"use strict";const r=n(0),s="win32"===process.platform,{REGEX_BACKSLASH:i,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_GLOBAL:c}=n(21);t.hasRegexChars=e=>a.test(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(i,"/"),t.removeBackslashes=e=>e.replace(o,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===s||"\\"===r.sep,t.escapeLast=(e,n,r)=>{const s=e.lastIndexOf(n,r);return-1===s?e:"\\"===e[s-1]?t.escapeLast(e,n,s-1):e.slice(0,s)+"\\"+e.slice(s)},t.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n},t.wrapOutput=(e,t={},n={})=>{let r=`${n.contains?"":"^"}(?:${e})${n.contains?"":"$"}`;return!0===t.negated&&(r=`(?:^(?!${r}).*$)`),r}},function(e,t,n){"use strict";const r=n(33);e.exports=(e,t={})=>{let n=(e,s={})=>{let i=t.escapeInvalid&&r.isInvalidBrace(s),o=!0===e.invalid&&!0===t.escapeInvalid,a="";if(e.value)return(i||o)&&r.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)a+=n(t);return a};return n(e)}},function(e,t,n){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,n,r=1,s)=>!1!==s&&(!(!t.isInteger(e)||!t.isInteger(n))&&(Number(n)-Number(e))/Number(r)>=s),t.escapeNode=(e,t=0,n)=>{let r=e.nodes[t];r&&(n&&r.type===n||"open"===r.type||"close"===r.type)&&!0!==r.escaped&&(r.value="\\"+r.value,r.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0?(e.invalid=!0,!0):(!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0))),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],n=e=>{for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?n(s,t):void 0!==s&&t.push(s)}return t};return n(e),t}},function(e,t,n){"use strict";const{sep:r}=n(0),{platform:s}=process;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${r}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=e=>e,t.isWindows="win32"===s,t.isMacos="darwin"===s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(9),i=n(17);class o{constructor(e,t,n){this.extraPaths=[],this.root=e,this.pythonVersion=t||i.latestStablePythonVersion,this.pythonPlatform=n}}function a(){return{strictListInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!1,enableTypeIgnoreComments:!0,reportTypeshedErrors:"none",reportMissingImports:"error",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportInvalidStringEscapeSequence:"warning",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportAssertAlwaysTrue:"warning",reportSelfClsParameterName:"warning",reportImplicitStringConcatenation:"none"}}t.ExecutionEnvironment=o,t.cloneDiagnosticSettings=function(e){return Object.assign({},e)},t.getBooleanDiagnosticSettings=function(){return["strictListInference","strictDictionaryInference","strictParameterNoneValue"]},t.getDiagLevelSettings=function(){return["reportTypeshedErrors","reportMissingImports","reportMissingTypeStubs","reportImportCycles","reportUnusedImport","reportUnusedClass","reportUnusedFunction","reportUnusedVariable","reportDuplicateImport","reportOptionalSubscript","reportOptionalMemberAccess","reportOptionalCall","reportOptionalIterable","reportOptionalContextManager","reportOptionalOperand","reportUntypedFunctionDecorator","reportUntypedClassDecorator","reportUntypedBaseClass","reportUntypedNamedTuple","reportPrivateUsage","reportConstantRedefinition","reportIncompatibleMethodOverride","reportInvalidStringEscapeSequence","reportUnknownParameterType","reportUnknownArgumentType","reportUnknownLambdaType","reportUnknownVariableType","reportUnknownMemberType","reportCallInDefaultInitializer","reportUnnecessaryIsInstance","reportUnnecessaryCast","reportAssertAlwaysTrue","reportSelfClsParameterName","reportImplicitStringConcatenation"]},t.getStrictDiagnosticSettings=function(){return{strictListInference:!0,strictDictionaryInference:!0,strictParameterNoneValue:!0,enableTypeIgnoreComments:!0,reportTypeshedErrors:"error",reportMissingImports:"error",reportMissingTypeStubs:"error",reportImportCycles:"error",reportUnusedImport:"error",reportUnusedClass:"error",reportUnusedFunction:"error",reportUnusedVariable:"error",reportDuplicateImport:"error",reportOptionalSubscript:"error",reportOptionalMemberAccess:"error",reportOptionalCall:"error",reportOptionalIterable:"error",reportOptionalContextManager:"error",reportOptionalOperand:"error",reportUntypedFunctionDecorator:"error",reportUntypedClassDecorator:"error",reportUntypedBaseClass:"error",reportUntypedNamedTuple:"error",reportPrivateUsage:"error",reportConstantRedefinition:"error",reportIncompatibleMethodOverride:"error",reportInvalidStringEscapeSequence:"error",reportUnknownParameterType:"error",reportUnknownArgumentType:"error",reportUnknownLambdaType:"error",reportUnknownVariableType:"error",reportUnknownMemberType:"error",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"error",reportUnnecessaryCast:"error",reportAssertAlwaysTrue:"error",reportSelfClsParameterName:"error",reportImplicitStringConcatenation:"none"}},t.getDefaultDiagnosticSettings=a;t.ConfigOptions=class{constructor(e){this.include=[],this.exclude=[],this.ignore=[],this.strict=[],this.executionEnvironments=[],this.projectRoot=e,this.diagnosticSettings={strictListInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!1,enableTypeIgnoreComments:!0,reportTypeshedErrors:"none",reportMissingImports:"error",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportInvalidStringEscapeSequence:"warning",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportAssertAlwaysTrue:"warning",reportSelfClsParameterName:"warning",reportImplicitStringConcatenation:"none"}}findExecEnvironment(e){let t=this.executionEnvironments.find(t=>{const n=s.ensureTrailingDirectorySeparator(s.normalizePath(s.combinePaths(this.projectRoot,t.root)));return e.startsWith(n)});return t||(t=new o(this.projectRoot,this.defaultPythonVersion,this.defaultPythonPlatform)),t}initializeFromJson(e,t){if(this.include=[],void 0!==e.include)if(Array.isArray(e.include)){e.include.forEach((e,n)=>{"string"!=typeof e?t.log(`Index ${n} of "include" array should be a string.`):r.isAbsolute(e)?t.log(`Ignoring path "${e}" in "include" array because it is not relative.`):this.include.push(s.getFileSpec(this.projectRoot,e))})}else t.log('Config "include" entry must must contain an array.');if(this.exclude=[],void 0!==e.exclude)if(Array.isArray(e.exclude)){e.exclude.forEach((e,n)=>{"string"!=typeof e?t.log(`Index ${n} of "exclude" array should be a string.`):r.isAbsolute(e)?t.log(`Ignoring path "${e}" in "exclude" array because it is not relative.`):this.exclude.push(s.getFileSpec(this.projectRoot,e))})}else t.log('Config "exclude" entry must contain an array.');if(this.ignore=[],void 0!==e.ignore)if(Array.isArray(e.ignore)){e.ignore.forEach((e,n)=>{"string"!=typeof e?t.log(`Index ${n} of "ignore" array should be a string.`):r.isAbsolute(e)?t.log(`Ignoring path "${e}" in "ignore" array because it is not relative.`):this.ignore.push(s.getFileSpec(this.projectRoot,e))})}else t.log('Config "ignore" entry must contain an array.');if(this.strict=[],void 0!==e.strict)if(Array.isArray(e.strict)){e.strict.forEach((e,n)=>{"string"!=typeof e?t.log(`Index ${n} of "strict" array should be a string.`):r.isAbsolute(e)?t.log(`Ignoring path "${e}" in "strict" array because it is not relative.`):this.strict.push(s.getFileSpec(this.projectRoot,e))})}else t.log('Config "strict" entry must contain an array.');const n={strictListInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!1,enableTypeIgnoreComments:!0,reportTypeshedErrors:"none",reportMissingImports:"error",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportInvalidStringEscapeSequence:"warning",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportAssertAlwaysTrue:"warning",reportSelfClsParameterName:"warning",reportImplicitStringConcatenation:"none"};if(this.diagnosticSettings={strictListInference:this._convertBoolean(e.strictListInference,"strictListInference",n.strictListInference),strictDictionaryInference:this._convertBoolean(e.strictDictionaryInference,"strictDictionaryInference",n.strictDictionaryInference),strictParameterNoneValue:this._convertBoolean(e.strictParameterNoneValue,"strictParameterNoneValue",n.strictParameterNoneValue),enableTypeIgnoreComments:this._convertBoolean(e.enableTypeIgnoreComments,"enableTypeIgnoreComments",n.enableTypeIgnoreComments),reportTypeshedErrors:this._convertDiagnosticLevel(e.reportTypeshedErrors,"reportTypeshedErrors",n.reportTypeshedErrors),reportMissingImports:this._convertDiagnosticLevel(e.reportMissingImports,"reportMissingImports",n.reportMissingImports),reportUnusedImport:this._convertDiagnosticLevel(e.reportUnusedImport,"reportUnusedImport",n.reportUnusedImport),reportUnusedClass:this._convertDiagnosticLevel(e.reportUnusedClass,"reportUnusedClass",n.reportUnusedClass),reportUnusedFunction:this._convertDiagnosticLevel(e.reportUnusedFunction,"reportUnusedFunction",n.reportUnusedFunction),reportUnusedVariable:this._convertDiagnosticLevel(e.reportUnusedVariable,"reportUnusedVariable",n.reportUnusedVariable),reportDuplicateImport:this._convertDiagnosticLevel(e.reportDuplicateImport,"reportDuplicateImport",n.reportDuplicateImport),reportMissingTypeStubs:this._convertDiagnosticLevel(e.reportMissingTypeStubs,"reportMissingTypeStubs",n.reportMissingTypeStubs),reportImportCycles:this._convertDiagnosticLevel(e.reportImportCycles,"reportImportCycles",n.reportImportCycles),reportOptionalSubscript:this._convertDiagnosticLevel(e.reportOptionalSubscript,"reportOptionalSubscript",n.reportOptionalSubscript),reportOptionalMemberAccess:this._convertDiagnosticLevel(e.reportOptionalMemberAccess,"reportOptionalMemberAccess",n.reportOptionalMemberAccess),reportOptionalCall:this._convertDiagnosticLevel(e.reportOptionalCall,"reportOptionalCall",n.reportOptionalCall),reportOptionalIterable:this._convertDiagnosticLevel(e.reportOptionalIterable,"reportOptionalIterable",n.reportOptionalIterable),reportOptionalContextManager:this._convertDiagnosticLevel(e.reportOptionalContextManager,"reportOptionalContextManager",n.reportOptionalContextManager),reportOptionalOperand:this._convertDiagnosticLevel(e.reportOptionalOperand,"reportOptionalOperand",n.reportOptionalOperand),reportUntypedFunctionDecorator:this._convertDiagnosticLevel(e.reportUntypedFunctionDecorator,"reportUntypedFunctionDecorator",n.reportUntypedFunctionDecorator),reportUntypedClassDecorator:this._convertDiagnosticLevel(e.reportUntypedClassDecorator,"reportUntypedClassDecorator",n.reportUntypedClassDecorator),reportUntypedBaseClass:this._convertDiagnosticLevel(e.reportUntypedBaseClass,"reportUntypedBaseClass",n.reportUntypedBaseClass),reportUntypedNamedTuple:this._convertDiagnosticLevel(e.reportUntypedNamedTuple,"reportUntypedNamedTuple",n.reportUntypedNamedTuple),reportPrivateUsage:this._convertDiagnosticLevel(e.reportPrivateUsage,"reportPrivateUsage",n.reportPrivateUsage),reportConstantRedefinition:this._convertDiagnosticLevel(e.reportConstantRedefinition,"reportConstantRedefinition",n.reportConstantRedefinition),reportIncompatibleMethodOverride:this._convertDiagnosticLevel(e.reportIncompatibleMethodOverride,"reportIncompatibleMethodOverride",n.reportIncompatibleMethodOverride),reportInvalidStringEscapeSequence:this._convertDiagnosticLevel(e.reportInvalidStringEscapeSequence,"reportInvalidStringEscapeSequence",n.reportInvalidStringEscapeSequence),reportUnknownParameterType:this._convertDiagnosticLevel(e.reportUnknownParameterType,"reportUnknownParameterType",n.reportUnknownParameterType),reportUnknownArgumentType:this._convertDiagnosticLevel(e.reportUnknownArgumentType,"reportUnknownArgumentType",n.reportUnknownArgumentType),reportUnknownLambdaType:this._convertDiagnosticLevel(e.reportUnknownLambdaType,"reportUnknownLambdaType",n.reportUnknownLambdaType),reportUnknownVariableType:this._convertDiagnosticLevel(e.reportUnknownVariableType,"reportUnknownVariableType",n.reportUnknownVariableType),reportUnknownMemberType:this._convertDiagnosticLevel(e.reportUnknownMemberType,"reportUnknownMemberType",n.reportUnknownMemberType),reportCallInDefaultInitializer:this._convertDiagnosticLevel(e.reportCallInDefaultInitializer,"reportCallInDefaultInitializer",n.reportCallInDefaultInitializer),reportUnnecessaryIsInstance:this._convertDiagnosticLevel(e.reportUnnecessaryIsInstance,"reportUnnecessaryIsInstance",n.reportUnnecessaryIsInstance),reportUnnecessaryCast:this._convertDiagnosticLevel(e.reportUnnecessaryCast,"reportUnnecessaryCast",n.reportUnnecessaryCast),reportAssertAlwaysTrue:this._convertDiagnosticLevel(e.reportAssertAlwaysTrue,"reportAssertAlwaysTrue",n.reportAssertAlwaysTrue),reportSelfClsParameterName:this._convertDiagnosticLevel(e.reportSelfClsParameterName,"reportSelfClsParameterName",n.reportSelfClsParameterName),reportImplicitStringConcatenation:this._convertDiagnosticLevel(e.reportImplicitStringConcatenation,"reportImplicitStringConcatenation",n.reportImplicitStringConcatenation)},this.venvPath=void 0,void 0!==e.venvPath&&("string"!=typeof e.venvPath?t.log('Config "venvPath" field must contain a string.'):this.venvPath=s.normalizePath(s.combinePaths(this.projectRoot,e.venvPath))),this.defaultVenv=void 0,void 0!==e.venv&&("string"!=typeof e.venv?t.log('Config "venv" field must contain a string.'):this.defaultVenv=e.venv),this.defaultPythonVersion=void 0,void 0!==e.pythonVersion)if("string"==typeof e.pythonVersion){const n=i.versionFromString(e.pythonVersion);n?this.defaultPythonVersion=n:t.log('Config "pythonVersion" field contains unsupported version.')}else t.log('Config "pythonVersion" field must contain a string.');if(this.defaultPythonPlatform=void 0,void 0!==e.pythonPlatform&&("string"!=typeof e.pythonPlatform?t.log('Config "pythonPlatform" field must contain a string.'):this.defaultPythonPlatform=e.pythonPlatform),this.typeshedPath=void 0,void 0!==e.typeshedPath&&("string"!=typeof e.typeshedPath?t.log('Config "typeshedPath" field must contain a string.'):this.typeshedPath=e.typeshedPath?s.normalizePath(s.combinePaths(this.projectRoot,e.typeshedPath)):""),this.typingsPath=void 0,void 0!==e.typingsPath&&("string"!=typeof e.typingsPath?t.log('Config "typingsPath" field must contain a string.'):this.typingsPath=s.normalizePath(s.combinePaths(this.projectRoot,e.typingsPath))),void 0===this.typingsPath&&(this.typingsPath=s.normalizePath(s.combinePaths(this.projectRoot,"typings"))),this.executionEnvironments=[],void 0!==e.executionEnvironments)if(Array.isArray(e.executionEnvironments)){e.executionEnvironments.forEach((e,n)=>{const r=this._initExecutionEnvironmentFromJson(e,n,t);r&&this.executionEnvironments.push(r)})}else t.log('Config "executionEnvironments" field must contain an array.')}_convertBoolean(e,t,n){return void 0===e?n:"boolean"==typeof e?!!e:(console.log(`Config "${t}" entry must be true or false.`),n)}_convertDiagnosticLevel(e,t,n){return void 0===e?n:"boolean"==typeof e?e?"error":"none":"string"!=typeof e||"error"!==e&&"warning"!==e&&"none"!==e?(console.log(`Config "${t}" entry must be true, false, "error", "warning" or "none".`),n):e}_initExecutionEnvironmentFromJson(e,t,n){try{const r=new o(this.projectRoot,this.defaultPythonVersion,this.defaultPythonPlatform);if(e.root&&"string"==typeof e.root?r.root=s.normalizePath(s.combinePaths(this.projectRoot,e.root)):n.log(`Config executionEnvironments index ${t}: missing root value.`),e.extraPaths)if(Array.isArray(e.extraPaths)){e.extraPaths.forEach((e,i)=>{"string"!=typeof e?n.log(`Config executionEnvironments index ${t}:`+` extraPaths field ${i} must be a string.`):r.extraPaths.push(s.normalizePath(s.combinePaths(this.projectRoot,e)))})}else n.log(`Config executionEnvironments index ${t}: extraPaths field must contain an array.`);if(e.pythonVersion)if("string"==typeof e.pythonVersion){const s=i.versionFromString(e.pythonVersion);s?r.pythonVersion=s:n.log(`Config executionEnvironments index ${t} contains unsupported pythonVersion.`)}else n.log(`Config executionEnvironments index ${t} pythonVersion must be a string.`);return e.pythonPlatform&&("string"==typeof e.pythonPlatform?r.pythonPlatform=e.pythonPlatform:n.log(`Config executionEnvironments index ${t} pythonPlatform must be a string.`)),e.venv&&("string"==typeof e.venv?r.venv=e.venv:n.log(`Config executionEnvironments index ${t} venv must be a string.`)),r}catch(e){n.log(`Config executionEnvironments index ${t} is not accessible.`)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NullConsole=class{constructor(){this.logCount=0,this.errorCount=0}log(e){this.logCount++}error(e){this.errorCount++}};t.StandardConsole=class{log(e){console.log(e)}error(e){console.error(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);!function(e){e[e.Unreachable=1]="Unreachable",e[e.Start=2]="Start",e[e.BranchLabel=4]="BranchLabel",e[e.LoopLabel=8]="LoopLabel",e[e.Assignment=16]="Assignment",e[e.Unbind=32]="Unbind",e[e.WildcardImport=64]="WildcardImport",e[e.TrueCondition=128]="TrueCondition",e[e.FalseCondition=512]="FalseCondition",e[e.Call=1024]="Call",e[e.PreFinallyGate=2048]="PreFinallyGate",e[e.PostFinally=4096]="PostFinally",e[e.AssignmentAlias=8192]="AssignmentAlias"}(t.FlowFlags||(t.FlowFlags={}));let s=1;t.getUniqueFlowNodeId=function(){return s++},t.isCodeFlowSupportedForReference=function e(t){return 39===t.nodeType||36===t.nodeType&&e(t.leftExpression)},t.createKeyForReference=function(e){let t;if(39===e.nodeType)t=e.value;else{t=e.memberName.value;let n=e.leftExpression;for(;36===n.nodeType;)t=n.memberName.value+`.${t}`,n=n.leftExpression;r(39===n.nodeType),t=n.value+`.${t}`}return t}},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function s(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=s,t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&s(e.then)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class s extends r{constructor(){super([s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),"-",s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),"-","4",s._randomHex(),s._randomHex(),s._randomHex(),"-",s._oneOf(s._timeHighBits),s._randomHex(),s._randomHex(),s._randomHex(),"-",s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return s._oneOf(s._chars)}}function i(){return new s}s._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],s._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=i;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return o.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return i().asHex()}},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(44),s=n(87);function i(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}t.AverageBufferSize=65535,t.createUintArray=i;class o{constructor(e,t,n,r,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=s}}function a(e,t=!0){let n=[0],r=1;for(let t=0,s=e.length;t<s;t++){const i=e.charCodeAt(t);13===i?t+1<s&&10===e.charCodeAt(t+1)?(n[r++]=t+2,t++):n[r++]=t+1:10===i&&(n[r++]=t+1)}return t?i(n):n}t.LineStarts=o,t.createLineStartsFast=a,t.createLineStarts=function(e,t){e.length=0,e[0]=0;let n=1,r=0,s=0,a=0,c=!0;for(let i=0,o=t.length;i<o;i++){const l=t.charCodeAt(i);13===l?i+1<o&&10===t.charCodeAt(i+1)?(a++,e[n++]=i+2,i++):(r++,e[n++]=i+1):10===l?(s++,e[n++]=i+1):c&&9!==l&&(l<32||l>126)&&(c=!1)}const l=new o(i(e),r,s,a,c);return e.length=0,l};class c{constructor(e,t,n,r,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=s}}t.Piece=c;class l{constructor(e,t){this.buffer=e,this.lineStarts=t}}t.StringBuffer=l;class u{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==s.SENTINEL&&e.iterate(e.root,e=>(e!==s.SENTINEL&&this._pieces.push(e.piece),!0))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class p{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}valdiate(e){let t=!1,n=this._cache;for(let r=0;r<n.length;r++){let s=n[r];(null===s.node.parent||s.nodeStartOffset>=e)&&(n[r]=null,t=!0)}if(t){let e=[];for(const t of n)null!==t&&e.push(t);this._cache=e}}}t.PieceTreeBase=class{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new l("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=s.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let t=0,n=e.length;t<n;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=a(e[t].buffer));let n=new c(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),r=this.rbInsertRight(r,n)}this._searchCache=new p(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let n=t.AverageBufferSize,r=n-Math.floor(n/3),s=2*r,i="",o=0,c=[];if(this.iterate(this.root,t=>{let n=this.getNodeContent(t),u=n.length;if(o<=r||o+u<s)return i+=n,o+=u,!0;let p=i.replace(/\r\n|\r|\n/g,e);return c.push(new l(p,a(p))),i=n,o=u,!0}),o>0){let t=i.replace(/\r\n|\r|\n/g,e);c.push(new l(t,a(t)))}this.create(c,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new u(this,e)}equal(e){if(this.getLength()!==e.getLength())return!1;if(this.getLineCount()!==e.getLineCount())return!1;return this.iterate(this.root,t=>{if(t===s.SENTINEL)return!0;let n=this.getNodeContent(t),r=n.length,i=e.nodeAt(0),o=e.nodeAt(0+r);return n===e.getValueInRange2(i,o)})}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==s.SENTINEL;)if(r.left!==s.SENTINEL&&r.lf_left+1>=e)r=r.left;else{if(r.lf_left+r.piece.lineFeedCnt+1>=e){return n+=r.size_left,n+(this.getAccumulatedValue(r,e-r.lf_left-2)+t-1)}e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==s.SENTINEL;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){let s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,0===s.index){let e=i-this.getOffsetAt(n+1,1);return new r.Position(n+1,e+1)}return new r.Position(n+1,s.remainder+1)}if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===s.SENTINEL){let t=i-e-this.getOffsetAt(n+1,1);return new r.Position(n+1,t+1)}t=t.right}return new r.Position(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,r);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r.substring(s+e.remainder,s+t.remainder)}let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),o=r.substring(i+e.remainder,i+n.piece.length);for(n=n.next();n!==s.SENTINEL;){let e=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=e.substring(r,r+t.remainder);break}o+=e.substr(r,n.piece.length),n=n.next()}return o}getLinesContent(){return this.getContentOfSubTree(this.root).split(/\r\n|\r|\n/)}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);if(n.remainder===n.node.piece.length){let e=n.node.next();if(!e)return 0;let t=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);return t.buffer.charCodeAt(r)}{let e=this._buffers[n.node.piece.bufferIndex],t=this.offsetInBuffer(n.node.piece.bufferIndex,n.node.piece.start)+n.remainder;return e.buffer.charCodeAt(t)}}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}insert(e,n,r=!1){if(this._EOLNormalized=this._EOLNormalized&&r,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==s.SENTINEL){let{node:r,remainder:s,nodeStartOffset:i}=this.nodeAt(e),o=r.piece,a=o.bufferIndex,l=this.positionInBuffer(r,s);if(0===r.piece.bufferIndex&&o.end.line===this._lastChangeBufferPos.line&&o.end.column===this._lastChangeBufferPos.column&&i+o.length===e&&n.length<t.AverageBufferSize)return this.appendToNode(r,n),void this.computeBufferMetadata();if(i===e)this.insertContentToNodeLeft(n,r),this._searchCache.valdiate(e);else if(i+r.piece.length>e){let e=[],t=new c(o.bufferIndex,l,o.end,this.getLineFeedCnt(o.bufferIndex,l,o.end),this.offsetInBuffer(a,o.end)-this.offsetInBuffer(a,l));if(this.shouldCheckCRLF()&&this.endWithCR(n)){if(10===this.nodeCharCodeAt(r,s)){let e={line:t.start.line+1,column:0};t=new c(t.bufferIndex,e,t.end,this.getLineFeedCnt(t.bufferIndex,e,t.end),t.length-1),n+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(n)){if(13===this.nodeCharCodeAt(r,s-1)){let t=this.positionInBuffer(r,s-1);this.deleteNodeTail(r,t),n="\r"+n,0===r.piece.length&&e.push(r)}else this.deleteNodeTail(r,l)}else this.deleteNodeTail(r,l);let i=this.createNewPieces(n);t.length>0&&this.rbInsertRight(r,t);let u=r;for(let e=0;e<i.length;e++)u=this.rbInsertRight(u,i[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(n,r)}else{let e=this.createNewPieces(n),t=this.rbInsertLeft(null,e[0]);for(let n=1;n<e.length;n++)t=this.rbInsertRight(t,e[n])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===s.SENTINEL)return;let n=this.nodeAt(e),r=this.nodeAt(e+t),i=n.node,o=r.node;if(i===o){let o=this.positionInBuffer(i,n.remainder),a=this.positionInBuffer(i,r.remainder);if(n.nodeStartOffset===e){if(t===i.piece.length){let e=i.next();return s.rbDelete(this,i),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(i,a),this._searchCache.valdiate(e),this.validateCRLFWithPrevNode(i),void this.computeBufferMetadata()}return n.nodeStartOffset+i.piece.length===e+t?(this.deleteNodeTail(i,o),this.validateCRLFWithNextNode(i),void this.computeBufferMetadata()):(this.shrinkNode(i,o,a),void this.computeBufferMetadata())}let a=[],c=this.positionInBuffer(i,n.remainder);this.deleteNodeTail(i,c),this._searchCache.valdiate(e),0===i.piece.length&&a.push(i);let l=this.positionInBuffer(o,r.remainder);this.deleteNodeHead(o,l),0===o.piece.length&&a.push(o);for(let e=i.next();e!==s.SENTINEL&&e!==o;e=e.next())a.push(e);let u=0===i.piece.length?i.prev():i;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let r=t.piece,i={line:r.start.line+1,column:0},o=new c(r.bufferIndex,i,r.end,this.getLineFeedCnt(r.bufferIndex,i,r.end),r.length-1);t.piece=o,e+="\n",s.updateTreeMetadata(this,t,-1,-1),0===t.piece.length&&n.push(t)}let r=this.createNewPieces(e),i=this.rbInsertLeft(t,r[r.length-1]);for(let e=r.length-2;e>=0;e--)i=this.rbInsertLeft(i,r[e]);this.validateCRLFWithPrevNode(i),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");let n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]),s=r;for(let e=1;e<n.length;e++)s=this.rbInsertRight(s,n[e]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){let r=e.piece,s=e.piece.bufferIndex,i=this._buffers[s].lineStarts,o=i[r.start.line]+r.start.column+t,a=r.start.line,c=r.end.line,l=0,u=0,p=0;for(;a<=c&&(l=a+(c-a)/2|0,p=i[l],l!==c);)if(u=i[l+1],o<p)c=l-1;else{if(!(o>=u))break;a=l+1}return n?(n.line=l,n.column=o-p,null):{line:l,column:o-p}}getLineFeedCnt(e,t,n){if(0===n.column)return n.line-t.line;let r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;let s=r[n.line+1],i=r[n.line]+n.column;if(s>i+1)return n.line-t.line;let o=i-1;return 13===this._buffers[e].buffer.charCodeAt(o)?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)s.rbDelete(this,e[t])}createNewPieces(e){if(e.length>t.AverageBufferSize){let n=[];for(;e.length>t.AverageBufferSize;){const r=e.charCodeAt(t.AverageBufferSize-1);let s;13===r||r>=55296&&r<=56319?(s=e.substring(0,t.AverageBufferSize-1),e=e.substring(t.AverageBufferSize-1)):(s=e.substring(0,t.AverageBufferSize),e=e.substring(t.AverageBufferSize));let i=a(s);n.push(new c(this._buffers.length,{line:0,column:0},{line:i.length-1,column:s.length-i[i.length-1]},i.length-1,s.length)),this._buffers.push(new l(s,i))}let r=a(e);return n.push(new c(this._buffers.length,{line:0,column:0},{line:r.length-1,column:e.length-r[r.length-1]},r.length-1,e.length)),this._buffers.push(new l(e,r)),n}let n=this._buffers[0].buffer.length;const r=a(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===n&&0!==n&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let e=0;e<r.length;e++)r[e]+=n+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1)),this._buffers[0].buffer+="_"+e,n+=1}else{if(0!==n)for(let e=0;e<r.length;e++)r[e]+=n;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1)),this._buffers[0].buffer+=e}const i=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,u={line:o,column:i-this._buffers[0].lineStarts[o]},p=new c(0,s,u,this.getLineFeedCnt(0,s,u),i-n);return this._lastChangeBufferPos=u,[p]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,r="",i=this._searchCache.get2(e);if(i){n=i.node;let s=this.getAccumulatedValue(n,e-i.nodeStartLineNumber-1),o=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(i.nodeStartLineNumber+n.piece.lineFeedCnt!==e){let r=this.getAccumulatedValue(n,e-i.nodeStartLineNumber);return o.substring(a+s,a+r-t)}r=o.substring(a+s,a+n.piece.length)}else{let i=0;const o=e;for(;n!==s.SENTINEL;)if(n.left!==s.SENTINEL&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1),a=this._buffers[n.piece.bufferIndex].buffer,c=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:i,nodeStartLineNumber:o-(e-1-n.lf_left)}),a.substring(c+r,c+s-t)}if(n.lf_left+n.piece.lineFeedCnt===e-1){let t=this.getAccumulatedValue(n,e-n.lf_left-2),s=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=s.substring(i+t,i+n.piece.length);break}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}}for(n=n.next();n!==s.SENTINEL;){let e=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let s=this.getAccumulatedValue(n,0),i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=e.substring(i,i+s-t),r}{let t=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=e.substr(t,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==s.SENTINEL;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.valdiate(this._length)}getIndexOf(e,t){let n=e.piece,r=this.positionInBuffer(e,t),s=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let t=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(t!==s)return{index:t,remainder:0}}return{index:s,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[s]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),u=l-r,p=a-i,d=n.length+p;e.piece=new c(n.bufferIndex,n.start,o,l,d),s.updateTreeMetadata(this,e,p,u)}deleteNodeHead(e,t){const n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=a-r,u=i-this.offsetInBuffer(n.bufferIndex,o),p=n.length+u;e.piece=new c(n.bufferIndex,o,n.end,a,p),s.updateTreeMetadata(this,e,u,l)}shrinkNode(e,t,n){const r=e.piece,i=r.start,o=r.end,a=r.length,l=r.lineFeedCnt,u=t,p=this.getLineFeedCnt(r.bufferIndex,r.start,u),d=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,i);e.piece=new c(r.bufferIndex,r.start,u,p,d),s.updateTreeMetadata(this,e,d-a,p-l);let h=new c(r.bufferIndex,n,o,this.getLineFeedCnt(r.bufferIndex,n,o),this.offsetInBuffer(r.bufferIndex,o)-this.offsetInBuffer(r.bufferIndex,n)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const i=a(t,!1);for(let e=0;e<i.length;e++)i[e]+=r;if(n){let e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1));const o=this._buffers[0].lineStarts.length-1,l={line:o,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[o]},u=e.piece.length+t.length,p=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,l),h=d-p;e.piece=new c(e.piece.bufferIndex,e.piece.start,l,d,u),this._lastChangeBufferPos=l,s.updateTreeMetadata(this,e,t.length,h)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==s.SENTINEL;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){r+=t.size_left;let n={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(n),n}e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==s.SENTINEL;)if(n.left!==s.SENTINEL&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2),i=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(s+t-1,i),nodeStartOffset:r}}if(n.lf_left+n.piece.lineFeedCnt===e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:r};t-=n.piece.length-s;break}e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==s.SENTINEL;){if(n.piece.lineFeedCnt>0){let e=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,e),nodeStartOffset:r}}if(n.piece.length>=t-1){return{node:n,remainder:t-1,nodeStartOffset:this.offsetOfNode(n)}}t-=n.piece.length,n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===s.SENTINEL||0===e.piece.lineFeedCnt)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,i=n[r]+t.start.column;return r!==n.length-1&&(!(n[r+1]>i+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(i))}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==s.SENTINEL&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n,r=[],i=this._buffers[e.piece.bufferIndex].lineStarts;n=0===e.piece.end.column?{line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new c(e.piece.bufferIndex,e.piece.start,n,a,o),s.updateTreeMetadata(this,e,-1,-1),0===e.piece.length&&r.push(e);let l={line:t.piece.start.line+1,column:0};const u=t.piece.length-1,p=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new c(t.piece.bufferIndex,l,t.piece.end,p,u),s.updateTreeMetadata(this,t,-1,-1),0===t.piece.length&&r.push(t);let d=this.createNewPieces("\r\n");this.rbInsertRight(e,d[0]);for(let e=0;e<r.length;e++)s.rbDelete(this,r[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+="\n",1===n.piece.length)s.rbDelete(this,n);else{const e=n.piece,t={line:e.start.line+1,column:0},r=e.length-1,i=this.getLineFeedCnt(e.bufferIndex,t,e.end);n.piece=new c(e.bufferIndex,t,e.end,i,r),s.updateTreeMetadata(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===s.SENTINEL)return t(s.SENTINEL);let n=this.iterate(e.left,t);return n?t(e)&&this.iterate(e.right,t):n}getNodeContent(e){if(e===s.SENTINEL)return"";let t,n=this._buffers[e.piece.bufferIndex],r=e.piece,i=this.offsetInBuffer(r.bufferIndex,r.start),o=this.offsetInBuffer(r.bufferIndex,r.end);return t=n.buffer.substring(i,o),t}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){let n=new s.TreeNode(t,1);if(n.left=s.SENTINEL,n.right=s.SENTINEL,n.parent=s.SENTINEL,n.size_left=0,n.lf_left=0,this.root===s.SENTINEL)this.root=n,n.color=0;else if(e.right===s.SENTINEL)e.right=n,n.parent=e;else{let t=s.leftest(e.right);t.left=n,n.parent=t}return s.fixInsert(this,n),n}rbInsertLeft(e,t){let n=new s.TreeNode(t,1);if(n.left=s.SENTINEL,n.right=s.SENTINEL,n.parent=s.SENTINEL,n.size_left=0,n.lf_left=0,this.root===s.SENTINEL)this.root=n,n.color=0;else if(e.left===s.SENTINEL)e.left=n,n.parent=e;else{let t=s.righttest(e.left);t.right=n,n.parent=t}return s.fixInsert(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,e=>(t+=this.getNodeContent(e),!0)),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new r(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return r.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return r.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return r.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){let n=0|e.lineNumber,r=0|t.lineNumber;if(n===r){return(0|e.column)-(0|t.column)}return n-r}clone(){return new r(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new r(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}}t.Position=r},function(e,t,n){"use strict";n.r(t),n.d(t,"URI",(function(){return f}));var r,s,i,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});if("object"==typeof process)i="win32"===process.platform;else if("object"==typeof navigator){var a=navigator.userAgent;i=a.indexOf("Windows")>=0}var c=/^\w[\w\d+.-]*$/,l=/^\//,u=/^\/\//;var p="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,f=function(){function e(e,t,n,r,s,i){void 0===i&&(i=!1),"object"==typeof e?(this.scheme=e.scheme||p,this.authority=e.authority||p,this.path=e.path||p,this.query=e.query||p,this.fragment=e.fragment||p):(this.scheme=function(e,t){return e||t?e:"file"}(e,i),this.authority=t||p,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==d&&(t=d+t):t=d}return t}(this.scheme,n||p),this.query=r||p,this.fragment=s||p,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,i))}return e.isUri=function(t){return t instanceof e||!!t&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString)},Object.defineProperty(e.prototype,"fsPath",{get:function(){return v(this)},enumerable:!0,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,r=e.path,s=e.query,i=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=p),void 0===n?n=this.authority:null===n&&(n=p),void 0===r?r=this.path:null===r&&(r=p),void 0===s?s=this.query:null===s&&(s=p),void 0===i?i=this.fragment:null===i&&(i=p),t===this.scheme&&n===this.authority&&r===this.path&&s===this.query&&i===this.fragment?this:new m(t,n,r,s,i)},e.parse=function(e,t){void 0===t&&(t=!1);var n=h.exec(e);return n?new m(n[2]||p,decodeURIComponent(n[4]||p),decodeURIComponent(n[5]||p),decodeURIComponent(n[7]||p),decodeURIComponent(n[9]||p),t):new m(p,p,p,p,p)},e.file=function(e){var t=p;if(i&&(e=e.replace(/\\/g,d)),e[0]===d&&e[1]===d){var n=e.indexOf(d,2);-1===n?(t=e.substring(2),e=d):(t=e.substring(2,n),e=e.substring(n)||d)}return new m("file",t,e,p,p)},e.from=function(e){return new m(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),b(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new m(t);return n._formatted=t.external,n._fsPath=t._sep===g?t.fsPath:null,n}return t},e}(),g=i?1:void 0,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return o(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=v(this)),this._fsPath},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?b(this,!0):(this._formatted||(this._formatted=b(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=g),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(f),y=((s={})[58]="%3A",s[47]="%2F",s[63]="%3F",s[35]="%23",s[91]="%5B",s[93]="%5D",s[64]="%40",s[33]="%21",s[36]="%24",s[38]="%26",s[39]="%27",s[40]="%28",s[41]="%29",s[42]="%2A",s[43]="%2B",s[44]="%2C",s[59]="%3B",s[61]="%3D",s[32]="%20",s);function _(e,t){for(var n=void 0,r=-1,s=0;s<e.length;s++){var i=e.charCodeAt(s);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||t&&47===i)-1!==r&&(n+=encodeURIComponent(e.substring(r,s)),r=-1),void 0!==n&&(n+=e.charAt(s));else{void 0===n&&(n=e.substr(0,s));var o=y[i];void 0!==o?(-1!==r&&(n+=encodeURIComponent(e.substring(r,s)),r=-1),n+=o):-1===r&&(r=s)}}return-1!==r&&(n+=encodeURIComponent(e.substring(r))),void 0!==n?n:e}function T(e){for(var t=void 0,n=0;n<e.length;n++){var r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=y[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function v(e){var t;return t=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path,i&&(t=t.replace(/\//g,"\\")),t}function b(e,t){var n=t?T:_,r="",s=e.scheme,i=e.authority,o=e.path,a=e.query,c=e.fragment;if(s&&(r+=s,r+=":"),(i||"file"===s)&&(r+=d,r+=d),i){var l=i.indexOf("@");if(-1!==l){var u=i.substr(0,l);i=i.substr(l+1),-1===(l=u.indexOf(":"))?r+=n(u,!1):(r+=n(u.substr(0,l),!1),r+=":",r+=n(u.substr(l+1),!1)),r+="@"}-1===(l=(i=i.toLowerCase()).indexOf(":"))?r+=n(i,!1):(r+=n(i.substr(0,l),!1),r+=i.substr(l))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2))(p=o.charCodeAt(1))>=65&&p<=90&&(o="/"+String.fromCharCode(p+32)+":"+o.substr(3));else if(o.length>=2&&58===o.charCodeAt(1)){var p;(p=o.charCodeAt(0))>=65&&p<=90&&(o=String.fromCharCode(p+32)+":"+o.substr(2))}r+=n(o,!0)}return a&&(r+="?",r+=n(a,!1)),c&&(r+="#",r+=t?c:_(c,!1)),r}},function(e,t,n){"use strict";e.exports=n(96)},function(e,t){
/*!
 * normalize-path <https://github.com/jonschlinkert/normalize-path>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected path to be a string");if("\\"===e||"/"===e)return"/";var n=e.length;if(n<=1)return e;var r="";if(n>4&&"\\"===e[3]){var s=e[2];"?"!==s&&"."!==s||"\\\\"!==e.slice(0,2)||(e=e.slice(2),r="//")}var i=e.split(/[/\\]+/);return!1!==t&&""===i[i.length-1]&&i.pop(),r+i.join("/")}},function(e,t,n){
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var r=n(101),s={"{":"}","(":")","[":"]"},i=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,o=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;e.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(r(e))return!0;var n,a=i;for(t&&!1===t.strict&&(a=o);n=a.exec(e);){if(n[2])return!0;var c=n.index+n[0].length,l=n[1],u=l?s[l]:null;if(l&&u){var p=e.indexOf(u,c);-1!==p&&(c=p+1)}e=e.slice(c)}return!1}},function(e,t,n){"use strict";
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const r=n(16),s=n(104),i=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),o=e=>"number"==typeof e||"string"==typeof e&&""!==e,a=e=>Number.isInteger(+e),c=e=>{let t=`${e}`,n=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++n];);return n>0},l=(e,t,n)=>{if(t>0){let n="-"===e[0]?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return!1===n?String(e):e},u=(e,t)=>{let n="-"===e[0]?"-":"";for(n&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return n?"-"+e:e},p=(e,t,n,r)=>{if(n)return s(e,t,{wrap:!1,...r});let i=String.fromCharCode(e);return e===t?i:`[${i}-${String.fromCharCode(t)}]`},d=(e,t,n)=>{if(Array.isArray(e)){let t=!0===n.wrap,r=n.capture?"":"?:";return t?`(${r}${e.join("|")})`:e.join("|")}return s(e,t,n)},h=(...e)=>new RangeError("Invalid range arguments: "+r.inspect(...e)),f=(e,t,n)=>{if(!0===n.strictRanges)throw h([e,t]);return[]},g=(e,t,n=1,r={})=>{let s=Number(e),i=Number(t);if(!Number.isInteger(s)||!Number.isInteger(i)){if(!0===r.strictRanges)throw h([e,t]);return[]}0===s&&(s=0),0===i&&(i=0);let o=s>i,a=String(e),f=String(t),g=String(n);n=Math.max(Math.abs(n),1);let m=c(a)||c(f)||c(g),y=m?Math.max(a.length,f.length,g.length):0,_=!1===m&&!1===((e,t,n)=>"string"==typeof e||"string"==typeof t||!0===n.stringify)(e,t,r),T=r.transform||(e=>t=>!0===e?Number(t):String(t))(_);if(r.toRegex&&1===n)return p(u(e,y),u(t,y),!0,r);let v={negatives:[],positives:[]},b=e=>v[e<0?"negatives":"positives"].push(Math.abs(e)),E=[],C=0;for(;o?s>=i:s<=i;)!0===r.toRegex&&n>1?b(s):E.push(l(T(s,C),y,_)),s=o?s-n:s+n,C++;return!0===r.toRegex?n>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let n,r=t.capture?"":"?:",s="",i="";return e.positives.length&&(s=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n=s&&i?`${s}|${i}`:s||i,t.wrap?`(${r}${n})`:n})(v,r):d(E,null,{wrap:!1,...r}):E},m=(e,t,n,r={})=>{if(null==t&&o(e))return[e];if(!o(e)||!o(t))return f(e,t,r);if("function"==typeof n)return m(e,t,1,{transform:n});if(i(n))return m(e,t,0,n);let s={...r};return!0===s.capture&&(s.wrap=!0),n=n||s.step||1,a(n)?a(e)&&a(t)?g(e,t,n,s):((e,t,n=1,r={})=>{if(!a(e)&&e.length>1||!a(t)&&t.length>1)return f(e,t,r);let s=r.transform||(e=>String.fromCharCode(e)),i=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),c=i>o,l=Math.min(i,o),u=Math.max(i,o);if(r.toRegex&&1===n)return p(l,u,!1,r);let h=[],g=0;for(;c?i>=o:i<=o;)h.push(s(i,g)),i=c?i-n:i+n,g++;return!0===r.toRegex?d(h,null,{wrap:!1,options:r}):h})(e,t,Math.max(Math.abs(n),1),s):null==n||i(n)?m(e,t,1,n):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(n,s)};e.exports=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(42),s=n(7),i=n(9),o=new Map;function a(e,t){const n=e||"",a=o.get(n);if(a)return a;let c=[];try{const n=global.__rootDirectory;n&&process.chdir(n);const o=["-c","import sys, json; json.dump(sys.path, sys.stdout)"];let a;e?(t.push(`Executing interpreter at '${e}'`),a=r.execFileSync(e,o,{encoding:"utf8"})):(t.push("Executing python interpreter"),a=r.execFileSync("python",o,{encoding:"utf8"}));try{const e=JSON.parse(a);for(let n of e)if(n=n.trim(),n){const e=i.normalizePath(n);s.existsSync(e)&&i.isDirectory(e)?c.push(e):t.push(`Skipping '${e}' because it is not a valid directory`)}0===c.length&&t.push("Found no valid directories")}catch(e){throw t.push(`Could not parse output: '${a}'`),e}}catch(e){c=[]}return o.set(n,c),t.push(`Received ${c.length} paths from interpreter`),c.forEach(e=>{t.push(`  ${e}`)}),c}t.getTypeShedFallbackPath=function(){let e=global.__rootDirectory;if(e)return e=i.normalizePath(e),i.combinePaths(i.getDirectoryPath(i.ensureTrailingDirectorySeparator(e)),"typeshed-fallback")},t.getTypeshedSubdirectory=function(e,t){return i.combinePaths(e,t?"stdlib":"third_party")},t.findPythonSearchPaths=function(e,t,n){let r;if(n.push("Finding python search paths"),void 0!==t?e.venvPath&&(r=i.combinePaths(e.venvPath,t)):e.defaultVenv&&e.venvPath&&(r=i.combinePaths(e.venvPath,e.defaultVenv)),r){let e=i.combinePaths(r,"lib");if(s.existsSync(e)?n.push(`Found path '${e}'; looking for site-packages`):(n.push(`Did not find '${e}'; trying 'Lib' instead`),e=i.combinePaths(r,"Lib"),s.existsSync(e)?n.push(`Found path '${e}'; looking for site-packages`):(n.push(`Did not find '${e}'`),e="")),e){const t=i.combinePaths(e,"site-packages");if(s.existsSync(t))return n.push(`Found path '${t}'`),[t];n.push(`Did not find '${t}', so looking for python subdirectory`);const r=i.getFileSystemEntries(e);for(let t=0;t<r.directories.length;t++){const o=r.directories[t];if(o.startsWith("python")){const t=i.combinePaths(e,o,"site-packages");if(s.existsSync(t))return n.push(`Found path '${t}'`),[t];n.push(`Path '${t}' is not a valid directory`)}}}n.push("Did not find site-packages. Falling back on python interpreter.")}return a(e.pythonPath,n)},t.getPythonPathFromPythonInterpreter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),s=n(2);class i{constructor(e){this._diagnostics=[],this._diagnostics=e||[]}fetchAndClear(){const e=this._diagnostics;return this._diagnostics=[],e}addError(e,t){return this.addDiagnostic(new r.Diagnostic(0,e,t))}addWarning(e,t){return this.addDiagnostic(new r.Diagnostic(1,e,t))}addUnusedCode(e,t){return this.addDiagnostic(new r.Diagnostic(2,e,t))}addDiagnostic(e){return this._diagnostics.push(e),e}addDiagnostics(e){this._diagnostics.push(...e)}getErrors(){return this._diagnostics.filter(e=>0===e.category)}getWarnings(){return this._diagnostics.filter(e=>1===e.category)}}t.DiagnosticSink=i;t.TextRangeDiagnosticSink=class extends i{constructor(e,t){super(t),this._lines=e}addErrorWithTextRange(e,t){return this.addError(e,s.convertOffsetsToRange(t.start,t.start+t.length,this._lines))}addWarningWithTextRange(e,t){return this.addWarning(e,s.convertOffsetsToRange(t.start,t.start+t.length,this._lines))}addUnusedCodeWithTextRange(e,t){return this.addUnusedCode(e,s.convertOffsetsToRange(t.start,t.start+t.length,this._lines))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);t.TextRangeCollection=class{constructor(e){this._items=e}get start(){return this._items.length>0?this._items[0].start:0}get end(){const e=this._items[this._items.length-1];return this._items.length>0?e.start+e.length:0}get length(){return this.end-this.start}get count(){return this._items.length}contains(e){return e>=this.start&&e<this.end}getItemAt(e){if(e<0||e>=this._items.length)throw new Error("index is out of range");return this._items[e]}getItemAtPosition(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>this.end)return-1;let t=0,n=this.count-1;for(;t<n;){const r=Math.floor(t+(n-t)/2),s=this._items[r];if(e>=s.start&&(r>=this.count-1||e<this._items[r+1].start))return r;e<s.start?n=r-1:t=r+1}return t}getItemContaining(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>this.end)return-1;let t=0,n=this.count-1;for(;t<=n;){const s=Math.floor(t+(n-t)/2),i=this._items[s];if(r.TextRange.contains(i,e))return s;if(s<this.count-1&&r.TextRange.getEnd(i)<=e&&e<this._items[s+1].start)return-1;e<i.start?n=s-1:t=s+1}return-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._typeMap=new Map,this._isNarrowableMap=new Map}clone(){const e=new r;return this._typeMap.forEach((t,n)=>{e.set(n,t,this.isNarrowable(n))}),e}has(e){return this._typeMap.has(e)}get(e){return this._typeMap.get(e)}set(e,t,n){this._typeMap.set(e,t),this._isNarrowableMap.set(e,n)}size(){return this._typeMap.size}isNarrowable(e){const t=this._isNarrowableMap.get(e);return void 0===t||t}}t.TypeVarMap=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commandCreateTypeStub="pyright.createtypestub",t.commandOrderImports="pyright.organizeimports",t.commandAddMissingOptionalToParam="pyright.addoptionalforparam"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(8),i=n(51),o=n(2),a=n(17),c=n(22),l=n(18),u=n(56),p=n(130),d=n(58);class h{constructor(){this.isStubFile=!1,this.pythonVersion=a.latestStablePythonVersion}}t.ParseOptions=h;class f{constructor(){this._tokenIndex=0,this._parseOptions=new h,this._diagSink=new i.DiagnosticSink,this._isInLoop=!1,this._isInFinally=!1,this._isParsingTypeAnnotation=!1,this._isParsingIndexTrailer=!1,this._futureImportMap=new Map,this._importedModules=[],this._containsWildcardImport=!1,this._assignmentExpressionsAllowed=!0}parseSourceFile(e,t,n){c.timingStats.tokenizeFileTime.timeOperation(()=>{this._startNewParse(e,0,e.length,t,n)});const s=l.ModuleNode.create({start:0,length:e.length});return c.timingStats.parseFileTime.timeOperation(()=>{for(;!this._atEof();)if(!this._consumeTokenIfType(2)){let e=this._peekToken();3===e.type&&(this._getNextToken(),e=this._peekToken(),this._addError("Unexpected indentation",e));const t=this._parseStatement();t?(t.parent=s,s.statements.push(t)):this._consumeTokensUntilType(2)}}),r(void 0!==this._tokenizerOutput),{text:e,parseTree:s,importedModules:this._importedModules,futureImports:this._futureImportMap,tokenizerOutput:this._tokenizerOutput,containsWildcardImport:this._containsWildcardImport}}parseTextExpression(e,t,n,r,s){const o=new i.DiagnosticSink;let a;return this._startNewParse(e,t,n,r,o),s?this._parseTypeAnnotation(()=>{a=this._parseAtomExpression()}):a=this._parseTestExpression(!1),2===this._peekTokenType()&&this._getNextToken(),this._atEof()||this._addError("Unexpected token at end of expression",this._peekToken()),{parseTree:a,lines:this._tokenizerOutput.lines,diagnostics:o.fetchAndClear()}}_startNewParse(e,t,n,r,s){this._fileContents=e,this._parseOptions=r,this._diagSink=s;const i=new p.Tokenizer;this._tokenizerOutput=i.tokenize(e,t,n),this._tokenIndex=0}_parseStatement(){switch(this._consumeTokenIfType(4)&&this._addError("Unindent not expected",this._peekToken()),this._peekKeywordType()){case 19:return this._parseIfStatement();case 33:return this._parseWhileStatement();case 16:return this._parseForStatement();case 32:return this._parseTryStatement();case 34:return this._parseWithStatement();case 9:return this._parseFunctionDef();case 6:return this._parseClassDef();case 3:return this._parseAsyncStatement()}return 21===this._peekOperatorType()?this._parseDecorated():this._parseSimpleStatement()}_parseAsyncStatement(){const e=this._getKeywordToken(3);switch(this._peekKeywordType()){case 9:return this._parseFunctionDef(e);case 34:return this._parseWithStatement(e);case 16:return this._parseForStatement(e)}this._addError('Expected "def", "with" or "for" to follow "async".',e)}_parseIfStatement(e=19){const t=this._getKeywordToken(e),n=this._parseTestExpression(!0),r=this._parseSuite(),s=l.IfNode.create(t,n,r);return this._consumeTokenIfKeyword(12)?(s.elseSuite=this._parseSuite(),s.elseSuite.parent=s,l.extendRange(s,s.elseSuite)):11===this._peekKeywordType()&&(s.elseSuite=this._parseIfStatement(11),s.elseSuite.parent=s,l.extendRange(s,s.elseSuite)),s}_parseLoopSuite(){const e=this._isInLoop,t=this._isInFinally;this._isInLoop=!0,this._isInFinally=!1;const n=this._parseSuite();return this._isInLoop=e,this._isInFinally=t,n}_parseSuite(){const e=this._peekToken(),t=l.SuiteNode.create(e);if(!this._consumeTokenIfType(10))return this._addError('Expected ":"',e),t;if(this._consumeTokenIfType(2))for(this._consumeTokenIfType(3)||this._addError("Expected indented block",this._peekToken());;){let e=this._peekToken();3===e.type&&(this._getNextToken(),e=this._peekToken(),this._addError("Unexpected indentation",e));const n=this._parseStatement();n?(n.parent=t,t.statements.push(n)):this._consumeTokensUntilType(2);const r=this._peekToken();if(this._consumeTokenIfType(4)){r.matchesIndent||this._addError("Unindent amount does not match previous indent",r);break}if(1===this._peekTokenType())break}else{const e=this._parseSimpleStatement();t.statements.push(e),e.parent=t}return t.statements.length>0&&l.extendRange(t,t.statements[t.statements.length-1]),t}_parseForStatement(e){const t=this._getKeywordToken(16),n=this._parseExpressionList(!0),r=this._makeExpressionOrTuple(n);let s,i,o;this._consumeTokenIfKeyword(21)?(s=this._parseTestListAsExpression(2,'Expected expression after "in"'),i=this._parseLoopSuite(),this._consumeTokenIfKeyword(12)&&(o=this._parseSuite())):(s=this._handleExpressionParseError(0,'Expected "in"'),i=l.SuiteNode.create(this._peekToken()));const a=l.ForNode.create(t,r,s,i);return a.elseSuite=o,o&&(l.extendRange(a,o),o.parent=a),e&&(a.isAsync=!0,l.extendRange(a,e)),a}_tryParseListComprehension(e){const t=this._tryParseCompForStatement();if(!t)return;const n=l.ListComprehensionNode.create(e),r=[t];for(;;){const e=this._tryParseCompForStatement()||this._tryParseCompIfStatement();if(!e)break;e.parent=n,r.push(e)}return n.comprehensions=r,r.length>0&&(r.forEach(e=>{e.parent=n}),l.extendRange(n,r[r.length-1])),n}_tryParseCompForStatement(){const e=this._peekKeywordType();if(3===e){const e=this._peekToken(1);if(8!==e.type||16!==e.keywordType)return}else if(16!==e)return;let t;3===this._peekKeywordType()&&(t=this._getKeywordToken(3));const n=this._getKeywordToken(16),r=this._parseExpressionList(!0),s=this._makeExpressionOrTuple(r);let i;this._consumeTokenIfKeyword(21)?this._disallowAssignmentExpression(()=>{i=this._parseOrTest()}):i=this._handleExpressionParseError(0,'Expected "in"');const o=l.ListComprehensionForNode.create(t||n,s,i);return t&&(o.isAsync=!0),o}_tryParseCompIfStatement(){if(19!==this._peekKeywordType())return;const e=this._getKeywordToken(19),t=this._tryParseLambdaExpression()||this._parseAssignmentExpression();return l.ListComprehensionIfNode.create(e,t)}_parseWhileStatement(){const e=this._getKeywordToken(33),t=l.WhileNode.create(e,this._parseTestExpression(!0),this._parseLoopSuite());return this._consumeTokenIfKeyword(12)&&(t.elseSuite=this._parseSuite(),t.elseSuite.parent=t,l.extendRange(t,t.elseSuite)),t}_parseTryStatement(){const e=this._getKeywordToken(32),t=this._parseSuite(),n=l.TryNode.create(e,t);let r=!1;for(;;){const e=this._peekToken();if(!this._consumeTokenIfKeyword(13))break;let t,s;10!==this._peekTokenType()&&(t=this._parseTestExpression(!0),this._consumeTokenIfKeyword(1)&&(s=this._getTokenIfIdentifier(),s||this._addError('Expected symbol name after "as"',this._peekToken()))),t?r&&this._addError("A named except clause cannot appear after catch-all except clause",t):(r&&this._addError("Only one catch-all except clause is allowed",e),r=!0);const i=this._parseSuite(),o=l.ExceptNode.create(e,i);t&&(o.typeExpression=t,o.typeExpression.parent=o),s&&(o.name=l.NameNode.create(s),o.name.parent=o),n.exceptClauses.push(o),o.parent=n}return n.exceptClauses.length>0&&(l.extendRange(n,n.exceptClauses[n.exceptClauses.length-1]),this._consumeTokenIfKeyword(12)&&(n.elseSuite=this._parseSuite(),n.elseSuite.parent=n,l.extendRange(n,n.elseSuite))),this._consumeTokenIfKeyword(15)&&(n.finallySuite=this._parseSuite(),n.finallySuite.parent=n,l.extendRange(n,n.finallySuite)),n}_parseFunctionDef(e,t){const n=this._getKeywordToken(9),r=this._getTokenIfIdentifier();if(!r)return this._addError('Expected function name after "def"',n),l.ErrorNode.create(n,10);if(!this._consumeTokenIfType(13))return this._addError('Expected "("',this._peekToken()),l.ErrorNode.create(r,10,l.NameNode.create(r));const s=this._parseVarArgsList(14,!0);let i;this._consumeTokenIfType(14)||(this._addError('Expected ")"',this._peekToken()),this._consumeTokensUntilType(10)),this._consumeTokenIfType(21)&&this._parseTypeAnnotation(()=>{i=this._parseAtomExpression()});const o=this._parseSuite(),a=l.FunctionNode.create(n,l.NameNode.create(r),o);return e&&(a.isAsync=!0,l.extendRange(a,e)),a.parameters=s,s.forEach(e=>{e.parent=a}),t&&(a.decorators=t,t.forEach(e=>{e.parent=a}),t.length>0&&l.extendRange(a,t[0])),i&&(a.returnTypeAnnotation=i,a.returnTypeAnnotation.parent=a,l.extendRange(a,i)),a}_parseVarArgsList(e,t){const n=new Map,r=[];let s=!1,i=!1,o=!1,a=!1,c=!1,l=!1;for(;this._peekTokenType()!==e;){const u=this._parseParameter(t);if(!u){this._consumeTokensUntilType(e);break}if(u.name){const e=u.name.value;n.set(e,e)||this._addError(`Duplicate parameter '${e}'`,u.name)}if(0===u.category&&(u.name?u.defaultValue?s=!0:s&&!o&&(i||(this._addError("Non-default argument follows default argument",u),i=!0)):(a?this._addError("Only one '/' parameter is allowed",u):o&&this._addError("'/' parameter must appear before '*' parameter",u),a=!0)),r.push(u),1===u.category&&(u.name?(c&&this._addError("Only one '*' parameter is allowed",u),c=!0):(o&&this._addError("Only one '*' separator is allowed",u),o=!0)),2===u.category?(l&&this._addError("Only one '**' parameter is allowed",u),l=!0):l&&this._addError("Parameter cannot follow '**' parameter",u),!this._consumeTokenIfType(12))break}if(r.length>0){const e=r[r.length-1];1!==e.category||e.name||this._addError("Named argument must follow '*'",e)}return r}_parseParameter(e){let t=0,n=0;const r=this._peekToken();this._consumeTokenIfOperator(25)?t=1:this._consumeTokenIfOperator(28)?t=2:this._consumeTokenIfOperator(10)&&(this._getLanguageVersion()<a.PythonVersion.V38&&this._addError("Position-only argument separator requires Python 3.8 or greater",r),n=1);const s=this._getTokenIfIdentifier();if(!s){if(1===t){return l.ParameterNode.create(r,1)}if(1===n){return l.ParameterNode.create(r,0)}this._addError("Expected parameter name",this._peekToken())}let i=0;1===t?i=1:2===t&&(i=2);const o=l.ParameterNode.create(r,i);return s&&(o.name=l.NameNode.create(s),o.name.parent=o,l.extendRange(o,s)),e&&this._consumeTokenIfType(10)&&this._parseTypeAnnotation(()=>{o.typeAnnotation=this._parseAtomExpression(),o.typeAnnotation.parent=o,l.extendRange(o,o.typeAnnotation)}),this._consumeTokenIfOperator(2)&&(o.defaultValue=this._parseTestExpression(!1),o.defaultValue.parent=o,l.extendRange(o,o.defaultValue),t>0&&this._addError("Parameter with '*' or '**' cannot have default value",o.defaultValue)),o}_parseWithStatement(e){const t=this._getKeywordToken(34),n=[];for(;n.push(this._parseWithItem()),this._consumeTokenIfType(12););const r=this._parseSuite(),s=l.WithNode.create(t,r);return e&&(s.isAsync=!0,l.extendRange(s,e)),s.withItems=n,n.forEach(e=>{e.parent=s}),s}_parseWithItem(){const e=this._parseTestExpression(!0),t=l.WithItemNode.create(e);return this._consumeTokenIfKeyword(1)&&(t.target=this._parseExpression(!1),t.target.parent=t,l.extendRange(t,t.target)),t}_parseDecorated(){const e=[];for(;21===this._peekOperatorType();)e.push(this._parseDecorator());const t=this._peekToken();if(8===t.type)if(3===t.keywordType){if(this._getNextToken(),9===this._peekKeywordType())return this._parseFunctionDef(t,e);this._addError('Expected function definition after "async"',this._peekToken())}else{if(9===t.keywordType)return this._parseFunctionDef(void 0,e);if(6===t.keywordType)return this._parseClassDef(e)}return this._addError("Expected function or class declaration after decorator",this._peekToken()),l.ClassNode.createDummyForDecorators(e)}_parseDecorator(){const e=this._getNextToken();let t;for(r.equal(e.operatorType,21);;){const e=this._getTokenIfIdentifier();if(!e){this._addError("Expected decorator name",this._peekToken()),t=t?l.ErrorNode.create(this._peekToken(),7,t):l.ErrorNode.create(this._peekToken(),4);break}const n=l.NameNode.create(e);if(t=t?l.MemberAccessNode.create(t,n):n,!this._consumeTokenIfType(20))break}const n=l.DecoratorNode.create(e,t);if(this._consumeTokenIfType(13)){n.arguments=this._parseArgList(),n.arguments.forEach(e=>{e.parent=n,l.extendRange(n,e)});const e=this._peekToken();this._consumeTokenIfType(14)?l.extendRange(n,e):this._addError('Expected ")"',this._peekToken())}return this._consumeTokenIfType(2)||(this._addError("Expected new line at end of decorator",this._peekToken()),this._consumeTokensUntilType(2)),n}_parseClassDef(e){const t=this._getKeywordToken(6);let n=this._getTokenIfIdentifier();n||(this._addError("Expected class name",this._peekToken()),n=d.IdentifierToken.create(0,0,"",void 0));let r=[];this._consumeTokenIfType(13)&&(r=this._parseArgList(),this._consumeTokenIfType(14)||this._addError('Expected ")"',this._peekToken()));const s=this._parseSuite(),i=l.ClassNode.create(t,l.NameNode.create(n),s);return i.arguments=r,r.forEach(e=>{e.parent=i}),e&&(i.decorators=e,e.length>0&&(e.forEach(e=>{e.parent=i}),l.extendRange(i,e[0]))),i}_parsePassStatement(){return l.PassNode.create(this._getKeywordToken(28))}_parseBreakStatement(){const e=this._getKeywordToken(5);return this._isInLoop||this._addError('"break" can be used only within a loop',e),l.BreakNode.create(e)}_parseContinueStatement(){const e=this._getKeywordToken(7);return this._isInLoop?this._isInFinally&&this._addError('"continue" cannot be used within a finally clause',e):this._addError('"continue" can be used only within a loop',e),l.ContinueNode.create(e)}_parseReturnStatement(){const e=this._getKeywordToken(30),t=l.ReturnNode.create(e);if(!this._isNextTokenNeverExpression()){const e=this._parseTestOrStarListAsExpression(!0,2,'Expected expression after "return"');this._reportConditionalErrorForStarTupleElement(e),t.returnExpression=e,t.returnExpression.parent=t,l.extendRange(t,e)}return t}_parseFromStatement(){const e=this._getKeywordToken(17),t=this._parseDottedModuleName(!0),n=l.ImportFromNode.create(e,t),r=0===t.leadingDots&&1===t.nameParts.length&&"__future__"===t.nameParts[0].value,s=this._peekToken();if(this._consumeTokenIfKeyword(20)){l.extendRange(n,s);const e=this._peekToken();if(this._consumeTokenIfOperator(25))l.extendRange(n,e),n.isWildcardImport=!0,this._containsWildcardImport=!0;else{const e=this._consumeTokenIfType(13);for(;;){const e=this._getTokenIfIdentifier();if(!e)break;const t=l.ImportFromAsNode.create(l.NameNode.create(e));if(this._consumeTokenIfKeyword(1)){const e=this._getTokenIfIdentifier();e?(t.alias=l.NameNode.create(e),t.alias.parent=t,l.extendRange(t,e)):this._addError("Expected alias symbol name",this._peekToken())}if(n.imports.push(t),t.parent=n,l.extendRange(n,t),r&&this._futureImportMap.set(e.value,!0),!this._consumeTokenIfType(12))break}if(0===n.imports.length&&this._addError("Expected one or more symbol names after import",this._peekToken()),e){n.usesParens=!0;const e=this._peekToken();this._consumeTokenIfType(14)?l.extendRange(n,e):this._addError('Expected ")"',this._peekToken())}}}else this._addError('Expected "import"',this._peekToken()),t.hasTrailingDot||(n.missingImportKeyword=!0);return this._importedModules.push({nameNode:n.module,leadingDots:n.module.leadingDots,nameParts:n.module.nameParts.map(e=>e.value),importedSymbols:n.imports.map(e=>e.name.value)}),n}_parseImportStatement(){const e=this._getKeywordToken(20),t=l.ImportNode.create(e);for(;;){const e=this._parseDottedModuleName(),n=l.ImportAsNode.create(e);if(this._consumeTokenIfKeyword(1)){const e=this._getTokenIfIdentifier();e?(n.alias=l.NameNode.create(e),n.alias.parent=n,l.extendRange(n,n.alias)):this._addError('Expected identifier after "as"',this._peekToken())}if(t.list.push(n),n.parent=t,this._importedModules.push({nameNode:n.module,leadingDots:n.module.leadingDots,nameParts:n.module.nameParts.map(e=>e.value),importedSymbols:void 0}),!this._consumeTokenIfType(12))break}return t.list.length>0&&l.extendRange(t,t.list[t.list.length-1]),t}_parseDottedModuleName(e=!1){const t=l.ModuleNameNode.create(this._peekToken());for(;;)if(this._consumeTokenIfType(19))t.leadingDots+=3;else{if(!this._consumeTokenIfType(20))break;t.leadingDots++}for(;;){const n=this._getTokenIfIdentifier([20]);if(!n){e&&0!==t.leadingDots||(this._addError("Expected module name",this._peekToken()),t.hasTrailingDot=!0);break}const r=l.NameNode.create(n);t.nameParts.push(r),r.parent=t,l.extendRange(t,r);const s=this._peekToken();if(!this._consumeTokenIfType(20))break;l.extendRange(t,s)}return t}_parseGlobalStatement(){const e=this._getKeywordToken(18),t=l.GlobalNode.create(e);return t.nameList=this._parseNameList(),t.nameList.length>0&&(t.nameList.forEach(e=>{e.parent=t}),l.extendRange(t,t.nameList[t.nameList.length-1])),t}_parseNonlocalStatement(){const e=this._getKeywordToken(25),t=l.NonlocalNode.create(e);return t.nameList=this._parseNameList(),t.nameList.length>0&&(t.nameList.forEach(e=>{e.parent=t}),l.extendRange(t,t.nameList[t.nameList.length-1])),t}_parseNameList(){const e=[];for(;;){const t=this._getTokenIfIdentifier();if(!t){this._addError("Expected identifier",this._peekToken());break}if(e.push(l.NameNode.create(t)),!this._consumeTokenIfType(12))break}return e}_parseRaiseStatement(){const e=this._getKeywordToken(29),t=l.RaiseNode.create(e);return this._isNextTokenNeverExpression()||(t.typeExpression=this._parseTestExpression(!0),t.typeExpression.parent=t,l.extendRange(t,t.typeExpression),this._consumeTokenIfKeyword(17)?(t.valueExpression=this._parseTestExpression(!0),t.valueExpression.parent=t,l.extendRange(t,t.valueExpression)):this._consumeTokenIfType(12)&&(t.valueExpression=this._parseTestExpression(!0),t.valueExpression.parent=t,l.extendRange(t,t.valueExpression),this._consumeTokenIfType(12)&&(t.tracebackExpression=this._parseTestExpression(!0),t.tracebackExpression.parent=t,l.extendRange(t,t.tracebackExpression)))),t}_parseAssertStatement(){const e=this._getKeywordToken(2),t=this._parseTestExpression(!0),n=l.AssertNode.create(e,t);if(this._consumeTokenIfType(12)){const e=this._parseTestExpression(!0);n.exceptionExpression=e,n.exceptionExpression.parent=n,l.extendRange(n,e)}return n}_parseDelStatement(){const e=this._getKeywordToken(10),t=this._parseExpressionList(!0);t.parseError||0!==t.list.length||this._addError('Expected expression after "del"',this._peekToken());const n=l.DelNode.create(e);return n.expressions=t.list,n.expressions.length>0&&(n.expressions.forEach(e=>{e.parent=n}),l.extendRange(n,n.expressions[n.expressions.length-1])),n}_parseYieldExpression(){const e=this._getKeywordToken(35),t=this._peekToken();if(this._consumeTokenIfKeyword(17))return this._getLanguageVersion()<a.PythonVersion.V33&&this._addError("Use of 'yield from' requires Python 3.3 or newer",t),l.YieldFromNode.create(e,this._parseTestExpression(!0));let n;return this._isNextTokenNeverExpression()||(n=this._parseTestOrStarListAsExpression(!0,2,"Expected expression in yield statement"),this._reportConditionalErrorForStarTupleElement(n)),l.YieldNode.create(e,n)}_tryParseYieldExpression(){if(35===this._peekKeywordType())return this._parseYieldExpression()}_parseSimpleStatement(){const e=l.StatementListNode.create(this._peekToken());for(;;){if(0===this._peekTokenType()){const e=this._getNextToken(),t=this._fileContents.substr(e.start,e.length).replace(/[\S\W]/g,"");this._addError(`Invalid character in token: "${t}"`,e),this._consumeTokensUntilType(2);break}const t=this._parseSmallStatement();if(e.statements.push(t),t.parent=e,l.extendRange(e,t),0===t.nodeType)break;if(!this._consumeTokenIfType(11))break;const n=this._peekTokenType();if(2===n||1===n)break}return this._consumeTokenIfType(2)||this._addError("Statements must be separated by newlines or semicolons",this._peekToken()),e}_parseSmallStatement(){switch(this._peekKeywordType()){case 28:return this._parsePassStatement();case 5:return this._parseBreakStatement();case 7:return this._parseContinueStatement();case 30:return this._parseReturnStatement();case 17:return this._parseFromStatement();case 20:return this._parseImportStatement();case 18:return this._parseGlobalStatement();case 25:return this._parseNonlocalStatement();case 29:return this._parseRaiseStatement();case 2:return this._parseAssertStatement();case 10:return this._parseDelStatement();case 35:return this._parseYieldExpression()}return this._parseExpressionStatement()}_makeExpressionOrTuple(e){if(1===e.list.length&&!e.trailingComma)return e.list[0];const t=e.list.length>0?e.list[0]:this._peekToken(-1),n=l.TupleNode.create(t);return n.expressions=e.list,e.list.length>0&&(e.list.forEach(e=>{e.parent=n}),l.extendRange(n,e.list[e.list.length-1])),n}_parseTestListAsExpression(e,t){if(this._isNextTokenNeverExpression())return this._handleExpressionParseError(e,t);const n=this._parseTestExpressionList();return n.parseError?n.parseError:this._makeExpressionOrTuple(n)}_parseTestOrStarListAsExpression(e,t,n){if(this._isNextTokenNeverExpression())return this._handleExpressionParseError(t,n);const r=this._parseTestOrStarExpressionList(e);return r.parseError?r.parseError:this._makeExpressionOrTuple(r)}_parseExpressionList(e){return this._parseExpressionListGeneric(()=>this._parseExpression(e))}_parseTestExpressionList(){return this._parseExpressionListGeneric(()=>this._parseTestExpression(!1))}_parseTestOrStarExpressionList(e){const t=this._parseExpressionListGeneric(()=>this._parseTestOrStarExpression(e));if(!t.parseError){let e=!1;for(const n of t.list)if(57===n.nodeType){if(e){this._addError("Only one unpack operation allowed in list",n);break}e=!0}}return t}_parseExpression(e){const t=this._peekToken();return e&&this._consumeTokenIfOperator(25)?l.UnpackNode.create(t,this._parseExpression(!1)):this._parseBitwiseOrExpression()}_parseTestOrStarExpression(e){return 25===this._peekOperatorType()?this._parseExpression(!0):this._parseTestExpression(e)}_parseTestExpression(e){if(23===this._peekKeywordType())return this._parseLambdaExpression();const t=e?this._parseAssignmentExpression():this._parseOrTest();if(0===t.nodeType)return t;if(!this._consumeTokenIfKeyword(19))return t;const n=this._parseAssignmentExpression();if(0===n.nodeType)return n;if(!this._consumeTokenIfKeyword(12))return this._handleExpressionParseError(1,'Expected "else"');const r=this._parseTestExpression(!0);return 0===r.nodeType?r:l.TernaryNode.create(t,n,r)}_parseAssignmentExpression(){const e=this._parseOrTest();if(0===e.nodeType)return e;if(39!==e.nodeType)return e;const t=this._peekToken();if(!this._consumeTokenIfOperator(34))return e;let n;return this._assignmentExpressionsAllowed||this._addError("Operator ':=' not allowed in this context",t),this._getLanguageVersion()<a.PythonVersion.V38&&this._addError("Operator ':=' requires Python 3.8 or newer",t),n=23===this._peekKeywordType()?this._parseLambdaExpression():this._parseOrTest(),l.AssignmentExpressionNode.create(e,n)}_parseOrTest(){let e=this._parseAndTest();if(0===e.nodeType)return e;for(;this._consumeTokenIfKeyword(27);){const t=this._parseAndTest();e=l.BinaryOperationNode.create(e,t,36)}return e}_parseAndTest(){let e=this._parseNotTest();if(0===e.nodeType)return e;for(;this._consumeTokenIfKeyword(0);){const t=this._parseNotTest();e=l.BinaryOperationNode.create(e,t,35)}return e}_parseNotTest(){const e=this._peekToken();if(this._consumeTokenIfKeyword(26)){const t=this._parseNotTest();return l.UnaryOperationNode.create(e,t,37)}return this._parseComparison()}_parseComparison(){let e=this._parseBitwiseOrExpression();if(0===e.nodeType)return e;for(;;){let t;if(p.Tokenizer.isOperatorComparison(this._peekOperatorType()))t=this._peekOperatorType(),this._getNextToken();else if(this._consumeTokenIfKeyword(21))t=40;else if(this._consumeTokenIfKeyword(22))t=this._consumeTokenIfKeyword(26)?39:38;else if(26===this._peekKeywordType()){const e=this._peekToken(1);8===e.type&&21===e.keywordType&&(this._getNextToken(),this._getNextToken(),t=41)}if(void 0===t)break;const n=this._parseBitwiseOrExpression();e=l.BinaryOperationNode.create(e,n,t)}return e}_parseBitwiseOrExpression(){let e=this._parseBitwiseXorExpression();if(0===e.nodeType)return e;for(;this._consumeTokenIfOperator(6);){const t=this._parseBitwiseXorExpression();e=l.BinaryOperationNode.create(e,t,6)}return e}_parseBitwiseXorExpression(){let e=this._parseBitwiseAndExpression();if(0===e.nodeType)return e;for(;this._consumeTokenIfOperator(8);){const t=this._parseBitwiseAndExpression();e=l.BinaryOperationNode.create(e,t,8)}return e}_parseBitwiseAndExpression(){let e=this._parseShiftExpression();if(0===e.nodeType)return e;for(;this._consumeTokenIfOperator(3);){const t=this._parseShiftExpression();e=l.BinaryOperationNode.create(e,t,3)}return e}_parseShiftExpression(){let e=this._parseArithmeticExpression();if(0===e.nodeType)return e;let t=this._peekOperatorType();for(;17===t||30===t;){this._getNextToken();const n=this._parseArithmeticExpression();e=l.BinaryOperationNode.create(e,n,t),t=this._peekOperatorType()}return e}_parseArithmeticExpression(){let e=this._parseArithmeticTerm();if(0===e.nodeType)return e;let t=this._peekOperatorType();for(;0===t||32===t;){this._getNextToken();const n=this._parseArithmeticTerm();if(0===n.nodeType)return n;e=l.BinaryOperationNode.create(e,n,t),t=this._peekOperatorType()}return e}_parseArithmeticTerm(){let e=this._parseArithmeticFactor();if(0===e.nodeType)return e;let t=this._peekOperatorType();for(;25===t||21===t||10===t||23===t||13===t;){this._getNextToken();const n=this._parseArithmeticFactor();e=l.BinaryOperationNode.create(e,n,t),t=this._peekOperatorType()}return e}_parseArithmeticFactor(){const e=this._peekToken(),t=this._peekOperatorType();if(0===t||32===t||5===t){this._getNextToken();const n=this._parseArithmeticFactor();return l.UnaryOperationNode.create(e,n,t)}const n=this._parseAtomExpression();if(0===n.nodeType)return n;if(this._consumeTokenIfOperator(28)){const e=this._parseArithmeticFactor();return l.BinaryOperationNode.create(n,e,28)}return n}_parseAtomExpression(){let e;4!==this._peekKeywordType()||this._isParsingTypeAnnotation||(e=this._getKeywordToken(4),this._getLanguageVersion()<a.PythonVersion.V35&&this._addError("Use of 'await' requires Python 3.5 or newer",e));let t=this._parseAtom();if(0===t.nodeType)return t;for(;;){const e=this._peekToken();if(this._consumeTokenIfType(13)){const e=this._parseArgList(),n=l.CallNode.create(t);n.arguments=e,e.length>0&&(e.forEach(e=>{e.parent=n}),l.extendRange(n,e[e.length-1]));const r=this._peekToken();if(!this._consumeTokenIfType(14))return this._addError('Expected ")"',this._peekToken()),this._consumeTokensUntilType(2),l.extendRange(n,this._peekToken()),n;if(l.extendRange(n,r),this._isParsingTypeAnnotation){const e=new s.DiagnosticAddendum;39===t.nodeType&&"type"===t.value&&e.addMessage("Use Type[T] instead"),this._addError("Function call not allowed in type annotation"+e.getString(),n)}t=n}else if(this._consumeTokenIfType(15)){const n=39===t.nodeType&&"Literal"===t.value||36===t.nodeType&&39===t.leftExpression.nodeType&&"typing"===t.leftExpression.value&&"Literal"===t.memberName.value,r=this._isParsingIndexTrailer,s=this._isParsingTypeAnnotation;n&&(this._isParsingTypeAnnotation=!1),this._isParsingIndexTrailer=!0;const i=this._parseSubscriptList();this._isParsingTypeAnnotation=s,this._isParsingIndexTrailer=r;let o=[i];53===i.nodeType&&(o=i.expressions);const a=this._peekToken(),c=l.IndexItemsNode.create(e,a,o),u=l.IndexNode.create(t,c);if(l.extendRange(u,u),!this._consumeTokenIfType(16))return this._handleExpressionParseError(6,'Expected "]"',u);t=u}else{if(!this._consumeTokenIfType(20))break;{const e=this._getTokenIfIdentifier();if(!e)return this._handleExpressionParseError(7,'Expected member name after "."',t);t=l.MemberAccessNode.create(t,l.NameNode.create(e))}}}return e?l.AwaitNode.create(e,t):t}_parseSubscriptList(){const e=this._parseExpressionListGeneric(()=>this._parseSubscript(),()=>10!==this._peekTokenType()&&this._isNextTokenNeverExpression());return e.parseError?e.parseError:0===e.list.length?this._handleExpressionParseError(3,"Expected index or slice expression"):this._makeExpressionOrTuple(e)}_parseSubscript(){const e=this._peekToken(),t=[void 0,void 0,void 0];let n=0,r=!1;for(;;){const e=this._peekTokenType();if(16===e||12===e)break;if(10!==e&&(t[n]=this._parseTestExpression(!1)),n++,n>=3||!this._consumeTokenIfType(10))break;r=!0}if(!r)return t[0];const s=l.SliceNode.create(e);s.startValue=t[0],s.startValue&&(s.startValue.parent=s),s.endValue=t[1],s.endValue&&(s.endValue.parent=s),s.stepValue=t[2],s.stepValue&&(s.stepValue.parent=s);const i=t[2]||t[1]||t[0];return i&&l.extendRange(s,i),s}_parseArgList(){const e=[];let t=!1;for(;;){const n=this._peekTokenType();if(14===n||2===n||1===n)break;const r=this._parseArgument();if(r.name?t=!0:t&&0===r.argumentCategory&&this._addError("Positional argument cannot appear after named arguments",r),e.push(r),!this._consumeTokenIfType(12))break}return e}_parseArgument(){const e=this._peekToken();let t=0;this._consumeTokenIfOperator(25)?t=1:this._consumeTokenIfOperator(28)&&(t=2);let n,r=this._parseTestExpression(!1);if(0===t)if(this._consumeTokenIfOperator(2)){const e=r;r=this._parseTestExpression(!1),39===e.nodeType?n=e.token:this._addError("Expected parameter name",e)}else{const e=this._tryParseListComprehension(r);e&&(r=e)}const s=l.ArgumentNode.create(e,r,t);return n&&(s.name=l.NameNode.create(n),s.name.parent=s),s}_parseAtom(){const e=this._peekToken();if(19===e.type)return l.EllipsisNode.create(this._getNextToken());if(6===e.type){const e=l.NumberNode.create(this._getNextToken());return this._isParsingTypeAnnotation&&this._addError("Numeric literal not allowed in type annotation",e),e}if(7===e.type)return l.NameNode.create(this._getNextToken());if(5===e.type)return this._parseStringList();if(13===e.type){const e=this._parseTupleAtom();if(this._isParsingTypeAnnotation&&!this._isParsingIndexTrailer){const t=new s.DiagnosticAddendum;t.addMessage("Use Tuple[T1, ..., Tn] instead"),this._addError("Tuple expression not allowed in type annotation"+t.getString(),e)}return e}if(15===e.type){const e=this._parseListAtom();if(this._isParsingTypeAnnotation&&!this._isParsingIndexTrailer){const t=new s.DiagnosticAddendum;t.addMessage("Use List[T] instead"),this._addError("List expression not allowed in type annotation"+t.getString(),e)}return e}if(17===e.type){const e=this._parseDictionaryOrSetAtom();if(this._isParsingTypeAnnotation){const t=new s.DiagnosticAddendum;t.addMessage("Use Dict[T1, T2] instead"),this._addError("Dictionary expression not allowed in type annotation"+t.getString(),e)}return e}if(8===e.type){const t=e;if(14===t.keywordType||31===t.keywordType||8===t.keywordType||24===t.keywordType){const e=l.ConstantNode.create(this._getNextToken());return this._isParsingTypeAnnotation&&24!==t.keywordType&&this._addError("Keyword not allowed in type annotation",e),e}const n=this._getTokenIfIdentifier();if(n)return l.NameNode.create(n)}return this._handleExpressionParseError(2,"Expected expression")}_handleExpressionParseError(e,t,n){this._addError(t,this._peekToken());const r=l.ErrorNode.create(this._peekToken(),e,n);return this._consumeTokensUntilType(2),r}_parseLambdaExpression(e=!0){const t=this._getKeywordToken(23),n=this._parseVarArgsList(10,!1);let r;this._consumeTokenIfType(10)||this._addError('Expected ":"',this._peekToken()),r=e?this._parseTestExpression(!1):this._tryParseLambdaExpression(!1)||this._parseOrTest();const s=l.LambdaNode.create(t,r);return s.parameters=n,n.forEach(e=>{e.parent=s}),s}_tryParseLambdaExpression(e=!0){if(23===this._peekKeywordType())return this._parseLambdaExpression(e)}_parseTupleAtom(){const e=this._getNextToken();r.equal(e.type,13);const t=this._tryParseYieldExpression();if(t)return 14!==this._peekTokenType()?this._handleExpressionParseError(8,'Expected ")"'):(l.extendRange(t,this._getNextToken()),t);const n=this._parseTestListWithComprehension(),s=this._makeExpressionOrTuple(n);return 14!==this._peekTokenType()?this._handleExpressionParseError(8,'Expected ")"'):(l.extendRange(s,this._getNextToken()),s)}_parseListAtom(){const e=this._getNextToken();r.equal(e.type,15);const t=this._parseTestListWithComprehension(),n=this._peekToken();if(!this._consumeTokenIfType(16))return this._handleExpressionParseError(9,'Expected "]"');const s=l.ListNode.create(e);return l.extendRange(s,n),t.list.length>0&&(t.list.forEach(e=>{e.parent=s}),l.extendRange(s,t.list[t.list.length-1])),s.entries=t.list,s}_parseTestListWithComprehension(){let e=!1;return this._parseExpressionListGeneric(()=>{let t=this._parseTestOrStarExpression(!0);const n=this._tryParseListComprehension(t);return n&&(t=n,e=!0),t},()=>this._isNextTokenNeverExpression(),()=>e)}_parseDictionaryOrSetAtom(){const e=this._getNextToken();r.equal(e.type,17);const t=[],n=[];let s=!1,i=!1,o=!1;for(;18!==this._peekTokenType();){let e,a,c;if(this._consumeTokenIfOperator(28)?e=this._parseExpression(!1):(a=this._parseTestOrStarExpression(!0),this._consumeTokenIfType(10)&&(c=this._parseTestExpression(!1))),a&&c)if(57===a.nodeType&&this._addError("Unpack operation not allowed in dictionaries",a),i)this._addError("Key/value pairs are not allowed within a set",c);else{const e=l.DictionaryKeyEntryNode.create(a,c);let n=e;const r=this._tryParseListComprehension(e);r&&(n=r,o=!0),t.push(n),s=!0}else if(e)if(i)this._addError("Unpack operator not allowed within a set",e);else{const n=l.DictionaryExpandEntryNode.create(e);let r=n;const i=this._tryParseListComprehension(n);i&&(r=i,o=!0),t.push(r),s=!0}else if(r(void 0!==a),a)if(s)this._addError("Dictionary entries must contain key/value pairs",a);else{const e=this._tryParseListComprehension(a);e&&(a=e,o=!0),n.push(a),i=!0}if(o)break;if(!this._consumeTokenIfType(12))break}let a=this._peekToken();if(this._consumeTokenIfType(18)||(this._addError('Expected "}"',this._peekToken()),a=void 0),i){const t=l.SetNode.create(e);return a&&l.extendRange(t,a),n.length>0&&l.extendRange(t,n[n.length-1]),n.forEach(e=>{e.parent=t}),t.entries=n,t}const c=l.DictionaryNode.create(e);return a&&l.extendRange(c,a),t.length>0&&(t.forEach(e=>{e.parent=c}),l.extendRange(c,t[t.length-1])),c.entries=t,c}_parseExpressionListGeneric(e,t=(()=>this._isNextTokenNeverExpression()),n=(()=>!1)){let r=!1;const s=[];let i;for(;!t();){const t=e();if(0===t.nodeType){i=t;break}if(s.push(t),n())break;if(!this._consumeTokenIfType(12)){r=!1;break}r=!0}return{trailingComma:r,list:s,parseError:i}}_parseExpressionStatement(){let e,t=this._parseTestOrStarListAsExpression(!1,2,"Expected expression");if(0===t.nodeType)return t;if(this._consumeTokenIfType(10)){if(this._parseTypeAnnotation(()=>{e=this._parseAtomExpression(),t=l.TypeAnnotationNode.create(t,e),!this._parseOptions.isStubFile&&this._getLanguageVersion()<a.PythonVersion.V36&&this._addError("Type annotations for variables requires Python 3.6 or newer",e)}),!this._consumeTokenIfOperator(2))return t;const n=this._parseTestExpression(!1);return l.AssignmentNode.create(t,n)}if(this._consumeTokenIfOperator(2))return this._parseChainAssignments(t);if(!e&&p.Tokenizer.isOperatorAssignment(this._peekOperatorType())){const e=this._getNextToken(),n=this._tryParseYieldExpression()||this._parseTestListAsExpression(2,"Expected expression to the right of operator"),r=Object.assign({},t);return r.id=l.getNextNodeId(),l.AugmentedAssignmentNode.create(t,n,e.operatorType,r)}return t}_parseChainAssignments(e){let t;if(t=this._tryParseYieldExpression(),t||(t=this._parseTestOrStarListAsExpression(!1,2,'Expected expression to the right of "="')),0===t.nodeType)return l.AssignmentNode.create(e,t);if(this._consumeTokenIfOperator(2)&&(t=this._parseChainAssignments(t),0===t.nodeType))return t;const n=l.AssignmentNode.create(e,t),r=this._getTypeAnnotationComment();return r&&(n.typeAnnotationComment=r,n.typeAnnotationComment.parent=n,l.extendRange(n,n.typeAnnotationComment)),n}_parseTypeAnnotation(e){const t=this._isParsingTypeAnnotation;this._isParsingTypeAnnotation=!0,e(),this._isParsingTypeAnnotation=t}_reportStringTokenErrors(e,t){65536&e.flags&&this._addError("String literal is unterminated",e),t.nonAsciiInBytes&&this._addError("Non-ASCII character not allowed in bytes string literal",e),64&e.flags&&(this._getLanguageVersion()<a.PythonVersion.V36&&this._addError("Format string literals (f-strings) require Python 3.6 or newer",e),32&e.flags&&this._addError("Format string literals (f-strings) cannot be binary",e),16&e.flags&&this._addError("Format string literals (f-strings) cannot be unicode",e))}_makeStringNode(e){const t=u.getUnescapedString(e);return this._reportStringTokenErrors(e,t),l.StringNode.create(e,t.value,t.unescapeErrors.length>0)}_getTypeAnnotationComment(){if(0===this._tokenIndex)return;const e=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex-1),t=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex);if(e.start+e.length===t.start)return;const n=this._fileContents.substring(e.start+e.length,t.start).match(/^(\s*#\s*type:\s*)([^\r\n]*)/);if(!n)return;const r=n[2];if(r.trim().match(/^ignore(\s|$)/))return;const s=e.start+e.length+n[1].length,i=d.StringToken.create(s,r.length,0,r,0,void 0),o=this._makeStringNode(i),a=l.StringListNode.create([o]),c=(new f).parseTextExpression(this._fileContents,s,r.length,this._parseOptions,!0);return c.diagnostics.forEach(e=>{this._addError(e.message,a)}),c.parseTree?c.parseTree:void 0}_parseFormatString(e){const t=u.getUnescapedString(e);this._reportStringTokenErrors(e,t);const n=[];for(const r of t.formatStringSegments)if(r.isExpression){const t=new f,s=this._getFormatStringExpressionLength(r.value),i=t.parseTextExpression(this._fileContents,e.start+e.prefixLength+e.quoteMarkLength+r.offset,s,this._parseOptions,!1);i.diagnostics.forEach(t=>{const n=(t.range?o.convertPositionToOffset(t.range.start,i.lines):e.start)||e.start,r={start:n,length:((t.range?(o.convertPositionToOffset(t.range.end,i.lines)||0)+1:e.start+e.length)||e.start+e.length)-n};this._addError(t.message,r)}),i.parseTree&&n.push(i.parseTree)}return l.FormatStringNode.create(e,t.value,t.unescapeErrors.length>0,n)}_getFormatStringExpressionLength(e){let t=0,n=!1,r=!1,s=0,i=0,o=0,c=!1;for(;t<e.length;){const a=e[t],l=n||r||s>0||i>0||o>0,u=n||r;if("="===a)c=!0;else{if(":"===a){if(!l)break}else if("!"===a){if(!l&&(t===e.length-1||"!"!==e[t+1]))break}else"'"===a?r||(n=!n):'"'===a?n||(r=!r):"("===a?u||i++:")"===a?!u&&i>0&&i--:"{"===a?u||s++:"}"===a?!u&&s>0&&s--:"["===a?u||o++:"]"===a&&!u&&o>0&&o--;c=!1}t++}return this._parseOptions.pythonVersion>=a.PythonVersion.V38&&c&&t--,t}_parseStringList(){const e=[];for(;5===this._peekTokenType();){const t=this._getNextToken();64&t.flags?e.push(this._parseFormatString(t)):e.push(this._makeStringNode(t))}const t=l.StringListNode.create(e);if(this._isParsingTypeAnnotation)if(t.strings.length>1)this._addError("Type hints cannot span multiple string literals",t);else if(4&t.strings[0].token.flags)this._addError("Type hints cannot use triple quotes",t);else if(64&t.strings[0].token.flags)this._addError("Type hints cannot use format string literals (f-strings)",t);else{const e=t.strings[0].token,n=u.getUnescapedString(t.strings[0].token).value,r=e.start,s=e.prefixLength+e.quoteMarkLength;if(n.length!==e.length-s-e.quoteMarkLength)this._addError("Type hints cannot contain escape characters",t);else{const e=(new f).parseTextExpression(this._fileContents,r+s,n.length,this._parseOptions,!0);e.diagnostics.forEach(e=>{this._addError(e.message,t)}),e.parseTree&&(t.typeAnnotation=e.parseTree,t.typeAnnotation.parent=t)}}return t}_reportConditionalErrorForStarTupleElement(e){if(53===e.nodeType&&!(this._parseOptions.pythonVersion>=a.PythonVersion.V38))for(const t of e.expressions)if(57===t.nodeType)return void this._addError("Unpack operation not allowed prior to Python 3.8",t)}_isNextTokenNeverExpression(){switch(this._peekToken().type){case 8:switch(this._peekKeywordType()){case 16:case 21:case 19:return!0}break;case 9:switch(this._peekOperatorType()){case 1:case 33:case 26:case 11:case 24:case 4:case 7:case 9:case 18:case 31:case 29:case 14:case 2:return!0}break;case 3:case 4:case 2:case 1:case 11:case 14:case 16:case 18:case 12:case 10:return!0}return!1}_disallowAssignmentExpression(e){const t=this._assignmentExpressionsAllowed;this._assignmentExpressionsAllowed=!1,e(),this._assignmentExpressionsAllowed=t}_getNextToken(){const e=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex);return this._atEof()||this._tokenIndex++,e}_atEof(){return this._tokenIndex>=this._tokenizerOutput.tokens.count-1}_peekToken(e=0){return this._tokenIndex+e<0&&this._tokenizerOutput.tokens.getItemAt(0),this._tokenIndex+e>=this._tokenizerOutput.tokens.count?this._tokenizerOutput.tokens.getItemAt(this._tokenizerOutput.tokens.count-1):this._tokenizerOutput.tokens.getItemAt(this._tokenIndex+e)}_peekTokenType(){return this._peekToken().type}_peekKeywordType(){const e=this._peekToken();if(8===e.type)return e.keywordType}_peekOperatorType(){const e=this._peekToken();if(9===e.type)return e.operatorType}_getTokenIfIdentifier(e=[]){const t=this._peekToken();if(7===t.type)return this._getNextToken();if(0===t.type)return this._getNextToken(),this._addError("Invalid character in identifier",t),d.IdentifierToken.create(t.start,t.length,"",t.comments);if(8===t.type){const n=this._peekKeywordType();if(!e.find(e=>e===n)){const e=this._fileContents.substr(t.start,t.length);return this._getNextToken(),d.IdentifierToken.create(t.start,t.length,e,t.comments)}}}_consumeTokensUntilType(e){for(;;){const t=this._peekToken();if(t.type===e)return!0;if(1===t.type)return!1;this._getNextToken()}}_consumeTokenIfType(e){return this._peekTokenType()===e&&(this._getNextToken(),!0)}_consumeTokenIfKeyword(e){return this._peekKeywordType()===e&&(this._getNextToken(),!0)}_consumeTokenIfOperator(e){return this._peekOperatorType()===e&&(this._getNextToken(),!0)}_getKeywordToken(e){const t=this._getNextToken();return r(8===t.type),r.equal(t.keywordType,e),t}_getLanguageVersion(){return this._parseOptions.pythonVersion}_addError(e,t){r(void 0!==t),this._diagSink.addError(e,o.convertOffsetsToRange(t.start,t.start+t.length,this._tokenizerOutput.lines))}}t.Parser=f},function(e,t,n){"use strict";function r(e){return e>=48&&e<=57||(e>=97&&e<=122||e>=65&&e<=65)}function s(e){return e>=48&&e<=55}function i(e){return e>=48&&e<=57||(e>=97&&e<=102||e>=65&&e<=70)}function o(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-97+10:e>=65&&e<=70?e-65+10:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getUnescapedString=function(e){const t=e.escapedValue,n=0!=(8&e.flags),a=0!=(32&e.flags),c=0!=(64&e.flags);let l=0,u={offset:0,length:0,value:"",isExpression:!1},p=0;const d={value:"",unescapeErrors:[],nonAsciiInBytes:!1,formatStringSegments:[]},h=()=>{n||d.unescapeErrors.push({offset:p-1,length:2,errorType:0})},f=(e=0)=>p+e>=t.length?3:t.charCodeAt(p+e),g=e=>{let t=!1,n=0,r="";for(let r=0;r<e;r++){const e=f(1+r);if(!i(e)){t=!0;break}n=16*n+o(e)}return t?(h(),r="\\"+String.fromCharCode(f()),p++):(r=String.fromCharCode(n),p+=1+e),r},m=e=>{const t=String.fromCharCode(e);d.value+=t,u.value+=t};for(;;){let e=f();if(3===e)return c&&(u.isExpression&&d.unescapeErrors.push({offset:u.offset,length:p-u.offset,errorType:3}),p!==u.offset&&(u.length=p-u.offset,d.formatStringSegments.push(u))),d;if(92===e){c&&u.isExpression&&d.unescapeErrors.push({offset:p,length:1,errorType:1}),p++,e=f();let t="";if(13===e||10===e)13===e&&10===f(1)&&(n&&(t+=String.fromCharCode(e)),p++,e=f()),n&&(t="\\"+t+String.fromCharCode(e)),p++;else if(n)t="\\"+String.fromCharCode(e),p++;else switch(e){case 92:case 39:case 34:t=String.fromCharCode(e),p++;break;case 97:t="",p++;break;case 98:t="\b",p++;break;case 102:t="\f",p++;break;case 110:t="\n",p++;break;case 114:t="\r",p++;break;case 116:t="\t",p++;break;case 118:t="\v",p++;break;case 120:t=g(2);break;case 78:{let n=!1,s=1;if(123!==f(s))n=!0;else for(s++;;){const e=f(s);if(125===e)break;if(!r(e)){n=!0;break}s++}n?(h(),t="\\"+String.fromCharCode(e),p++):(t="-",p+=1+s);break}case 117:t=g(4);break;case 85:t=g(8);break;default:if(s(e)){let n=e-48;p++,e=f(),s(e)&&(n=8*n+e-48,p++,e=f(),s(e)&&(n=8*n+e-48,p++)),t=String.fromCharCode(n)}else t="\\"+String.fromCharCode(e),h(),p++}d.value+=t,u.value+=t}else if(10===e||13===e)13===e&&10===f(1)&&(m(e),p++,e=f()),m(e),p++;else if(c&&123===e)u.isExpression||123!==f(1)?(u.length=p-u.offset,u.length>0&&d.formatStringSegments.push(u),p++,u={offset:p,length:0,value:"",isExpression:!0},l++):(m(e),p+=2);else if(c&&125===e)u.isExpression||125!==f(1)?0===l?(d.unescapeErrors.push({offset:p,length:1,errorType:2}),p++):(l--,u.length=p-u.offset,d.formatStringSegments.push(u),p++,u={offset:p,length:0,value:"",isExpression:!1}):(m(e),p+=2);else if(!u.isExpression||39!==e&&34!==e)a&&e>=128&&(d.nonAsciiInBytes=!0),m(e),p++;else{const t=e;m(e);const n=f(1)===t&&f(2)===t;for(n&&(p+=2,m(e),m(e),d.value+=String.fromCharCode(e),d.value+=String.fromCharCode(e));;){p++;let e=f();if(3===e)break;if(92!==e){if(10===e||13===e)break;if(e===t){if(!n){p++,m(e);break}if(f(1)===t&&f(2)===t){p+=3,m(e),m(e),m(e);break}}m(e)}else m(e),p++,e=f(),m(e)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(131);var s;!function(e){e[e.NotIdentifierChar=0]="NotIdentifierChar",e[e.StartIdentifierChar=1]="StartIdentifierChar",e[e.IdentifierChar=2]="IdentifierChar"}(s||(s={}));const i=256,o=new Array(i),a={};let c=!1;function l(e){return e>=48&&e<=57||95===e}t.isIdentifierStartChar=function(e){return e<i?o[e]===s.StartIdentifierChar:(c||(h(!1),c=!0),a[e]===s.StartIdentifierChar)},t.isIdentifierChar=function(e){return e<i?o[e]===s.StartIdentifierChar||o[e]===s.IdentifierChar:a[e]===s.StartIdentifierChar||a[e]===s.IdentifierChar},t.isWhiteSpace=function(e){return 32===e||9===e||12===e},t.isLineBreak=function(e){return 13===e||10===e},t.isNumber=function(e){return e>=48&&e<=57||95===e},t.isDecimal=l,t.isHex=function(e){return l(e)||e>=97&&e<=102||e>=65&&e<=70||95===e},t.isOctal=function(e){return e>=48&&e<=55||95===e},t.isBinary=function(e){return 48===e||49===e||95===e};const u=[[95,6277,6278,8472,8494,12443,12444],r.unicodeLu,r.unicodeLl,r.unicodeLt,r.unicodeLo,r.unicodeLm,r.unicodeNl],p=[[183,903,4969,4970,4971,4972,4973,4974,4975,4976,4977,6618],r.unicodeMn,r.unicodeMc,r.unicodeNd,r.unicodePc];function d(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];let c,l;Array.isArray(s)?(c=s[0],l=s[1]):c=l=s;for(let e=c;e<=l;e++)e<i?o[e]=t:a[e]=t;if(n&&c>=i)break}}function h(e){o.fill(s.NotIdentifierChar),p.forEach(t=>{d(t,s.IdentifierChar,e)}),u.forEach(t=>{d(t,s.StartIdentifierChar,e)})}h(!0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e,t,n){return{start:e,length:t,value:n}}}(t.Comment||(t.Comment={})),function(e){e.create=function(e,t,n,r){return{start:t,length:n,type:e,comments:r}}}(t.Token||(t.Token={})),function(e){e.create=function(e,t,n,r){return{start:e,length:t,type:3,comments:r,indentAmount:n}}}(t.IndentToken||(t.IndentToken={})),function(e){e.create=function(e,t,n,r,s){return{start:e,length:t,type:4,comments:s,indentAmount:n,matchesIndent:r}}}(t.DedentToken||(t.DedentToken={})),function(e){e.create=function(e,t,n,r){return{start:e,length:t,type:2,comments:r,newLineType:n}}}(t.NewLineToken||(t.NewLineToken={})),function(e){e.create=function(e,t,n,r){return{start:e,length:t,type:8,comments:r,keywordType:n}}}(t.KeywordToken||(t.KeywordToken={})),function(e){e.create=function(e,t,n,r,s,i){return{start:e,length:t,type:5,flags:n,escapedValue:r,prefixLength:s,quoteMarkLength:4&n?3:1,comments:i}}}(t.StringToken||(t.StringToken={})),function(e){e.create=function(e,t,n,r,s,i){return{start:e,length:t,type:6,isInteger:r,isImaginary:s,value:n,comments:i}}}(t.NumberToken||(t.NumberToken={})),function(e){e.create=function(e,t,n,r){return{start:e,length:t,type:9,operatorType:n,comments:r}}}(t.OperatorToken||(t.OperatorToken={})),function(e){e.create=function(e,t,n,r){return{start:e,length:t,type:7,value:n,comments:r}}}(t.IdentifierToken||(t.IdentifierToken={}))},function(e,t,n){"use strict";function r(e,t){if(56===e.nodeType){if(36===e.operator||35===e.operator){const n=s(e.expression,t);if(void 0!==n)return!n}}else if(7===e.nodeType){if(36===e.operator||35===e.operator){const n=r(e.leftExpression,t),s=r(e.rightExpression,t);if(void 0===n||void 0===s)return;return 36===e.operator?n||s:n&&s}if(a(e.leftExpression)&&53===e.rightExpression.nodeType){const n=function(e){let t;if(2===e.expressions.length){if(41===e.expressions[0].nodeType&&!e.expressions[0].isImaginary&&41===e.expressions[1].nodeType&&!e.expressions[1].isImaginary){const n=e.expressions[0],r=e.expressions[1];t=256*n.value+r.value}}else if(1===e.expressions.length){const n=e.expressions[0];t=256*n.value}return t}(e.rightExpression);return i(e.operator,t.pythonVersion,n)}if(24===e.leftExpression.nodeType&&a(e.leftExpression.baseExpression)&&1===e.leftExpression.items.items.length&&41===e.leftExpression.items.items[0].nodeType&&!e.leftExpression.items.items[0].isImaginary&&0===e.leftExpression.items.items[0].value&&41===e.rightExpression.nodeType)return i(e.operator,Math.floor(t.pythonVersion/256),e.rightExpression.value);if(function(e){if(36===e.nodeType&&39===e.leftExpression.nodeType&&"sys"===e.leftExpression.value&&"platform"===e.memberName.value)return!0;return!1}(e.leftExpression)&&49===e.rightExpression.nodeType){const n=e.rightExpression.strings.map(e=>e.value).join(""),r=function(e){if("Darwin"===e.pythonPlatform)return"darwin";if("Windows"===e.pythonPlatform)return"win32";if("Linux"===e.pythonPlatform)return"linux";return}(t);return o(e.operator,r||"",n)}if(function(e){if(36===e.nodeType&&39===e.leftExpression.nodeType&&"os"===e.leftExpression.value&&"name"===e.memberName.value)return!0;return!1}(e.leftExpression)&&49===e.rightExpression.nodeType){const n=e.rightExpression.strings.map(e=>e.value).join(""),r=function(e){if("Darwin"===e.pythonPlatform)return"posix";if("Windows"===e.pythonPlatform)return"nt";if("Linux"===e.pythonPlatform)return"posix";return}(t);if(void 0!==r)return o(e.operator,r,n)}}else if(11===e.nodeType){if(31===e.constType)return!0;if(14===e.constType)return!1}else if(39===e.nodeType){if("TYPE_CHECKING"===e.value)return!0}else if(36===e.nodeType&&"TYPE_CHECKING"===e.memberName.value&&39===e.leftExpression.nodeType&&"typing"===e.leftExpression.value)return!0}function s(e,t){return(11!==e.nodeType||24!==e.constType)&&r(e,t)}function i(e,t,n){if(void 0!==t&&void 0!==n){if(19===e)return t<n;if(20===e)return t<=n;if(15===e)return t>n;if(16===e)return t>=n;if(12===e)return t===n;if(27===e)return t!==n}}function o(e,t,n){if(void 0!==t&&void 0!==n){if(12===e)return t===n;if(27===e)return t!==n}}function a(e){return 36===e.nodeType&&39===e.leftExpression.nodeType&&"sys"===e.leftExpression.value&&"version_info"===e.memberName.value}Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateStaticBoolExpression=r,t.evaluateStaticBoolLikeExpression=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),s=n(6);t.getBuiltInScope=function(e){let t=e;for(;4!==t.type;)t=t.parent;return t},t.getScopeForNode=function(e){const t=s.getEvaluationScopeNode(e);return r.getScope(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(62);class s extends r.LanguageServerBase{constructor(){super("Pyright")}}t.server=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),s=n(45),i=n(91),o=n(141),a=n(9),c=n(54);t.LanguageServerBase=class{constructor(e,t){this._productName=e,this._connection=r.createConnection(new r.IPCMessageReader(process),new r.IPCMessageWriter(process)),this._documents=new r.TextDocuments,this._workspaceMap=new Map,this._rootPath="",this._isDisplayingProgress=!1,this._defaultWorkspacePath="<default>",this._connection.console.log(`${e} language server starting`),global.__rootDirectory=t||a.getDirectoryPath(__dirname),this._documents.listen(this._connection),this.setupConnection(),this._connection.listen()}get console(){return this._connection.console}_createAnalyzerService(e){this._connection.console.log(`Starting service instance "${e}"`);const t=new i.AnalyzerService(e,this._connection.console);return t.setMaxAnalysisDuration({openFilesTimeInMs:50,noOpenFilesTimeInMs:200}),t.setCompletionCallback(e=>{e.diagnostics.forEach(t=>{const n=this.convertDiagnostics(t.diagnostics);if(this._connection.sendDiagnostics({uri:this.convertPathToUri(t.filePath),diagnostics:n}),e.filesRequiringAnalysis>0){if(!e.checkingOnlyOpenFiles){this._isDisplayingProgress||(this._isDisplayingProgress=!0,this._connection.sendNotification("pyright/beginProgress"));const t=1!==e.filesRequiringAnalysis?"files":"file";this._connection.sendNotification("pyright/reportProgress",`${e.filesRequiringAnalysis} ${t} to analyze`)}}else this._isDisplayingProgress&&(this._isDisplayingProgress=!1,this._connection.sendNotification("pyright/endProgress"))})}),t}createTypeStubService(e,t){this._connection.console.log("Starting type stub service instance");const n=new i.AnalyzerService("Type stub",this._connection.console);return n.setMaxAnalysisDuration({openFilesTimeInMs:500,noOpenFilesTimeInMs:500}),n.setCompletionCallback(r=>{if(0===r.filesRequiringAnalysis)try{n.writeTypeStub(),n.dispose();const r=`Type stub was successfully created for '${e}'.`;this._connection.window.showInformationMessage(r),t(!0)}catch(n){let r="";n instanceof Error&&(r=": "+n.message),r=`An error occurred when creating type stub for '${e}'`+r,this._connection.console.error(r),this._connection.window.showErrorMessage(r),t(!1)}}),n}handlePostCreateTypeStub(){this._workspaceMap.forEach(e=>{e.serviceInstance.handlePostCreateTypeStub()})}getWorkspaceForFile(e){let t,n;if(this._workspaceMap.forEach(r=>{r.rootPath&&e.startsWith(r.rootPath)&&(void 0===t||r.rootPath.startsWith(t))&&(t=r.rootPath,n=r)}),void 0===n){let e=this._workspaceMap.get(this._defaultWorkspacePath);if(!e){const t=[...this._workspaceMap.keys()];if(1===t.length)return this._workspaceMap.get(t[0]);e={workspaceName:"",rootPath:"",rootUri:"",serviceInstance:this._createAnalyzerService(this._defaultWorkspacePath),disableLanguageServices:!1},this._workspaceMap.set(this._defaultWorkspacePath,e),this.updateSettingsForWorkspace(e)}return e}return n}setupConnection(){this._connection.onInitialize(e=>(this._rootPath=e.rootPath||"",e.workspaceFolders?e.workspaceFolders.forEach(e=>{const t=this.convertUriToPath(e.uri);this._workspaceMap.set(t,{workspaceName:e.name,rootPath:t,rootUri:e.uri,serviceInstance:this._createAnalyzerService(e.name),disableLanguageServices:!1})}):e.rootPath&&this._workspaceMap.set(e.rootPath,{workspaceName:"",rootPath:e.rootPath,rootUri:"",serviceInstance:this._createAnalyzerService(e.rootPath),disableLanguageServices:!1}),this._connection.console.log("Fetching settings for workspace(s)"),this.updateSettingsForAllWorkspaces(),{capabilities:{textDocumentSync:this._documents.syncKind,definitionProvider:!0,referencesProvider:!0,documentSymbolProvider:!0,workspaceSymbolProvider:!0,hoverProvider:!0,renameProvider:!0,completionProvider:{triggerCharacters:[".","["],resolveProvider:!0},signatureHelpProvider:{triggerCharacters:["(",",",")"]},codeActionProvider:{codeActionKinds:[r.CodeActionKind.QuickFix,r.CodeActionKind.SourceOrganizeImports]}}})),this._connection.onDidChangeConfiguration(()=>{this._connection.console.log("Received updated settings"),this.updateSettingsForAllWorkspaces()}),this._connection.onCodeAction(e=>{this.recordUserInteractionTime();const t=[r.CodeAction.create("Organize Imports",r.Command.create("Organize Imports",c.commandOrderImports),r.CodeActionKind.SourceOrganizeImports)],n=this.convertUriToPath(e.textDocument.uri),s=this.getWorkspaceForFile(n);if(!s.disableLanguageServices){const i={start:{line:e.range.start.line,column:e.range.start.character},end:{line:e.range.end.line,column:e.range.end.character}},o=s.serviceInstance.getDiagnosticsForRange(n,i),a=o.find(e=>{const t=e.getActions();return t&&t.find(e=>e.action===c.commandCreateTypeStub)});if(a){const e=a.getActions().find(e=>e.action===c.commandCreateTypeStub);if(e){const n=r.CodeAction.create(`Create Type Stub For ${e.moduleName}`,r.Command.create("Create Type Stub",c.commandCreateTypeStub,s.rootPath,e.moduleName),r.CodeActionKind.QuickFix);t.push(n)}}const l=o.find(e=>{const t=e.getActions();return t&&t.find(e=>e.action===c.commandAddMissingOptionalToParam)});if(l){const e=l.getActions().find(e=>e.action===c.commandAddMissingOptionalToParam);if(e){const n=r.CodeAction.create("Add 'Optional' to type annotation",r.Command.create("Add 'Optional' to type annotation",c.commandAddMissingOptionalToParam,e.offsetOfTypeNode),r.CodeActionKind.QuickFix);t.push(n)}}}return t}),this._connection.onDefinition(e=>{this.recordUserInteractionTime();const t=this.convertUriToPath(e.textDocument.uri),n={line:e.position.line,column:e.position.character},s=this.getWorkspaceForFile(t);if(s.disableLanguageServices)return;const i=s.serviceInstance.getDefinitionForPosition(t,n);return i?i.map(e=>r.Location.create(this.convertPathToUri(e.path),this.convertRange(e.range))):void 0}),this._connection.onReferences(e=>{const t=this.convertUriToPath(e.textDocument.uri),n={line:e.position.line,column:e.position.character},s=this.getWorkspaceForFile(t);if(s.disableLanguageServices)return;const i=s.serviceInstance.getReferencesForPosition(t,n,e.context.includeDeclaration);return i?i.map(e=>r.Location.create(this.convertPathToUri(e.path),this.convertRange(e.range))):void 0}),this._connection.onDocumentSymbol(e=>{this.recordUserInteractionTime();const t=this.convertUriToPath(e.textDocument.uri),n=this.getWorkspaceForFile(t);if(n.disableLanguageServices)return;const r=[];return n.serviceInstance.addSymbolsForDocument(t,r),r}),this._connection.onWorkspaceSymbol(e=>{const t=[];return this._workspaceMap.forEach(n=>{n.disableLanguageServices||n.serviceInstance.addSymbolsForWorkspace(t,e.query)}),t}),this._connection.onHover(e=>{const t=this.convertUriToPath(e.textDocument.uri),n={line:e.position.line,column:e.position.character},s=this.getWorkspaceForFile(t).serviceInstance.getHoverForPosition(t,n);if(!s)return;const i=s.parts.map(e=>e.python?"```python\n"+e.text+"\n```\n":e.text).join("");return{contents:{kind:r.MarkupKind.Markdown,value:i},range:this.convertRange(s.range)}}),this._connection.onSignatureHelp(e=>{const t=this.convertUriToPath(e.textDocument.uri),n={line:e.position.line,column:e.position.character},s=this.getWorkspaceForFile(t);if(s.disableLanguageServices)return;const i=s.serviceInstance.getSignatureHelpForPosition(t,n);return i?{signatures:i.signatures.map(e=>{let t=[];return e.parameters&&(t=e.parameters.map(e=>r.ParameterInformation.create([e.startOffset,e.endOffset],e.documentation))),r.SignatureInformation.create(e.label,e.documentation,...t)}),activeSignature:void 0!==i.activeSignature?i.activeSignature:null,activeParameter:void 0!==i.activeParameter?i.activeParameter:null}:void 0}),this._connection.onCompletion(e=>{const t=this.convertUriToPath(e.textDocument.uri),n={line:e.position.line,column:e.position.character},r=this.getWorkspaceForFile(t);if(r.disableLanguageServices)return;const s=r.serviceInstance.getCompletionsForPosition(t,n,r.rootPath);return s&&(s.isIncomplete=!0),s}),this._connection.onCompletionResolve(e=>{const t=e.data;if(t){const n=this._workspaceMap.get(t.workspacePath);n&&t.filePath&&n.serviceInstance.resolveCompletionItem(t.filePath,e)}return e}),this._connection.onRenameRequest(e=>{const t=this.convertUriToPath(e.textDocument.uri),n={line:e.position.line,column:e.position.character},r=this.getWorkspaceForFile(t);if(r.disableLanguageServices)return;const s=r.serviceInstance.renameSymbolAtPosition(t,n,e.newName);if(!s)return;const i={changes:{}};return s.forEach(e=>{const t=this.convertPathToUri(e.filePath);void 0===i.changes[t]&&(i.changes[t]=[]);const n={range:this.convertRange(e.range),newText:e.replacementText};i.changes[t].push(n)}),i}),this._connection.onDidOpenTextDocument(e=>{const t=this.convertUriToPath(e.textDocument.uri);this.getWorkspaceForFile(t).serviceInstance.setFileOpened(t,e.textDocument.version,e.textDocument.text)}),this._connection.onDidChangeTextDocument(e=>{this.recordUserInteractionTime();const t=this.convertUriToPath(e.textDocument.uri);this.getWorkspaceForFile(t).serviceInstance.updateOpenFileContents(t,e.textDocument.version,e.contentChanges[0].text)}),this._connection.onDidCloseTextDocument(e=>{const t=this.convertUriToPath(e.textDocument.uri);this.getWorkspaceForFile(t).serviceInstance.setFileClosed(t)}),this._connection.onInitialized(()=>{this._connection.workspace.onDidChangeWorkspaceFolders(e=>{e.removed.forEach(e=>{const t=this.convertUriToPath(e.uri);this._workspaceMap.delete(t)}),e.added.forEach(e=>{const t=this.convertUriToPath(e.uri),n={workspaceName:e.name,rootPath:t,rootUri:e.uri,serviceInstance:this._createAnalyzerService(e.name),disableLanguageServices:!1};this._workspaceMap.set(t,n),this.updateSettingsForWorkspace(n)})})}),this._connection.onExecuteCommand(e=>{if(e.command===c.commandOrderImports||e.command===c.commandAddMissingOptionalToParam){if(e.arguments&&e.arguments.length>=1){const t=e.arguments[0],n=e.arguments.slice(1),r=this.convertUriToPath(t),s=this.getWorkspaceForFile(r).serviceInstance.performQuickAction(r,e.command,n);if(!s)return[];const i=[];return s.forEach(e=>{i.push({range:this.convertRange(e.range),newText:e.replacementText})}),i}}else if(e.command===c.commandCreateTypeStub&&e.arguments&&e.arguments.length>=2){const t=e.arguments[0],n=e.arguments[1];return new Promise((e,r)=>{const s=this.createTypeStubService(n,t=>{t?(this.handlePostCreateTypeStub(),e()):r()}),i={workspaceName:`Create Type Stub ${n}`,rootPath:t,rootUri:this.convertPathToUri(t),serviceInstance:s,disableLanguageServices:!0};this.fetchSettingsForWorkspace(i,(e,t)=>{this.updateOptionsAndRestartService(i,e,t,n)})})}return new r.ResponseError(1,"Unsupported command")})}getConfiguration(e,t){const n=e.rootUri?e.rootUri:void 0;return this._connection.workspace.getConfiguration(t.map(e=>({scopeUri:n,section:e})))}updateSettingsForAllWorkspaces(){this._workspaceMap.forEach(e=>{this.updateSettingsForWorkspace(e)})}fetchSettingsForWorkspace(e,t){this.getConfiguration(e,["python","pyright"]).then(e=>{t(e[0],e[1])},()=>{})}updateSettingsForWorkspace(e){this.fetchSettingsForWorkspace(e,(t,n)=>{this.updateOptionsAndRestartService(e,t,n),e.disableLanguageServices=!!n.disableLanguageServices})}updateOptionsAndRestartService(e,t,n,r){const s=new o.CommandLineOptions(e.rootPath,!0);s.checkOnlyOpenFiles=!n||!!n.openFilesOnly,s.useLibraryCodeForTypes=!!n&&!!n.useLibraryCodeForTypes,s.watch=!s.checkOnlyOpenFiles,t.venvPath&&(s.venvPath=a.combinePaths(e.rootPath||this._rootPath,a.normalizePath(this.expandPathVariables(t.venvPath)))),t.pythonPath&&"python"!==t.pythonPath.trim()&&(s.pythonPath=a.combinePaths(e.rootPath||this._rootPath,a.normalizePath(this.expandPathVariables(t.pythonPath)))),t.analysis&&t.analysis.typeshedPaths&&t.analysis.typeshedPaths.length>0&&(s.typeshedPath=this.expandPathVariables(t.analysis.typeshedPaths[0])),r&&(s.typeStubTargetImportName=r),e.serviceInstance.setOptions(s)}expandPathVariables(e){return e.replace(/\$\{(.*?)\}/g,(e,t)=>{return"workspaceFolder"===t.trim()?this._rootPath:e})}convertDiagnostics(e){return e.map(e=>{const t=0===e.category?r.DiagnosticSeverity.Error:r.DiagnosticSeverity.Warning;let n=this._productName;const s=e.getRule();s&&(n=`${n} (${s})`);const i=r.Diagnostic.create(this.convertRange(e.range),e.message,t,void 0,n);2===e.category&&(i.tags=[r.DiagnosticTag.Unnecessary],i.severity=r.DiagnosticSeverity.Hint);const o=e.getRelatedInfo();return o.length>0&&(i.relatedInformation=o.map(e=>r.DiagnosticRelatedInformation.create(r.Location.create(this.convertPathToUri(e.filePath),this.convertRange(e.range)),e.message))),i})}convertRange(e){return e?r.Range.create(this.convertPosition(e.start),this.convertPosition(e.end)):r.Range.create(this.convertPosition(),this.convertPosition())}convertPosition(e){return e?r.Position.create(e.line,e.column):r.Position.create(0,0)}convertUriToPath(e){const t=s.URI.parse(e);let n=a.normalizePath(t.path);return n.match(/^\\[a-zA-Z]:\\/)&&(n=n.substr(1)),n}convertPathToUri(e){return s.URI.file(e).toString()}recordUserInteractionTime(){this._workspaceMap.forEach(e=>{e.serviceInstance.recordUserInteractionTime()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(15);var s;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.ContentModified=-32801,e.MessageWriteError=1,e.MessageReadError=2}(s=t.ErrorCodes||(t.ErrorCodes={}));class i extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:s.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,i.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=i;class o{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=o;t.RequestType0=class extends o{constructor(e){super(e,0),this._=void 0}};t.RequestType=class extends o{constructor(e){super(e,1),this._=void 0}};t.RequestType1=class extends o{constructor(e){super(e,1),this._=void 0}};t.RequestType2=class extends o{constructor(e){super(e,2),this._=void 0}};t.RequestType3=class extends o{constructor(e){super(e,3),this._=void 0}};t.RequestType4=class extends o{constructor(e){super(e,4),this._=void 0}};t.RequestType5=class extends o{constructor(e){super(e,5),this._=void 0}};t.RequestType6=class extends o{constructor(e){super(e,6),this._=void 0}};t.RequestType7=class extends o{constructor(e){super(e,7),this._=void 0}};t.RequestType8=class extends o{constructor(e){super(e,8),this._=void 0}};t.RequestType9=class extends o{constructor(e){super(e,9),this._=void 0}};t.NotificationType=class extends o{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends o{constructor(e){super(e,0),this._=void 0}};t.NotificationType1=class extends o{constructor(e){super(e,1),this._=void 0}};t.NotificationType2=class extends o{constructor(e){super(e,2),this._=void 0}};t.NotificationType3=class extends o{constructor(e){super(e,3),this._=void 0}};t.NotificationType4=class extends o{constructor(e){super(e,4),this._=void 0}};t.NotificationType5=class extends o{constructor(e){super(e,5),this._=void 0}};t.NotificationType6=class extends o{constructor(e){super(e,6),this._=void 0}};t.NotificationType7=class extends o{constructor(e){super(e,7),this._=void 0}};t.NotificationType8=class extends o{constructor(e){super(e,8),this._=void 0}};t.NotificationType9=class extends o{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),s=n(15);var i;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||s.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(i=t.CancellationToken||(t.CancellationToken={}));const o=Object.freeze((function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=i.None}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=r.None){let s=this._map.get(e);if(s)s.value=t,n!==r.None&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(s);break;case r.First:this.addItemFirst(s);break;case r.Last:default:this.addItemLast(s)}this._map.set(e,s),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(38),i=n(67),o=n(39),a=n(29),c=n(30);t.generateRandomPipeName=function(){const e=i.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(s.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((s,i)=>{let l=o.createServer(e=>{l.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])});l.on("error",i),l.listen(e,()=>{l.removeListener("error",i),s({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=o.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(39),s=n(29),i=n(30);t.createClientSocketTransport=function(e,t="utf-8"){let n,o=new Promise((e,t)=>{n=e});return new Promise((a,c)=>{let l=r.createServer(e=>{l.close(),n([new s.SocketMessageReader(e,t),new i.SocketMessageWriter(e,t)])});l.on("error",c),l.listen(e,"127.0.0.1",()=>{l.removeListener("error",c),a({onConnected:()=>o})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new s.SocketMessageReader(n,t),new i.SocketMessageWriter(n,t)]}},function(e,t,n){"use strict";var r,s,i,o,a,c,l,u,p,d,h,f,g,m,y,_,T,v,b,E;n.r(t),n.d(t,"Position",(function(){return r})),n.d(t,"Range",(function(){return s})),n.d(t,"Location",(function(){return i})),n.d(t,"LocationLink",(function(){return o})),n.d(t,"Color",(function(){return a})),n.d(t,"ColorInformation",(function(){return c})),n.d(t,"ColorPresentation",(function(){return l})),n.d(t,"FoldingRangeKind",(function(){return u})),n.d(t,"FoldingRange",(function(){return p})),n.d(t,"DiagnosticRelatedInformation",(function(){return d})),n.d(t,"DiagnosticSeverity",(function(){return h})),n.d(t,"DiagnosticTag",(function(){return f})),n.d(t,"Diagnostic",(function(){return g})),n.d(t,"Command",(function(){return m})),n.d(t,"TextEdit",(function(){return y})),n.d(t,"TextDocumentEdit",(function(){return _})),n.d(t,"CreateFile",(function(){return T})),n.d(t,"RenameFile",(function(){return v})),n.d(t,"DeleteFile",(function(){return b})),n.d(t,"WorkspaceEdit",(function(){return E})),n.d(t,"WorkspaceChange",(function(){return Q})),n.d(t,"TextDocumentIdentifier",(function(){return C})),n.d(t,"VersionedTextDocumentIdentifier",(function(){return x})),n.d(t,"TextDocumentItem",(function(){return S})),n.d(t,"MarkupKind",(function(){return k})),n.d(t,"MarkupContent",(function(){return w})),n.d(t,"CompletionItemKind",(function(){return I})),n.d(t,"InsertTextFormat",(function(){return F})),n.d(t,"CompletionItemTag",(function(){return N})),n.d(t,"CompletionItem",(function(){return R})),n.d(t,"CompletionList",(function(){return P})),n.d(t,"MarkedString",(function(){return A})),n.d(t,"Hover",(function(){return D})),n.d(t,"ParameterInformation",(function(){return O})),n.d(t,"SignatureInformation",(function(){return L})),n.d(t,"DocumentHighlightKind",(function(){return M})),n.d(t,"DocumentHighlight",(function(){return U})),n.d(t,"SymbolKind",(function(){return $})),n.d(t,"SymbolInformation",(function(){return W})),n.d(t,"DocumentSymbol",(function(){return B})),n.d(t,"CodeActionKind",(function(){return V})),n.d(t,"CodeActionContext",(function(){return q})),n.d(t,"CodeAction",(function(){return j})),n.d(t,"CodeLens",(function(){return z})),n.d(t,"FormattingOptions",(function(){return H})),n.d(t,"DocumentLink",(function(){return K})),n.d(t,"SelectionRange",(function(){return G})),n.d(t,"EOL",(function(){return Z})),n.d(t,"TextDocument",(function(){return X})),n.d(t,"TextDocumentSaveReason",(function(){return J})),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return ee.objectLiteral(t)&&ee.number(t.line)&&ee.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,s){if(ee.number(e)&&ee.number(t)&&ee.number(n)&&ee.number(s))return{start:r.create(e,t),end:r.create(n,s)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+s+"]")},e.is=function(e){var t=e;return ee.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(s||(s={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ee.defined(t)&&s.is(t.range)&&(ee.string(t.uri)||ee.undefined(t.uri))}}(i||(i={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return ee.defined(t)&&s.is(t.targetRange)&&ee.string(t.targetUri)&&(s.is(t.targetSelectionRange)||ee.undefined(t.targetSelectionRange))&&(s.is(t.originSelectionRange)||ee.undefined(t.originSelectionRange))}}(o||(o={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return ee.number(t.red)&&ee.number(t.green)&&ee.number(t.blue)&&ee.number(t.alpha)}}(a||(a={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return s.is(t.range)&&a.is(t.color)}}(c||(c={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ee.string(t.label)&&(ee.undefined(t.textEdit)||y.is(t))&&(ee.undefined(t.additionalTextEdits)||ee.typedArray(t.additionalTextEdits,y.is))}}(l||(l={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(u||(u={})),function(e){e.create=function(e,t,n,r,s){var i={startLine:e,endLine:t};return ee.defined(n)&&(i.startCharacter=n),ee.defined(r)&&(i.endCharacter=r),ee.defined(s)&&(i.kind=s),i},e.is=function(e){var t=e;return ee.number(t.startLine)&&ee.number(t.startLine)&&(ee.undefined(t.startCharacter)||ee.number(t.startCharacter))&&(ee.undefined(t.endCharacter)||ee.number(t.endCharacter))&&(ee.undefined(t.kind)||ee.string(t.kind))}}(p||(p={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ee.defined(t)&&i.is(t.location)&&ee.string(t.message)}}(d||(d={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(h||(h={})),function(e){e.Unnecessary=1,e.Deprecated=2}(f||(f={})),function(e){e.create=function(e,t,n,r,s,i){var o={range:e,message:t};return ee.defined(n)&&(o.severity=n),ee.defined(r)&&(o.code=r),ee.defined(s)&&(o.source=s),ee.defined(i)&&(o.relatedInformation=i),o},e.is=function(e){var t=e;return ee.defined(t)&&s.is(t.range)&&ee.string(t.message)&&(ee.number(t.severity)||ee.undefined(t.severity))&&(ee.number(t.code)||ee.string(t.code)||ee.undefined(t.code))&&(ee.string(t.source)||ee.undefined(t.source))&&(ee.undefined(t.relatedInformation)||ee.typedArray(t.relatedInformation,d.is))}}(g||(g={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s={title:e,command:t};return ee.defined(n)&&n.length>0&&(s.arguments=n),s},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.title)&&ee.string(t.command)}}(m||(m={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ee.objectLiteral(t)&&ee.string(t.newText)&&s.is(t.range)}}(y||(y={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ee.defined(t)&&x.is(t.textDocument)&&Array.isArray(t.edits)}}(_||(_={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&ee.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ee.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ee.boolean(t.options.ignoreIfExists)))}}(T||(T={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ee.string(t.oldUri)&&ee.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ee.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ee.boolean(t.options.ignoreIfExists)))}}(v||(v={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ee.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ee.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ee.boolean(t.options.ignoreIfNotExists)))}}(b||(b={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ee.string(e.kind)?T.is(e)||v.is(e)||b.is(e):_.is(e)})))}}(E||(E={}));var C,x,S,k,w,I,F,N,R,P,A,D,O,L,M,U,$,W,B,V,q,j,z,H,K,G,Y=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(y.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(y.replace(e,t))},e.prototype.delete=function(e){this.edits.push(y.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),Q=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(_.is(e)){var n=new Y(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new Y(e.changes[n]);t._textEditChanges[n]=r})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(x.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:s=[]};this._workspaceEdit.documentChanges.push(n),r=new Y(s),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var s=[];this._workspaceEdit.changes[e]=s,r=new Y(s),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(T.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(v.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(b.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.uri)}}(C||(C={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.uri)&&(null===t.version||ee.number(t.version))}}(x||(x={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.uri)&&ee.string(t.languageId)&&ee.number(t.version)&&ee.string(t.text)}}(S||(S={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(k||(k={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(k||(k={})),function(e){e.is=function(e){var t=e;return ee.objectLiteral(e)&&k.is(t.kind)&&ee.string(t.value)}}(w||(w={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(I||(I={})),function(e){e.PlainText=1,e.Snippet=2}(F||(F={})),function(e){e.Deprecated=1}(N||(N={})),function(e){e.create=function(e){return{label:e}}}(R||(R={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(P||(P={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ee.string(t)||ee.objectLiteral(t)&&ee.string(t.language)&&ee.string(t.value)}}(A||(A={})),function(e){e.is=function(e){var t=e;return!!t&&ee.objectLiteral(t)&&(w.is(t.contents)||A.is(t.contents)||ee.typedArray(t.contents,A.is))&&(void 0===e.range||s.is(e.range))}}(D||(D={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(O||(O={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s={label:e};return ee.defined(t)&&(s.documentation=t),ee.defined(n)?s.parameters=n:s.parameters=[],s}}(L||(L={})),function(e){e.Text=1,e.Read=2,e.Write=3}(M||(M={})),function(e){e.create=function(e,t){var n={range:e};return ee.number(t)&&(n.kind=t),n}}(U||(U={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}($||($={})),function(e){e.create=function(e,t,n,r,s){var i={name:e,kind:t,location:{uri:r,range:n}};return s&&(i.containerName=s),i}}(W||(W={})),function(e){e.create=function(e,t,n,r,s,i){var o={name:e,detail:t,kind:n,range:r,selectionRange:s};return void 0!==i&&(o.children=i),o},e.is=function(e){var t=e;return t&&ee.string(t.name)&&ee.number(t.kind)&&s.is(t.range)&&s.is(t.selectionRange)&&(void 0===t.detail||ee.string(t.detail))&&(void 0===t.deprecated||ee.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(B||(B={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(V||(V={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return ee.defined(t)&&ee.typedArray(t.diagnostics,g.is)&&(void 0===t.only||ee.typedArray(t.only,ee.string))}}(q||(q={})),function(e){e.create=function(e,t,n){var r={title:e};return m.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&ee.string(t.title)&&(void 0===t.diagnostics||ee.typedArray(t.diagnostics,g.is))&&(void 0===t.kind||ee.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||m.is(t.command))&&(void 0===t.isPreferred||ee.boolean(t.isPreferred))&&(void 0===t.edit||E.is(t.edit))}}(j||(j={})),function(e){e.create=function(e,t){var n={range:e};return ee.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ee.defined(t)&&s.is(t.range)&&(ee.undefined(t.command)||m.is(t.command))}}(z||(z={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ee.defined(t)&&ee.number(t.tabSize)&&ee.boolean(t.insertSpaces)}}(H||(H={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ee.defined(t)&&s.is(t.range)&&(ee.undefined(t.target)||ee.string(t.target))}}(K||(K={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&s.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(G||(G={}));var X,J,Z=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new te(e,t,n,r)},e.is=function(e){var t=e;return!!(ee.defined(t)&&ee.string(t.uri)&&(ee.undefined(t.languageId)||ee.string(t.languageId))&&ee.number(t.lineCount)&&ee.func(t.getText)&&ee.func(t.positionAt)&&ee.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,s=t.slice(0,r),i=t.slice(r);e(s,n),e(i,n);var o=0,a=0,c=0;for(;o<s.length&&a<i.length;){var l=n(s[o],i[a]);t[c++]=l<=0?s[o++]:i[a++]}for(;o<s.length;)t[c++]=s[o++];for(;a<i.length;)t[c++]=i[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),s=n.length,i=r.length-1;i>=0;i--){var o=r[i],a=e.offsetAt(o.range.start),c=e.offsetAt(o.range.end);if(!(c<=s))throw new Error("Overlapping edit");n=n.substring(0,a)+o.newText+n.substring(c,n.length),s=a}return n}}(X||(X={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(J||(J={}));var ee,te=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var s=t.charAt(r);n="\r"===s||"\n"===s,"\r"===s&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,s=t.length;if(0===s)return r.create(0,e);for(;n<s;){var i=Math.floor((n+s)/2);t[i]>e?s=i:n=i+1}var o=n-1;return r.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ee||(ee={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(71),s=n(4),i=n(72);t.ImplementationRequest=i.ImplementationRequest;const o=n(73);t.TypeDefinitionRequest=o.TypeDefinitionRequest;const a=n(74);t.WorkspaceFoldersRequest=a.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=a.DidChangeWorkspaceFoldersNotification;const c=n(75);t.ConfigurationRequest=c.ConfigurationRequest;const l=n(76);t.DocumentColorRequest=l.DocumentColorRequest,t.ColorPresentationRequest=l.ColorPresentationRequest;const u=n(77);t.FoldingRangeRequest=u.FoldingRangeRequest;const p=n(78);t.DeclarationRequest=p.DeclarationRequest;const d=n(79);var h,f;t.SelectionRangeRequest=d.SelectionRangeRequest,function(e){e.is=function(e){const t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(h=t.DocumentFilter||(t.DocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!h.is(t))return!1;return!0}}(f=t.DocumentSelector||(t.DocumentSelector={})),function(e){e.type=new s.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new s.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.hasId=function(e){const t=e;return t&&r.string(t.id)&&t.id.length>0}}(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||f.is(t.documentSelector))}}(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})),function(e){e.is=function(e){const t=e;return r.objectLiteral(t)&&(void 0===t.workDoneProgress||r.boolean(t.workDoneProgress))},e.hasWorkDoneProgress=function(e){const t=e;return t&&r.boolean(t.workDoneProgress)}}(t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})),function(e){e.type=new s.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new s.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new s.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new s.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new s.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new s.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new s.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new s.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new s.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new s.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new s.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new s.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new s.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new s.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new s.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new s.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new s.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new s.RequestType("textDocument/completion"),e.resultType=new s.ProgressType}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new s.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new s.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3}(t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})),function(e){e.type=new s.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new s.RequestType("textDocument/definition"),e.resultType=new s.ProgressType}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new s.RequestType("textDocument/references"),e.resultType=new s.ProgressType}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new s.RequestType("textDocument/documentHighlight"),e.resultType=new s.ProgressType}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new s.RequestType("textDocument/documentSymbol"),e.resultType=new s.ProgressType}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new s.RequestType("textDocument/codeAction"),e.resultType=new s.ProgressType}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new s.RequestType("workspace/symbol"),e.resultType=new s.ProgressType}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new s.RequestType("textDocument/codeLens"),e.resultType=new s.ProgressType}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new s.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new s.RequestType("textDocument/documentLink"),e.resultType=new s.ProgressType}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new s.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new s.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new s.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new s.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new s.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new s.RequestType("textDocument/prepareRename")}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new s.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new s.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function s(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=s,t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&s(e.then)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.RequestType("textDocument/implementation"),e.resultType=new r.ProgressType}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.RequestType("textDocument/typeDefinition"),e.resultType=new r.ProgressType}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.RequestType("textDocument/documentColor"),e.resultType=new r.ProgressType}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new r.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new r.RequestType("textDocument/foldingRange"),e.resultType=new r.ProgressType}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.RequestType("textDocument/declaration"),e.resultType=new r.ProgressType}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.RequestType("textDocument/selectionRange"),e.resultType=new r.ProgressType}(t.SelectionRangeRequest||(t.SelectionRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.CallsFrom=1,e.CallsTo=2}(t.CallHierarchyDirection||(t.CallHierarchyDirection={})),function(e){e.type=new r.RequestType("textDocument/callHierarchy"),e.resultType=new r.ProgressType}(t.CallHierarchyRequest||(t.CallHierarchyRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);!function(e){e.type=new r.ProgressType}(t.WorkDoneProgress||(t.WorkDoneProgress={})),function(e){e.type=new r.RequestType("window/workDoneProgress/create")}(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})),function(e){e.type=new r.NotificationType("window/workDoneProgress/cancel")}(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),s=n(40);t.ConfigurationFeature=e=>(class extends e{getConfiguration(e){return e?s.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(r.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(14);t.WorkspaceFoldersFeature=e=>(class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new r.Emitter,this.connection.onNotification(r.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(r.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(r.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(85),s=n(0),i=n(7),o=n(42);function a(){return"win32"===process.platform}function c(e,t,n,r){const i=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(e=>u[e]=l[e]),t&&(u.NODE_PATH?u.NODE_PATH=t+s.delimiter+u.NODE_PATH:u.NODE_PATH=t,r&&r(`NODE_PATH value is: ${u.NODE_PATH}`)),u.ELECTRON_RUN_AS_NODE="1";try{let t=o.fork("",[],{cwd:n,env:u,execArgv:["-e",i]});if(void 0===t.pid)return void c(new Error(`Starting process to resolve node module  ${e} failed`));t.on("error",e=>{c(e)}),t.on("message",n=>{"r"===n.c&&(t.send({c:"e"}),n.s?a(n.r):c(new Error(`Failed to resolve module: ${e}`)))});let r={c:"rs",a:e};t.send(r)}catch(e){c(e)}})}function l(e){let t="npm",n={encoding:"utf8"};a()&&(t="npm.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=o.spawnSync(t,["config","get","prefix"],n).stdout;if(!i)return void(e&&e("'npm config get prefix' didn't return a value."));let c=i.trim();return e&&e(`'npm config get prefix' value is: ${c}`),c.length>0?a()?s.join(c,"node_modules"):s.join(c,"lib","node_modules"):void 0}catch(e){return}finally{process.removeListener("SIGPIPE",r)}}var u;t.uriToFilePath=function(e){let t=r.parse(e);if("file:"!==t.protocol||!t.path)return;let n=t.path.split("/");for(var i=0,o=n.length;i<o;i++)n[i]=decodeURIComponent(n[i]);if("win32"===process.platform&&n.length>1){let e=n[0],t=n[1];0===e.length&&t.length>1&&":"===t[1]&&n.shift()}return s.normalize(n.join("/"))},t.resolve=c,t.resolveGlobalNodePath=l,t.resolveGlobalYarnPath=function(e){let t="yarn",n={encoding:"utf8"};a()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=o.spawnSync(t,["global","dir","--json"],n),a=i.stdout;if(!a)return void(e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr)));let c=a.trim().split(/\r?\n/);for(let e of c)try{let t=JSON.parse(e);if("log"===t.type)return s.join(t.data,"node_modules")}catch(e){}return}catch(e){return}finally{process.removeListener("SIGPIPE",r)}},function(e){let t=void 0;function n(){return void 0!==t?t:(t="win32"!==process.platform&&(!i.existsSync(__filename.toUpperCase())||!i.existsSync(__filename.toLowerCase())),t)}e.isCaseSensitive=n,e.isParent=function(e,t){return n()?0===s.normalize(t).indexOf(s.normalize(e)):0==s.normalize(t).toLowerCase().indexOf(s.normalize(e).toLowerCase())}}(u=t.FileSystem||(t.FileSystem={})),t.resolveModulePath=function(e,t,n,r){return n?(s.isAbsolute(n)||(n=s.join(e,n)),c(t,n,n,r).then(e=>u.isParent(n,e)?e:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,n=>c(t,l(r),e,r))):c(t,l(r),e,r)}},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(43)),r(n(88))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==t.SENTINEL)return s(this.right);let e=this;for(;e.parent!==t.SENTINEL&&e.parent.left!==e;)e=e.parent;return e.parent===t.SENTINEL?t.SENTINEL:e.parent}prev(){if(this.left!==t.SENTINEL)return i(this.left);let e=this;for(;e.parent!==t.SENTINEL&&e.parent.right!==e;)e=e.parent;return e.parent===t.SENTINEL?t.SENTINEL:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}function s(e){for(;e.left!==t.SENTINEL;)e=e.left;return e}function i(e){for(;e.right!==t.SENTINEL;)e=e.right;return e}function o(e){return e===t.SENTINEL?0:e.size_left+e.piece.length+o(e.right)}function a(e){return e===t.SENTINEL?0:e.lf_left+e.piece.lineFeedCnt+a(e.right)}function c(){t.SENTINEL.parent=t.SENTINEL}function l(e,n){let r=n.right;r.size_left+=n.size_left+(n.piece?n.piece.length:0),r.lf_left+=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),n.right=r.left,r.left!==t.SENTINEL&&(r.left.parent=n),r.parent=n.parent,n.parent===t.SENTINEL?e.root=r:n.parent.left===n?n.parent.left=r:n.parent.right=r,r.left=n,n.parent=r}function u(e,n){let r=n.left;n.left=r.right,r.right!==t.SENTINEL&&(r.right.parent=n),r.parent=n.parent,n.size_left-=r.size_left+(r.piece?r.piece.length:0),n.lf_left-=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),n.parent===t.SENTINEL?e.root=r:n===n.parent.right?n.parent.right=r:n.parent.left=r,r.right=n,n.parent=r}function p(e,n,r,s){for(;n!==e.root&&n!==t.SENTINEL;)n.parent.left===n&&(n.parent.size_left+=r,n.parent.lf_left+=s),n=n.parent}function d(e,t){let n=0,r=0;if(t!==e.root){if(0===n){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t===e.root)return;n=o((t=t.parent).left)-t.size_left,r=a(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=r}for(;t!==e.root&&(0!==n||0!==r);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=r),t=t.parent}}t.TreeNode=r,t.SENTINEL=new r(null,0),t.SENTINEL.parent=t.SENTINEL,t.SENTINEL.left=t.SENTINEL,t.SENTINEL.right=t.SENTINEL,t.SENTINEL.color=0,t.leftest=s,t.righttest=i,t.calculateSize=o,t.calculateLF=a,t.resetSentinel=c,t.leftRotate=l,t.rightRotate=u,t.rbDelete=function(e,n){let r,i;if(n.left===t.SENTINEL?(i=n,r=i.right):n.right===t.SENTINEL?(i=n,r=i.left):(i=s(n.right),r=i.right),i===e.root)return e.root=r,r.color=0,n.detach(),c(),void(e.root.parent=t.SENTINEL);let h,f=1===i.color;if(i===i.parent.left?i.parent.left=r:i.parent.right=r,i===n?(r.parent=i.parent,d(e,r)):(i.parent===n?r.parent=i:r.parent=i.parent,d(e,r),i.left=n.left,i.right=n.right,i.parent=n.parent,i.color=n.color,n===e.root?e.root=i:n===n.parent.left?n.parent.left=i:n.parent.right=i,i.left!==t.SENTINEL&&(i.left.parent=i),i.right!==t.SENTINEL&&(i.right.parent=i),i.size_left=n.size_left,i.lf_left=n.lf_left,d(e,i)),n.detach(),r.parent.left===r){let t=o(r),n=a(r);if(t!==r.parent.size_left||n!==r.parent.lf_left){let s=t-r.parent.size_left,i=n-r.parent.lf_left;r.parent.size_left=t,r.parent.lf_left=n,p(e,r.parent,s,i)}}if(d(e,r.parent),f)c();else{for(;r!==e.root&&0===r.color;)r===r.parent.left?(h=r.parent.right,1===h.color&&(h.color=0,r.parent.color=1,l(e,r.parent),h=r.parent.right),0===h.left.color&&0===h.right.color?(h.color=1,r=r.parent):(0===h.right.color&&(h.left.color=0,h.color=1,u(e,h),h=r.parent.right),h.color=r.parent.color,r.parent.color=0,h.right.color=0,l(e,r.parent),r=e.root)):(h=r.parent.left,1===h.color&&(h.color=0,r.parent.color=1,u(e,r.parent),h=r.parent.left),0===h.left.color&&0===h.right.color?(h.color=1,r=r.parent):(0===h.left.color&&(h.right.color=0,h.color=1,l(e,h),h=r.parent.left),h.color=r.parent.color,r.parent.color=0,h.left.color=0,u(e,r.parent),r=e.root));r.color=0,c()}},t.fixInsert=function(e,t){for(d(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&l(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,u(e,t.parent.parent))}else{const n=t.parent.parent.left;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&u(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,l(e,t.parent.parent))}e.root.color=0},t.updateTreeMetadata=p,t.recomputeTreeMetadata=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(43);function s(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}t.UTF8_BOM_CHARACTER=String.fromCharCode(65279),t.startsWithUTF8BOM=s;class i{constructor(e,t,n,r,s,i){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=s,this._normalizeEOL=i}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":n>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let e=0,s=n.length;e<s;e++){let s=n[e].buffer.replace(/\r\n|\r|\n/g,t),i=r.createLineStartsFast(s);n[e]=new r.StringBuffer(s,i)}return new r.PieceTreeBase(n,t,this._normalizeEOL)}getFirstLineText(e){return this._chunks[0].buffer.substr(0,100).split(/\r\n|\r|\n/)[0]}}t.PieceTreeTextBufferFactory=i;t.PieceTreeTextBufferBuilder=class{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&s(e)&&(this.BOM=t.UTF8_BOM_CHARACTER,e=e.substr(1));const n=e.charCodeAt(e.length-1);13===n||n>=55296&&n<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=n):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=n)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=r.createLineStarts(this._tmpLineStarts,e);this.chunks.push(new r.StringBuffer(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf}finish(e=!0){return this._finish(),new i(this.chunks,this.BOM,this.cr,this.lf,this.crlf,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=r.createLineStartsFast(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(44);class s{constructor(e,t,n,r){e>n||e===n&&t>r?(this.startLineNumber=n,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=r)}isEmpty(){return s.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return s.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}containsRange(e){return s.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}plusRange(e){return s.plusRange(this,e)}static plusRange(e,t){let n,r,i,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,r=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,r=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,r=e.startColumn),t.endLineNumber>e.endLineNumber?(i=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(i=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(i=e.endLineNumber,o=e.endColumn),new s(n,r,i,o)}intersectRanges(e){return s.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,r=e.startColumn,i=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,c=t.startColumn,l=t.endLineNumber,u=t.endColumn;return n<a?(n=a,r=c):n===a&&(r=Math.max(r,c)),i>l?(i=l,o=u):i===l&&(o=Math.min(o,u)),n>i?null:n===i&&r>o?null:new s(n,r,i,o)}equalsRange(e){return s.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return new r.Position(this.endLineNumber,this.endColumn)}getStartPosition(){return new r.Position(this.startLineNumber,this.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new s(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new s(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return s.collapseToStart(this)}static collapseToStart(e){return new s(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new s(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new s(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const n=0|e.startLineNumber,r=0|t.startLineNumber;if(n===r){const n=0|e.startColumn,r=0|t.startColumn;if(n===r){const n=0|e.endLineNumber,r=0|t.endLineNumber;if(n===r){return(0|e.endColumn)-(0|t.endColumn)}return n-r}return n-r}return n-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}}t.Range=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),s=n(41);class i{constructor(e,t){this._connection=e,this._token=t,i.Instances.set(this._token,this),this._source=new r.CancellationTokenSource}get token(){return this._source.token}begin(e,t,n,s){let i={kind:"begin",title:e,percentage:t,message:n,cancellable:s};this._connection.sendProgress(r.Proposed.WorkDoneProgress.type,this._token,i)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(r.Proposed.WorkDoneProgress.type,this._token,n)}done(){i.Instances.delete(this._token),this._source.dispose(),this._connection.sendProgress(r.Proposed.WorkDoneProgress.type,this._token,{kind:"done"})}cancel(){this._source.cancel()}}i.Instances=new Map;class o{constructor(){this._source=new r.CancellationTokenSource}get token(){return this._source.token}begin(){}report(){}done(){}}var a;t.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new o;const n=t.workDoneToken;return delete t.workDoneToken,new i(e,n)},t.ProgressFeature=e=>(class extends e{initialize(e){const t=e;t.window&&t.window.workDoneProgress&&(this._progressSupported=!0,this.connection.onNotification(r.Proposed.WorkDoneProgressCancelNotification.type,e=>{let t=i.Instances.get(e.token);void 0!==t&&t.cancel()}))}attachWorkDoneProgress(e){return void 0===e?new o:new i(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=s.generateUuid();return this.connection.sendRequest(r.Proposed.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>{return new i(this.connection,e)})}return Promise.resolve(new o)}}),function(e){e.type=new r.ProgressType}(a||(a={}));class c{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(a.type,this._token,e)}}t.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new c(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(92),i=n(7),o=n(35),a=n(36),c=n(9),l=n(22),u=n(117),p=n(119),d=n(50),h="pyrightconfig.json",f="darwin"===process.platform,g="linux"===process.platform;t.AnalyzerService=class{constructor(e,t){this._typeStubTargetIsSingleFile=!1,this._watchForSourceChanges=!1,this._verboseOutput=!1,this._requireTrackedFileUpdate=!0,this._lastUserInteractionTime=Date.now(),this._instanceName=e,this._console=t||new a.StandardConsole,this._configOptions=new o.ConfigOptions(process.cwd()),this._importResolver=new u.ImportResolver(this._configOptions),this._program=new p.Program(this._importResolver,this._configOptions,this._console),this._executionRootPath="",this._typeStubTargetImportName=void 0}dispose(){this._removeSourceFileWatchers(),this._removeConfigFileWatcher(),this._clearReloadConfigTimer(),this._clearReanalysisTimer()}setCompletionCallback(e){this._onCompletionCallback=e}setMaxAnalysisDuration(e){this._maxAnalysisTime=e}setOptions(e){this._watchForSourceChanges=!!e.watch,this._verboseOutput=!!e.verboseOutput,this._configOptions=this._getConfigOptions(e),this._program.setConfigOptions(this._configOptions),this._typeStubTargetImportName=e.typeStubTargetImportName,this._executionRootPath=c.normalizePath(c.combinePaths(e.executionRoot,this._configOptions.projectRoot)),this._applyConfigOptions()}setFileOpened(e,t,n){this._program.setFileOpened(e,t,n),this._scheduleReanalysis(!1)}updateOpenFileContents(e,t,n){this._program.setFileOpened(e,t,n),this._program.markFilesDirty([e]),this._scheduleReanalysis(!1)}setFileClosed(e){const t=this._program.setFileClosed(e);this._reportDiagnosticsForRemovedFiles(t),this._scheduleReanalysis(!1)}getDefinitionForPosition(e,t){return this._program.getDefinitionsForPosition(e,t)}getReferencesForPosition(e,t,n){return this._program.getReferencesForPosition(e,t,n)}addSymbolsForDocument(e,t){this._program.addSymbolsForDocument(e,t)}addSymbolsForWorkspace(e,t){this._program.addSymbolsForWorkspace(e,t)}getHoverForPosition(e,t){return this._program.getHoverForPosition(e,t)}getSignatureHelpForPosition(e,t){return this._program.getSignatureHelpForPosition(e,t)}getCompletionsForPosition(e,t,n){return this._program.getCompletionsForPosition(e,t,n)}resolveCompletionItem(e,t){this._program.resolveCompletionItem(e,t)}performQuickAction(e,t,n){return this._program.performQuickAction(e,t,n)}renameSymbolAtPosition(e,t,n){return this._program.renameSymbolAtPosition(e,t,n)}printStats(){this._console.log(""),this._console.log("Analysis stats");const e=this._program.getFileCount();this._console.log("Total files analyzed: "+e.toString())}printDependencies(e){this._program.printDependencies(this._executionRootPath,e)}test_getConfigOptions(e){return this._getConfigOptions(e)}test_getFileNamesFromFileSpecs(){return this._getFileNamesFromFileSpecs()}getDiagnosticsForRange(e,t){return this._program.getDiagnosticsForRange(e,this._configOptions,t)}recordUserInteractionTime(){this._lastUserInteractionTime=Date.now(),this._analyzeTimer&&this._scheduleReanalysis(!1)}_getConfigOptions(e){let t,n=e.executionRoot;e.fileSpecs&&e.fileSpecs.length>0?e.configFilePath&&this._console.log("Project cannot be mixed with source files on a command line."):e.configFilePath?(t=c.combinePaths(e.executionRoot,c.normalizePath(e.configFilePath)),i.existsSync(t)?t.toLowerCase().endsWith(".json")?n=c.getDirectoryPath(t):(n=t,t=c.combinePaths(t,h),i.existsSync(t)||(this._console.log(`Configuration file not found at ${t}.`),t=void 0)):(this._console.log(`Configuration file not found at ${t}.`),t=e.executionRoot)):n&&(t=this._findConfigFile(n),t?n=c.getDirectoryPath(t):(this._console.log("No configuration file found."),t=void 0));const r=new o.ConfigOptions(n),s=["**/node_modules","**/__pycache__",".venv",".git"];if(e.fileSpecs.length>0?e.fileSpecs.forEach(e=>{r.include.push(c.getFileSpec(n,e))}):t||e.executionRoot&&(r.include.push(c.getFileSpec(e.executionRoot,".")),s.forEach(t=>{r.exclude.push(c.getFileSpec(e.executionRoot,t))})),this._configFilePath=t,t){this._console.log(`Loading configuration file at ${t}`);const e=this._parseConfigFile(t);if(e){r.initializeFromJson(e,this._console);const n=c.getDirectoryPath(t);0===r.include.length&&(this._console.log(`No include entries specified; assuming ${t}`),r.include.push(c.getFileSpec(n,"."))),0===r.exclude.length&&s.forEach(e=>{this._console.log(`Auto-excluding ${e}`),r.exclude.push(c.getFileSpec(n,e))})}this._updateConfigFileWatcher()}const a=t=>{const n=e.fromVsCodeExtension?"the VS Code settings":"a command-line option";this._console.log(`The ${t} has been specified in both the config file and `+`${n}. The value in the config file (${r.venvPath}) `+"will take precedence")};if(e.venvPath&&(r.venvPath?a("venvPath"):r.venvPath=e.venvPath),e.pythonPath&&(this._console.log(`Setting pythonPath for service "${this._instanceName}": `+`"${e.pythonPath}"`),r.pythonPath=e.pythonPath),e.typeshedPath&&(r.typeshedPath?a("typeshedPath"):r.typeshedPath=e.typeshedPath),r.verboseOutput=!!e.verboseOutput,r.checkOnlyOpenFiles=!!e.checkOnlyOpenFiles,r.useLibraryCodeForTypes=!!e.useLibraryCodeForTypes,r.venvPath){if(i.existsSync(r.venvPath)&&c.isDirectory(r.venvPath)||this._console.log(`venvPath ${r.venvPath} is not a valid directory.`),r.defaultVenv){const e=c.combinePaths(r.venvPath,r.defaultVenv);if(i.existsSync(e)&&c.isDirectory(e)){const e=[];void 0===d.findPythonSearchPaths(r,void 0,e)&&(this._console.log("site-packages directory cannot be located for venvPath "+`${r.venvPath} and venv ${r.defaultVenv}.`),r.verboseOutput&&e.forEach(e=>{this._console.log(`  ${e}`)}))}else this._console.log(`venv ${r.defaultVenv} subdirectory not found `+`in venv path ${r.venvPath}.`)}}else{const e=[],t=d.getPythonPathFromPythonInterpreter(r.pythonPath,e);0===t.length?r.verboseOutput&&this._console.log("No search paths found for configured python interpreter."):r.verboseOutput&&(this._console.log("Search paths found for configured python interpreter:"),t.forEach(e=>{this._console.log(`  ${e}`)})),r.verboseOutput&&e.length>0&&(this._console.log("When attempting to get search paths from python interpreter:"),e.forEach(e=>{this._console.log(`  ${e}`)}))}return(r.defaultVenv||r.executionEnvironments.find(e=>!!e.venv))&&(r.venvPath||this._console.log("venvPath not specified, so venv settings will be ignored.")),r.typeshedPath&&(i.existsSync(r.typeshedPath)&&c.isDirectory(r.typeshedPath)||this._console.log(`typeshedPath ${r.typeshedPath} is not a valid directory.`)),r.typingsPath&&(i.existsSync(r.typingsPath)&&c.isDirectory(r.typingsPath)||this._console.log(`typingsPath ${r.typingsPath} is not a valid directory.`)),r}writeTypeStub(){const e=this._configOptions.typingsPath;if(!this._typeStubTargetPath||!this._typeStubTargetImportName){const e=`Import '${this._typeStubTargetImportName}'`+" could not be resolved";throw this._console.error(e),new Error(e)}if(!e){const e="No typings path was specified";throw this._console.log(e),new Error(e)}const t=this._typeStubTargetImportName.split(".");if(0===t[0].length){const e=`Import '${this._typeStubTargetImportName}'`+" could not be resolved";throw this._console.error(e),new Error(e)}try{i.existsSync(e)||i.mkdirSync(e)}catch(t){const n=`Could not create typings directory '${e}'`;throw this._console.error(n),new Error(n)}const n=c.combinePaths(e,t[0]);try{i.existsSync(n)||i.mkdirSync(n)}catch(e){const t=`Could not create typings subdirectory '${n}'`;throw this._console.error(t),new Error(t)}this._program.writeTypeStub(this._typeStubTargetPath,this._typeStubTargetIsSingleFile,n)}handlePostCreateTypeStub(){this._importResolver.invalidateCache(),this._program.markAllFilesDirty(!0)}_findConfigFile(e){return c.forEachAncestorDirectory(e,e=>{const t=c.combinePaths(e,h);return i.existsSync(t)?t:void 0})}_parseConfigFile(e){let t="",n=0;for(;;){try{t=i.readFileSync(e,{encoding:"utf8"})}catch(t){return this._console.log(`Config file "${e}" could not be read.`),void this._reportConfigParseError()}let r,s=!1;try{return r=JSON.parse(t),r}catch(e){s=!0}if(!s)break;if(n++>=5)return this._console.log(`Config file "${e}" could not be parsed. Verify that JSON is correct.`),void this._reportConfigParseError()}}_getFileNamesFromFileSpecs(){const e=new Map;return l.timingStats.findFilesTime.timeOperation(()=>{const t=this._matchFiles(this._configOptions.include,this._configOptions.exclude);for(const n of t)e.set(n,n)}),[...e.values()]}_updateTrackedFileList(e){if(this._typeStubTargetImportName){const e=this._configOptions.findExecEnvironment(this._executionRootPath),t={leadingDots:0,nameParts:this._typeStubTargetImportName.split("."),importedSymbols:[]},n=this._importResolver.resolveImport("",e,t);if(n.isImportFound){const e=[],t=n.resolvedPaths[n.resolvedPaths.length-1];let r=c.getDirectoryPath(t);for(let e=n.resolvedPaths.length-2;e>=0;e--){const t=n.resolvedPaths[e];r=t?c.getDirectoryPath(t):c.getDirectoryPath(r)}c.isDirectory(r)&&(this._typeStubTargetPath=r),t?(e.push(t),this._typeStubTargetIsSingleFile=1===n.resolvedPaths.length&&"__init__"!==c.stripFileExtension(c.getFileName(n.resolvedPaths[0]))):this._typeStubTargetIsSingleFile=!1,n.implicitImports.forEach(t=>{e.push(t.path)}),this._program.setAllowedThirdPartyImports([this._typeStubTargetImportName]),this._program.setTrackedFiles(e)}else this._console.log(`Import '${this._typeStubTargetImportName}' not found`)}else{let t=[];this._console.log("Searching for source files"),t=this._getFileNamesFromFileSpecs();const n=this._program.setTrackedFiles(t);this._reportDiagnosticsForRemovedFiles(n),this._program.markAllFilesDirty(e),0===t.length?this._console.log("No source files found."):this._console.log(`Found ${t.length} `+`source ${1===t.length?"file":"files"}`)}this._requireTrackedFileUpdate=!1}_isInExcludePath(e,t){return!!t.find(t=>t.regExp.test(e))}_matchFiles(e,t){const n=/\.pyi?$/,r=[],s=(e,i)=>{const{files:o,directories:a}=c.getFileSystemEntries(e);for(const s of o){const o=c.combinePaths(e,s);i.test(o)&&!this._isInExcludePath(o,t)&&n.test(o)&&r.push(o)}for(const n of a){const r=c.combinePaths(e,n);i.test(r)&&(this._isInExcludePath(r,t)||s(r,i))}};return e.forEach(e=>{let o=!1;if(!this._isInExcludePath(e.wildcardRoot,t))try{const t=i.statSync(e.wildcardRoot);t.isFile()?n.test(e.wildcardRoot)&&(r.push(e.wildcardRoot),o=!0):t.isDirectory()&&(s(e.wildcardRoot,e.regExp),o=!0)}catch(e){}o||this._console.log(`File or directory "${e.wildcardRoot}" does not exist.`)}),r}_removeSourceFileWatchers(){this._sourceFileWatcher&&(this._sourceFileWatcher.close(),this._sourceFileWatcher=void 0)}_updateSourceFileWatchers(){if(this._removeSourceFileWatchers(),this._importResolver.invalidateCache(),this._watchForSourceChanges&&this._configOptions.include.length>0){const e=this._configOptions.include.map(e=>c.combinePaths(this._executionRootPath,e.wildcardRoot));try{this._verboseOutput&&this._console.log(`Adding fs watcher for directories:\n ${e.join("\n")}`),this._sourceFileWatcher=this._createFileSystemWatcher(e).on("all",(e,t)=>{this._verboseOutput&&this._console.log(`Received fs event '${e}' for path '${t}'`),"change"===e?(this._program.markFilesDirty([t]),this._scheduleReanalysis(!1)):this._scheduleReanalysis(!0)})}catch(t){this._console.log(`Exception caught when installing fs watcher for:\n ${e.join("\n")}`)}}}_removeConfigFileWatcher(){this._configFileWatcher&&(this._configFileWatcher.close(),this._configFileWatcher=void 0)}_createFileSystemWatcher(e){const t={ignoreInitial:!0,ignorePermissionErrors:!0,followSymlinks:!0,interval:1e3,binaryInterval:1e3,disableGlobbing:!0};f&&(t.usePolling=!1);const n=[];(f||g)&&e.some(e=>""===e||"/"===e)&&(n.push("/dev/**"),g&&n.push("/proc/**","/sys/**")),t.ignored=n;const r=s.watch(e,t);return r.on("error",e=>{this._console.log("Error returned from file system watcher.")}),f&&!r.options.useFsEvents&&this._console.log("Watcher could not use native fsevents library. File system watcher disabled."),r}_updateConfigFileWatcher(){this._removeConfigFileWatcher(),this._configFilePath&&(this._configFileWatcher=this._createFileSystemWatcher([this._configFilePath]).on("all",e=>{this._verboseOutput&&this._console.log(`Received fs event '${e}' for config file`),this._scheduleReloadConfigFile()}))}_clearReloadConfigTimer(){this._reloadConfigTimer&&(clearTimeout(this._reloadConfigTimer),this._reloadConfigTimer=void 0)}_scheduleReloadConfigFile(){this._clearReloadConfigTimer(),this._reloadConfigTimer=setTimeout(()=>{this._clearReloadConfigTimer(),this._reloadConfigFile()},100)}_reloadConfigFile(){if(this._configFilePath){this._updateConfigFileWatcher(),this._console.log(`Reloading configuration file at ${this._configFilePath}`);const e=this._parseConfigFile(this._configFilePath);e&&this._configOptions.initializeFromJson(e,this._console),this._applyConfigOptions()}}_applyConfigOptions(){this._importResolver=new u.ImportResolver(this._configOptions),this._program.setImportResolver(this._importResolver),this._updateSourceFileWatchers(),this._updateTrackedFileList(!0),this._scheduleReanalysis(!1)}_clearReanalysisTimer(){this._analyzeTimer&&(clearTimeout(this._analyzeTimer),this._analyzeTimer=void 0)}_scheduleReanalysis(e){e&&(this._requireTrackedFileUpdate=!0),this._clearReanalysisTimer();const t=Date.now()-this._lastUserInteractionTime,n=Math.max(1e3-t,20);this._analyzeTimer=setTimeout(()=>{this._analyzeTimer=void 0,this._requireTrackedFileUpdate&&this._updateTrackedFileList(!1),this._reanalyze()&&this._scheduleReanalysis(!1)},n)}_useInteractiveMode(){return Date.now()-this._lastUserInteractionTime<1e3}_reanalyze(){let e=!1;try{const t=new l.Duration;e=this._program.analyze(this._maxAnalysisTime,this._useInteractiveMode());const n=this._program.getFilesToAnalyzeCount();r(0===n||e);const s={diagnostics:this._program.getDiagnostics(this._configOptions),filesInProgram:this._program.getFileCount(),filesRequiringAnalysis:n,checkingOnlyOpenFiles:this._program.isCheckingOnlyOpenFiles(),fatalErrorOccurred:!1,configParseErrorOccurred:!1,elapsedTime:t.getDurationInSeconds()};(s.diagnostics.length>0||!e)&&this._onCompletionCallback&&this._onCompletionCallback(s)}catch(e){const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);this._console.log("Error performing analysis: "+t),this._onCompletionCallback&&this._onCompletionCallback({diagnostics:[],filesInProgram:0,filesRequiringAnalysis:0,checkingOnlyOpenFiles:!0,fatalErrorOccurred:!0,configParseErrorOccurred:!1,elapsedTime:0})}return e}_reportDiagnosticsForRemovedFiles(e){e.length>0&&this._onCompletionCallback&&this._onCompletionCallback({diagnostics:e,filesInProgram:this._program.getFileCount(),filesRequiringAnalysis:this._program.getFilesToAnalyzeCount(),checkingOnlyOpenFiles:this._program.isCheckingOnlyOpenFiles(),fatalErrorOccurred:!1,configParseErrorOccurred:!1,elapsedTime:0})}_reportConfigParseError(){this._onCompletionCallback&&this._onCompletionCallback({diagnostics:[],filesInProgram:0,filesRequiringAnalysis:0,checkingOnlyOpenFiles:!0,fatalErrorOccurred:!1,configParseErrorOccurred:!0,elapsedTime:0})}}},function(e,t,n){"use strict";const{EventEmitter:r}=n(93),s=n(7),i=n(0),{promisify:o}=n(16),a=n(94),c=n(99).default,l=n(100),u=n(48),p=n(102),d=n(47),h=n(109),f=n(113),{EV_ALL:g,EV_READY:m,EV_ADD:y,EV_CHANGE:_,EV_UNLINK:T,EV_ADD_DIR:v,EV_UNLINK_DIR:b,EV_RAW:E,EV_ERROR:C,STR_CLOSE:x,STR_END:S,BACK_SLASH_RE:k,DOUBLE_SLASH_RE:w,SLASH_OR_BACK_SLASH_RE:I,DOT_RE:F,REPLACER_RE:N,SLASH:R,BRACE_START:P,BANG:A,ONE_DOT:D,TWO_DOTS:O,GLOBSTAR:L,SLASH_GLOBSTAR:M,ANYMATCH_OPTS:U,STRING_TYPE:$,FUNCTION_TYPE:W,EMPTY_STR:B,EMPTY_FN:V,isWindows:q,isMacos:j}=n(34),z=o(s.stat),H=o(s.readdir),K=(e=[])=>Array.isArray(e)?e:[e],G=(e,t=[])=>(e.forEach(e=>{Array.isArray(e)?G(e,t):t.push(e)}),t),Y=e=>{const t=G(K(e));if(!t.every(e=>typeof e===$))throw new TypeError(`Non-string provided as watch path: ${t}`);return t.map(X)},Q=e=>{let t=e.replace(k,R);for(;t.match(w);)t=t.replace(w,R);return t},X=e=>Q(i.normalize(Q(e))),J=(e=B)=>t=>typeof t!==$?t:X(i.isAbsolute(t)?t:i.join(e,t)),Z=(e,t)=>i.isAbsolute(e)?e:e.startsWith(A)?A+i.join(t,e.slice(1)):i.join(t,e),ee=(e,t)=>void 0===e[t];class te{constructor(e,t){this.path=e,this._removeWatcher=t,this.items=new Set}add(e){const{items:t}=this;t&&e!==D&&e!==O&&t.add(e)}async remove(e){const{items:t}=this;if(t&&(t.delete(e),!t.size)){const e=this.path;try{await H(e)}catch(t){this._removeWatcher(i.dirname(e),i.basename(e))}}}has(e){const{items:t}=this;if(t)return t.has(e)}getChildren(){const{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const ne="stat",re="lstat";class se{constructor(e,t,n,r){this.fsw=r,this.path=e=e.replace(N,B),this.watchPath=t,this.fullWatchPath=i.resolve(t),this.hasGlob=t!==e,e===B&&(this.hasGlob=!1),this.globSymlink=!(!this.hasGlob||!n)&&void 0,this.globFilter=!!this.hasGlob&&c(e,void 0,U),this.dirParts=this.getDirParts(e),this.dirParts.forEach(e=>{e.length>1&&e.pop()}),this.followSymlinks=n,this.statMethod=n?ne:re}checkGlobSymlink(e){return void 0===this.globSymlink&&(this.globSymlink=e.fullParentDir!==this.fullWatchPath&&{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return i.join(this.watchPath,i.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:t}=e;if(t&&t.isSymbolicLink())return this.filterDir(e);const n=this.entryPath(e);return(!this.hasGlob||typeof this.globFilter!==W||this.globFilter(n))&&this.fsw._isntIgnored(n,t)&&this.fsw._hasReadPermissions(t)}getDirParts(e){if(!this.hasGlob)return[];const t=[];return(e.includes(P)?p.expand(e):[e]).forEach(e=>{t.push(i.relative(this.watchPath,e).split(I))}),t}filterDir(e){if(this.hasGlob){const t=this.getDirParts(this.checkGlobSymlink(e));let n=!1;this.unmatchedGlob=!this.dirParts.some(e=>e.every((e,r)=>(e===L&&(n=!0),n||!t[0][r]||c(e,t[0][r],U))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class ie extends r{constructor(e){super();const t={};e&&Object.assign(t,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,ee(t,"persistent")&&(t.persistent=!0),ee(t,"ignoreInitial")&&(t.ignoreInitial=!1),ee(t,"ignorePermissionErrors")&&(t.ignorePermissionErrors=!1),ee(t,"interval")&&(t.interval=100),ee(t,"binaryInterval")&&(t.binaryInterval=300),ee(t,"disableGlobbing")&&(t.disableGlobbing=!1),t.enableBinaryInterval=t.binaryInterval!==t.interval,ee(t,"useFsEvents")&&(t.useFsEvents=!t.usePolling),f.canUse()||(t.useFsEvents=!1),ee(t,"usePolling")&&!t.useFsEvents&&(t.usePolling=j);const n=process.env.CHOKIDAR_USEPOLLING;if(void 0!==n){const e=n.toLowerCase();t.usePolling="false"!==e&&"0"!==e&&("true"===e||"1"===e||!!e)}const r=process.env.CHOKIDAR_INTERVAL;r&&(t.interval=Number.parseInt(r,10)),ee(t,"atomic")&&(t.atomic=!t.usePolling&&!t.useFsEvents),t.atomic&&(this._pendingUnlinks=new Map),ee(t,"followSymlinks")&&(t.followSymlinks=!0),ee(t,"awaitWriteFinish")&&(t.awaitWriteFinish=!1),!0===t.awaitWriteFinish&&(t.awaitWriteFinish={});const s=t.awaitWriteFinish;s&&(s.stabilityThreshold||(s.stabilityThreshold=2e3),s.pollInterval||(s.pollInterval=100),this._pendingWrites=new Map),t.ignored&&(t.ignored=K(t.ignored));let i=0;this._emitReady=()=>{i++,i>=this._readyCount&&(this._emitReady=V,this._readyEmitted=!0,process.nextTick(()=>this.emit(m)))},this._emitRaw=(...e)=>this.emit(E,...e),this._readyEmitted=!1,this.options=t,t.useFsEvents?this._fsEventsHandler=new f(this):this._nodeFsHandler=new h(this),Object.freeze(t)}add(e,t,n){const{cwd:r,disableGlobbing:s}=this.options;this.closed=!1;let o=Y(e);return r&&(o=o.map(e=>{const t=Z(e,r);return s||!u(e)?t:d(t)})),o=o.filter(e=>e.startsWith(A)?(this._ignoredPaths.add(e.slice(1)),!1):(this._ignoredPaths.delete(e),this._ignoredPaths.delete(e+M),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=o.length),this.options.persistent&&(this._readyCount*=2),o.forEach(e=>this._fsEventsHandler._addToFsEvents(e))):(this._readyCount||(this._readyCount=0),this._readyCount+=o.length,Promise.all(o.map(async e=>{const r=await this._nodeFsHandler._addToNodeFs(e,!n,0,0,t);return r&&this._emitReady(),r})).then(e=>{this.closed||e.filter(e=>e).forEach(e=>{this.add(i.dirname(e),i.basename(t||e))})})),this}unwatch(e){if(this.closed)return this;const t=Y(e),{cwd:n}=this.options;return t.forEach(e=>{i.isAbsolute(e)||this._closers.has(e)||(n&&(e=i.join(n,e)),e=i.resolve(e)),this._closePath(e),this._ignoredPaths.add(e),this._watched.has(e)&&this._ignoredPaths.add(e+M),this._userIgnored=void 0}),this}close(){if(this.closed)return this;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(t=>t.forEach(t=>{const n=t();n instanceof Promise&&e.push(n)})),this._streams.forEach(e=>e.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(e=>e.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(e=>{this[`_${e}`].clear()}),e.length?Promise.all(e).then(()=>void 0):Promise.resolve()}getWatched(){const e={};return this._watched.forEach((t,n)=>{const r=this.options.cwd?i.relative(this.options.cwd,n):n;e[r||D]=t.getChildren().sort()}),e}emitWithAll(e,t){this.emit(...t),e!==C&&this.emit(g,...t)}async _emit(e,t,n,r,s){if(this.closed)return;const o=this.options;q&&(t=i.normalize(t)),o.cwd&&(t=i.relative(o.cwd,t));const a=[e,t];void 0!==s?a.push(n,r,s):void 0!==r?a.push(n,r):void 0!==n&&a.push(n);const c=o.awaitWriteFinish;let l;if(c&&(l=this._pendingWrites.get(t)))return l.lastChange=new Date,this;if(o.atomic){if(e===T)return this._pendingUnlinks.set(t,a),setTimeout(()=>{this._pendingUnlinks.forEach((e,t)=>{this.emit(...e),this.emit(g,...e),this._pendingUnlinks.delete(t)})},"number"==typeof o.atomic?o.atomic:100),this;e===y&&this._pendingUnlinks.has(t)&&(e=a[0]=_,this._pendingUnlinks.delete(t))}if(c&&(e===y||e===_)&&this._readyEmitted){const n=(t,n)=>{t?(e=a[0]=C,a[1]=t,this.emitWithAll(e,a)):n&&(a.length>2?a[2]=n:a.push(n),this.emitWithAll(e,a))};return this._awaitWriteFinish(t,c.stabilityThreshold,e,n),this}if(e===_){if(!this._throttle(_,t,50))return this}if(!o.alwaysStat||void 0!==n||e!==y&&e!==v&&e!==_)this.emitWithAll(e,a);else{const n=o.cwd?i.join(o.cwd,t):t;try{const t=await z(n);if(!t)return;a.push(t),this.emitWithAll(e,a)}catch(e){}}return this}_handleError(e){const t=e&&e.code;return e&&"ENOENT"!==t&&"ENOTDIR"!==t&&(!this.options.ignorePermissionErrors||"EPERM"!==t&&"EACCES"!==t)&&this.emit(C,e),e||this.closed}_throttle(e,t,n){this._throttled.has(e)||this._throttled.set(e,new Map);const r=this._throttled.get(e),s=r.get(t);if(s)return s.count++,!1;let i;const o=()=>{const e=r.get(t),n=e?e.count:0;return r.delete(t),clearTimeout(i),e&&clearTimeout(e.timeoutObject),n};i=setTimeout(o,n);const a={timeoutObject:i,clear:o,count:0};return r.set(t,a),a}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,t,n,r){let o,a=e;this.options.cwd&&!i.isAbsolute(e)&&(a=i.join(this.options.cwd,e));const c=new Date,l=n=>{s.stat(a,(s,i)=>{if(s||!this._pendingWrites.has(e))return void(s&&"ENOENT"!==s.code&&r(s));const a=Number(new Date);n&&i.size!==n.size&&(this._pendingWrites.get(e).lastChange=a),a-this._pendingWrites.get(e).lastChange>=t?(this._pendingWrites.delete(e),r(void 0,i)):o=setTimeout(l,this.options.awaitWriteFinish.pollInterval,i)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:c,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(o),n)}),o=setTimeout(l,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,t){if(this.options.atomic&&F.test(e))return!0;if(!this._userIgnored){const{cwd:e}=this.options,t=this.options.ignored,n=t&&t.map(J(e)),r=K(n).filter(e=>typeof e===$&&!u(e)).map(e=>e+M),s=this._getGlobIgnored().map(J(e)).concat(n,r);this._userIgnored=c(s,void 0,U)}return this._userIgnored([e,t])}_isntIgnored(e,t){return!this._isIgnored(e,t)}_getWatchHelpers(e,t){const n=t||this.options.disableGlobbing||!u(e)?e:l(e),r=this.options.followSymlinks;return new se(e,n,r,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const t=i.resolve(e);return this._watched.has(t)||this._watched.set(t,new te(t,this._boundRemove)),this._watched.get(t)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const t=511&(e&&Number.parseInt(e.mode,10)),n=Number.parseInt(t.toString(8)[0],10);return Boolean(4&n)}_remove(e,t){const n=i.join(e,t),r=i.resolve(n),s=this._watched.has(n)||this._watched.has(r);if(!this._throttle("remove",n,100))return;s||this.options.useFsEvents||1!==this._watched.size||this.add(e,t,!0),this._getWatchedDir(n).getChildren().forEach(e=>this._remove(n,e));const o=this._getWatchedDir(e),a=o.has(t);o.remove(t);let c=n;if(this.options.cwd&&(c=i.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)){if(this._pendingWrites.get(c).cancelWait()===y)return}this._watched.delete(n),this._watched.delete(r);const l=s?b:T;a&&!this._isIgnored(n)&&this._emit(l,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){const t=this._closers.get(e);if(!t)return;t.forEach(e=>e()),this._closers.delete(e);const n=i.dirname(e);this._getWatchedDir(n).remove(i.basename(e))}_addPathCloser(e,t){if(!t)return;let n=this._closers.get(e);n||(n=[],this._closers.set(e,n)),n.push(t)}_readdirp(e,t){if(this.closed)return;const n={type:g,alwaysStat:!0,lstat:!0,...t};let r=a(e,n);return this._streams.add(r),r.once(x,()=>{r=void 0}),r.once(S,()=>{r&&(this._streams.delete(r),r=void 0)}),r}}t.FSWatcher=ie;t.watch=(e,t)=>{const n=new ie(t);return n.add(e),n}},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";const r=n(7),{Readable:s}=n(95),i=n(0),{promisify:o}=n(16),a=n(46),c=o(r.readdir),l=o(r.stat),u=o(r.lstat),p=new Set(["ENOENT","EPERM","EACCES","ELOOP"]),d="files",h="directories",f="files_directories",g="all",m=[d,h,f,g],y=e=>p.has(e.code),_=e=>{if(void 0!==e){if("function"==typeof e)return e;if("string"==typeof e){const t=a(e.trim());return e=>t(e.basename)}if(Array.isArray(e)){const t=[],n=[];for(const r of e){const e=r.trim();"!"===e.charAt(0)?n.push(a(e.slice(1))):t.push(a(e))}return n.length>0?t.length>0?e=>t.some(t=>t(e.basename))&&!n.some(t=>t(e.basename)):e=>!n.some(t=>t(e.basename)):e=>t.some(t=>t(e.basename))}}};class T extends s{static get defaultOptions(){return{root:".",fileFilter:e=>!0,directoryFilter:e=>!0,type:d,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(e={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:e.highWaterMark||4096});const t={...T.defaultOptions,...e},{root:n,type:s}=t;this._fileFilter=_(t.fileFilter),this._directoryFilter=_(t.directoryFilter);const o=t.lstat?u:l;"win32"===process.platform&&3===l.length?this._stat=e=>o(e,{bigint:!0}):this._stat=o,this._maxDepth=t.depth,this._wantsDir=[h,f,g].includes(s),this._wantsFile=[d,f,g].includes(s),this._wantsEverything=s===g,this._root=i.resolve(n),this._isDirent="Dirent"in r&&!t.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent};try{this.parents=[this._exploreDir(n,1)]}catch(e){this.destroy(e)}this.reading=!1,this.parent=void 0}async _read(e){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&e>0;){const{path:t,depth:n,files:r=[]}=this.parent||{};if(r.length>0){const s=r.splice(0,e).map(e=>this._formatEntry(e,t));for(const t of await Promise.all(s))this._isDirAndMatchesFilter(t)?(n<=this._maxDepth&&this.parents.push(this._exploreDir(t.fullPath,n+1)),this._wantsDir&&(this.push(t),e--)):this._isFileAndMatchesFilter(t)&&this._wantsFile&&(this.push(t),e--)}else{const e=this.parents.pop();if(!e){this.push(null);break}this.parent=await e}}}catch(e){this.destroy(e)}finally{this.reading=!1}}}async _exploreDir(e,t){let n;try{n=await c(e,this._rdOptions)}catch(e){this._onError(e)}return{files:n,depth:t,path:e}}async _formatEntry(e,t){const n=this._isDirent?e.name:e,r=i.resolve(i.join(t,n)),s={path:i.relative(this._root,r),fullPath:r,basename:n};try{s[this._statsProp]=this._isDirent?e:await this._stat(r)}catch(e){this._onError(e)}return s}_onError(e){if(!y(e)||this.destroyed)throw e;this.emit("warn",e)}_isDirAndMatchesFilter(e){const t=e&&e[this._statsProp];return t&&t.isDirectory()&&this._directoryFilter(e)}_isFileAndMatchesFilter(e){const t=e&&e[this._statsProp];return t&&(this._wantsEverything&&!t.isDirectory()||t.isFile()||t.isSymbolicLink())&&this._fileFilter(e)}}const v=(e,t={})=>{let n=t.entryType||t.type;if("both"===n&&(n=f),n&&(t.type=n),!e)throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");if("string"!=typeof e)throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(n&&!m.includes(n))throw new Error(`readdirp: Invalid type passed. Use one of ${m.join(", ")}`);return t.root=e,new T(t)};v.promise=(e,t={})=>new Promise((n,r)=>{const s=[];v(e,t).on("data",e=>s.push(e)).on("end",()=>n(s)).on("error",e=>r(e))}),v.ReaddirpStream=T,v.default=v,e.exports=v},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";const r=n(0),s=n(97),i=n(98),o=n(31),a=n(21),c=(e,t,n=!1)=>{if(Array.isArray(e)){const r=e.map(e=>c(e,t,n));return e=>{for(const t of r){const n=t(e);if(n)return n}return!1}}if("string"!=typeof e||""===e)throw new TypeError("Expected pattern to be a non-empty string");const r=t||{},s=o.isWindows(t),i=c.makeRe(e,t,!1,!0),a=i.state;delete i.state;let l=()=>!1;if(r.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};l=c(r.ignore,e,n)}const u=(n,o=!1)=>{const{isMatch:u,match:p,output:d}=c.test(n,i,t,{glob:e,posix:s}),h={glob:e,state:a,regex:i,posix:s,input:n,output:d,match:p,isMatch:u};return"function"==typeof r.onResult&&r.onResult(h),!1===u?(h.isMatch=!1,!!o&&h):l(n)?("function"==typeof r.onIgnore&&r.onIgnore(h),h.isMatch=!1,!!o&&h):("function"==typeof r.onMatch&&r.onMatch(h),!o||h)};return n&&(u.state=a),u};c.test=(e,t,n,{glob:r,posix:s}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const i=n||{},a=i.format||(s?o.toPosixSlashes:null);let l=e===r,u=l&&a?a(e):e;return!1===l&&(u=a?a(e):e,l=u===r),!1!==l&&!0!==i.capture||(l=!0===i.matchBase||!0===i.basename?c.matchBase(e,t,n,s):t.exec(u)),{isMatch:!!l,match:l,output:u}},c.matchBase=(e,t,n,s=o.isWindows(n))=>{return(t instanceof RegExp?t:c.makeRe(t,n)).test(r.basename(e))},c.isMatch=(e,t,n)=>c(t,n)(e),c.parse=(e,t)=>i(e,t),c.scan=(e,t)=>s(e,t),c.makeRe=(e,t,n=!1,r=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const s=t||{},o=s.contains?"":"^",a=s.contains?"":"$";let l,u={negated:!1,fastpaths:!0},p="";if(e.startsWith("./")&&(e=e.slice(2),p=u.prefix="./"),!1===s.fastpaths||"."!==e[0]&&"*"!==e[0]||(l=i.fastpaths(e,t)),void 0===l&&(u=c.parse(e,t),u.prefix=p+(u.prefix||""),l=u.output),!0===n)return l;let d=`${o}(?:${l})${a}`;u&&!0===u.negated&&(d=`^(?!${d}).*$`);const h=c.toRegex(d,t);return!0===r&&(h.state=u),h},c.toRegex=(e,t)=>{try{const n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=a,e.exports=c},function(e,t,n){"use strict";const r=n(31),{CHAR_ASTERISK:s,CHAR_AT:i,CHAR_BACKWARD_SLASH:o,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:u,CHAR_LEFT_CURLY_BRACE:p,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:f,CHAR_QUESTION_MARK:g,CHAR_RIGHT_CURLY_BRACE:m,CHAR_RIGHT_PARENTHESES:y,CHAR_RIGHT_SQUARE_BRACKET:_}=n(21);e.exports=(e,t)=>{const n=t||{},T=e.length-1;let v,b,E=-1,C=0,x=0,S=!1,k=!1,w=!1,I=0,F=!1;const N=()=>E>=T,R=()=>(v=b,e.charCodeAt(++E));for(;E<T;){let t;if(b=R(),b===o){k=!0,t=R(),t===p&&(F=!0);continue}if(!0===F||b===p)for(I++;!N()&&(t=R());)if(t!==o)if(t!==p){if(!F&&t===c&&(t=R())===c){S=!0;break}if(!F&&t===a){S=!0;break}if(t===m&&(I--,0===I)){F=!1;break}}else I++;else k=!0,t=R();if(b===u){if(v===c&&E===C+1){C+=2;continue}x=E+1;continue}if(b===s){S=!0;break}if(b===s||b===g){S=!0;break}if(b===h)for(;!N()&&(t=R());)if(t!==o){if(t===_){S=!0;break}}else k=!0,t=R();if((b===f||b===i||b===l)&&e.charCodeAt(E+1)===d){S=!0;break}if(n.nonegate||b!==l||E!==C){if(!0!==n.noparen&&b===d)for(;!N()&&(b=R());)if(b!==o){if(b===y){S=!0;break}}else k=!0,b=R();if(S)break}else w=!0,C++}!0===n.noext&&(S=!1);let P="";const A=e;let D=e,O="";return C>0&&(P=e.slice(0,C),e=e.slice(C),x-=C),D&&!0===S&&x>0?(D=e.slice(0,x),O=e.slice(x)):!0===S?(D="",O=e):D=e,D&&""!==D&&"/"!==D&&D!==e&&(e=>e===u||e===o)(D.charCodeAt(D.length-1))&&(D=D.slice(0,-1)),!0===n.unescape&&(O&&(O=r.removeBackslashes(O)),D&&!0===k&&(D=r.removeBackslashes(D))),{prefix:P,input:A,base:D,glob:O,negated:w,isGlob:S}}},function(e,t,n){"use strict";const r=n(21),s=n(31),{MAX_LENGTH:i,POSIX_REGEX_SOURCE:o,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:l}=r,u=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const n=`[${e.join("-")}]`;try{new RegExp(n)}catch(t){return e.map(e=>s.escapeRegex(e)).join("..")}return n},p=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,d=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const n={...t},d="number"==typeof n.maxLength?Math.min(i,n.maxLength):i;let h=e.length;if(h>d)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${d}`);const f={type:"bos",value:"",output:n.prepend||""},g=[f],m=n.capture?"":"?:",y=s.isWindows(t),_=r.globChars(y),T=r.extglobChars(_),{DOT_LITERAL:v,PLUS_LITERAL:b,SLASH_LITERAL:E,ONE_CHAR:C,DOTS_SLASH:x,NO_DOT:S,NO_DOT_SLASH:k,NO_DOTS_SLASH:w,QMARK:I,QMARK_NO_DOT:F,STAR:N,START_ANCHOR:R}=_,P=e=>`(${m}(?:(?!${R}${e.dot?x:v}).)*?)`,A=n.dot?"":S,D=n.dot?I:F;let O=!0===n.bash?P(n):N;n.capture&&(O=`(${O})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const L={input:e,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,tokens:g};e=s.removePrefix(e,L),h=e.length;const M=[],U=[];let $,W=f;const B=()=>L.index===h-1,V=L.peek=(t=1)=>e[L.index+t],q=L.advance=()=>e[++L.index],j=()=>e.slice(L.index+1),z=(e="",t=0)=>{L.consumed+=e,L.index+=t},H=e=>{L.output+=null!=e.output?e.output:e.value,z(e.value)},K=()=>{let e=1;for(;"!"===V()&&("("!==V(2)||"?"===V(3));)q(),L.start++,e++;return e%2!=0&&(L.negated=!0,L.start++,!0)},G=e=>{L[e]++,U.push(e)},Y=e=>{L[e]--,U.pop()},Q=e=>{if("globstar"===W.type){const t=L.braces>0&&("comma"===e.type||"brace"===e.type),n=!0===e.extglob||M.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||n||(L.output=L.output.slice(0,-W.output.length),W.type="star",W.value="*",W.output=O,L.output+=W.output)}M.length&&"paren"!==e.type&&!T[e.value]&&(M[M.length-1].inner+=e.value),(e.value||e.output)&&H(e),W&&"text"===W.type&&"text"===e.type?W.value+=e.value:(e.prev=W,g.push(e),W=e)},X=(e,t)=>{const r={...T[t],conditions:1,inner:""};r.prev=W,r.parens=L.parens,r.output=L.output;const s=(n.capture?"(":"")+r.open;G("parens"),Q({type:e,value:t,output:L.output?"":C}),Q({type:"paren",extglob:!0,value:q(),output:s}),M.push(r)},J=e=>{let t=e.close+(n.capture?")":"");if("negate"===e.type){let r=O;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(r=P(n)),(r!==O||B()||/^\)+$/.test(j()))&&(t=e.close=")$))"+r),"bos"===e.prev.type&&B()&&(L.negatedExtglob=!0)}Q({type:"paren",extglob:!0,value:$,output:t}),Y("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let r=!1,i=e.replace(c,(e,t,n,s,i,o)=>"\\"===s?(r=!0,e):"?"===s?t?t+s+(i?I.repeat(i.length):""):0===o?D+(i?I.repeat(i.length):""):I.repeat(n.length):"."===s?v.repeat(n.length):"*"===s?t?t+s+(i?O:""):O:t?e:"\\"+e);return!0===r&&(i=!0===n.unescape?i.replace(/\\/g,""):i.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),i===e&&!0===n.contains?(L.output=e,L):(L.output=s.wrapOutput(i,L,t),L)}for(;!B();){if($=q(),"\0"===$)continue;if("\\"===$){const e=V();if("/"===e&&!0!==n.bash)continue;if("."===e||";"===e)continue;if(!e){$+="\\",Q({type:"text",value:$});continue}const t=/^\\+/.exec(j());let r=0;if(t&&t[0].length>2&&(r=t[0].length,L.index+=r,r%2!=0&&($+="\\")),!0===n.unescape?$=q()||"":$+=q()||"",0===L.brackets){Q({type:"text",value:$});continue}}if(L.brackets>0&&("]"!==$||"["===W.value||"[^"===W.value)){if(!1!==n.posix&&":"===$){const e=W.value.slice(1);if(e.includes("[")&&(W.posix=!0,e.includes(":"))){const e=W.value.lastIndexOf("["),t=W.value.slice(0,e),n=W.value.slice(e+2),r=o[n];if(r){W.value=t+r,L.backtrack=!0,q(),f.output||1!==g.indexOf(W)||(f.output=C);continue}}}("["===$&&":"!==V()||"-"===$&&"]"===V())&&($="\\"+$),"]"!==$||"["!==W.value&&"[^"!==W.value||($="\\"+$),!0===n.posix&&"!"===$&&"["===W.value&&($="^"),W.value+=$,H({value:$});continue}if(1===L.quotes&&'"'!==$){$=s.escapeRegex($),W.value+=$,H({value:$});continue}if('"'===$){L.quotes=1===L.quotes?0:1,!0===n.keepQuotes&&Q({type:"text",value:$});continue}if("("===$){G("parens"),Q({type:"paren",value:$});continue}if(")"===$){if(0===L.parens&&!0===n.strictBrackets)throw new SyntaxError(p("opening","("));const e=M[M.length-1];if(e&&L.parens===e.parens+1){J(M.pop());continue}Q({type:"paren",value:$,output:L.parens?")":"\\)"}),Y("parens");continue}if("["===$){if(!0!==n.nobracket&&j().includes("]"))G("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(p("closing","]"));$="\\"+$}Q({type:"bracket",value:$});continue}if("]"===$){if(!0===n.nobracket||W&&"bracket"===W.type&&1===W.value.length){Q({type:"text",value:$,output:"\\"+$});continue}if(0===L.brackets){if(!0===n.strictBrackets)throw new SyntaxError(p("opening","["));Q({type:"text",value:$,output:"\\"+$});continue}Y("brackets");const e=W.value.slice(1);if(!0===W.posix||"^"!==e[0]||e.includes("/")||($="/"+$),W.value+=$,H({value:$}),!1===n.literalBrackets||s.hasRegexChars(e))continue;const t=s.escapeRegex(W.value);if(L.output=L.output.slice(0,-W.value.length),!0===n.literalBrackets){L.output+=t,W.value=t;continue}W.value=`(${m}${t}|${W.value})`,L.output+=W.value;continue}if("{"===$&&!0!==n.nobrace){G("braces"),Q({type:"brace",value:$,output:"("});continue}if("}"===$){if(!0===n.nobrace||0===L.braces){Q({type:"text",value:$,output:$});continue}let e=")";if(!0===L.dots){const t=g.slice(),r=[];for(let e=t.length-1;e>=0&&(g.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&r.unshift(t[e].value);e=u(r,n),L.backtrack=!0}Q({type:"brace",value:$,output:e}),Y("braces");continue}if("|"===$){M.length>0&&M[M.length-1].conditions++,Q({type:"text",value:$});continue}if(","===$){let e=$;L.braces>0&&"braces"===U[U.length-1]&&(e="|"),Q({type:"comma",value:$,output:e});continue}if("/"===$){if("dot"===W.type&&L.index===L.start+1){L.start=L.index+1,L.consumed="",L.output="",g.pop(),W=f;continue}Q({type:"slash",value:$,output:E});continue}if("."===$){if(L.braces>0&&"dot"===W.type){"."===W.value&&(W.output=v),W.type="dots",W.output+=$,W.value+=$,L.dots=!0;continue}if(L.braces+L.parens===0&&"bos"!==W.type&&"slash"!==W.type){Q({type:"text",value:$,output:v});continue}Q({type:"dot",value:$,output:v});continue}if("?"===$){if(!(W&&"("===W.value)&&!0!==n.noextglob&&"("===V()&&"?"!==V(2)){X("qmark",$);continue}if(W&&"paren"===W.type){const e=V();let t=$;if("<"===e&&!s.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===W.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(j()))&&(t="\\"+$),Q({type:"text",value:$,output:t});continue}if(!0!==n.dot&&("slash"===W.type||"bos"===W.type)){Q({type:"qmark",value:$,output:F});continue}Q({type:"qmark",value:$,output:I});continue}if("!"===$){if(!0!==n.noextglob&&"("===V()&&("?"!==V(2)||!/[!=<:]/.test(V(3)))){X("negate",$);continue}if(!0!==n.nonegate&&0===L.index){K();continue}}if("+"===$){if(!0!==n.noextglob&&"("===V()&&"?"!==V(2)){X("plus",$);continue}if(W&&"("===W.value||!1===n.regex){Q({type:"plus",value:$,output:b});continue}if(W&&("bracket"===W.type||"paren"===W.type||"brace"===W.type)||L.parens>0){Q({type:"plus",value:$});continue}Q({type:"plus",value:b});continue}if("@"===$){if(!0!==n.noextglob&&"("===V()&&"?"!==V(2)){Q({type:"at",extglob:!0,value:$,output:""});continue}Q({type:"text",value:$});continue}if("*"!==$){"$"!==$&&"^"!==$||($="\\"+$);const e=a.exec(j());e&&($+=e[0],L.index+=e[0].length),Q({type:"text",value:$});continue}if(W&&("globstar"===W.type||!0===W.star)){W.type="star",W.star=!0,W.value+=$,W.output=O,L.backtrack=!0,z($);continue}let t=j();if(!0!==n.noextglob&&/^\([^?]/.test(t)){X("star",$);continue}if("star"===W.type){if(!0===n.noglobstar){z($);continue}const r=W.prev,s=r.prev,i="slash"===r.type||"bos"===r.type,o=s&&("star"===s.type||"globstar"===s.type);if(!0===n.bash&&(!i||t[0]&&"/"!==t[0])){Q({type:"star",value:$,output:""});continue}const a=L.braces>0&&("comma"===r.type||"brace"===r.type),c=M.length&&("pipe"===r.type||"paren"===r.type);if(!i&&"paren"!==r.type&&!a&&!c){Q({type:"star",value:$,output:""});continue}for(;"/**"===t.slice(0,3);){const n=e[L.index+4];if(n&&"/"!==n)break;t=t.slice(3),z("/**",3)}if("bos"===r.type&&B()){W.type="globstar",W.value+=$,W.output=P(n),L.output=W.output,z($);continue}if("slash"===r.type&&"bos"!==r.prev.type&&!o&&B()){L.output=L.output.slice(0,-(r.output+W.output).length),r.output="(?:"+r.output,W.type="globstar",W.output=P(n)+(n.strictSlashes?")":"|$)"),W.value+=$,L.output+=r.output+W.output,z($);continue}if("slash"===r.type&&"bos"!==r.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";L.output=L.output.slice(0,-(r.output+W.output).length),r.output="(?:"+r.output,W.type="globstar",W.output=`${P(n)}${E}|${E}${e})`,W.value+=$,L.output+=r.output+W.output,z($+q()),Q({type:"slash",value:$,output:""});continue}if("bos"===r.type&&"/"===t[0]){W.type="globstar",W.value+=$,W.output=`(?:^|${E}|${P(n)}${E})`,L.output=W.output,z($+q()),Q({type:"slash",value:$,output:""});continue}L.output=L.output.slice(0,-W.output.length),W.type="globstar",W.output=P(n),W.value+=$,L.output+=W.output,z($);continue}const r={type:"star",value:$,output:O};!0!==n.bash?!W||"bracket"!==W.type&&"paren"!==W.type||!0!==n.regex?(L.index!==L.start&&"slash"!==W.type&&"dot"!==W.type||("dot"===W.type?(L.output+=k,W.output+=k):!0===n.dot?(L.output+=w,W.output+=w):(L.output+=A,W.output+=A),"*"!==V()&&(L.output+=C,W.output+=C)),Q(r)):(r.output=$,Q(r)):(r.output=".*?","bos"!==W.type&&"slash"!==W.type||(r.output=A+r.output),Q(r))}for(;L.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(p("closing","]"));L.output=s.escapeLast(L.output,"["),Y("brackets")}for(;L.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(p("closing",")"));L.output=s.escapeLast(L.output,"("),Y("parens")}for(;L.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(p("closing","}"));L.output=s.escapeLast(L.output,"{"),Y("braces")}if(!0===n.strictSlashes||"star"!==W.type&&"bracket"!==W.type||Q({type:"maybe_slash",value:"",output:`${E}?`}),!0===L.backtrack){L.output="";for(const e of L.tokens)L.output+=null!=e.output?e.output:e.value,e.suffix&&(L.output+=e.suffix)}return L};d.fastpaths=(e,t)=>{const n={...t},o="number"==typeof n.maxLength?Math.min(i,n.maxLength):i,a=e.length;if(a>o)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${o}`);e=l[e]||e;const c=s.isWindows(t),{DOT_LITERAL:u,SLASH_LITERAL:p,ONE_CHAR:d,DOTS_SLASH:h,NO_DOT:f,NO_DOTS:g,NO_DOTS_SLASH:m,STAR:y,START_ANCHOR:_}=r.globChars(c),T=n.dot?g:f,v=n.dot?m:f,b=n.capture?"":"?:";let E=!0===n.bash?".*?":y;n.capture&&(E=`(${E})`);const C=e=>!0===e.noglobstar?E:`(${b}(?:(?!${_}${e.dot?h:u}).)*?)`,x=e=>{switch(e){case"*":return`${T}${d}${E}`;case".*":return`${u}${d}${E}`;case"*.*":return`${T}${E}${u}${d}${E}`;case"*/*":return`${T}${E}${p}${d}${v}${E}`;case"**":return T+C(n);case"**/*":return`(?:${T}${C(n)}${p})?${v}${d}${E}`;case"**/*.*":return`(?:${T}${C(n)}${p})?${v}${E}${u}${d}${E}`;case"**/.*":return`(?:${T}${C(n)}${p})?${u}${d}${E}`;default:{const n=/^(.*?)\.(\w+)$/.exec(e);if(!n)return;const r=x(n[1],t);if(!r)return;return r+u+n[2]}}},S=s.removePrefix(e,{negated:!1,prefix:""});let k=x(S);return k&&!0!==n.strictSlashes&&(k+=`${p}?`),k},e.exports=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(46),s=n(47),i={returnIndex:!1},o=(e,t,n,r)=>{const i=Array.isArray(n),o=i?n[0]:n;if(!i&&"string"!=typeof o)throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(o));const a=s(o);for(let e=0;e<t.length;e++){if((0,t[e])(a))return!!r&&-1}const c=i&&[a].concat(n.slice(1));for(let t=0;t<e.length;t++){const n=e[t];if(i?n(...c):n(a))return!r||t}return!!r&&-1},a=(e,t,n=i)=>{if(null==e)throw new TypeError("anymatch: specify first argument");const s="boolean"==typeof n?{returnIndex:n}:n,a=s.returnIndex||!1,c=(e=>Array.isArray(e)?e:[e])(e),l=c.filter(e=>"string"==typeof e&&"!"===e.charAt(0)).map(e=>e.slice(1)).map(e=>r(e,s)),u=c.map(e=>((e,t)=>{if("function"==typeof e)return e;if("string"==typeof e){const n=r(e,t);return t=>e===t||n(t)}return e instanceof RegExp?t=>e.test(t):e=>!1})(e,s));return null==t?(e,t=!1)=>{return o(u,l,e,"boolean"==typeof t&&t)}:o(u,l,t,a)};a.default=a,e.exports=a},function(e,t,n){"use strict";var r=n(48),s=n(0).posix.dirname,i="win32"===n(38).platform(),o=/\\/g,a=/[\{\[].*[\/]*.*[\}\]]$/,c=/(^|[^\\])([\{\[]|\([^\)]+$)/,l=/\\([\*\?\|\[\]\(\)\{\}])/g;e.exports=function(e,t){Object.assign({flipBackslashes:!0},t).flipBackslashes&&i&&e.indexOf("/")<0&&(e=e.replace(o,"/")),a.test(e)&&(e+="/"),e+="a";do{e=s(e)}while(r(e)||c.test(e));return e.replace(l,"$1")}},function(e,t){
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},function(e,t,n){"use strict";const r=n(32),s=n(103),i=n(106),o=n(107),a=(e,t={})=>{let n=[];if(Array.isArray(e))for(let r of e){let e=a.create(r,t);Array.isArray(e)?n.push(...e):n.push(e)}else n=[].concat(a.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(n=[...new Set(n)]),n};a.parse=(e,t={})=>o(e,t),a.stringify=(e,t={})=>r("string"==typeof e?a.parse(e,t):e,t),a.compile=(e,t={})=>("string"==typeof e&&(e=a.parse(e,t)),s(e,t)),a.expand=(e,t={})=>{"string"==typeof e&&(e=a.parse(e,t));let n=i(e,t);return!0===t.noempty&&(n=n.filter(Boolean)),!0===t.nodupes&&(n=[...new Set(n)]),n},a.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?a.compile(e,t):a.expand(e,t),e.exports=a},function(e,t,n){"use strict";const r=n(49),s=n(33);e.exports=(e,t={})=>{let n=(e,i={})=>{let o=s.isInvalidBrace(i),a=!0===e.invalid&&!0===t.escapeInvalid,c=!0===o||!0===a,l=!0===t.escapeInvalid?"\\":"",u="";if(!0===e.isOpen)return l+e.value;if(!0===e.isClose)return l+e.value;if("open"===e.type)return c?l+e.value:"(";if("close"===e.type)return c?l+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":c?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let n=s.reduce(e.nodes),i=r(...n,{...t,wrap:!1,toRegex:!0});if(0!==i.length)return n.length>1&&i.length>1?`(${i})`:i}if(e.nodes)for(let t of e.nodes)u+=n(t,e);return u};return n(e)}},function(e,t,n){"use strict";
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(105),s=(e,t,n)=>{if(!1===r(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===r(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...n};"boolean"==typeof i.strictZeros&&(i.relaxZeros=!1===i.strictZeros);let c=e+":"+t+"="+String(i.relaxZeros)+String(i.shorthand)+String(i.capture)+String(i.wrap);if(s.cache.hasOwnProperty(c))return s.cache[c].result;let l=Math.min(e,t),u=Math.max(e,t);if(1===Math.abs(l-u)){let n=e+"|"+t;return i.capture?`(${n})`:!1===i.wrap?n:`(?:${n})`}let p=f(e)||f(t),d={min:e,max:t,a:l,b:u},h=[],g=[];if(p&&(d.isPadded=p,d.maxLen=String(d.max).length),l<0){g=o(u<0?Math.abs(u):1,Math.abs(l),d,i),l=d.a=0}return u>=0&&(h=o(l,u,d,i)),d.negatives=g,d.positives=h,d.result=function(e,t,n){let r=a(e,t,"-",!1,n)||[],s=a(t,e,"",!1,n)||[],i=a(e,t,"-?",!0,n)||[];return r.concat(i).concat(s).join("|")}(g,h,i),!0===i.capture?d.result=`(${d.result})`:!1!==i.wrap&&h.length+g.length>1&&(d.result=`(?:${d.result})`),s.cache[c]=d,d.result};function i(e,t,n){if(e===t)return{pattern:e,count:[],digits:0};let r=function(e,t){let n=[];for(let r=0;r<e.length;r++)n.push([e[r],t[r]]);return n}(e,t),s=r.length,i="",o=0;for(let e=0;e<s;e++){let[t,s]=r[e];t===s?i+=t:"0"!==t||"9"!==s?i+=h(t,s,n):o++}return o&&(i+=!0===n.shorthand?"\\d":"[0-9]"),{pattern:i,count:[o],digits:s}}function o(e,t,n,r){let s,o=function(e,t){let n=1,r=1,s=u(e,n),i=new Set([t]);for(;e<=s&&s<=t;)i.add(s),n+=1,s=u(e,n);for(s=p(t+1,r)-1;e<s&&s<=t;)i.add(s),r+=1,s=p(t+1,r)-1;return i=[...i],i.sort(c),i}(e,t),a=[],l=e;for(let e=0;e<o.length;e++){let t=o[e],c=i(String(l),String(t),r),u="";n.isPadded||!s||s.pattern!==c.pattern?(n.isPadded&&(u=g(t,n,r)),c.string=u+c.pattern+d(c.count),a.push(c),l=t+1,s=c):(s.count.length>1&&s.count.pop(),s.count.push(c.count[0]),s.string=s.pattern+d(s.count),l=t+1)}return a}function a(e,t,n,r,s){let i=[];for(let s of e){let{string:e}=s;r||l(t,"string",e)||i.push(n+e),r&&l(t,"string",e)&&i.push(n+e)}return i}function c(e,t){return e>t?1:t>e?-1:0}function l(e,t,n){return e.some(e=>e[t]===n)}function u(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function p(e,t){return e-e%Math.pow(10,t)}function d(e){let[t=0,n=""]=e;return n||t>1?`{${t+(n?","+n:"")}}`:""}function h(e,t,n){return`[${e}${t-e==1?"":"-"}${t}]`}function f(e){return/^-?(0+)\d/.test(e)}function g(e,t,n){if(!t.isPadded)return e;let r=Math.abs(t.maxLen-String(e).length),s=!1!==n.relaxZeros;switch(r){case 0:return"";case 1:return s?"0?":"0";case 2:return s?"0{0,2}":"00";default:return s?`0{0,${r}}`:`0{${r}}`}}s.cache={},s.clearCache=()=>s.cache={},e.exports=s},function(e,t,n){"use strict";
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,n){"use strict";const r=n(49),s=n(32),i=n(33),o=(e="",t="",n=!1)=>{let r=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return n?i.flatten(t).map(e=>`{${e}}`):t;for(let s of e)if(Array.isArray(s))for(let e of s)r.push(o(e,t,n));else for(let e of t)!0===n&&"string"==typeof e&&(e=`{${e}}`),r.push(Array.isArray(e)?o(s,e,n):s+e);return i.flatten(r)};e.exports=(e,t={})=>{let n=void 0===t.rangeLimit?1e3:t.rangeLimit,a=(e,c={})=>{e.queue=[];let l=c,u=c.queue;for(;"brace"!==l.type&&"root"!==l.type&&l.parent;)l=l.parent,u=l.queue;if(e.invalid||e.dollar)return void u.push(o(u.pop(),s(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void u.push(o(u.pop(),["{}"]));if(e.nodes&&e.ranges>0){let a=i.reduce(e.nodes);if(i.exceedsLimit(...a,t.step,n))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=r(...a,t);return 0===c.length&&(c=s(e,t)),u.push(o(u.pop(),c)),void(e.nodes=[])}let p=i.encloseBrace(e),d=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,d=h.queue;for(let t=0;t<e.nodes.length;t++){let n=e.nodes[t];"comma"!==n.type||"brace"!==e.type?"close"!==n.type?n.value&&"open"!==n.type?d.push(o(d.pop(),n.value)):n.nodes&&a(n,e):u.push(o(u.pop(),d,p)):(1===t&&d.push(""),d.push(""))}return d};return i.flatten(a(e))}},function(e,t,n){"use strict";const r=n(32),{MAX_LENGTH:s,CHAR_BACKSLASH:i,CHAR_BACKTICK:o,CHAR_COMMA:a,CHAR_DOT:c,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:u,CHAR_LEFT_CURLY_BRACE:p,CHAR_RIGHT_CURLY_BRACE:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:f,CHAR_DOUBLE_QUOTE:g,CHAR_SINGLE_QUOTE:m,CHAR_NO_BREAK_SPACE:y,CHAR_ZERO_WIDTH_NOBREAK_SPACE:_}=n(108);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let n=t||{},T="number"==typeof n.maxLength?Math.min(s,n.maxLength):s;if(e.length>T)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${T})`);let v,b={type:"root",input:e,nodes:[]},E=[b],C=b,x=b,S=0,k=e.length,w=0,I=0;const F=()=>e[w++],N=e=>{if("text"===e.type&&"dot"===x.type&&(x.type="text"),!x||"text"!==x.type||"text"!==e.type)return C.nodes.push(e),e.parent=C,e.prev=x,x=e,e;x.value+=e.value};for(N({type:"bos"});w<k;)if(C=E[E.length-1],v=F(),v!==_&&v!==y)if(v!==i)if(v!==f)if(v!==h)if(v!==l)if(v!==u)if(v!==g&&v!==m&&v!==o)if(v!==p)if(v!==d)if(v===a&&I>0){if(C.ranges>0){C.ranges=0;let e=C.nodes.shift();C.nodes=[e,{type:"text",value:r(C)}]}N({type:"comma",value:v}),C.commas++}else if(v===c&&I>0&&0===C.commas){let e=C.nodes;if(0===I||0===e.length){N({type:"text",value:v});continue}if("dot"===x.type){if(C.range=[],x.value+=v,x.type="range",3!==C.nodes.length&&5!==C.nodes.length){C.invalid=!0,C.ranges=0,x.type="text";continue}C.ranges++,C.args=[];continue}if("range"===x.type){e.pop();let t=e[e.length-1];t.value+=x.value+v,x=t,C.ranges--;continue}N({type:"dot",value:v})}else N({type:"text",value:v});else{if("brace"!==C.type){N({type:"text",value:v});continue}let e="close";C=E.pop(),C.close=!0,N({type:e,value:v}),I--,C=E[E.length-1]}else{I++;let e=x.value&&"$"===x.value.slice(-1)||!0===C.dollar;C=N({type:"brace",open:!0,close:!1,dollar:e,depth:I,commas:0,ranges:0,nodes:[]}),E.push(C),N({type:"open",value:v})}else{let e,n=v;for(!0!==t.keepQuotes&&(v="");w<k&&(e=F());)if(e!==i){if(e===n){!0===t.keepQuotes&&(v+=e);break}v+=e}else v+=e+F();N({type:"text",value:v})}else{if("paren"!==C.type){N({type:"text",value:v});continue}C=E.pop(),N({type:"text",value:v}),C=E[E.length-1]}else C=N({type:"paren",nodes:[]}),E.push(C),N({type:"text",value:v});else{S++;let e;for(;w<k&&(e=F());)if(v+=e,e!==h)if(e!==i){if(e===f&&(S--,0===S))break}else v+=F();else S++;N({type:"text",value:v})}else N({type:"text",value:"\\"+v});else N({type:"text",value:(t.keepEscaping?v:"")+F()});do{if(C=E.pop(),"root"!==C.type){C.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=E[E.length-1],t=e.nodes.indexOf(C);e.nodes.splice(t,1,...C.nodes)}}while(E.length>0);return N({type:"eos"}),b}},function(e,t,n){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:"",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,n){"use strict";const r=n(7),s=n(0),{promisify:i}=n(16),o=n(110),{isWindows:a,EMPTY_FN:c,EMPTY_STR:l,KEY_LISTENERS:u,KEY_ERR:p,KEY_RAW:d,HANDLER_KEYS:h,EV_CHANGE:f,EV_ADD:g,EV_ADD_DIR:m,EV_ERROR:y,STR_DATA:_,STR_END:T,BRACE_START:v,STAR:b}=n(34),E="watch",C=i(r.open),x=i(r.stat),S=i(r.lstat),k=i(r.close),w=i(r.realpath),I={lstat:S,stat:x},F=(e,t)=>{e instanceof Set?e.forEach(t):t(e)},N=(e,t,n)=>{let r=e[t];r instanceof Set||(e[t]=r=new Set([r])),r.add(n)},R=(e,t,n)=>{const r=e[t];r instanceof Set?r.delete(n):r===n&&delete e[t]},P=e=>e instanceof Set?0===e.size:!e,A=new Map;function D(e,t,n,i,o){const a=(t,r)=>{n(e),o(t,r,{watchedPath:e}),r&&e!==r&&O(s.resolve(e,r),u,s.join(e,r))};try{return r.watch(e,t,a)}catch(e){i(e)}}const O=(e,t,n,r,s)=>{const i=A.get(e);i&&F(i[t],e=>{e(n,r,s)})},L=(e,t,n,r)=>{const{listener:s,errHandler:i,rawEmitter:o}=r;let c,l=A.get(t);if(!n.persistent)return c=D(e,n,s,i,o),c.close.bind(c);if(l)N(l,u,s),N(l,p,i),N(l,d,o);else{if(c=D(e,n,O.bind(null,t,u),i,O.bind(null,t,d)),!c)return;c.on(y,async n=>{const r=O.bind(null,t,p);if(l.watcherUnusable=!0,a&&"EPERM"===n.code)try{const t=await C(e,"r");await k(t),r(n)}catch(e){}else r(n)}),l={listeners:s,errHandlers:i,rawEmitters:o,watcher:c},A.set(t,l)}return()=>{R(l,u,s),R(l,p,i),R(l,d,o),P(l.listeners)&&(l.watcher.close(),A.delete(t),h.forEach((e=>t=>{const n=e[t];n instanceof Set?n.clear():delete e[t]})(l)),l.watcher=void 0,Object.freeze(l))}},M=new Map,U=(e,t,n,s)=>{const{listener:i,rawEmitter:o}=s;let a=M.get(t),c=new Set,l=new Set;const p=a&&a.options;return p&&(p.persistent<n.persistent||p.interval>n.interval)&&(c=a.listeners,l=a.rawEmitters,r.unwatchFile(t),a=void 0),a?(N(a,u,i),N(a,d,o)):(a={listeners:i,rawEmitters:o,options:n,watcher:r.watchFile(t,n,(n,r)=>{F(a.rawEmitters,e=>{e(f,t,{curr:n,prev:r})});const s=n.mtimeMs;(n.size!==r.size||s>r.mtimeMs||0===s)&&F(a.listeners,t=>t(e,n))})},M.set(t,a)),()=>{R(a,u,i),R(a,d,o),P(a.listeners)&&(M.delete(t),r.unwatchFile(t),a.options=a.watcher=void 0,Object.freeze(a))}};e.exports=class{constructor(e){this.fsw=e,this._boundHandleError=t=>e._handleError(t)}_watchWithNodeFs(e,t){const n=this.fsw.options,r=s.dirname(e),i=s.basename(e);this.fsw._getWatchedDir(r).add(i);const a=s.resolve(e),l={persistent:n.persistent};let u;return t||(t=c),n.usePolling?(l.interval=n.enableBinaryInterval&&o(i)?n.binaryInterval:n.interval,u=U(e,a,l,{listener:t,rawEmitter:this.fsw._emitRaw})):u=L(e,a,l,{listener:t,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),u}_handleFile(e,t,n){if(this.fsw.closed)return;const r=s.dirname(e),i=s.basename(e),o=this.fsw._getWatchedDir(r);let a=t;if(o.has(i))return;const c=this._watchWithNodeFs(e,async(t,n)=>{if(this.fsw._throttle(E,e,5))if(n&&0!==n.mtimeMs){if(o.has(i)){const t=n.atimeMs,r=n.mtimeMs;(!t||t<=r||r!==a.mtimeMs)&&this.fsw._emit(f,e,n),a=n}}else try{const t=await x(e);if(this.fsw.closed)return;const n=t.atimeMs,r=t.mtimeMs;(!n||n<=r||r!==a.mtimeMs)&&this.fsw._emit(f,e,t),a=t}catch(e){this.fsw._remove(r,i)}});if((!n||!this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(g,e,0))return;this.fsw._emit(g,e,t)}return c}async _handleSymlink(e,t,n,r){if(this.fsw.closed)return;const s=e.fullPath,i=this.fsw._getWatchedDir(t);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();const t=await w(n);if(this.fsw.closed)return;return i.has(r)?this.fsw._symlinkPaths.get(s)!==t&&(this.fsw._symlinkPaths.set(s,t),this.fsw._emit(f,n,e.stats)):(i.add(r),this.fsw._symlinkPaths.set(s,t),this.fsw._emit(g,n,e.stats)),this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(s))return!0;this.fsw._symlinkPaths.set(s,!0)}_handleRead(e,t,n,r,i,o,a){if(e=s.join(e,l),!n.hasGlob&&!(a=this.fsw._throttle("readdir",e,1e3)))return;const c=this.fsw._getWatchedDir(n.path),u=new Set;let p=this.fsw._readdirp(e,{fileFilter:e=>n.filterPath(e),directoryFilter:e=>n.filterDir(e),depth:0}).on(_,async a=>{if(this.fsw.closed)return void(p=void 0);const l=a.path;let d=s.join(e,l);u.add(l),a.stats.isSymbolicLink()&&await this._handleSymlink(a,e,d,l)||(this.fsw.closed?p=void 0:l!==r&&(r||c.has(l))||(this.fsw._incrReadyCount(),d=s.join(i,s.relative(i,d)),this._addToNodeFs(d,t,n,o+1)))}).on(y,this._boundHandleError);return new Promise(t=>p.once(T,()=>{if(this.fsw.closed)return void(p=void 0);const l=!!a&&a.clear();t(),c.getChildren().filter(t=>t!==e&&!u.has(t)&&(!n.hasGlob||n.filterPath({fullPath:s.resolve(e,t)}))).forEach(t=>{this.fsw._remove(e,t)}),p=void 0,l&&this._handleRead(e,!1,n,r,i,o,a)}))}async _handleDir(e,t,n,r,i,o,a){const c=this.fsw._getWatchedDir(s.dirname(e)),l=c.has(s.basename(e));let u;n&&this.fsw.options.ignoreInitial||i||l||o.hasGlob&&!o.globFilter(e)||this.fsw._emit(m,e,t),c.add(s.basename(e)),this.fsw._getWatchedDir(e);const p=this.fsw.options.depth;if((null==p||r<=p)&&!this.fsw._symlinkPaths.has(a)){if(!i&&(await this._handleRead(e,n,o,i,e,r,void 0),this.fsw.closed))return;u=this._watchWithNodeFs(e,(t,n)=>{n&&0===n.mtimeMs||this._handleRead(t,!1,o,i,e,r,void 0)})}return u}async _addToNodeFs(e,t,n,r,i){const o=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return o(),!1;const a=this.fsw._getWatchHelpers(e,r);!a.hasGlob&&n&&(a.hasGlob=n.hasGlob,a.globFilter=n.globFilter,a.filterPath=e=>n.filterPath(e),a.filterDir=e=>n.filterDir(e));try{const n=await I[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,n))return o(),!1;const c=this.fsw.options.followSymlinks&&!e.includes(b)&&!e.includes(v);let l;if(n.isDirectory()){const s=c?await w(e):e;if(this.fsw.closed)return;if(l=await this._handleDir(a.watchPath,n,t,r,i,a,s),this.fsw.closed)return;e!==s&&void 0!==s&&this.fsw._symlinkPaths.set(s,!0)}else if(n.isSymbolicLink()){const i=c?await w(e):e;if(this.fsw.closed)return;const o=s.dirname(a.watchPath);if(this.fsw._getWatchedDir(o).add(a.watchPath),this.fsw._emit(g,a.watchPath,n),l=await this._handleDir(o,n,t,r,e,a,i),this.fsw.closed)return;void 0!==i&&this.fsw._symlinkPaths.set(s.resolve(e),i)}else l=this._handleFile(a.watchPath,n,t);return o(),this.fsw._addPathCloser(e,l),!1}catch(t){if(this.fsw._handleError(t))return o(),e}}}},function(e,t,n){"use strict";const r=n(0),s=n(111),i=new Set(s);e.exports=e=>i.has(r.extname(e).slice(1).toLowerCase())},function(e,t,n){e.exports=n(112)},function(e){e.exports=JSON.parse('["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","oga","ogg","ogv","otf","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rtf","rz","s3m","s7z","scpt","sgi","shar","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]')},function(e,t,n){"use strict";const r=n(7),s=n(0),{promisify:i}=n(16);let o;try{o=n(114)}catch(e){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(e)}if(o){const e=process.version.match(/v(\d+)\.(\d+)/);if(e&&e[1]&&e[2]){const t=Number.parseInt(e[1],10),n=Number.parseInt(e[2],10);8===t&&n<16&&(o=void 0)}}const{EV_ADD:a,EV_CHANGE:c,EV_ADD_DIR:l,EV_UNLINK:u,EV_ERROR:p,STR_DATA:d,STR_END:h,FSEVENT_CREATED:f,FSEVENT_MODIFIED:g,FSEVENT_DELETED:m,FSEVENT_MOVED:y,FSEVENT_UNKNOWN:_,FSEVENT_TYPE_DIRECTORY:T,FSEVENT_TYPE_SYMLINK:v,ROOT_GLOBSTAR:b,DIR_SUFFIX:E,DOT_SLASH:C,FUNCTION_TYPE:x,EMPTY_FN:S,IDENTITY_FN:k}=n(34),w="r",I=e=>isNaN(e)?{}:{depth:e},F=i(r.stat),N=i(r.open),R=i(r.close),P=i(r.lstat),A=i(r.realpath),D={stat:F,lstat:P},O=new Map,L=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),M=(e,t)=>{return{stop:o.watch(e,t)}};const U=e=>{let t=0;for(const n of O.keys())if(0===n.indexOf(e)&&(t++,t>=10))return!0;return!1},$=(e,t)=>{let n=0;for(;!e.indexOf(t)&&(e=s.dirname(e))!==t;)n++;return n};e.exports=class{constructor(e){this.fsw=e}checkIgnored(e,t){const n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,t))return n.add(e),t&&t.isDirectory()&&n.add(e+b),!0;n.delete(e),n.delete(e+b)}addOrChange(e,t,n,r,s,i,o,l){const u=s.has(i)?c:a;this.handleEvent(u,e,t,n,r,s,i,o,l)}async checkFd(e,t,n,r,s,i,o,a){try{const c=await N(e,w);if(this.fsw.closed)return;if(await R(c),this.fsw.closed)return;this.addOrChange(e,t,n,r,s,i,o,a)}catch(c){"EACCES"===c.code?this.addOrChange(e,t,n,r,s,i,o,a):this.handleEvent(u,e,t,n,r,s,i,o,a)}}handleEvent(e,t,n,r,s,i,o,c,p){if(!this.fsw.closed&&!this.checkIgnored(t))if(e===u)(c.type===T||i.has(o))&&this.fsw._remove(s,o);else{if(e===a){if(c.type===T&&this.fsw._getWatchedDir(t),c.type===v&&p.followSymlinks){const e=void 0===p.depth?void 0:$(n,r)+1;return this._addToFsEvents(t,!1,!0,e)}this.fsw._getWatchedDir(s).add(o)}const i=c.type===T?e+E:e;this.fsw._emit(i,t),i===l&&this._addToFsEvents(t,!1,!0)}}_watchWithFsEvents(e,t,n,r){if(this.fsw.closed)return;if(this.fsw._isIgnored(e))return;const i=this.fsw.options,a=function(e,t,n,r,i){let a=s.extname(e)?s.dirname(e):e;const c=s.dirname(a);let l=O.get(a);U(c)&&(a=c);const u=s.resolve(e),p=u!==t,d=(e,r,i)=>{p&&(e=e.replace(t,u)),e!==u&&e.indexOf(u+s.sep)||n(e,r,i)};let h=!1;for(const e of O.keys())if(0===t.indexOf(s.resolve(e)+s.sep)){a=e,l=O.get(a),h=!0;break}return l||h?l.listeners.add(d):(l={listeners:new Set([d]),rawEmitter:r,watcher:M(a,(e,t)=>{if(i.closed)return;const n=o.getInfo(e,t);l.listeners.forEach(r=>{r(e,t,n)}),l.rawEmitter(n.event,e,n)})},O.set(a,l)),()=>{const e=l.listeners;if(e.delete(d),!e.size&&(O.delete(a),l.watcher))return l.watcher.stop().then(()=>{l.rawEmitter=l.watcher=void 0,Object.freeze(l)})}}(e,t,async(o,a,c)=>{if(this.fsw.closed)return;if(void 0!==i.depth&&$(o,t)>i.depth)return;const l=n(s.join(e,s.relative(e,o)));if(r&&!r(l))return;const p=s.dirname(l),d=s.basename(l),h=this.fsw._getWatchedDir(c.type===T?l:p);if(L.has(a)||c.event===_)if(typeof i.ignored===x){let e;try{e=await F(l)}catch(e){}if(this.fsw.closed)return;if(this.checkIgnored(l,e))return;e?this.addOrChange(l,o,t,p,h,d,c,i):this.handleEvent(u,l,o,t,p,h,d,c,i)}else this.checkFd(l,o,t,p,h,d,c,i);else switch(c.event){case f:case g:return this.addOrChange(l,o,t,p,h,d,c,i);case m:case y:return this.checkFd(l,o,t,p,h,d,c,i)}},this.fsw._emitRaw,this.fsw);return this.fsw._emitReady(),a}async _handleFsEventsSymlink(e,t,n,r){if(!this.fsw.closed&&!this.fsw._symlinkPaths.has(t)){this.fsw._symlinkPaths.set(t,!0),this.fsw._incrReadyCount();try{const t=await A(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(t))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(t||e,r=>{let i=e;return t&&t!==C?i=r.replace(t,e):r!==C&&(i=s.join(e,r)),n(i)},!1,r)}catch(e){if(this.fsw._handleError(e))return this.fsw._emitReady()}}}emitAdd(e,t,n,r,i){const o=n(e),c=t.isDirectory(),u=this.fsw._getWatchedDir(s.dirname(o)),p=s.basename(o);c&&this.fsw._getWatchedDir(o),u.has(p)||(u.add(p),r.ignoreInitial&&!0!==i||this.fsw._emit(c?l:a,o,t))}initWatch(e,t,n,r){if(this.fsw.closed)return;const i=this._watchWithFsEvents(n.watchPath,s.resolve(e||n.watchPath),r,n.globFilter);this.fsw._addPathCloser(t,i)}async _addToFsEvents(e,t,n,r){if(this.fsw.closed)return;const i=this.fsw.options,o=typeof t===x?t:k,a=this.fsw._getWatchHelpers(e);try{const t=await D[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,t))throw null;if(t.isDirectory()){if(a.globFilter||this.emitAdd(o(e),t,o,i,n),r&&r>i.depth)return;this.fsw._readdirp(a.watchPath,{fileFilter:e=>a.filterPath(e),directoryFilter:e=>a.filterDir(e),...I(i.depth-(r||0))}).on(d,e=>{if(this.fsw.closed)return;if(e.stats.isDirectory()&&!a.filterPath(e))return;const t=s.join(a.watchPath,e.path),{fullPath:r}=e;if(a.followSymlinks&&e.stats.isSymbolicLink()){const e=void 0===i.depth?void 0:$(t,s.resolve(a.watchPath))+1;this._handleFsEventsSymlink(t,r,o,e)}else this.emitAdd(t,e.stats,o,i,n)}).on(p,S).on(h,()=>{this.fsw._emitReady()})}else this.emitAdd(a.watchPath,t,o,i,n),this.fsw._emitReady()}catch(e){e&&!this.fsw._handleError(e)||(this.fsw._emitReady(),this.fsw._emitReady())}if(i.persistent&&!0!==n)if(typeof t===x)this.initWatch(void 0,e,a,o);else{let t;try{t=await A(a.watchPath)}catch(e){}this.initWatch(t,e,a,o)}}},e.exports.canUse=()=>o&&O.size<128},function(e,t,n){"use strict";if("darwin"!==process.platform)throw new Error(`Module 'fsevents' is not compatible with platform '${process.platform}'`);const r=n(115),s=r.constants;function i(e){return s.ItemIsFile&e?"file":s.ItemIsDir&e?"directory":s.ItemIsSymlink&e?"symlink":void 0}function o(e){return s.ItemRemoved&e?"deleted":s.ItemRenamed&e?"moved":s.ItemCreated&e?"created":s.ItemModified&e?"modified":s.RootChanged&e?"root-changed":s.ItemCloned&e?"cloned":function(e){for(let t in e)if(e[t])return!0;return!1}(e)?"modified":"unknown"}function a(e){return{inode:!!(s.ItemInodeMetaMod&e),finder:!!(s.ItemFinderInfoMod&e),access:!!(s.ItemChangeOwner&e),xattrs:!!(s.ItemXattrMod&e)}}t.watch=function(e,t){if("string"!=typeof e)throw new TypeError(`fsevents argument 1 must be a string and not a ${typeof e}`);if("function"!=typeof t)throw new TypeError(`fsevents argument 2 must be a function and not a ${typeof t}`);let n=r.start(e,t);if(!n)throw new Error(`could not watch: ${e}`);return()=>{const e=n?Promise.resolve(n).then(r.stop):Promise.resolve(void 0);return n=void 0,e}},t.getInfo=function(e,t){return{path:e,flags:t,event:o(t),type:i(t),changes:a(t)}},t.constants=s},function(e,t,n){(function(e){try{global.process.dlopen(e,"/Users/fannheyward/src/coc-pyright/pyright-1.1.21/server/node_modules/chokidar/node_modules/fsevents/fsevents.node")}catch(e){throw new Error("Cannot open /Users/fannheyward/src/coc-pyright/pyright-1.1.21/server/node_modules/chokidar/node_modules/fsevents/fsevents.node: "+e)}}).call(this,n(116)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),s=n(9),i=n(17),o=n(23),a=n(50),c=n(11);t.ImportResolver=class{constructor(e){this._cachedPythonSearchPaths=new Map,this._cachedImportResults=new Map,this._configOptions=e}invalidateCache(){this._cachedPythonSearchPaths=new Map,this._cachedImportResults=new Map}resolveImport(e,t,n){const r=this._formatImportName(n),s=[];if(n.leadingDots>0){const t=this._resolveRelativeImport(e,n,r,s);if(t)return t.isRelative=!0,t}else{const e=this._lookUpResultsInCache(t,r,n.importedSymbols);if(e)return e;if(n.nameParts.length>0){const e=this._findTypeshedPath(t,n,r,!0,s);if(e)return e.isTypeshedFile=!0,this._addResultsToCache(t,r,e,n.importedSymbols)}let i;s.push("Looking in root directory of execution environment "+`'${t.root}'`);let o=this._resolveAbsoluteImport(t.root,n,r,s);if(o&&o.isImportFound)return this._addResultsToCache(t,r,o,n.importedSymbols);i=o;for(const e of t.extraPaths){if(s.push(`Looking in extraPath '${e}'`),o=this._resolveAbsoluteImport(e,n,r,s),o&&o.isImportFound)return this._addResultsToCache(t,r,o,n.importedSymbols);o&&(void 0===i||o.resolvedPaths.length>i.resolvedPaths.length)&&(i=o)}if(this._configOptions.typingsPath){s.push(`Looking in typingsPath '${this._configOptions.typingsPath}'`);const e=this._resolveAbsoluteImport(this._configOptions.typingsPath,n,r,s);if(e&&e.isImportFound)return e.importType=2,e.isLocalTypingsFile=!0,this._addResultsToCache(t,r,e,n.importedSymbols)}s.push("Looking for typeshed path");const a=this._findTypeshedPath(t,n,r,!1,s);if(a)return a.isTypeshedFile=!0,this._addResultsToCache(t,r,a,n.importedSymbols);const c=this._getPythonSearchPaths(t,s);if(c.length>0)for(const e of c){s.push(`Looking in python search path '${e}'`);const o=this._resolveAbsoluteImport(e,n,r,s,!0,!0,!0);if(o){if(o.importType=1,o.isImportFound)return this._addResultsToCache(t,r,o,n.importedSymbols);(void 0===i||o.resolvedPaths.length>i.resolvedPaths.length)&&(i=o)}}else s.push("No python interpreter search path");if(i)return this._addResultsToCache(t,r,i,n.importedSymbols)}const i={importName:r,isRelative:!1,isImportFound:!1,importFailureInfo:s,resolvedPaths:[],importType:2,isStubFile:!1,isPydFile:!1,implicitImports:[]};return this._addResultsToCache(t,r,i,void 0)}getCompletionSuggestions(e,t,n,r){const s=[],i=[];if(n.leadingDots>0)this._getCompletionSuggestionsRelative(e,n,i,r);else{n.nameParts.length>0&&this._getCompletionSuggestionsTypeshedPath(t,n,!0,i,r),this._getCompletionSuggestionsAbsolute(t.root,n,i,r);for(const e of t.extraPaths)this._getCompletionSuggestionsAbsolute(e,n,i,r);this._configOptions.typingsPath&&this._getCompletionSuggestionsAbsolute(this._configOptions.typingsPath,n,i,r),this._getCompletionSuggestionsTypeshedPath(t,n,!1,i,r);const e=this._getPythonSearchPaths(t,s);for(const t of e)this._getCompletionSuggestionsAbsolute(t,n,i,r)}return i}getModuleNameForImport(e,t){let n,r=0;const s=[],i=this._getTypeshedPath(!0,t,s);if(i&&(n=this._getModuleNameFromPath(i,e,!0),n))return{moduleName:n,importType:r};n=this._getModuleNameFromPath(t.root,e);for(const s of t.extraPaths){const t=this._getModuleNameFromPath(s,e);(!n||t&&t.length<n.length)&&(n=t,r=2)}if(this._configOptions.typingsPath){const t=this._getModuleNameFromPath(this._configOptions.typingsPath,e);(!n||t&&t.length<n.length)&&(n=t,r=1)}const o=this._getTypeshedPath(!1,t,s);if(o){const t=this._getModuleNameFromPath(o,e,!0);(!n||t&&t.length<n.length)&&(n=t,r=1)}const a=this._getPythonSearchPaths(t,s);for(const t of a){const s=this._getModuleNameFromPath(t,e);(!n||s&&s.length<n.length)&&(n=s,r=1)}return n?{moduleName:n,importType:r}:{moduleName:"",importType:2}}_lookUpResultsInCache(e,t,n){const r=this._cachedImportResults.get(e.root);if(!r)return;const s=r.get(t);return s?this._filterImplicitImports(s,n):void 0}_addResultsToCache(e,t,n,r){let s=this._cachedImportResults.get(e.root);return s||(s=new Map,this._cachedImportResults.set(e.root,s)),s.set(t,n),this._filterImplicitImports(n,r)}_getModuleNameFromPath(e,t,n=!1){e=s.ensureTrailingDirectorySeparator(e);let r=s.stripFileExtension(t);if(!r.startsWith(e))return;r.endsWith("__init__")&&(r=r.substr(0,r.length-9));const i=r.substr(e.length),o=s.getPathComponents(i);if(o.shift(),n){if(0===o.length)return;o.shift()}return 0!==o.length?o.join("."):void 0}_getPythonSearchPaths(e,t){const n=e.venv?e.venv:"<default>";return this._cachedPythonSearchPaths.has(n)||this._cachedPythonSearchPaths.set(n,a.findPythonSearchPaths(this._configOptions,e.venv,t)||[]),this._cachedPythonSearchPaths.get(n)}_findTypeshedPath(e,t,n,o,a){a.push(`Looking for typeshed ${o?"stdlib":"third_party"} path`);const c=this._getTypeshedPath(o,e,a);if(!c)return;let l=255&e.pythonVersion;for(;;){const e=l>0?i.versionToString(768+l):0===l?"3":"2and3",u=s.combinePaths(c,e);if(r.existsSync(u)){const e=this._resolveAbsoluteImport(u,t,n,a);if(e&&e.isImportFound)return e.importType=o?0:1,e}if(-1===l)break;l--}a.push("Typeshed path not found")}_getCompletionSuggestionsTypeshedPath(e,t,n,o,a){const c=this._getTypeshedPath(n,e,[]);if(!c)return;let l=255&e.pythonVersion;for(;;){const e=l>0?i.versionToString(768+l):0===l?"3":"2and3",n=s.combinePaths(c,e);if(r.existsSync(n)&&this._getCompletionSuggestionsAbsolute(n,t,o,a),-1===l)break;l--}}_getTypeshedPath(e,t,n){if(e){if(void 0!==this._cachedTypeshedStdLibPath)return this._cachedTypeshedStdLibPath}else if(void 0!==this._cachedTypeshedThirdPartyPath)return this._cachedTypeshedThirdPartyPath;let i="";if(this._configOptions.typeshedPath){const e=this._configOptions.typeshedPath;r.existsSync(e)&&s.isDirectory(e)&&(i=e)}else{const e=this._getPythonSearchPaths(t,n);for(const t of e){const e=s.combinePaths(t,"typeshed");if(r.existsSync(e)&&s.isDirectory(e)){i=e;break}}}if(i||(i=a.getTypeShedFallbackPath()||""),i=a.getTypeshedSubdirectory(i,e),r.existsSync(i)&&s.isDirectory(i))return e?this._cachedTypeshedStdLibPath=i:this._cachedTypeshedThirdPartyPath=i,i}_resolveRelativeImport(e,t,n,r){r.push("Attempting to resolve relative import");let i=s.getDirectoryPath(e);for(let e=1;e<t.leadingDots;e++){if(""===i)return void r.push(`Invalid relative path '${n}'`);i=s.getDirectoryPath(i)}const o=this._resolveAbsoluteImport(i,t,n,r);if(o)return this._filterImplicitImports(o,t.importedSymbols)}_getCompletionSuggestionsRelative(e,t,n,r){let i=s.getDirectoryPath(e);for(let e=1;e<t.leadingDots;e++){if(""===i)return;i=s.getDirectoryPath(i)}this._getCompletionSuggestionsAbsolute(i,t,n,r)}_resolveAbsoluteImport(e,t,n,i,o=!1,a=!1,c=!1){i.push(`Attempting to resolve using root path '${e}'`);const l=[];let u,p=e,d=!1,h=!1,f=!1,g=[];if(0===t.nameParts.length){const e=s.combinePaths(p,"__init__.py"),t=e+"i",n=e+"d";r.existsSync(t)&&s.isFile(t)?(i.push(`Resolved import with file '${t}'`),l.push(t),h=!0):r.existsSync(e)&&s.isFile(e)?(i.push(`Resolved import with file '${e}'`),l.push(e)):a&&r.existsSync(n)&&s.isFile(n)?(i.push(`Resolved import with file '${n}'`),l.push(n),f=!0):(i.push(`Partially resolved import with directory '${p}'`),l.push(""),d=!0),g=this._findImplicitImports(p,[e,t])}else for(let e=0;e<t.nameParts.length;e++){const n=e===t.nameParts.length-1;p=s.combinePaths(p,t.nameParts[e]);let o=!1;if(c){const e=p+"-stubs";o=r.existsSync(e)&&s.isDirectory(e),o&&(p=e)}if(o||(o=r.existsSync(p)&&s.isDirectory(p)),o){if(!n){l.push("");continue}const e=s.combinePaths(p,"__init__.py"),t=e+"i";let o=!1;if(r.existsSync(t)&&s.isFile(t)?(i.push(`Resolved import with file '${t}'`),l.push(t),n&&(h=!0),o=!0):r.existsSync(e)&&s.isFile(e)&&(i.push(`Resolved import with file '${e}'`),l.push(e),o=!0),o){g=this._findImplicitImports(p,[e,t]);break}}const u=s.stripTrailingDirectorySeparator(p)+".py",m=u+"i",y=u+"d";r.existsSync(m)&&s.isFile(m)?(i.push(`Resolved import with file '${m}'`),l.push(m),n&&(h=!0)):r.existsSync(u)&&s.isFile(u)?(i.push(`Resolved import with file '${u}'`),l.push(u)):a&&r.existsSync(y)&&s.isFile(y)?(i.push(`Resolved import with file '${y}'`),l.push(y),n&&(f=!0)):o?(i.push(`Partially resolved import with directory '${p}'`),l.push(""),n&&(g=this._findImplicitImports(p,[u,m]),d=!0)):i.push(`Did not find file '${m}',`+` '${u}' or '${y}'`);break}return o?u=l.length>0:(u=l.length>=t.nameParts.length,d&&0===g.length&&(u=!1)),{importName:n,isRelative:!1,isImportFound:u,importFailureInfo:i,importType:2,resolvedPaths:l,searchPath:e,isStubFile:h,isPydFile:f,implicitImports:g}}_getCompletionSuggestionsAbsolute(e,t,n,i){let o=e;const a=t.nameParts.map(e=>e);if(t.hasTrailingDot&&a.push(""),0===a.length)this._addFilteredSuggestions(o,"",n,i);else for(let e=0;e<a.length&&(e===a.length-1&&this._addFilteredSuggestions(o,a[e],n,i),o=s.combinePaths(o,a[e]),r.existsSync(o)&&s.isDirectory(o));e++);}_addFilteredSuggestions(e,t,n,r){const i=s.getFileSystemEntries(e);i.files.forEach(e=>{const i=s.stripFileExtension(e),a=s.getFileExtension(e);".py"!==a&&".pyi"!==a&&".pyd"!==a||"__init__"!==i&&(!t||o.computeCompletionSimilarity(t,i)>=r)&&this._addUniqueSuggestion(i,n)}),i.directories.forEach(e=>{t&&!e.startsWith(t)||this._addUniqueSuggestion(e,n)})}_addUniqueSuggestion(e,t){t.some(t=>t===e)||/[.-]/.test(e)||c.isDunderName(e)||t.push(e)}_filterImplicitImports(e,t){if(void 0===t||0===t.length)return e;if(0===e.implicitImports.length)return e;const n=e.implicitImports.filter(e=>t.some(t=>t===e.name));if(n.length===e.implicitImports.length)return e;const r=Object.assign({},e);return r.implicitImports=n,r}_findImplicitImports(e,t){const n=new Map,i=s.getFileSystemEntries(e);for(const r of i.files)if(r.endsWith(".py")||r.endsWith(".pyi")){const i=s.combinePaths(e,r);if(!t.find(e=>e===i)){const e=s.stripFileExtension(r),t={isStubFile:r.endsWith(".pyi"),name:e,path:i},o=n.get(t.name);o&&o.isStubFile||n.set(t.name,t)}}for(const o of i.directories){const i=s.combinePaths(e,o,"__init__.py"),a=i+"i";let c=!1,l="";if(r.existsSync(a)&&s.isFile(a)?(c=!0,l=a):r.existsSync(i)&&s.isFile(i)&&(l=i),l&&!t.find(e=>e===l)){const e={isStubFile:c,name:o,path:l};n.set(e.name,e)}}return[...n.values()]}_formatImportName(e){let t="";for(let n=0;n<e.leadingDots;n++)t+=".";return t+e.nameParts.map(e=>e).join(".")}}},function(e,t,n){"use strict";const r=[],s=[],i=(e,t)=>{if(e===t)return 0;const n=e;e.length>t.length&&(e=t,t=n);let i=e.length,o=t.length;for(;i>0&&e.charCodeAt(~-i)===t.charCodeAt(~-o);)i--,o--;let a,c,l,u,p=0;for(;p<i&&e.charCodeAt(p)===t.charCodeAt(p);)p++;if(i-=p,o-=p,0===i)return o;let d=0,h=0;for(;d<i;)s[d]=e.charCodeAt(p+d),r[d]=++d;for(;h<o;)for(a=t.charCodeAt(p+h),l=h++,c=h,d=0;d<i;d++)u=a===s[d]?l:l+1,l=r[d],c=r[d]=l>c?u>c?c+1:u:u>l?l+1:u;return c};e.exports=i,e.exports.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(36),i=n(8),o=n(9),a=n(22),c=n(5),l=n(120),u=n(121),p=n(139),d=n(140),h=256;t.Program=class{constructor(e,t,n){this._sourceFileList=[],this._sourceFileMap=new Map,this._lookUpImport=e=>{const t=this._sourceFileMap.get(e);if(!t)return;t.sourceFile.isBindingRequired()&&a.timingStats.typeCheckerTime.subtractFromTime(()=>{this._bindFile(t)});const n=t.sourceFile.getModuleSymbolTable();return n?{symbolTable:n,docString:t.sourceFile.getModuleDocString()}:void 0},this._console=n||new s.StandardConsole,this._evaluator=p.createTypeEvaluator(this._lookUpImport),this._importResolver=e,this._configOptions=t}setConfigOptions(e){this._configOptions=e}setImportResolver(e){this._importResolver=e}setTrackedFiles(e){if(this._sourceFileList.length>0){const t=new Map;e.forEach(e=>{t.set(e,e)}),this._sourceFileList.forEach(e=>{const n=e.sourceFile.getFilePath();t.has(n)||(e.isTracked=!1)})}return this.addTrackedFiles(e),this._removeUnneededFiles()}setAllowedThirdPartyImports(e){this._allowedThirdPartyImports=e}getFileCount(){return this._sourceFileList.length}getFilesToAnalyzeCount(){let e=0;return this._sourceFileList.forEach(t=>{(t.sourceFile.isParseRequired()||t.sourceFile.isBindingRequired()||t.sourceFile.isCheckingRequired())&&(!this._configOptions.checkOnlyOpenFiles&&t.isTracked||t.isOpenByClient)&&e++}),e}isCheckingOnlyOpenFiles(){return this._configOptions.checkOnlyOpenFiles}addTrackedFiles(e){e.forEach(e=>{this.addTrackedFile(e)})}addTrackedFile(e){let t=this._sourceFileMap.get(e);if(t)return t.isTracked=!0,t.sourceFile;const n=new u.SourceFile(e,!1,!1,this._console);return t={sourceFile:n,isTracked:!0,isOpenByClient:!1,isTypeshedFile:!1,isThirdPartyImport:!1,diagnosticsVersion:n.getDiagnosticVersion(),imports:[],importedBy:[]},this._addToSourceFileListAndMap(t),n}setFileOpened(e,t,n){let r=this._sourceFileMap.get(e);if(r)r.isOpenByClient=!0;else{const t=new u.SourceFile(e,!1,!1,this._console);r={sourceFile:t,isTracked:!1,isOpenByClient:!0,isTypeshedFile:!1,isThirdPartyImport:!1,diagnosticsVersion:t.getDiagnosticVersion(),imports:[],importedBy:[]},this._addToSourceFileListAndMap(r)}r.sourceFile.setClientVersion(t,n)}setFileClosed(e){const t=this._sourceFileMap.get(e);return t&&(t.isOpenByClient=!1,t.sourceFile.setClientVersion(null,"")),this._removeUnneededFiles()}markAllFilesDirty(e){const t=new Map;this._sourceFileList.forEach(n=>{e?n.sourceFile.markDirty():n.sourceFile.didContentsChangeOnDisk()&&(n.sourceFile.markDirty(),this._markFileDirtyRecursive(n,t))}),t.size>0&&this._createNewEvaluator()}markFilesDirty(e){const t=new Map;e.forEach(e=>{const n=this._sourceFileMap.get(e);n&&(n.sourceFile.markDirty(),this._markFileDirtyRecursive(n,t))}),t.size>0&&this._createNewEvaluator()}getSourceFile(e){const t=this._sourceFileMap.get(e);if(t)return t.sourceFile}analyze(e,t){const n=new a.Duration,r=this._sourceFileList.filter(e=>e.isOpenByClient&&e.sourceFile.isCheckingRequired());if(r.length>0){const t=e?e.openFilesTimeInMs:Number.MAX_VALUE;for(const e of r)if(this._checkTypes(e)&&n.getDurationInMilliseconds()>t)return!0;if(void 0!==e)return!0}if(!this._configOptions.checkOnlyOpenFiles){const r=this._sourceFileList,s=e?t?e.openFilesTimeInMs:e.noOpenFilesTimeInMs:Number.MAX_VALUE;for(const e of r)if(this._checkTypes(e)&&n.getDurationInMilliseconds()>s)return!0}return!1}printDependencies(e,t){const n=this._sourceFileList.filter(e=>!e.isTypeshedFile).sort((e,t)=>e.sourceFile.getFilePath()<t.sourceFile.getFilePath()?1:-1),r=[];n.forEach(n=>{this._console.log("");let s=n.sourceFile.getFilePath();const i=o.getRelativePath(s,e);i&&(s=i),this._console.log(`${s}`),this._console.log(` Imports     ${n.imports.length} `+`file${1===n.imports.length?"":"s"}`),t&&n.imports.forEach(e=>{this._console.log(`    ${e.sourceFile.getFilePath()}`)}),this._console.log(` Imported by ${n.importedBy.length} `+`file${1===n.importedBy.length?"":"s"}`),t&&n.importedBy.forEach(e=>{this._console.log(`    ${e.sourceFile.getFilePath()}`)}),0===n.importedBy.length&&r.push(n.sourceFile)}),r.length>0&&(this._console.log(""),this._console.log(`${r.length} file${1===r.length?"":"s"}`+" not explicitly imported"),r.forEach(e=>{this._console.log(`    ${e.getFilePath()}`)}))}writeTypeStub(e,t,n){for(const r of this._sourceFileList){const s=r.sourceFile.getFilePath(),i=o.getRelativePath(s,e);if(void 0!==i){let e=o.normalizePath(o.combinePaths(n,i));e=t?o.combinePaths(o.getDirectoryPath(e),"__init__.pyi"):o.stripFileExtension(e)+".pyi";const s=o.getDirectoryPath(e);try{o.makeDirectories(s,n)}catch(e){throw new Error(`Could not create directory for '${s}'`)}this._bindFile(r),new d.TypeStubWriter(e,r.sourceFile,this._evaluator).write()}}}_createNewEvaluator(){this._evaluator=p.createTypeEvaluator(this._lookUpImport)}_parseFile(e){if(this._isFileNeeded(e)&&e.sourceFile.isParseRequired()&&(e.sourceFile.parse(this._configOptions,this._importResolver)&&this._updateSourceFileImports(e,this._configOptions),e.sourceFile.isFileDeleted())){e.isTracked=!1;const t=new Map;this._markFileDirtyRecursive(e,t),this._importResolver.invalidateCache()}}_bindFile(e){if(!this._isFileNeeded(e)||!e.sourceFile.isBindingRequired())return;let t;if(this._parseFile(e),e.builtinsImport){this._bindFile(e.builtinsImport);const n=e.builtinsImport.sourceFile.getParseResults();n&&(t=c.getScope(n.parseTree),r(void 0!==t))}e.sourceFile.bind(this._configOptions,this._lookUpImport,t)}_buildModuleSymbolsMap(e){const t=new Map;return this._sourceFileList.forEach(n=>{if(n!==e){const e=n.sourceFile.getModuleSymbolTable();e&&t.set(n.sourceFile.getFilePath(),e)}}),t}_checkTypes(e){if(!this._isFileNeeded(e))return!1;if(!e.sourceFile.isCheckingRequired())return!1;if(!e.isTracked&&!e.isOpenByClient)return!1;if(this._bindFile(e),this._evaluator.hasGrownTooLarge()&&(this._console.log("Emptying type cache to avoid heap overflow"),this._createNewEvaluator()),e.sourceFile.check(this._evaluator),"none"!==this._configOptions.diagnosticSettings.reportImportCycles&&!this._allowedThirdPartyImports){const t=new Map;this._getImportsRecursive(e,t,0),t.forEach(e=>{a.timingStats.cycleDetectionTime.timeOperation(()=>{this._detectAndReportImportCycles(e)})})}return!0}_getImportsRecursive(e,t,n){const r=e.sourceFile.getFilePath();if(!t.has(r))if(n>h)e.sourceFile.setHitMaxImportDepth(h);else{t.set(r,e);for(const r of e.imports)this._getImportsRecursive(r,t,n+1)}}_detectAndReportImportCycles(e,t=[],n=new Map){if(e.sourceFile.isStubFile()||e.isThirdPartyImport)return;const r=e.sourceFile.getFilePath();if(n.has(r))t.length>1&&e===t[0]&&this._logImportCycle(t);else{if(n.has(r))return;n.set(r,!0),t.push(e);for(const r of e.imports)this._detectAndReportImportCycles(r,t,n);n.set(r,!1),t.pop()}}_logImportCycle(e){const t=new l.CircularDependency;e.forEach(e=>{t.appendPath(e.sourceFile.getFilePath())}),t.normalizeOrder();const n=t.getPaths()[0],s=this._sourceFileMap.get(n);r(void 0!==s),s.sourceFile.addCircularDependency(t)}_markFileDirtyRecursive(e,t){const n=e.sourceFile.getFilePath();t.has(n)||(e.sourceFile.markReanalysisRequired(),t.set(n,!0),e.importedBy.forEach(e=>{this._markFileDirtyRecursive(e,t)}))}getDiagnostics(e){const t=this._removeUnneededFiles();return this._sourceFileList.forEach(n=>{if(!e.checkOnlyOpenFiles&&n.isTracked||n.isOpenByClient){const r=n.sourceFile.getDiagnostics(e,n.diagnosticsVersion);void 0!==r&&(t.push({filePath:n.sourceFile.getFilePath(),diagnostics:r}),n.diagnosticsVersion=n.sourceFile.getDiagnosticVersion())}}),t}getDiagnosticsForRange(e,t,n){const r=this.getSourceFile(e);if(!r)return[];const s=r.getDiagnostics(t);return s?s.filter(e=>i.doRangesOverlap(e.range,n)):[]}getDefinitionsForPosition(e,t){const n=this._sourceFileMap.get(e);if(n)return this._bindFile(n),n.sourceFile.getDefinitionsForPosition(t,this._evaluator)}getReferencesForPosition(e,t,n){const r=this._sourceFileMap.get(e);if(!r)return;this._bindFile(r);const s=r.sourceFile.getReferencesForPosition(t,n,this._evaluator);if(s){if(s.requiresGlobalSearch)for(const e of this._sourceFileList)e!==r&&(this._bindFile(e),e.sourceFile.addReferences(s,n,this._evaluator));return s.locations}}addSymbolsForDocument(e,t){const n=this._sourceFileMap.get(e);n&&(this._bindFile(n),n.sourceFile.addHierarchicalSymbolsForDocument(t,this._evaluator))}addSymbolsForWorkspace(e,t){if(t)for(const n of this._sourceFileList)this._bindFile(n),n.sourceFile.addSymbolsForDocument(e,this._evaluator,t)}getHoverForPosition(e,t){const n=this._sourceFileMap.get(e);if(n)return this._bindFile(n),n.sourceFile.getHoverForPosition(t,this._evaluator)}getSignatureHelpForPosition(e,t){const n=this._sourceFileMap.get(e);if(n)return this._bindFile(n),n.sourceFile.getSignatureHelpForPosition(t,this._lookUpImport,this._evaluator)}getCompletionsForPosition(e,t,n){const r=this._sourceFileMap.get(e);if(r)return this._bindFile(r),r.sourceFile.getCompletionsForPosition(t,n,this._configOptions,this._importResolver,this._lookUpImport,this._evaluator,()=>this._buildModuleSymbolsMap(r))}resolveCompletionItem(e,t){const n=this._sourceFileMap.get(e);n&&(this._bindFile(n),n.sourceFile.resolveCompletionItem(this._configOptions,this._importResolver,this._lookUpImport,this._evaluator,()=>this._buildModuleSymbolsMap(n),t))}performQuickAction(e,t,n){const r=this._sourceFileMap.get(e);if(r)return this._bindFile(r),r.sourceFile.performQuickAction(t,n)}renameSymbolAtPosition(e,t,n){const r=this._sourceFileMap.get(e);if(!r)return;const s=r.sourceFile.getReferencesForPosition(t,!0,this._evaluator);if(!s)return;if(s.requiresGlobalSearch)for(const e of this._sourceFileList)e!==r&&(this._bindFile(e),e.sourceFile.addReferences(s,!0,this._evaluator));const i=[];return s.locations.forEach(e=>{i.push({filePath:e.path,range:e.range,replacementText:n})}),i}_removeUnneededFiles(){const e=[];for(let t=0;t<this._sourceFileList.length;){const n=this._sourceFileList[t];this._isFileNeeded(n)?(this._configOptions.checkOnlyOpenFiles&&!n.isOpenByClient&&e.push({filePath:n.sourceFile.getFilePath(),diagnostics:[]}),t++):(e.push({filePath:n.sourceFile.getFilePath(),diagnostics:[]}),n.sourceFile.prepareForClose(),this._sourceFileMap.delete(n.sourceFile.getFilePath()),this._sourceFileList.splice(t,1),n.imports.forEach(s=>{const i=s.importedBy.findIndex(e=>e===n);if(r(i>=0),s.importedBy.splice(i,1),!this._isFileNeeded(s)){const n=this._sourceFileList.findIndex(e=>e===s);n>=0&&n<t&&(e.push({filePath:s.sourceFile.getFilePath(),diagnostics:[]}),s.sourceFile.prepareForClose(),this._sourceFileMap.delete(s.sourceFile.getFilePath()),this._sourceFileList.splice(n,1),t--)}}))}return e}_isFileNeeded(e){return!e.sourceFile.isFileDeleted()&&(!(!e.isTracked&&!e.isOpenByClient)||0!==e.importedBy.length&&this._isImportNeededRecursive(e,new Map))}_isImportNeededRecursive(e,t){if(e.isTracked||e.isOpenByClient)return!0;const n=e.sourceFile.getFilePath();if(t.has(n))return!1;t.set(n,!0);for(const n of e.importedBy)if(this._isImportNeededRecursive(n,t))return!0;return!1}_isImportAllowed(e,t,n){let r=this._configOptions.useLibraryCodeForTypes;return!((1===t.importType||e.isThirdPartyImport&&2===t.importType)&&(this._allowedThirdPartyImports&&(t.isRelative?r=!0:this._allowedThirdPartyImports.some(e=>t.importName===e||!!t.importName.startsWith(e+"."))&&(r=!0)),!n))||r}_updateSourceFileImports(e,t){const n=[],r=e.sourceFile.getImports(),s=new Map;r.forEach(n=>{if(n.isImportFound){if(this._isImportAllowed(e,n,n.isStubFile)&&n.resolvedPaths.length>0){const t=n.resolvedPaths[n.resolvedPaths.length-1];t&&s.set(t,{isTypeshedFile:!!n.isTypeshedFile,isThirdPartyImport:1===n.importType||e.isThirdPartyImport&&2===n.importType})}n.implicitImports.forEach(t=>{this._isImportAllowed(e,n,t.isStubFile)&&s.set(t.path,{isTypeshedFile:!!n.isTypeshedFile,isThirdPartyImport:1===n.importType||e.isThirdPartyImport&&2===n.importType})})}else t.verboseOutput&&(e.isTypeshedFile&&!t.diagnosticSettings.reportTypeshedErrors||(this._console.log(`Could not import '${n.importName}' `+`in file '${e.sourceFile.getFilePath()}'`),n.importFailureInfo&&n.importFailureInfo.forEach(e=>{this._console.log(`  ${e}`)})))});const i=new Map;e.imports.forEach(t=>{const n=t.sourceFile.getFilePath();s.has(n)?i.set(n,t):t.importedBy=t.importedBy.filter(t=>t.sourceFile.getFilePath()!==e.sourceFile.getFilePath())}),s.forEach((t,r)=>{if(!i.has(r)){let s;if(this._sourceFileMap.has(r))s=this._sourceFileMap.get(r);else{const e=new u.SourceFile(r,t.isTypeshedFile,t.isThirdPartyImport,this._console);s={sourceFile:e,isTracked:!1,isOpenByClient:!1,isTypeshedFile:t.isTypeshedFile,isThirdPartyImport:t.isThirdPartyImport,diagnosticsVersion:e.getDiagnosticVersion(),imports:[],importedBy:[]},this._addToSourceFileListAndMap(s),n.push(s)}s.importedBy.push(e),i.set(r,s)}}),e.imports=[],s.forEach((t,n)=>{this._sourceFileMap.has(n)&&e.imports.push(this._sourceFileMap.get(n))}),e.builtinsImport=void 0;const o=e.sourceFile.getBuiltinsImport();if(o){const t=o.resolvedPaths[o.resolvedPaths.length-1];e.builtinsImport=this._sourceFileMap.get(t)}return n}_addToSourceFileListAndMap(e){const t=e.sourceFile.getFilePath();r(!this._sourceFileMap.has(t)),this._sourceFileList.push(e),this._sourceFileMap.set(t,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CircularDependency=class{constructor(){this._paths=[]}appendPath(e){this._paths.push(e)}getPaths(){return this._paths}normalizeOrder(){let e=0;this._paths.forEach((t,n)=>{t<this._paths[e]&&(e=n)}),0!==e&&(this._paths=this._paths.slice(e).concat(this._paths.slice(0,e)))}isEqual(e){if(e._paths.length!==this._paths.length)return!1;for(let t=0;t<this._paths.length;t++)if(this._paths[t]!==e._paths[t])return!1;return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(7),i=n(35),o=n(36),a=n(8),c=n(51),l=n(9),u=n(23),p=n(52),d=n(22),h=n(122),f=n(123),g=n(124),m=n(125),y=n(126),_=n(128),T=n(129),v=n(18),b=n(55),E=n(5),C=n(133),x=n(135),S=n(136),k=n(137),w=n(138),I=4;t.SourceFile=class{constructor(e,t,n,r){this._isFileDeleted=!1,this._diagnosticVersion=0,this._fileContentsVersion=0,this._lastFileContentLength=void 0,this._lastFileContentHash=void 0,this._clientVersion=null,this._analyzedFileContentsVersion=-1,this._parseTreeNeedsCleaning=!1,this._isBindingInProgress=!1,this._parseDiagnostics=[],this._bindDiagnostics=[],this._checkerDiagnostics=[],this._diagnosticSettings=i.getDefaultDiagnosticSettings(),this._circularDependencies=[],this._isBindingNeeded=!0,this._isCheckingNeeded=!0,this._console=r||new o.StandardConsole,this._filePath=e,this._isStubFile=e.endsWith(".pyi"),this._isTypeshedStubFile=t,this._isThirdPartyImport=n;const s=l.getFileName(e);this._isTypingStubFile=this._isStubFile&&("typing.pyi"===s||"typing_extensions.pyi"===s),this._isBuiltInStubFile=!1,this._isStubFile&&(this._filePath.endsWith(l.normalizeSlashes("/collections/__init__.pyi"))||"builtins.pyi"===s||"_importlib_modulespec.pyi"===s||"dataclasses.pyi"===s||"abc.pyi"===s||"enum.pyi"===s)&&(this._isBuiltInStubFile=!0)}getFilePath(){return this._filePath}getDiagnosticVersion(){return this._diagnosticVersion}isStubFile(){return this._isStubFile}getDiagnostics(e,t){if(this._diagnosticVersion===t)return;let n=!0;this._isThirdPartyImport&&(n=!1);let r=[];if(r=r.concat(this._parseDiagnostics,this._bindDiagnostics,this._checkerDiagnostics),e.diagnosticSettings.enableTypeIgnoreComments){const e=this._parseResults?this._parseResults.tokenizerOutput.typeIgnoreLines:{};Object.keys(e).length>0&&(r=r.filter(t=>{for(let n=t.range.start.line;n<=t.range.end.line;n++)if(e[n])return!1;return!0}))}if("none"!==e.diagnosticSettings.reportImportCycles&&this._circularDependencies.length>0){const t="warning"===e.diagnosticSettings.reportImportCycles?1:0;this._circularDependencies.forEach(e=>{r.push(new a.Diagnostic(t,"Cycle detected in import chain\n"+e.getPaths().map(e=>"  "+e).join("\n"),a.getEmptyRange()))})}return void 0!==this._hitMaxImportDepth&&r.push(new a.Diagnostic(0,`Import chain depth exceeded ${this._hitMaxImportDepth}`,a.getEmptyRange())),this._isTypeshedStubFile&&("none"===e.diagnosticSettings.reportTypeshedErrors?n=!1:"warning"===e.diagnosticSettings.reportTypeshedErrors&&(r=r.map(e=>0===e.category?new a.Diagnostic(1,e.message,e.range):e))),e.ignore.find(e=>e.regExp.test(this._filePath))&&(r=[]),e.diagnosticSettings.enableTypeIgnoreComments&&this._parseResults&&this._parseResults.tokenizerOutput.typeIgnoreAll&&(r=[]),n||(r=r.filter(e=>2===e.category)),r}getImports(){return this._imports||[]}getBuiltinsImport(){return this._builtinsImport}getModuleSymbolTable(){return this._moduleSymbolTable}getModuleDocString(){return this._binderResults?this._binderResults.moduleDocString:void 0}didContentsChangeOnDisk(){if(null!==this._clientVersion)return!1;try{const e=s.readFileSync(this._filePath,{encoding:"utf8"});if(e.length!==this._lastFileContentLength)return!0;if(u.hashString(e)!==this._lastFileContentHash)return!0}catch(e){return!0}return!1}markDirty(){this._fileContentsVersion++,this._isCheckingNeeded=!0,this._moduleSymbolTable=void 0,this._binderResults=void 0}markReanalysisRequired(){this._isCheckingNeeded=!0,this._parseResults&&this._parseResults.containsWildcardImport&&(this._parseTreeNeedsCleaning=!0,this._isBindingNeeded=!0,this._moduleSymbolTable=void 0,this._binderResults=void 0)}setClientVersion(e,t){this._clientVersion=e,null===e?this._fileContents=void 0:(void 0!==this._fileContents&&this._fileContents!==t&&this.markDirty(),this._fileContents=t)}prepareForClose(){}isFileDeleted(){return this._isFileDeleted}isParseRequired(){return this._analyzedFileContentsVersion!==this._fileContentsVersion}isBindingRequired(){return!this._isBindingInProgress&&(!!this.isParseRequired()||this._isBindingNeeded)}isCheckingRequired(){return!!this.isBindingRequired()||this._isCheckingNeeded}getParseResults(){if(!this.isParseRequired())return this._parseResults}addCircularDependency(e){let t=!1;this._circularDependencies.length<I&&(this._circularDependencies.some(t=>t.isEqual(e))||(this._circularDependencies.push(e),t=!0)),t&&this._diagnosticVersion++}setHitMaxImportDepth(e){this._hitMaxImportDepth=e}parse(e,t){if(!this.isParseRequired())return!1;const n=new c.DiagnosticSink;let i=this._fileContents;if(null===this._clientVersion)try{d.timingStats.readFileTime.timeOperation(()=>{i=s.readFileSync(this._filePath,{encoding:"utf8"}),this._lastFileContentLength=i.length,this._lastFileContentHash=u.hashString(i)})}catch(e){n.addError("Source file could not be read",a.getEmptyRange()),i="",s.existsSync(this._filePath)||(this._isFileDeleted=!0)}const o=e.findExecEnvironment(this._filePath),l=new b.ParseOptions;this._filePath.endsWith("pyi")&&(l.isStubFile=!0),l.pythonVersion=o.pythonVersion;try{const s=(new b.Parser).parseSourceFile(i,l,n);r(void 0!==s&&void 0!==s.tokenizerOutput),this._parseResults=s,d.timingStats.resolveImportsTime.timeOperation(()=>{[this._imports,this._builtinsImport,this._typingModulePath,this._collectionsModulePath]=this._resolveImports(t,s.importedModules,o),this._parseDiagnostics=n.fetchAndClear()});const a=void 0!==e.strict.find(e=>e.regExp.test(this._filePath));this._diagnosticSettings=S.getFileLevelDirectives(this._parseResults.tokenizerOutput.tokens,e.diagnosticSettings,a)}catch(e){const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);this._console.log(`An internal error occurred while parsing ${this.getFilePath()}: `+t),this._parseResults={text:"",parseTree:v.ModuleNode.create({start:0,length:0}),importedModules:[],futureImports:new Map,tokenizerOutput:{tokens:new p.TextRangeCollection([]),lines:new p.TextRangeCollection([]),typeIgnoreAll:!1,typeIgnoreLines:{},predominantEndOfLineSequence:"\n",predominantTabSequence:"    ",predominantSingleQuoteCharacter:"'"},containsWildcardImport:!1},this._imports=void 0,this._builtinsImport=void 0;const n=new c.DiagnosticSink;n.addError("An internal error occurred while parsing file",a.getEmptyRange()),this._parseDiagnostics=n.fetchAndClear()}return this._analyzedFileContentsVersion=this._fileContentsVersion,this._isBindingNeeded=!0,this._isCheckingNeeded=!0,this._parseTreeNeedsCleaning=!1,this._hitMaxImportDepth=void 0,this._diagnosticVersion++,!0}getDefinitionsForPosition(e,t){if(this._parseResults)return f.DefinitionProvider.getDefinitionsForPosition(this._parseResults,e,t)}getReferencesForPosition(e,t,n){if(this._parseResults)return _.ReferencesProvider.getReferencesForPosition(this._parseResults,this._filePath,e,t,n)}addReferences(e,t,n){this._parseResults&&_.ReferencesProvider.addReferences(this._parseResults,this._filePath,e,t,n)}addHierarchicalSymbolsForDocument(e,t){this._parseResults&&g.DocumentSymbolProvider.addHierarchicalSymbolsForDocument(e,this._parseResults,t)}addSymbolsForDocument(e,t,n){this._parseResults&&g.DocumentSymbolProvider.addSymbolsForDocument(e,n,this._filePath,this._parseResults,t)}getHoverForPosition(e,t){if(!this._isBindingNeeded&&this._parseResults)return m.HoverProvider.getHoverForPosition(this._parseResults,e,t)}getSignatureHelpForPosition(e,t,n){if(this._parseResults)return T.SignatureHelpProvider.getSignatureHelpForPosition(this._parseResults,e,n)}getCompletionsForPosition(e,t,n,r,s,i,o){if(!this._parseResults)return;if(void 0===this._fileContents)return;return new h.CompletionProvider(t,this._parseResults,this._fileContents,r,e,this._filePath,n,s,i,o).getCompletionsForPosition()}resolveCompletionItem(e,t,n,r,s,i){if(!this._parseResults||void 0===this._fileContents)return;const o=i.data;new h.CompletionProvider(o.workspacePath,this._parseResults,this._fileContents,t,o.position,this._filePath,e,n,r,s).resolveCompletionItem(i)}performQuickAction(e,t){if(this._parseResults&&void 0!==this._fileContents)return y.performQuickAction(e,t,this._parseResults)}setCheckingRequired(){this._isCheckingNeeded=!0}bind(e,t,n){r(!this.isParseRequired()),r(this.isBindingRequired()),r(!this._isBindingInProgress),r(this._parseResults);try{d.timingStats.bindTime.timeOperation(()=>{this._cleanParseTreeIfRequired();const s=this._buildFileInfo(e,this._parseResults.text,t,n);E.setFileInfo(this._parseResults.parseTree,s);const i=new C.Binder(s);if(this._isBindingInProgress=!0,this._binderResults=i.bindModule(this._parseResults.parseTree),e.internalTestMode){(new w.TestWalker).walk(this._parseResults.parseTree)}this._bindDiagnostics=s.diagnosticSink.fetchAndClear();const o=E.getScope(this._parseResults.parseTree);r(void 0!==o),this._moduleSymbolTable=o.symbolTable})}catch(e){const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);this._console.log(`An internal error occurred while performing name binding for ${this.getFilePath()}: `+t);const n=new c.DiagnosticSink;n.addError("An internal error occurred while performing name binding",a.getEmptyRange()),this._bindDiagnostics=n.fetchAndClear()}finally{this._isBindingInProgress=!1}this._diagnosticVersion++,this._isCheckingNeeded=!0,this._isBindingNeeded=!1}check(e){r(!this.isParseRequired()),r(!this.isBindingRequired()),r(!this._isBindingInProgress),r(this.isCheckingRequired()),r(this._parseResults);try{d.timingStats.typeCheckerTime.timeOperation(()=>{new x.Checker(this._parseResults.parseTree,e).check(),this._isCheckingNeeded=!1;const t=E.getFileInfo(this._parseResults.parseTree);this._checkerDiagnostics=t.diagnosticSink.fetchAndClear()})}catch(e){const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);this._console.log(`An internal error occurred while while performing type checking for ${this.getFilePath()}: `+t);const n=new c.DiagnosticSink;n.addError("An internal error occurred while performing type checking",a.getEmptyRange()),this._isCheckingNeeded=!1,this._checkerDiagnostics=n.fetchAndClear()}this._circularDependencies=[],this._diagnosticVersion++}_buildFileInfo(e,t,n,s){r(void 0!==this._parseResults);const i=new c.TextRangeDiagnosticSink(this._parseResults.tokenizerOutput.lines);return{importLookup:n,futureImports:this._parseResults.futureImports,builtinsScope:s,typingModulePath:this._typingModulePath,collectionsModulePath:this._collectionsModulePath,diagnosticSink:i,executionEnvironment:e.findExecEnvironment(this._filePath),diagnosticSettings:this._diagnosticSettings,fileContents:t,lines:this._parseResults.tokenizerOutput.lines,filePath:this._filePath,isStubFile:this._isStubFile,isTypingStubFile:this._isTypingStubFile,isBuiltInStubFile:this._isBuiltInStubFile,accessedSymbolMap:new Map}}_cleanParseTreeIfRequired(){if(this._parseResults&&this._parseTreeNeedsCleaning){new k.ParseTreeCleanerWalker(this._parseResults.parseTree).clean(),this._parseTreeNeedsCleaning=!1}}_resolveImports(e,t,n){const r=[];let s=e.resolveImport(this._filePath,n,{leadingDots:0,nameParts:["builtins"],importedSymbols:void 0});0===s.resolvedPaths.length||s.resolvedPaths[0]!==this.getFilePath()?r.push(s):s=void 0;const i=e.resolveImport(this._filePath,n,{leadingDots:0,nameParts:["typing"],importedSymbols:void 0});let o,a;0!==i.resolvedPaths.length&&i.resolvedPaths[0]===this.getFilePath()||(r.push(i),o=i.resolvedPaths[0]);for(const s of t){const t=e.resolveImport(this._filePath,n,{leadingDots:s.leadingDots,nameParts:s.nameParts,importedSymbols:s.importedSymbols});t.isImportFound&&t.isTypeshedFile&&s.nameParts.length>=1&&"collections"===s.nameParts[0]&&(a=t.resolvedPaths[t.resolvedPaths.length-1]),r.push(t),E.setImportInfo(s.nameNode,t)}return[r,s,o,a]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),s=n(5),i=n(24),o=n(25),a=n(6),c=n(11),l=n(19),u=n(12),p=n(13),d=n(8),h=n(9),f=n(2),g=n(23),m=n(3),y=n(18),_=["True","False","None","and","or","await","not","is","lambda","yield","assert","async","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","nonlocal","pass","raise","return","try","while","yield"];var T;!function(e){e[e.LikelyKeyword=0]="LikelyKeyword",e[e.RecentImportModuleName=1]="RecentImportModuleName",e[e.ImportModuleName=2]="ImportModuleName",e[e.LiteralValue=3]="LiteralValue",e[e.NamedParameter=4]="NamedParameter",e[e.RecentKeywordOrSymbol=5]="RecentKeywordOrSymbol",e[e.RecentAutoImport=6]="RecentAutoImport",e[e.Keyword=7]="Keyword",e[e.NormalSymbol=8]="NormalSymbol",e[e.PrivateSymbol=9]="PrivateSymbol",e[e.DunderSymbol=10]="DunderSymbol",e[e.AutoImport=11]="AutoImport"}(T||(T={}));const v=.25,b=128;class E{constructor(e,t,n,r,s,i,o,a,c,l){this._workspacePath=e,this._parseResults=t,this._fileContents=n,this._importResolver=r,this._position=s,this._filePath=i,this._configOptions=o,this._importLookup=a,this._evaluator=c,this._moduleSymbolsCallback=l}getCompletionsForPosition(){const e=f.convertPositionToOffset(this._position,this._parseResults.tokenizerOutput.lines);if(void 0===e)return;let t=a.findNodeByOffset(this._parseResults.parseTree,e);const n=t,r=t?a.getNodeDepth(t):0;if(!n||39!==n.nodeType){let s=e;for(;s>=0;){s--;const e=this._fileContents.substr(s,1);if("("===e||"\n"===e)break;const i=a.findNodeByOffset(this._parseResults.parseTree,s);if(i&&i!==n){a.getNodeDepth(i)>r&&(t=i);break}}}if(void 0===t)return;const s=this._parseResults.tokenizerOutput.lines.getItemAt(this._position.line),i=this._fileContents.substr(s.start,s.length),o=i.substr(0,this._position.column),c=i.substr(this._position.column),l=o.search(/\w+$/),u=l>=0?o.substr(l):"";if(this._isWithinComment(e,o))return;let p=t;for(;p&&0!==p.nodeType;)p=p.parent;let d=p||t;for(;;){if(50===d.nodeType)return this._getStringLiteralCompletions(d,u,o,c);if(49===d.nodeType)return;if(38===d.nodeType)return this._getImportModuleCompletions(d);if(0===d.nodeType)return this._getExpressionErrorCompletions(d,u,o,c);if(36===d.nodeType)return this._getMemberAccessCompletions(d.leftExpression,u);if(39===d.nodeType){if(d.parent&&38===d.parent.nodeType)return this._getImportModuleCompletions(d.parent);if(d.parent&&23===d.parent.nodeType){const e=d.parent.parent;if(e&&22===e.nodeType)return d.parent.name===d?this._getImportFromCompletions(e,u):this._getImportFromCompletions(e,"")}else if(d.parent&&36===d.parent.nodeType)return this._getMemberAccessCompletions(d.parent.leftExpression,u)}if(22===d.nodeType)return this._getImportFromCompletions(d,u);if(y.isExpressionNode(d)||13===d.nodeType)return this._getExpressionCompletions(d,u,o,c);if(51===d.nodeType||37===d.nodeType)return this._getStatementCompletions(d,u,o,c);if(!d.parent)break;d=d.parent}}resolveCompletionItem(e){const t=e.data,n=e.label;let r="";t.autoImportText&&(r=t.autoImportText);const s=E._mostRecentCompletions.findIndex(e=>e.label===n&&e.autoImportText===r);s>0&&(E._mostRecentCompletions=E._mostRecentCompletions.splice(s,1)),0!==s&&E._mostRecentCompletions.unshift({label:n,autoImportText:r}),E._mostRecentCompletions.length>b&&E._mostRecentCompletions.pop(),t.symbolId&&(this._itemToResolve=e,this.getCompletionsForPosition())}_isWithinComment(e,t){const n=this._parseResults.tokenizerOutput.tokens.getItemAtPosition(e);if(n<0)return!1;const r=this._parseResults.tokenizerOutput.tokens.getItemAt(n);return!(e>r.start&&e<m.TextRange.getEnd(r))&&!!t.match(/#/)}_getExpressionErrorCompletions(e,t,n,r){switch(e.category){case 0:return this._createSingleKeywordCompletionList("in");case 1:return this._createSingleKeywordCompletionList("else");case 2:case 3:case 4:return this._getExpressionCompletions(e,t,n,r);case 7:if(e.child&&y.isExpressionNode(e.child))return this._getMemberAccessCompletions(e.child,t);break;case 10:if(e.child&&39===e.child.nodeType)return this._getMethodOverrideCompletions(e.child)}}_createSingleKeywordCompletionList(e){const t=r.CompletionItem.create(e);return t.kind=r.CompletionItemKind.Keyword,t.sortText=this._makeSortText(T.LikelyKeyword,e),r.CompletionList.create([t])}_getMethodOverrideCompletions(e){const t=a.getEnclosingClass(e,!0);if(!t)return;const n=this._evaluator.getTypeOfClass(t);if(!n)return;const s=new Map;n.classType.details.baseClasses.forEach(e=>{7===e.category&&p.getMembersForClass(e,s,!1)});const i=r.CompletionList.create();return s.forEach((t,n)=>{const s=l.getLastTypedDeclaredForSymbol(t);if(s&&3===s.type){if(g.computeCompletionSimilarity(e.value,n)>v){const o={start:{line:this._position.line,character:this._position.column-e.length},end:{line:this._position.line,character:this._position.column}},a=this._printMethodSignature(s.node)+":",c=r.TextEdit.replace(o,a);this._addSymbol(n,t,e.value,i,void 0,c)}}}),i}_printMethodSignature(e){const t=e.parameters.map(e=>{let t="";return 1===e.category?t+="*":2===e.category&&(t+="**"),e.name&&(t+=e.name.value),e.typeAnnotation&&(t+=": "+a.printExpression(e.typeAnnotation)),t}).join(", ");let n=e.name.value+"("+t+")";return e.returnTypeAnnotation&&(n+=" -> "+a.printExpression(e.returnTypeAnnotation)),n}_getMemberAccessCompletions(e,t){const n=this._evaluator.getType(e),s=new Map;n&&p.doForSubtypes(n,e=>{8===e.category?p.getMembersForClass(e.classType,s,!0):7===e.category?p.getMembersForClass(e,s,!1):9===e.category&&p.getMembersForModule(e,s)});const i=r.CompletionList.create();return this._addSymbolsForSymbolTable(s,e=>!0,t,i),i}_getStatementCompletions(e,t,n,r){return this._getExpressionCompletions(e,t,n,r)}_getExpressionCompletions(e,t,n,s){if(41===e.nodeType)return;const i=r.CompletionList.create();if(this._addCallArgumentCompletions(e,t,n,s,i),this._addSymbols(e,t,i),this._findMatchingKeywords(_,t).map(e=>{const t=r.CompletionItem.create(e);t.kind=r.CompletionItemKind.Keyword,i.items.push(t),t.sortText=this._makeSortText(T.Keyword,e)}),t.startsWith("_")||this._itemToResolve||this._getAutoImportCompletions(t,i),0===e.nodeType)if(3===e.category)this._getIndexStringLiteral(e,i);else if(2===e.category&&e.parent&&3===e.parent.nodeType){const t=this._evaluator.getDeclaredTypeForExpression(e.parent.leftExpression);t&&this._addLiteralValuesForTargetType(t,n,s,i)}return i}_addCallArgumentCompletions(e,t,n,r,s){const i=f.convertPositionToOffset(this._position,this._parseResults.tokenizerOutput.lines),o=this._evaluator.getCallSignatureInfo(e,i);if(o){const e=f.convertOffsetToPosition(o.callNode.leftExpression.start+o.callNode.leftExpression.length,this._parseResults.tokenizerOutput.lines);d.comparePositions(this._position,e)>0&&(this._addNamedParameters(o,t,s),this._addLiteralValuesForArgument(o,n,r,s))}}_addLiteralValuesForArgument(e,t,n,r){e.signatures.forEach(s=>{let i=-1;if(void 0!==e.activeArgumentName?i=s.details.parameters.findIndex(t=>{t.name,e.activeArgumentName}):e.activeArgumentIndex<s.details.parameters.length&&(i=e.activeArgumentIndex),i<0)return;const o=s.details.parameters[i].type;this._addLiteralValuesForTargetType(o,t,n,r)})}_addLiteralValuesForTargetType(e,t,n,r){const s=this._getQuoteValueFromPriorText(t);p.doForSubtypes(e,e=>{8===e.category&&u.ClassType.isBuiltIn(e.classType,"str")&&void 0!==e.literalValue&&this._addStringLiteralToCompletionList(e.literalValue,s.stringValue,n,s.quoteCharacter,r)})}_getStringLiteralCompletions(e,t,n,s){let i=e.parent;if(!i||49!==i.nodeType||i.strings.length>1)return;if(i=i.parent,!i)return;const o=r.CompletionList.create();if(25===i.nodeType){if(i=i.parent,!i||24!==i.nodeType)return;const e=this._evaluator.getType(i.baseExpression);if(!e||8!==e.category)return;const t=e.classType;if(!u.ClassType.isTypedDictClass(t))return;const r=this._evaluator.getTypedDictMembersForClass(t),a=this._getQuoteValueFromPriorText(n);r.forEach((e,t)=>{this._addStringLiteralToCompletionList(t,a.stringValue,s,a.quoteCharacter,o)})}else if(3===i.nodeType){const e=this._evaluator.getDeclaredTypeForExpression(i.leftExpression);e&&this._addLiteralValuesForTargetType(e,n,s,o)}else this._addCallArgumentCompletions(e,t,n,s,o);return o}_getQuoteValueFromPriorText(e){const t=e.lastIndexOf("'"),n=e.lastIndexOf('"');let r=this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter,s=void 0;return t>n?(r="'",s=e.substr(t+1)):n>t&&(r='"',s=e.substr(n+1)),{stringValue:s,quoteCharacter:r}}_getIndexStringLiteral(e,t){if(!e.parent||25!==e.parent.nodeType)return;const n=e.parent;if(!n.parent||24!==n.parent.nodeType)return;const r=this._evaluator.getType(n.parent.baseExpression);if(!r||8!==r.category)return;const s=r.classType;u.ClassType.isTypedDictClass(s)&&this._evaluator.getTypedDictMembersForClass(s).forEach((e,n)=>{this._addStringLiteralToCompletionList(n,void 0,void 0,this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter,t)})}_addStringLiteralToCompletionList(e,t,n,s,i){if(g.computeCompletionSimilarity(t||"",e)>v){const o=`${s}${e}${s}`,a=r.CompletionItem.create(o);a.kind=r.CompletionItemKind.Text,a.sortText=this._makeSortText(T.LiteralValue,o);let c=this._position.column;void 0!==t&&(c-=t.length+1);let l=this._position.column;void 0!==n&&n.startsWith(s)&&l++;const u={start:{line:this._position.line,character:c},end:{line:this._position.line,character:l}};a.textEdit=r.TextEdit.replace(u,o),i.items.push(a)}}_getAutoImportCompletions(e,t){const n=this._moduleSymbolsCallback(),s=o.getTopLevelImports(this._parseResults.parseTree);n.forEach((i,o)=>{const a=h.stripFileExtension(h.getFileName(o));if(!c.isPrivateOrProtectedName(a)){i.forEach((n,r)=>{if((e.length>2?g.computeCompletionSimilarity(e,r)>v:e.length>0&&r.startsWith(e))&&!n.isExternallyHidden()){const i=t.items.find(e=>e.label===r&&!e.data.autoImport),a=n.getDeclarations();if(a&&a.length>0&&void 0===i&&a[0].path===o){const i=s.mapByFilePath.get(o);let a,c;i?a=i.moduleName:(c=this._getModuleNameAndTypeFromFilePath(o),a=c.moduleName);const l=this._getTextEditsForAutoImportByFilePath(r,s,o,a,c?c.importType:2);this._addSymbol(r,n,e,t,a,void 0,l)}}});const a=h.getDirectoryPath(o),c=h.combinePaths(a,"__init__.py"),l=c+"i";if(n.has(c)||n.has(l)){const n=h.getFileName(a),i=this._getModuleNameAndTypeFromFilePath(h.getDirectoryPath(a));if(i.moduleName){const a=`Auto-import from ${i.moduleName}`;if(!t.items.find(e=>{if(e.label===n){if(!e.data.autoImport)return!0;if(e.data&&e.data.autoImport===a)return!0}return!1})){const c=this._getTextEditsForAutoImportByFilePath(n,s,o,i.moduleName,i?i.importType:2);this._addNameToCompletionList(n,r.CompletionItemKind.Module,e,t,n,"",a,void 0,c)}}}}})}_getModuleNameAndTypeFromFilePath(e){const t=this._configOptions.findExecEnvironment(this._filePath);return this._importResolver.getModuleNameForImport(e,t)}_getTextEditsForAutoImportByFilePath(e,t,n,r,s){const i=t.mapByFilePath.get(n);return i&&22===i.node.nodeType?o.getTextEditsForAutoImportSymbolAddition(e,i,this._parseResults):o.getTextEditsForAutoImportInsertion(e,t,r,s,this._parseResults)}_getImportFromCompletions(e,t){if(e.isWildcardImport)return;const n=s.getImportInfo(e.module);if(!n)return;const i=r.CompletionList.create(),o=n.resolvedPaths.length>0?n.resolvedPaths[n.resolvedPaths.length-1]:"",a=this._importLookup(o);return a&&this._addSymbolsForSymbolTable(a.symbolTable,t=>!e.imports.find(e=>e.name.value===t),t,i),n.implicitImports.forEach(n=>{e.imports.find(e=>e.name.value===n.name)||this._addNameToCompletionList(n.name,r.CompletionItemKind.Module,t,i)}),i}_findMatchingKeywords(e,t){return e.filter(e=>!t||g.computeCompletionSimilarity(t,e)>v)}_addNamedParameters(e,t,n){const s=new Map;e.signatures.forEach(e=>{this._addNamedParametersToMap(e,s)}),e.callNode.arguments.forEach(e=>{e.name&&s.delete(e.name.value)}),s.forEach(e=>{if(g.computeCompletionSimilarity(t,e)>v){const t=r.CompletionItem.create(e);t.kind=r.CompletionItemKind.Variable;const s={workspacePath:this._workspacePath,filePath:this._filePath,position:this._position};t.data=s,t.sortText=this._makeSortText(T.NamedParameter,e),n.items.push(t)}})}_addNamedParametersToMap(e,t){e.details.parameters.forEach(e=>{e.name&&!e.isNameSynthesized&&(c.isPrivateOrProtectedName(e.name)||t.set(e.name,e.name))})}_addSymbols(e,t,n){let r=e;for(;r;){let e=s.getScope(r);if(e){for(;e;)this._addSymbolsForSymbolTable(e.symbolTable,()=>!0,t,n),e=e.parent;break}r=r.parent}}_addSymbolsForSymbolTable(e,t,n,r){e.forEach((e,s)=>{!e.isExternallyHidden()&&t(s)&&this._addSymbol(s,e,n,r)})}_addSymbol(e,t,n,s,o,a,c){let u=l.getLastTypedDeclaredForSymbol(t);if(!u){const e=t.getDeclarations();e.length>0&&(u=e[e.length-1])}if(u){let l,p=r.CompletionItemKind.Variable;if(u=this._evaluator.resolveAliasDeclaration(u),u&&(p=this._convertDeclarationTypeToItemKind(u),this._itemToResolve)){if(this._itemToResolve.data.symbolId===t.id){const n=this._evaluator.getEffectiveTypeOfSymbol(t);if(n){let t,s;switch(u.type){case 0:case 1:case 2:t=e+": "+this._evaluator.printType(n);break;case 3:t=6===n.category?n.overloads.map(t=>e+this._evaluator.printType(t)).join("\n"):e+": "+this._evaluator.printType(n);break;case 4:case 5:t="class "+e+"()";break;case 6:if(t=e,u.path){const e=this._importLookup(u.path);e&&(s=e.docString)}break;default:t=e}9===n.category?s=n.docString:7===n.category?s=n.details.docString:5===n.category&&(s=n.details.docString);let o="```python\n"+t+"\n```\n";s&&(o+="---\n",o+=i.convertDocStringToMarkdown(s)),o&&(this._itemToResolve.documentation={kind:r.MarkupKind.Markdown,value:o})}}}o&&(l=`Auto-import from ${o}`),this._addNameToCompletionList(e,p,n,s,void 0,void 0,l,a,c,t.id)}else{if(t.getUndeclaredType()){const i=r.CompletionItemKind.Variable;this._addNameToCompletionList(e,i,n,s,void 0,void 0,void 0,a,c,t.id)}}}_addNameToCompletionList(e,t,n,s,o,a,l,u,p,d){if(g.computeCompletionSimilarity(n,e)>v){const h=r.CompletionItem.create(e);h.kind=t;const f={workspacePath:this._workspacePath,filePath:this._filePath,position:this._position};h.data=f,l?(h.sortText=this._makeSortText(T.AutoImport,e,l),f.autoImportText=l):c.isDunderName(e)?h.sortText=this._makeSortText(T.DunderSymbol,e):""===n&&c.isPrivateOrProtectedName(e)?h.sortText=this._makeSortText(T.PrivateSymbol,e):h.sortText=this._makeSortText(T.NormalSymbol,e),void 0!==d&&(f.symbolId=d);let g="";l&&(g+=l,g+="\n\n",h.data.autoImport=l),o&&(g+="```python\n"+o+"\n```\n"),a&&(g+="---\n",g+=i.convertDocStringToMarkdown(a)),g&&(h.documentation={kind:r.MarkupKind.Markdown,value:g}),u&&(h.textEdit=u),p&&(h.additionalTextEdits=p.map(e=>{return{range:{start:{line:e.range.start.line,character:e.range.start.column},end:{line:e.range.end.line,character:e.range.end.column}},newText:e.replacementText}})),s.items.push(h)}}_getRecentListIndex(e,t){return E._mostRecentCompletions.findIndex(n=>n.label===e&&n.autoImportText===t)}_makeSortText(e,t,n=""){const r=this._getRecentListIndex(t,n);return r>=0&&(e===T.AutoImport?e=T.RecentAutoImport:e===T.ImportModuleName?e=T.RecentImportModuleName:e!==T.Keyword&&e!==T.NormalSymbol&&e!==T.PrivateSymbol&&e!==T.DunderSymbol||(e=T.RecentKeywordOrSymbol)),this._formatInteger(e,2)+"."+this._formatInteger(r,4)+"."+t}_formatInteger(e,t){const n="0".charCodeAt(0);let r="";for(let s=0;s<t;s++){let t=Math.floor(e%10);t<0&&(t=9),r=String.fromCharCode(t+n)+r,e=Math.floor(e/10)}return r}_convertDeclarationTypeToItemKind(e){const t=this._evaluator.resolveAliasDeclaration(e);if(!t)return r.CompletionItemKind.Variable;switch(t.type){case 0:return r.CompletionItemKind.Class;case 2:return r.CompletionItemKind.Variable;case 1:return t.isConstant||t.isFinal?r.CompletionItemKind.Constant:r.CompletionItemKind.Variable;case 3:return t.isMethod?r.CompletionItemKind.Method:r.CompletionItemKind.Function;case 4:case 5:return r.CompletionItemKind.Class;case 6:return r.CompletionItemKind.Module}}_getImportModuleCompletions(e){const t=this._configOptions.findExecEnvironment(this._filePath),n={leadingDots:e.leadingDots,hasTrailingDot:e.hasTrailingDot,nameParts:e.nameParts.map(e=>e.value),importedSymbols:[]},s=this._importResolver.getCompletionSuggestions(this._filePath,t,n,v),i=r.CompletionList.create();if(!e.hasTrailingDot&&e.parent&&22===e.parent.nodeType&&e.parent.missingImportKeyword){const e="import",t=r.CompletionItem.create(e);t.kind=r.CompletionItemKind.Keyword,i.items.push(t),t.sortText=this._makeSortText(T.Keyword,e)}return s.forEach(e=>{const t=r.CompletionItem.create(e);t.kind=r.CompletionItemKind.Module,i.items.push(t),t.sortText=this._makeSortText(T.ImportModuleName,e)}),i}}t.CompletionProvider=E,E._mostRecentCompletions=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6),s=n(8),i=n(2);t.DefinitionProvider=class{static getDefinitionsForPosition(e,t,n){const s=i.convertPositionToOffset(t,e.tokenizerOutput.lines);if(void 0===s)return;const o=r.findNodeByOffset(e.parseTree,s);if(void 0===o)return;const a=[];if(39===o.nodeType){const e=n.getDeclarationsForNameNode(o);e&&e.forEach(e=>{const t=n.resolveAliasDeclaration(e);t&&t.path&&this._addIfUnique(a,{path:t.path,range:t.range})})}return a.length>0?a:void 0}static _addIfUnique(e,t){for(const n of e)if(n.path===t.path&&s.rangesAreEqual(n.range,t.range))return;e.push(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),s=n(45),i=n(5),o=n(6),a=n(10),c=n(19),l=n(13),u=n(2),p=n(23),d=.5;class h extends a.ParseTreeWalker{constructor(e,t,n,r,s){super(),this._filePath=e,this._parseResults=t,this._symbolResults=n,this._query=r,this._evaluator=s}findSymbols(){this.walk(this._parseResults.parseTree)}visitModule(e){return this._addSymbolInformationForScope(e,""),!0}visitClass(e){const t=e.name.value;return this._addSymbolInformationForScope(e,t),!0}visitFunction(e){const t=e.name.value;let n=t;const r=o.getEnclosingClass(e,!0);return r&&(n=r.name.value+"."+t),this._addSymbolInformationForScope(e,n),!0}visitListComprehension(e){return this._addSymbolInformationForScope(e),!0}_addSymbolInformationForScope(e,t){const n=i.getScope(e);n&&n.symbolTable.forEach((e,n)=>{if(!e.isIgnoredForProtocolMatch()){let r=c.getLastTypedDeclaredForSymbol(e);!r&&e.hasDeclarations()&&(r=e.getDeclarations()[0]),r&&this._addSymbolInformationFromDeclaration(n,r,t)}})}_addSymbolInformationFromDeclaration(e,t,n){if(t.path!==this._filePath)return;if(void 0!==this._query){if(p.computeCompletionSimilarity(this._query,e)<d)return}if(!this._evaluator.resolveAliasDeclaration(t))return;const r={uri:s.URI.file(this._filePath).toString(),range:g(t.range)},i=f(e,t,this._evaluator);if(void 0===i)return;const o={name:e,kind:i,location:r};n&&(o.containerName=n),this._symbolResults.push(o)}}function f(e,t,n){let s;switch(t.type){case 4:case 5:s=r.SymbolKind.Class;break;case 3:if(t.isMethod){const e=n.getTypeForDeclaration(t);s=e&&l.isProperty(e)?r.SymbolKind.Property:r.SymbolKind.Method}else s=r.SymbolKind.Function;break;case 6:s=r.SymbolKind.Module;break;case 2:if("self"===e||"cls"===e||"_"===e)return;s=r.SymbolKind.Variable;break;case 1:if("_"===e)return;s=t.isConstant||t.isFinal?r.SymbolKind.Constant:r.SymbolKind.Variable;break;default:s=r.SymbolKind.Variable}return s}function g(e){return r.Range.create(m(e.start),m(e.end))}function m(e){return r.Position.create(e.line,e.column)}function y(e,t,n,r){const s=i.getScope(e);s&&s.symbolTable.forEach((e,s)=>{if(!e.isIgnoredForProtocolMatch()){let i=c.getLastTypedDeclaredForSymbol(e);!i&&e.hasDeclarations()&&(i=e.getDeclarations()[0]),i&&function(e,t,n,r,s){if(6===t.type)return;const i=f(e,t,n);if(void 0===i)return;const o=g(t.range);let a=o;const c=[];if(4===t.type||3===t.type){y(t.node,c,r,n);const e=u.convertOffsetsToRange(t.node.start,t.node.name.start+t.node.length,r.tokenizerOutput.lines);a=g(e)}const l={name:e,kind:i,range:a,selectionRange:o,children:c};s.push(l)}(s,i,r,n,t)}})}t.DocumentSymbolProvider=class{static addSymbolsForDocument(e,t,n,r,s){new h(n,r,e,t,s).findSymbols()}static addHierarchicalSymbolsForDocument(e,t,n){y(t.parseTree,e,t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24),s=n(6),i=n(12),o=n(13),a=n(2),c=n(3);t.HoverProvider=class{static getHoverForPosition(e,t,n){const r=a.convertPositionToOffset(t,e.tokenizerOutput.lines);if(void 0===r)return;const o=s.findNodeByOffset(e.parseTree,r);if(void 0===o)return;const l={parts:[],range:{start:a.convertOffsetToPosition(o.start,e.tokenizerOutput.lines),end:a.convertOffsetToPosition(c.TextRange.getEnd(o),e.tokenizerOutput.lines)}};if(39===o.nodeType){const e=n.getDeclarationsForNameNode(o);if(e&&e.length>0)this._addResultsForDeclaration(l.parts,e[0],o,n);else if((!o.parent||38!==o.parent.nodeType)&&0===l.parts.length){const e=n.getType(o)||i.UnknownType.create();let t="";t=9===e.category?"(module) "+o.value:o.value+": "+n.printType(e),this._addResultsPart(l.parts,t,!0),this._addDocumentationPart(l.parts,o,n)}}return l.parts.length>0?l:void 0}static _addResultsForDeclaration(e,t,n,r){const s=r.resolveAliasDeclaration(t);if(s)switch(s.type){case 0:this._addResultsPart(e,n.value+this._getTypeText(n,r),!0),this._addDocumentationPart(e,n,r);break;case 1:{const t=s.isConstant||s.isFinal?"constant":"variable";this._addResultsPart(e,`(${t}) `+n.value+this._getTypeText(n,r),!0),this._addDocumentationPart(e,n,r);break}case 2:this._addResultsPart(e,"(parameter) "+n.value+this._getTypeText(n,r),!0),this._addDocumentationPart(e,n,r);break;case 4:case 5:this._addResultsPart(e,"(class) "+n.value,!0),this._addDocumentationPart(e,n,r);break;case 3:{let t="function";if(s.isMethod){const e=r.getTypeForDeclaration(s);t=e&&o.isProperty(e)?"property":"method"}this._addResultsPart(e,`(${t}) `+n.value+this._getTypeText(n,r),!0),this._addDocumentationPart(e,n,r);break}case 6:this._addResultsPart(e,"(module) "+n.value,!0),this._addDocumentationPart(e,n,r)}else this._addResultsPart(e,"(import) "+n.value+this._getTypeText(n,r),!0)}static _getTypeText(e,t){const n=t.getType(e)||i.UnknownType.create();return": "+t.printType(n)}static _addDocumentationPart(e,t,n){const r=n.getType(t);r&&this._addDocumentationPartForType(e,r)}static _addDocumentationPartForType(e,t){9===t.category?this._addDocumentationResultsPart(e,t.docString):7===t.category?this._addDocumentationResultsPart(e,t.details.docString):5===t.category?this._addDocumentationResultsPart(e,t.details.docString):6===t.category&&t.overloads.forEach(t=>{this._addDocumentationResultsPart(e,t.details.docString)})}static _addDocumentationResultsPart(e,t){t&&this._addResultsPart(e,r.convertDocStringToMarkdown(t))}static _addResultsPart(e,t,n=!1){e.push({python:n,text:t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),s=n(6),i=n(2),o=n(3),a=n(54),c=n(127);t.performQuickAction=function(e,t,n){if(e===a.commandOrderImports){return new c.ImportSorter(n).sort()}if(e===a.commandAddMissingOptionalToParam&&t.length>=1){return function(e,t){let n=s.findNodeByOffset(e.parseTree,t);for(;n&&42!==n.nodeType;)n=n.parent;if(!n||!n.typeAnnotation)return[];const a=[],c=i.convertOffsetToPosition(n.typeAnnotation.start,e.tokenizerOutput.lines),l=i.convertOffsetToPosition(o.TextRange.getEnd(n.typeAnnotation),e.tokenizerOutput.lines);a.push({range:{start:c,end:c},replacementText:"Optional["}),a.push({range:{start:l,end:l},replacementText:"]"});const u=r.getTopLevelImports(e.parseTree),p=u.orderedImports.find(e=>"typing"===e.moduleName);if(p&&22===p.node.nodeType){const t=r.getTextEditsForAutoImportSymbolAddition("Optional",p,e);a.push(...t)}else{const t=r.getTextEditsForAutoImportInsertion("Optional",u,"typing",0,e);a.push(...t)}return a}(n,parseInt(t[0],10))}return[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),s=n(2),i=n(3),o=80;t.ImportSorter=class{constructor(e){this._parseResults=e}sort(){const e=[],t=r.getTopLevelImports(this._parseResults.parseTree),n=t.orderedImports.map(e=>e).sort((e,t)=>this._compareImportStatements(e,t));if(0===n.length)return[];const s=this._getPrimaryReplacementRange(t.orderedImports);return e.push({range:s,replacementText:this._generateSortedImportText(n)}),this._addSecondaryReplacementRanges(t.orderedImports,e),e}_compareImportStatements(e,t){const n=this._getImportGroup(e),r=this._getImportGroup(t);return n<r?-1:n>r?1:e.moduleName<t.moduleName?-1:1}_getImportGroup(e){return e.importResult?0===e.importResult.importType?0:1===e.importResult.importType||e.importResult.isLocalTypingsFile?1:e.importResult.isRelative?3:2:2}_getPrimaryReplacementRange(e){let t=e.findIndex(e=>e.followsNonImportStatement);t<0&&(t=e.length);const n=e[t-1].node;return{start:s.convertOffsetToPosition(e[0].node.start,this._parseResults.tokenizerOutput.lines),end:s.convertOffsetToPosition(i.TextRange.getEnd(n),this._parseResults.tokenizerOutput.lines)}}_addSecondaryReplacementRanges(e,t){let n=e.findIndex(e=>e.followsNonImportStatement);if(!(n<0))for(;;){let r=e.findIndex((e,t)=>t>n&&e.followsNonImportStatement);if(r<0&&(r=e.length),t.push({range:{start:s.convertOffsetToPosition(e[n].node.start,this._parseResults.tokenizerOutput.lines),end:s.convertOffsetToPosition(i.TextRange.getEnd(e[r-1].node),this._parseResults.tokenizerOutput.lines)},replacementText:""}),n=r,n>=e.length)break}}_generateSortedImportText(e){let t="",n=this._getImportGroup(e[0]);for(const r of e){const s=this._getImportGroup(r);let i;n!==s&&(t+=this._parseResults.tokenizerOutput.predominantEndOfLineSequence,n=s),i=20===r.node.nodeType?this._formatImportNode(r.subnode,r.moduleName):this._formatImportFromNode(r.node,r.moduleName),r!==e[e.length-1]&&(i+=this._parseResults.tokenizerOutput.predominantEndOfLineSequence),t+=i}return t}_formatImportNode(e,t){let n=`import ${t}`;return e.alias&&(n+=` as ${e.alias.value}`),n}_formatImportFromNode(e,t){const n=e.imports.sort((e,t)=>this._compareSymbols(e,t)).map(e=>{let t=e.name.value;return e.alias&&(t+=` as ${e.alias.value}`),t});let r=`from ${t} import `;const s=n.join(", ");if(r.length+s.length<=o)return r+s;r+="(\n";let i=0;for(;i<n.length;){let e=this._parseResults.tokenizerOutput.predominantTabSequence+n[i];i<n.length-1?e+=",":e+=")",i++;let t=e;for(;i<n.length&&(t+=" "+n[i],i<n.length-1?t+=",":t+=")",!(t.length>o));)e=t,i++;r+=e,i<n.length&&(r+=this._parseResults.tokenizerOutput.predominantEndOfLineSequence)}return r}_compareSymbols(e,t){return e.name.value<t.name.value?-1:1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),s=n(26),i=n(6),o=n(10),a=n(2),c=n(3);class l extends o.ParseTreeWalker{constructor(e,t,n,r,s){super(),this._parseResults=e,this._filePath=t,this._referencesResult=n,this._includeDeclaration=r,this._evaluator=s}findReferences(){this.walk(this._parseResults.parseTree)}walk(e){r.isCodeUnreachable(e)||super.walk(e)}visitName(e){const t=this._evaluator.getDeclarationsForNameNode(e);return t&&t.length>0&&t.some(e=>this._resultsContainsDeclaration(e))&&(this._includeDeclaration||e!==this._referencesResult.nodeAtOffset)&&this._referencesResult.locations.push({path:this._filePath,range:{start:a.convertOffsetToPosition(e.start,this._parseResults.tokenizerOutput.lines),end:a.convertOffsetToPosition(c.TextRange.getEnd(e),this._parseResults.tokenizerOutput.lines)}}),!0}_resultsContainsDeclaration(e){const t=this._evaluator.resolveAliasDeclaration(e);return!!t&&this._referencesResult.declarations.some(e=>s.areDeclarationsSame(e,t))}}t.ReferencesProvider=class{static getReferencesForPosition(e,t,n,r,s){const o=a.convertPositionToOffset(n,e.tokenizerOutput.lines);if(void 0===o)return;const c=i.findNodeByOffset(e.parseTree,o);if(void 0===c)return;if(39!==c.nodeType)return;const u=s.getDeclarationsForNameNode(c);if(!u)return;const p=[];if(u.forEach(e=>{const t=s.resolveAliasDeclaration(e);t&&p.push(t)}),0===p.length)return;const d={requiresGlobalSearch:2!==p[0].type||void 0!==c.parent&&1===c.parent.nodeType,nodeAtOffset:c,declarations:p,locations:[]};return new l(e,t,d,r,s).findReferences(),d}static addReferences(e,t,n,r,s){new l(e,t,n,r,s).findReferences()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24),s=n(6),i=n(2);t.SignatureHelpProvider=class{static getSignatureHelpForPosition(e,t,n){const r=i.convertPositionToOffset(t,e.tokenizerOutput.lines);if(void 0===r)return;let o=s.findNodeByOffset(e.parseTree,r);const a=o,c=o?s.getNodeDepth(o):0;let l=r;for(;l>=0;){l--;const t=s.findNodeByOffset(e.parseTree,l);if(t&&t!==a){s.getNodeDepth(t)>c&&(o=t);break}}if(void 0===o)return;const u=n.getCallSignatureInfo(o,r);if(!u)return;const p={signatures:[],activeParameter:u.activeArgumentIndex};return u.signatures.forEach(e=>{p.signatures.push(this._makeSignature(e,n))}),p}static _makeSignature(e,t){const n=t.printFunctionParts(e),s=[],i=e.details.docString;let o="(";return n[0].forEach((t,a)=>{const c=e.details.parameters[a].name||"";s.push({startOffset:o.length,endOffset:o.length+t.length,documentation:r.extractParameterDocumentation(i||"",c)}),o+=t,a<n[0].length-1&&(o+=", ")}),o+=") -> "+n[1],{label:o,parameters:s,documentation:i}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(52),s=n(57),i=n(132),o=n(58),a={and:0,as:1,assert:2,async:3,await:4,break:5,class:6,continue:7,__debug__:8,def:9,del:10,elif:11,else:12,except:13,finally:15,for:16,from:17,global:18,if:19,import:20,in:21,is:22,lambda:23,nonlocal:25,not:26,or:27,pass:28,raise:29,return:30,try:32,while:33,with:34,yield:35,False:14,None:24,True:31},c={0:3,1:4,2:4,3:2,4:4,5:1,6:2,7:4,8:2,9:4,10:2,11:4,12:10,13:2,14:4,15:10,16:10,17:2,18:4,19:10,20:10,21:2,22:4,23:2,24:4,25:2,26:4,27:10,28:2,29:4,30:2,31:4,32:2,33:4,35:2,36:2,37:1,38:2,39:2,40:2,41:2},l=65279;t.Tokenizer=class{constructor(){this._cs=new i.CharacterStream(""),this._tokens=[],this._prevLineStart=0,this._parenDepth=0,this._lineRanges=[],this._indentAmounts=[],this._typeIgnoreAll=!1,this._typeIgnoreLines={},this._crCount=0,this._crLfCount=0,this._lfCount=0,this._indentCount=0,this._indentTabCount=0,this._indentSpacesTotal=0,this._singleQuoteCount=0,this._doubleQuoteCount=0}tokenize(e,t,n){if(void 0===t)t=0;else if(t<0||t>e.length)throw new Error("Invalid range start");if(void 0===n)n=e.length;else{if(n<0||t+n>e.length)throw new Error("Invalid range length");t+n<e.length&&(e=e.substr(0,t+n))}this._cs=new i.CharacterStream(e),this._cs.position=t,this._tokens=[],this._prevLineStart=0,this._parenDepth=0,this._lineRanges=[],this._indentAmounts=[];const s=t+n;for(;!(this._cs.isEndOfStream()||(this._addNextToken(),this._cs.position>=s)););0!==this._tokens.length&&2===this._tokens[this._tokens.length-1].type||this._tokens.push(o.NewLineToken.create(this._cs.position,0,3,this._getComments())),this._setIndent(0,!1),this._tokens.push(o.Token.create(1,this._cs.position,0,this._getComments())),this._addLineRange();let a="\n";this._crCount>this._crLfCount&&this._crCount>this._lfCount?a="\r":this._crLfCount>this._crCount&&this._crLfCount>this._lfCount&&(a="\r\n");let c="    ";if(this._indentTabCount>this._indentCount/2)c="\t";else if(this._indentCount>0){let e=Math.round(this._indentSpacesTotal/this._indentCount);e<1?e=1:e>8&&(e=8),c="";for(let t=0;t<e;t++)c+=" "}return{tokens:new r.TextRangeCollection(this._tokens),lines:new r.TextRangeCollection(this._lineRanges),typeIgnoreLines:this._typeIgnoreLines,typeIgnoreAll:this._typeIgnoreAll,predominantEndOfLineSequence:a,predominantTabSequence:c,predominantSingleQuoteCharacter:this._singleQuoteCount>=this._doubleQuoteCount?"'":'"'}}static getOperatorInfo(e){return c[e]}static isOperatorAssignment(e){return void 0!==e&&void 0!==c[e]&&0!=(4&c[e])}static isOperatorComparison(e){return void 0!==e&&void 0!==c[e]&&0!=(8&c[e])}_addNextToken(){this._cs.skipWhitespace(),this._cs.isEndOfStream()||this._handleCharacter()||this._cs.moveNext()}_handleCharacter(){const e=this._getStringPrefixLength();if(e>=0){let t="";e>0&&(t=this._cs.getText().substr(this._cs.position,e),this._cs.advance(e));const n=this._getQuoteTypeFlags(t);if(0!==n)return this._handleString(n,e),!0}if(35===this._cs.currentChar)return this._handleComment(),!0;switch(this._cs.currentChar){case l:if(0===this._cs.position)return!1;this._handleInvalid();break;case 13:{const e=10===this._cs.nextChar?2:1,t=2===e?2:0;return this._handleNewLine(e,t),!0}case 10:return this._handleNewLine(1,1),!0;case 92:return 13===this._cs.nextChar?(10===this._cs.lookAhead(2)?this._cs.advance(3):this._cs.advance(2),this._addLineRange(),!0):10===this._cs.nextChar?(this._cs.advance(2),this._addLineRange(),!0):(this._handleInvalid(),!1);case 40:this._parenDepth++,this._tokens.push(o.Token.create(13,this._cs.position,1,this._getComments()));break;case 41:this._parenDepth>0&&this._parenDepth--,this._tokens.push(o.Token.create(14,this._cs.position,1,this._getComments()));break;case 91:this._parenDepth++,this._tokens.push(o.Token.create(15,this._cs.position,1,this._getComments()));break;case 93:this._parenDepth>0&&this._parenDepth--,this._tokens.push(o.Token.create(16,this._cs.position,1,this._getComments()));break;case 123:this._parenDepth++,this._tokens.push(o.Token.create(17,this._cs.position,1,this._getComments()));break;case 125:this._parenDepth>0&&this._parenDepth--,this._tokens.push(o.Token.create(18,this._cs.position,1,this._getComments()));break;case 44:this._tokens.push(o.Token.create(12,this._cs.position,1,this._getComments()));break;case 59:this._tokens.push(o.Token.create(11,this._cs.position,1,this._getComments()));break;case 58:if(61===this._cs.nextChar){this._tokens.push(o.OperatorToken.create(this._cs.position,2,34,this._getComments())),this._cs.advance(1);break}this._tokens.push(o.Token.create(10,this._cs.position,1,this._getComments()));break;default:if(this._isPossibleNumber()&&this._tryNumber())return!0;if(46===this._cs.currentChar){if(46===this._cs.nextChar&&46===this._cs.lookAhead(2))return this._tokens.push(o.Token.create(19,this._cs.position,3,this._getComments())),this._cs.advance(3),!0;this._tokens.push(o.Token.create(20,this._cs.position,1,this._getComments()));break}return!(!this._tryIdentifier()&&!this._tryOperator())||(this._handleInvalid(),!1)}return!1}_addLineRange(){const e=this._cs.position-this._prevLineStart;e>0&&this._lineRanges.push({start:this._prevLineStart,length:e}),this._prevLineStart=this._cs.position}_handleNewLine(e,t){0===this._parenDepth&&3!==t&&(0!==this._tokens.length&&2===this._tokens[this._tokens.length-1].type||this._tokens.push(o.NewLineToken.create(this._cs.position,e,t,this._getComments()))),0===t?this._crCount++:2===t?this._crLfCount++:this._lfCount++,this._cs.advance(e),this._addLineRange(),this._readIndentationAfterNewLine()}_readIndentationAfterNewLine(){let e=0,t=!1;for(;!this._cs.isEndOfStream();)switch(this._cs.currentChar){case 32:e++,this._cs.moveNext();break;case 9:e+=8-e%8,t=!0,this._cs.moveNext();break;case 12:e=0,this._cs.moveNext();break;default:return void this._setIndent(e,t);case 35:case 10:case 13:return}}_setIndent(e,t){if(!(this._parenDepth>0))if(0===this._indentAmounts.length)e>0&&(this._indentCount++,t&&this._indentTabCount++,this._indentSpacesTotal+=e,this._indentAmounts.push(e),this._tokens.push(o.IndentToken.create(this._cs.position,0,e,this._getComments())));else if(this._indentAmounts[this._indentAmounts.length-1]<e)this._indentCount++,t&&this._indentTabCount++,this._indentSpacesTotal+=e-this._indentAmounts[this._indentAmounts.length-1],this._indentAmounts.push(e),this._tokens.push(o.IndentToken.create(this._cs.position,0,e,this._getComments()));else{const t=[];for(;this._indentAmounts.length>0&&this._indentAmounts[this._indentAmounts.length-1]>e;)t.push(this._indentAmounts.length>1?this._indentAmounts[this._indentAmounts.length-2]:0),this._indentAmounts.pop();t.forEach((n,r)=>{const s=r<t.length-1||n===e,i=r<t.length-1?n:e;this._tokens.push(o.DedentToken.create(this._cs.position,0,i,s,this._getComments()))})}}_tryIdentifier(){const e=this._cs.position;if(s.isIdentifierStartChar(this._cs.currentChar))for(this._cs.moveNext();s.isIdentifierChar(this._cs.currentChar);)this._cs.moveNext();if(this._cs.position>e){const t=this._cs.getText().substr(e,this._cs.position-e);return void 0!==a[t]?this._tokens.push(o.KeywordToken.create(e,this._cs.position-e,a[t],this._getComments())):this._tokens.push(o.IdentifierToken.create(e,this._cs.position-e,t,this._getComments())),!0}return!1}_isPossibleNumber(){return!!s.isDecimal(this._cs.currentChar)||!(46!==this._cs.currentChar||!s.isDecimal(this._cs.nextChar))}_tryNumber(){const e=this._cs.position;if(48===this._cs.currentChar){let t=0,n=0;if((120===this._cs.nextChar||88===this._cs.nextChar)&&s.isHex(this._cs.lookAhead(2))){for(this._cs.advance(2),n=2;s.isHex(this._cs.currentChar);)this._cs.moveNext();t=16}if((98===this._cs.nextChar||66===this._cs.nextChar)&&s.isBinary(this._cs.lookAhead(2))){for(this._cs.advance(2),n=2;s.isBinary(this._cs.currentChar);)this._cs.moveNext();t=2}if((111===this._cs.nextChar||79===this._cs.nextChar)&&s.isOctal(this._cs.lookAhead(2))){for(this._cs.advance(2),n=2;s.isOctal(this._cs.currentChar);)this._cs.moveNext();t=8}if(t>0){const r=this._cs.getText().substr(e,this._cs.position-e),s=parseInt(r.substr(n).replace(/_/g,""),t);if(!isNaN(s))return this._tokens.push(o.NumberToken.create(e,r.length,s,!0,!1,this._getComments())),!0}}let t=!1,n=!1;if(this._cs.currentChar>=49&&this._cs.currentChar<=57){for(;s.isDecimal(this._cs.currentChar);)n=!0,this._cs.moveNext();t=46!==this._cs.currentChar&&101!==this._cs.currentChar&&69!==this._cs.currentChar}if(48===this._cs.currentChar){for(n=!0;48===this._cs.currentChar||95===this._cs.currentChar;)this._cs.moveNext();t=46!==this._cs.currentChar&&101!==this._cs.currentChar&&69!==this._cs.currentChar}if(t){let t=this._cs.getText().substr(e,this._cs.position-e);const n=parseInt(t.replace(/_/g,""),10);if(!isNaN(n)){let r=!1;return 106!==this._cs.currentChar&&74!==this._cs.currentChar||(r=!0,t+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),this._tokens.push(o.NumberToken.create(e,t.length,n,!0,r,this._getComments())),!0}}if(this._cs.position=e,(n||46===this._cs.currentChar&&this._cs.nextChar>=48&&this._cs.nextChar<=57)&&this._skipFloatingPointCandidate()){let t=this._cs.getText().substr(e,this._cs.position-e);const n=parseFloat(t);if(!isNaN(n)){let r=!1;return 106!==this._cs.currentChar&&74!==this._cs.currentChar||(r=!0,t+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),this._tokens.push(o.NumberToken.create(e,this._cs.position-e,n,!1,r,this._getComments())),!0}}return this._cs.position=e,!1}_tryOperator(){let e=0;const t=this._cs.nextChar;let n;switch(this._cs.currentChar){case 43:e=61===t?2:1,n=2===e?1:0;break;case 38:e=61===t?2:1,n=2===e?4:3;break;case 124:e=61===t?2:1,n=2===e?7:6;break;case 94:e=61===t?2:1,n=2===e?9:8;break;case 61:e=61===t?2:1,n=2===e?12:2;break;case 33:if(61!==t)return!1;e=2,n=27;break;case 37:e=61===t?2:1,n=2===e?24:23;break;case 126:e=1,n=5;break;case 45:if(62===t)return this._tokens.push(o.Token.create(21,this._cs.position,2,this._getComments())),this._cs.advance(2),!0;e=61===t?2:1,n=2===e?33:32;break;case 42:42===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?29:28):(e=61===t?2:1,n=2===e?26:25);break;case 47:47===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?14:13):(e=61===t?2:1,n=2===e?11:10);break;case 60:60===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?18:17):(e=61===t?2:1,n=2===e?20:19);break;case 62:62===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?31:30):(e=61===t?2:1,n=2===e?16:15);break;case 64:e=61===t?2:1,n=2===e?22:21;break;default:return!1}return this._tokens.push(o.OperatorToken.create(this._cs.position,e,n,this._getComments())),this._cs.advance(e),e>0}_handleInvalid(){const e=this._cs.position;this._cs.skipToWhitespace();const t=this._cs.position-e;return t>0&&(this._tokens.push(o.Token.create(0,e,t,this._getComments())),!0)}_getComments(){const e=this._comments;return this._comments=void 0,e}_handleComment(){const e=this._cs.position+1;this._cs.skipToEol();const t=this._cs.position-e,n=this._cs.getText().substr(e,t),r=o.Comment.create(e,t,n);n.match(/^\s*type:\s*ignore(\s|$)/)&&(this._tokens.findIndex(e=>2!==e.type&&e&&3!==e.type)<0?this._typeIgnoreAll=!0:this._typeIgnoreLines[this._lineRanges.length]=!0),this._comments?this._comments.push(r):this._comments=[r]}_getStringPrefixLength(){if(39===this._cs.currentChar||34===this._cs.currentChar)return 0;if(39===this._cs.nextChar||34===this._cs.nextChar)switch(this._cs.currentChar){case 102:case 70:case 114:case 82:case 98:case 66:case 117:case 85:return 1}if(39===this._cs.lookAhead(2)||34===this._cs.lookAhead(2)){switch(this._cs.getText().substr(this._cs.position,2).toLowerCase()){case"rf":case"fr":case"ur":case"ru":case"br":case"rb":return 2}}return-1}_getQuoteTypeFlags(e){let t=0;e=e.toLowerCase();for(let n=0;n<e.length;n++)switch(e[n]){case"u":t|=16;break;case"b":t|=32;break;case"r":t|=8;break;case"f":t|=64}return 39===this._cs.currentChar?(t|=1,39===this._cs.nextChar&&39===this._cs.lookAhead(2)&&(t|=4)):34===this._cs.currentChar&&(t|=2,34===this._cs.nextChar&&34===this._cs.lookAhead(2)&&(t|=4)),t}_handleString(e,t){const n=this._cs.position-t;4&e?this._cs.advance(3):(this._cs.moveNext(),1&e?this._singleQuoteCount++:this._doubleQuoteCount++);const r=this._skipToEndOfStringLiteral(e),s=this._cs.position;this._tokens.push(o.StringToken.create(n,s-n,r.flags,r.escapedValue,t,this._getComments()))}_skipToEndOfStringLiteral(e){const t=1&e?39:34,n=0!=(4&e);let r="";for(;;){if(this._cs.isEndOfStream())return{escapedValue:r,flags:e|=65536};if(92===this._cs.currentChar)r+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext(),13===this._cs.getCurrentChar()||10===this._cs.getCurrentChar()?(13===this._cs.getCurrentChar()&&10===this._cs.nextChar&&(r+=String.fromCharCode(this._cs.getCurrentChar()),this._cs.moveNext()),r+=String.fromCharCode(this._cs.getCurrentChar()),this._cs.moveNext(),this._addLineRange()):(r+=String.fromCharCode(this._cs.getCurrentChar()),this._cs.moveNext());else if(10===this._cs.currentChar||13===this._cs.currentChar){if(!n)return{escapedValue:r,flags:e|=65536};13===this._cs.currentChar&&10===this._cs.nextChar&&(r+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),r+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext(),this._addLineRange()}else{if(!n&&this._cs.currentChar===t){this._cs.moveNext();break}if(n&&this._cs.currentChar===t&&this._cs.nextChar===t&&this._cs.lookAhead(2)===t){this._cs.advance(3);break}r+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()}}return{escapedValue:r,flags:e}}_skipFloatingPointCandidate(){const e=this._cs.position;return this._skipFractionalNumber(),this._cs.position>e&&(101!==this._cs.currentChar&&69!==this._cs.currentChar||(this._cs.moveNext(),this._skipDecimalNumber(!0))),this._cs.position>e}_skipFractionalNumber(){this._skipDecimalNumber(!1),46===this._cs.currentChar&&this._cs.moveNext(),this._skipDecimalNumber(!1)}_skipDecimalNumber(e){for(!e||45!==this._cs.currentChar&&43!==this._cs.currentChar||this._cs.moveNext();s.isDecimal(this._cs.currentChar);)this._cs.moveNext()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unicodeLu=[[65,90],[192,214],[216,222],256,258,260,262,264,266,268,270,272,274,276,278,280,282,284,286,288,290,292,294,296,298,300,302,304,306,308,310,313,315,317,319,321,323,325,327,330,332,334,336,338,340,342,344,346,348,350,352,354,356,358,360,362,364,366,368,370,372,374,[376,377],379,381,[385,386],388,[390,391],[393,395],[398,401],[403,404],[406,408],[412,413],[415,416],418,420,[422,423],425,428,[430,431],[433,435],437,[439,440],444,452,455,458,461,463,465,467,469,471,473,475,478,480,482,484,486,488,490,492,494,497,500,[502,504],506,508,510,512,514,516,518,520,522,524,526,528,530,532,534,536,538,540,542,544,546,548,550,552,554,556,558,560,562,[570,571],[573,574],577,[579,582],584,586,588,590,880,882,886,895,902,[904,906],908,[910,911],[913,929],[931,939],975,[978,980],984,986,988,990,992,994,996,998,1e3,1002,1004,1006,1012,1015,[1017,1018],[1021,1071],1120,1122,1124,1126,1128,1130,1132,1134,1136,1138,1140,1142,1144,1146,1148,1150,1152,1162,1164,1166,1168,1170,1172,1174,1176,1178,1180,1182,1184,1186,1188,1190,1192,1194,1196,1198,1200,1202,1204,1206,1208,1210,1212,1214,[1216,1217],1219,1221,1223,1225,1227,1229,1232,1234,1236,1238,1240,1242,1244,1246,1248,1250,1252,1254,1256,1258,1260,1262,1264,1266,1268,1270,1272,1274,1276,1278,1280,1282,1284,1286,1288,1290,1292,1294,1296,1298,1300,1302,1304,1306,1308,1310,1312,1314,1316,1318,1320,1322,1324,1326,[1329,1366],[4256,4293],4295,4301,[5024,5109],7680,7682,7684,7686,7688,7690,7692,7694,7696,7698,7700,7702,7704,7706,7708,7710,7712,7714,7716,7718,7720,7722,7724,7726,7728,7730,7732,7734,7736,7738,7740,7742,7744,7746,7748,7750,7752,7754,7756,7758,7760,7762,7764,7766,7768,7770,7772,7774,7776,7778,7780,7782,7784,7786,7788,7790,7792,7794,7796,7798,7800,7802,7804,7806,7808,7810,7812,7814,7816,7818,7820,7822,7824,7826,7828,7838,7840,7842,7844,7846,7848,7850,7852,7854,7856,7858,7860,7862,7864,7866,7868,7870,7872,7874,7876,7878,7880,7882,7884,7886,7888,7890,7892,7894,7896,7898,7900,7902,7904,7906,7908,7910,7912,7914,7916,7918,7920,7922,7924,7926,7928,7930,7932,7934,[7944,7951],[7960,7965],[7976,7983],[7992,7999],[8008,8013],8025,8027,8029,8031,[8040,8047],[8120,8123],[8136,8139],[8152,8155],[8168,8172],[8184,8187],8450,8455,[8459,8461],[8464,8466],8469,[8473,8477],8484,8486,8488,[8490,8493],[8496,8499],[8510,8511],8517,8579,[11264,11310],11360,[11362,11364],11367,11369,11371,[11373,11376],11378,11381,[11390,11392],11394,11396,11398,11400,11402,11404,11406,11408,11410,11412,11414,11416,11418,11420,11422,11424,11426,11428,11430,11432,11434,11436,11438,11440,11442,11444,11446,11448,11450,11452,11454,11456,11458,11460,11462,11464,11466,11468,11470,11472,11474,11476,11478,11480,11482,11484,11486,11488,11490,11499,11501,11506,42560,42562,42564,42566,42568,42570,42572,42574,42576,42578,42580,42582,42584,42586,42588,42590,42592,42594,42596,42598,42600,42602,42604,42624,42626,42628,42630,42632,42634,42636,42638,42640,42642,42644,42646,42648,42650,42786,42788,42790,42792,42794,42796,42798,42802,42804,42806,42808,42810,42812,42814,42816,42818,42820,42822,42824,42826,42828,42830,42832,42834,42836,42838,42840,42842,42844,42846,42848,42850,42852,42854,42856,42858,42860,42862,42873,42875,[42877,42878],42880,42882,42884,42886,42891,42893,42896,42898,42902,42904,42906,42908,42910,42912,42914,42916,42918,42920,[42922,42926],[42928,42932],42934,[65313,65338],[66560,66599],[66736,66771],[68736,68786],[71840,71871],[119808,119833],[119860,119885],[119912,119937],119964,[119966,119967],119970,[119973,119974],[119977,119980],[119982,119989],[120016,120041],[120068,120069],[120071,120074],[120077,120084],[120086,120092],[120120,120121],[120123,120126],[120128,120132],120134,[120138,120144],[120172,120197],[120224,120249],[120276,120301],[120328,120353],[120380,120405],[120432,120457],[120488,120512],[120546,120570],[120604,120628],[120662,120686],[120720,120744],120778,[125184,125217]],t.unicodeLl=[[97,122],181,[223,246],[248,255],257,259,261,263,265,267,269,271,273,275,277,279,281,283,285,287,289,291,293,295,297,299,301,303,305,307,309,[311,312],314,316,318,320,322,324,326,[328,329],331,333,335,337,339,341,343,345,347,349,351,353,355,357,359,361,363,365,367,369,371,373,375,378,380,[382,384],387,389,392,[396,397],402,405,[409,411],414,417,419,421,424,[426,427],429,432,436,438,[441,442],[445,447],454,457,460,462,464,466,468,470,472,474,[476,477],479,481,483,485,487,489,491,493,[495,496],499,501,505,507,509,511,513,515,517,519,521,523,525,527,529,531,533,535,537,539,541,543,545,547,549,551,553,555,557,559,561,[563,569],572,[575,576],578,583,585,587,589,[591,659],[661,687],881,883,887,[891,893],912,[940,974],[976,977],[981,983],985,987,989,991,993,995,997,999,1001,1003,1005,[1007,1011],1013,1016,[1019,1020],[1072,1119],1121,1123,1125,1127,1129,1131,1133,1135,1137,1139,1141,1143,1145,1147,1149,1151,1153,1163,1165,1167,1169,1171,1173,1175,1177,1179,1181,1183,1185,1187,1189,1191,1193,1195,1197,1199,1201,1203,1205,1207,1209,1211,1213,1215,1218,1220,1222,1224,1226,1228,[1230,1231],1233,1235,1237,1239,1241,1243,1245,1247,1249,1251,1253,1255,1257,1259,1261,1263,1265,1267,1269,1271,1273,1275,1277,1279,1281,1283,1285,1287,1289,1291,1293,1295,1297,1299,1301,1303,1305,1307,1309,1311,1313,1315,1317,1319,1321,1323,1325,1327,[1377,1415],[5112,5117],[7296,7304],[7424,7467],[7531,7543],[7545,7578],7681,7683,7685,7687,7689,7691,7693,7695,7697,7699,7701,7703,7705,7707,7709,7711,7713,7715,7717,7719,7721,7723,7725,7727,7729,7731,7733,7735,7737,7739,7741,7743,7745,7747,7749,7751,7753,7755,7757,7759,7761,7763,7765,7767,7769,7771,7773,7775,7777,7779,7781,7783,7785,7787,7789,7791,7793,7795,7797,7799,7801,7803,7805,7807,7809,7811,7813,7815,7817,7819,7821,7823,7825,7827,[7829,7837],7839,7841,7843,7845,7847,7849,7851,7853,7855,7857,7859,7861,7863,7865,7867,7869,7871,7873,7875,7877,7879,7881,7883,7885,7887,7889,7891,7893,7895,7897,7899,7901,7903,7905,7907,7909,7911,7913,7915,7917,7919,7921,7923,7925,7927,7929,7931,7933,[7935,7943],[7952,7957],[7968,7975],[7984,7991],[8e3,8005],[8016,8023],[8032,8039],[8048,8061],[8064,8071],[8080,8087],[8096,8103],[8112,8116],[8118,8119],8126,[8130,8132],[8134,8135],[8144,8147],[8150,8151],[8160,8167],[8178,8180],[8182,8183],8458,[8462,8463],8467,8495,8500,8505,[8508,8509],[8518,8521],8526,8580,[11312,11358],11361,[11365,11366],11368,11370,11372,11377,[11379,11380],[11382,11387],11393,11395,11397,11399,11401,11403,11405,11407,11409,11411,11413,11415,11417,11419,11421,11423,11425,11427,11429,11431,11433,11435,11437,11439,11441,11443,11445,11447,11449,11451,11453,11455,11457,11459,11461,11463,11465,11467,11469,11471,11473,11475,11477,11479,11481,11483,11485,11487,11489,[11491,11492],11500,11502,11507,[11520,11557],11559,11565,42561,42563,42565,42567,42569,42571,42573,42575,42577,42579,2581,42583,42585,42587,42589,42591,42593,42595,42597,42599,42601,42603,42605,42625,42627,42629,42631,42633,42635,42637,42639,42641,42643,42645,42647,42649,42651,42787,42789,42791,42793,42795,42797,[42799,42801],42803,42805,42807,42809,42811,42813,42815,42817,42819,42821,42823,42825,42827,42829,42831,42833,42835,42837,42839,42841,42843,42845,42847,42849,42851,42853,42855,42857,42859,42861,42863,[42865,42872],42874,42876,42879,42881,42883,42885,42887,42892,42894,42897,[42899,42901],42903,42905,42907,42909,42911,42913,42915,42917,42919,42921,42933,42935,43002,[43824,43866],[43872,43877],[43888,43967],[64256,64262],[64275,64279],[65345,65370],[66600,66639],[66776,66811],[68800,68850],[71872,71903],[119834,119859],[119886,119892],[119894,119911],[119938,119963],[119990,119993],119995,[119997,120003],[120005,120015],[120042,120067],[120094,120119],[120146,120171],[120198,120223],[120250,120275],[120302,120327],[120354,120379],[120406,120431],[120458,120485],[120514,120538],[120540,120545],[120572,120596],[120598,120603],[120630,120654],[120656,120661],[120688,120712],[120714,120719],[120746,120770],[120772,120777],120779,[125218,125251]],t.unicodeLt=[453,456,459,498,[8072,8079],[8088,8095],[8104,8111],8124,8140,8188],t.unicodeLo=[170,186,443,[448,451],660,[1488,1514],[1520,1522],[1568,1599],[1601,1610],[1646,1647],[1649,1747],1749,[1774,1775],[1786,1788],1791,1808,[1810,1839],[1869,1957],1969,[1994,2026],[2048,2069],[2112,2136],[2144,2154],[2208,2228],[2230,2237],[2308,2361],2365,2384,[2392,2401],[2418,2432],[2437,2444],[2447,2448],[2451,2472],[2474,2480],2482,[2486,2489],2493,2510,[2524,2525],[2527,2529],[2544,2545],2556,[2565,2570],[2575,2576],[2579,2600],[2602,2608],[2610,2611],[2613,2614],[2616,2617],[2649,2652],2654,[2674,2676],[2693,2701],[2703,2705],[2707,2728],[2730,2736],[2738,2739],[2741,2745],2749,2768,[2784,2785],2809,[2821,2828],[2831,2832],[2835,2856],[2858,2864],[2866,2867],[2869,2873],2877,[2908,2909],[2911,2913],2929,2947,[2949,2954],[2958,2960],[2962,2965],[2969,2970],2972,[2974,2975],[2979,2980],[2984,2986],[2990,3001],3024,[3077,3084],[3086,3088],[3090,3112],[3114,3129],3133,[3160,3162],[3168,3169],3200,[3205,3212],[3214,3216],[3218,3240],[3242,3251],[3253,3257],3261,3294,[3296,3297],[3313,3314],[3333,3340],[3342,3344],[3346,3386],3389,3406,[3412,3414],[3423,3425],[3450,3455],[3461,3478],[3482,3505],[3507,3515],3517,[3520,3526],[3585,3632],[3634,3635],[3648,3653],[3713,3714],3716,[3719,3720],3722,3725,[3732,3735],[3737,3743],[3745,3747],3749,3751,[3754,3755],[3757,3760],[3762,3763],3773,[3776,3780],[3804,3807],3840,[3904,3911],[3913,3948],[3976,3980],[4096,4138],4159,[4176,4181],[4186,4189],4193,[4197,4198],[4206,4208],[4213,4225],4238,[4304,4346],[4349,4680],[4682,4685],[4688,4694],4696,[4698,4701],[4704,4744],[4746,4749],[4752,4784],[4786,4789],[4792,4798],4800,[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954],[4992,5007],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5873,5880],[5888,5900],[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6e3],[6016,6067],6108,[6176,6210],[6212,6263],[6272,6276],[6279,6312],6314,[6320,6389],[6400,6430],[6480,6509],[6512,6516],[6528,6571],[6576,6601],[6656,6678],[6688,6740],[6917,6963],[6981,6987],[7043,7072],[7086,7087],[7098,7141],[7168,7203],[7245,7247],[7258,7287],[7401,7404],[7406,7409],[7413,7414],[8501,8504],[11568,11623],[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710],[11712,11718],[11720,11726],[11728,11734],[11736,11742],12294,12348,[12353,12438],12447,[12449,12538],12543,[12549,12590],[12593,12686],[12704,12730],[12784,12799],[13312,19893],[19968,40938],[40960,40980],[40982,42124],[42192,42231],[42240,42507],[42512,42527],[42538,42539],42606,[42656,42725],42895,42999,[43003,43009],[43011,43013],[43015,43018],[43020,43042],[43072,43123],[43138,43187],[43250,43255],43259,43261,[43274,43301],[43312,43334],[43360,43388],[43396,43442],[43488,43492],[43495,43503],[43514,43518],[43520,43560],[43584,43586],[43588,43595],[43616,43631],[43633,43638],43642,[43646,43695],43697,[43701,43702],[43705,43709],43712,43714,[43739,43740],[43744,43754],43762,[43777,43782],[43785,43790],[43793,43798],[43808,43814],[43816,43822],[43968,44002],[44032,55203],[55216,55238],[55243,55291],[63744,64109],[64112,64217],64285,[64287,64296],[64298,64310],[64312,64316],64318,[64320,64321],[64323,64324],[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140],[65142,65276],[65382,65391],[65393,65437],[65440,65470],[65474,65479],[65482,65487],[65490,65495],[65498,65500],[65536,65547],[65549,65574],[65576,65594],[65596,65597],[65599,65613],[65616,65629],[65664,65786],[66176,66204],[66208,66256],[66304,66335],[66349,66368],[66370,66377],[66384,66421],[66432,66461],[66464,66499],[66504,66511],[66640,66717],[66816,66855],[66864,66915],[67072,67382],[67392,67413],[67424,67431],[67584,67589],67592,[67594,67637],[67639,67640],67644,[67647,67669],[67680,67702],[67712,67742],[67808,67826],[67828,67829],[67840,67861],[67872,67897],[67968,68023],[68030,68031],68096,[68112,68115],[68117,68119],[68121,68147],[68192,68220],[68224,68252],[68288,68295],[68297,68324],[68352,68405],[68416,68437],[68448,68466],[68480,68497],[68608,68680],[69635,69687],[69763,69807],[69840,69864],[69891,69926],[69968,70002],70006,[70019,70066],[70081,70084],70106,70108,[70144,70161],[70163,70187],[70272,70278],70280,[70282,70285],[70287,70301],[70303,70312],[70320,70366],[70405,70412],[70415,70416],[70419,70440],[70442,70448],[70450,70451],[70453,70457],70461,70480,[70493,70497],[70656,70708],[70727,70730],[70784,70831],[70852,70853],70855,[71040,71086],[71128,71131],[71168,71215],71236,[71296,71338],[71424,71449],71935,72192,[72203,72242],72250,72272,[72284,72323],[72326,72329],[72384,72440],[72704,72712],[72714,72750],72768,[72818,72847],[72960,72966],[72968,72969],[72971,73008],73030,[73728,74649],[74880,75075],[77824,78894],[82944,83526],[92160,92728],[92736,92766],[92880,92909],[92928,92975],[93027,93047],[93053,93071],[93952,94020],94032,[94208,100332],[100352,101106],[110592,110878],[110960,111355],[113664,113770],[113776,113788],[113792,113800],[113808,113817],[124928,125124],[126464,126467],[126469,126495],[126497,126498],126500,126503,[126505,126514],[126516,126519],126521,126523,126530,126535,126537,126539,[126541,126543],[126545,126546],126548,126551,126553,126555,126557,126559,[126561,126562],126564,[126567,126570],[126572,126578],[126580,126583],[126585,126588],126590,[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[131072,173782],[173824,177972],[177984,178205],[178208,183969],[183984,191456],[194560,195101]],t.unicodeLm=[[688,705],[710,721],[736,740],748,750,884,890,1369,1600,[1765,1766],[2036,2037],2042,2074,2084,2088,2417,3654,3782,4348,6103,6211,6823,[7288,7293],[7468,7530],7544,[7579,7615],8305,8319,[8336,8348],[11388,11389],11631,11823,12293,[12337,12341],12347,[12445,12446],[12540,12542],40981,[42232,42237],42508,42623,[42652,42653],[42775,42783],42864,42888,[43e3,43001],43471,43494,43632,43741,[43763,43764],[43868,43871],65392,[65438,65439],[92992,92995],[94099,94111],[94176,94177]],t.unicodeNl=[[5870,5872],[8544,8578],[8581,8584],12295,[12321,12329],[12344,12346],[42726,42735],[65856,65908],66369,66378,[66513,66517],[74752,74862]],t.unicodeMn=[[768,879],[1155,1159],[1425,1469],1471,[1473,1474],[1476,1477],1479,[1552,1562],[1611,1631],1648,[1750,1756],[1759,1764],[1767,1768],[1770,1773],1809,[1840,1866],[1958,1968],[2027,2035],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2260,2273],[2275,2306],2362,2364,[2369,2376],2381,[2385,2391],[2402,2403],2433,2492,[2497,2500],2509,[2530,2531],[2561,2562],2620,[2625,2626],[2631,2632],[2635,2637],2641,[2672,2673],2677,[2689,2690],2748,[2753,2757],[2759,2760],2765,[2786,2787],[2810,2815],2817,2876,2879,[2881,2884],2893,2902,[2914,2915],2946,3008,3021,3072,[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],3201,3260,3263,3270,[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],3405,[3426,3427],3530,[3538,3540],3542,3633,[3636,3642],[3655,3662],3761,[3764,3769],[3771,3772],[3784,3789],[3864,3865],3893,3895,3897,[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],4038,[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],4226,[4229,4230],4237,4253,[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],6086,[6089,6099],6109,[6155,6157],[6277,6278],6313,[6432,6434],[6439,6440],6450,[6457,6459],[6679,6680],6683,6742,[6744,6750],6752,6754,[6757,6764],[6771,6780],6783,[6832,6845],[6912,6915],6964,[6966,6970],6972,6978,[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],7142,[7144,7145],7149,[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],7405,7412,[7416,7417],[7616,7673],[7675,7679],[8400,8412],8417,[8421,8432],[11503,11505],11647,[11744,11775],[12330,12333],[12441,12442],42607,[42612,42621],[42654,42655],[42736,42737],43010,43014,43019,[43045,43046],[43204,43205],[43232,43249],[43302,43309],[43335,43345],[43392,43394],43443,[43446,43449],43452,43493,[43561,43566],[43569,43570],[43573,43574],43587,43596,43644,43696,[43698,43700],[43703,43704],[43710,43711],43713,[43756,43757],43766,44005,44008,44013,64286,[65024,65039],[65056,65071],66045,66272,[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],68159,[68325,68326],69633,[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],70003,[70016,70017],[70070,70078],[70090,70092],[70191,70193],70196,[70198,70199],70206,70367,[70371,70378],[70400,70401],70460,70464,[70502,70508],[70512,70516],[70712,70719],[70722,70724],70726,[70835,70840],70842,[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],71229,[71231,71232],71339,71341,[71344,71349],71351,[71453,71455],[71458,71461],[71463,71467],[72193,72198],[72201,72202],[72243,72248],[72251,72254],72263,[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],72767,[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],73018,[73020,73021],[73023,73029],73031,[92912,92916],[92976,92982],[94095,94098],[113821,113822],[119143,119145],[119163,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],121461,121476,[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[125136,125142],[125252,125258],[917760,917999]],t.unicodeMc=[2307,2363,[2366,2368],[2377,2380],[2382,2383],[2434,2435],[2494,2496],[2503,2504],[2507,2508],2519,2563,[2622,2624],2691,[2750,2752],2761,[2763,2764],[2818,2819],2878,2880,[2887,2888],[2891,2892],2903,[3006,3007],[3009,3010],[3014,3016],[3018,3020],3031,[3073,3075],[3137,3140],[3202,3203],3262,[3264,3268],[3271,3272],[3274,3275],[3285,3286],[3330,3331],[3390,3392],[3398,3400],[3402,3404],3415,[3458,3459],[3535,3537],[3544,3551],[3570,3571],[3902,3903],3967,[4139,4140],4145,4152,[4155,4156],[4182,4183],[4194,4196],[4199,4205],[4227,4228],[4231,4236],4239,[4250,4252],6070,[6078,6085],[6087,6088],[6435,6438],[6441,6443],[6448,6449],[6451,6456],[6681,6682],6741,6743,6753,[6755,6756],[6765,6770],6916,6965,6971,[6973,6977],[6979,6980],7042,7073,[7078,7079],7082,7143,[7146,7148],7150,[7154,7155],[7204,7211],[7220,7221],7393,[7410,7411],7415,[12334,12335],[43043,43044],43047,[43136,43137],[43188,43203],[43346,43347],43395,[43444,43445],[43450,43451],[43453,43456],[43567,43568],[43571,43572],43597,43643,43645,43755,[43758,43759],43765,[44003,44004],[44006,44007],[44009,44010],44012,69632,69634,69762,[69808,69810],[69815,69816],69932,70018,[70067,70069],[70079,70080],[70188,70190],[70194,70195],70197,[70368,70370],[70402,70403],[70462,70463],[70465,70468],[70471,70472],[70475,70477],70487,[70498,70499],[70709,70711],[70720,70721],70725,[70832,70834],70841,[70843,70846],70849,[71087,71089],[71096,71099],71102,[71216,71218],[71227,71228],71230,71340,[71342,71343],71350,[71456,71457],71462,[72199,72200],72249,[72279,72280],72343,72751,72766,72873,72881,72884,[94033,94078],[119141,119142],[119149,119154]],t.unicodeNd=[[48,57],[1632,1641],[1776,1785],[1984,1993],[2406,2415],[2534,2543],[2662,2671],[2790,2799],[2918,2927],[3046,3055],[3174,3183],[3302,3311],[3430,3439],[3558,3567],[3664,3673],[3792,3801],[3872,3881],[4160,4169],[4240,4249],[6112,6121],[6160,6169],[6470,6479],[6608,6617],[6784,6793],[6800,6809],[6992,7001],[7088,7097],[7232,7241],[7248,7257],[42528,42537],[43216,43225],[43264,43273],[43472,43481],[43504,43513],[43600,43609],[44016,44025],[65296,65305],[66720,66729],[69734,69743],[69872,69881],[69942,69951],[70096,70105],[70384,70393],[70736,70745],[70864,70873],[71248,71257],[71360,71369],[71472,71481],[71904,71913],[72784,72793],[73040,73049],[92768,92777],[93008,93017],[120782,120831],[125264,125273]],t.unicodePc=[95,[8255,8256],8276,[65075,65076],[65101,65103],65343]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(57);t.CharacterStream=class{constructor(e){this._text=e,this._position=0,this._currentChar=e.length>0?e.charCodeAt(0):0,this._isEndOfStream=0===e.length}getText(){return this._text}get position(){return this._position}set position(e){this._position=e,this._checkBounds()}get currentChar(){return this._currentChar}getCurrentChar(){return this._currentChar}get nextChar(){return this.position+1<this._text.length?this._text.charCodeAt(this.position+1):0}get prevChar(){return this.position-1>=0?this._text.charCodeAt(this.position-1):0}isEndOfStream(){return this._isEndOfStream}lookAhead(e){const t=this._position+e;return t<0||t>=this._text.length?0:this._text.charCodeAt(t)}advance(e){this.position+=e}moveNext(){return this._position<this._text.length-1?(this._position+=1,this._currentChar=this._text.charCodeAt(this._position),!0):(this.advance(1),!this.isEndOfStream())}isAtWhiteSpace(){return r.isWhiteSpace(this.currentChar)}isAtLineBreak(){return r.isLineBreak(this.currentChar)}skipLineBreak(){13===this._currentChar?(this.moveNext(),10===this.currentChar&&this.moveNext()):10===this._currentChar&&this.moveNext()}skipWhitespace(){for(;!this.isEndOfStream()&&this.isAtWhiteSpace();)this.moveNext()}skipToEol(){for(;!this.isEndOfStream()&&!this.isAtLineBreak();)this.moveNext()}skipToWhitespace(){for(;!this.isEndOfStream()&&!this.isAtWhiteSpace();)this.moveNext()}charCodeAt(e){return this._text.charCodeAt(e)}get length(){return this._text.length}_checkBounds(){this._position<0&&(this._position=0),this._isEndOfStream=this._position>=this._text.length,this._isEndOfStream&&(this._position=this._text.length),this._currentChar=this._isEndOfStream?0:this._text.charCodeAt(this._position)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(8),i=n(2),o=n(17),a=n(3),c=n(56),l=n(5),u=n(37),p=n(6),d=n(10),h=n(134),f=n(59),g=n(27),m=n(11);class y extends d.ParseTreeWalker{constructor(e){super(),this._deferredBindingTasks=[],this._notLocalBindings=new Map,this._nestedExceptDepth=0,this._fileInfo=e}bindModule(e){const t=void 0===this._fileInfo.builtinsScope;return this._createNewScope(t?4:3,this._fileInfo.builtinsScope,()=>{l.setScope(e,this._currentScope),this._addBuiltInSymbolToCurrentScope("__doc__",e,"str"),this._addBuiltInSymbolToCurrentScope("__name__",e,"str"),this._addBuiltInSymbolToCurrentScope("__loader__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__package__",e,"str"),this._addBuiltInSymbolToCurrentScope("__spec__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__path__",e,"Iterable[str]"),this._addBuiltInSymbolToCurrentScope("__file__",e,"str"),this._addBuiltInSymbolToCurrentScope("__cached__",e,"str"),this._currentFlowNode=this._createStartFlowNode(),this._walkStatementsAndReportUnreachable(e.statements),l.setCodeFlowExpressions(e,this._currentExecutionScopeReferenceMap)}),this._bindDeferred(),{moduleDocString:p.getDocString(e.statements)}}visitModule(e){return r.fail("We should never get here"),!1}visitSuite(e){return this._walkStatementsAndReportUnreachable(e.statements),!1}visitModuleName(e){const t=l.getImportInfo(e);if(r(void 0!==t),t)if(t.isImportFound){if(1===t.importType&&!t.isStubFile){const n=this._addDiagnostic(this._fileInfo.diagnosticSettings.reportMissingTypeStubs,"reportMissingTypeStubs",`Stub file not found for '${t.importName}'`,e);if(n){const e={action:"pyright.createtypestub",moduleName:t.importName};n.addAction(e)}}}else this._addDiagnostic(this._fileInfo.diagnosticSettings.reportMissingImports,"reportMissingImports",`Import '${t.importName}' could not be resolved`,e);return!0}visitClass(e){this.walkMultiple(e.decorators);const t={type:4,node:e,path:this._fileInfo.filePath,range:i.convertOffsetsToRange(e.name.start,a.TextRange.getEnd(e.name),this._fileInfo.lines)},n=this._bindNameToScope(this._currentScope,e.name.value);return n&&n.addDeclaration(t),l.setDeclaration(e,t),this.walkMultiple(e.arguments),this._createNewScope(2,this._currentScope,()=>{l.setScope(e,this._currentScope),this._addBuiltInSymbolToCurrentScope("__name__",e,"str"),this._fileInfo.executionEnvironment.pythonVersion>=o.PythonVersion.V33&&this._addBuiltInSymbolToCurrentScope("__qualname__",e,"str"),this.walk(e.suite)}),this._addSymbolToCurrentScope(e.name.value,!0),this._createAssignmentTargetFlowNodes(e.name),!1}visitFunction(e){const t=this._bindNameToScope(this._currentScope,e.name.value),n=p.getEnclosingClass(e,!0),s={type:3,node:e,isMethod:!!n,isGenerator:!1,path:this._fileInfo.filePath,range:i.convertOffsetsToRange(e.name.start,a.TextRange.getEnd(e.name),this._fileInfo.lines)};t&&t.addDeclaration(s),l.setDeclaration(e,s),this.walkMultiple(e.decorators),e.parameters.forEach(e=>{e.defaultValue&&this.walk(e.defaultValue),e.typeAnnotation&&this.walk(e.typeAnnotation)}),e.returnTypeAnnotation&&this.walk(e.returnTypeAnnotation);let c=e.parent;for(;c&&37!==c.nodeType&&29!==c.nodeType;)c=c.parent;r(void 0!==c);const u=l.getScope(c);return r(void 0!==u),this._createNewScope(1,u,()=>{l.setScope(e,this._currentScope),this._addBuiltInSymbolToCurrentScope("__doc__",e,"str"),this._addBuiltInSymbolToCurrentScope("__name__",e,"str"),this._fileInfo.executionEnvironment.pythonVersion>=o.PythonVersion.V33&&this._addBuiltInSymbolToCurrentScope("__qualname__",e,"str"),this._addBuiltInSymbolToCurrentScope("__module__",e,"str"),this._addBuiltInSymbolToCurrentScope("__defaults__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__code__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__globals__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__dict__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__closure__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__annotations__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__kwdefaults__",e,"Any"),p.getEnclosingClass(e)&&this._addBuiltInSymbolToCurrentScope("__class__",e,"class"),this._deferBinding(()=>{this._currentFlowNode=this._createStartFlowNode(),e.parameters.forEach(e=>{if(e.name){const t=this._bindNameToScope(this._currentScope,e.name.value);if(t){const n={type:2,node:e,path:this._fileInfo.filePath,range:i.convertOffsetsToRange(e.start,a.TextRange.getEnd(e),this._fileInfo.lines)};t.addDeclaration(n),l.setDeclaration(e.name,n)}this._createFlowAssignment(e.name)}}),this._targetFunctionDeclaration=s,this._currentReturnTarget=this._createBranchLabel(),this.walk(e.suite),l.setAfterFlowNode(e.suite,this._currentFlowNode),this._addAntecedent(this._currentReturnTarget,this._currentFlowNode);const t=this._finishFlowLabel(this._currentReturnTarget);l.setAfterFlowNode(e,t)}),l.setCodeFlowExpressions(e,this._currentExecutionScopeReferenceMap)}),this._createAssignmentTargetFlowNodes(e.name),!1}visitLambda(e){return e.parameters.forEach(e=>{e.defaultValue&&this.walk(e.defaultValue)}),this._createNewScope(1,this._currentScope,()=>{l.setScope(e,this._currentScope),this._deferBinding(()=>{this._currentFlowNode=this._createStartFlowNode(),e.parameters.forEach(e=>{if(e.name){const t=this._bindNameToScope(this._currentScope,e.name.value);if(t){const n={type:2,node:e,path:this._fileInfo.filePath,range:i.convertOffsetsToRange(e.start,a.TextRange.getEnd(e),this._fileInfo.lines)};t.addDeclaration(n),l.setDeclaration(e.name,n)}this._createFlowAssignment(e.name),this.walk(e.name)}}),this.walk(e.expression),l.setCodeFlowExpressions(e,this._currentExecutionScopeReferenceMap)})}),!1}visitCall(e){return this.walk(e.leftExpression),this.walkMultiple(e.arguments),this._createCallFlowNode(e),!1}visitAssignment(e){return!this._handleTypingStubAssignmentOrAnnotation(e)&&(this._bindPossibleTupleNamedTarget(e.leftExpression),e.typeAnnotationComment&&(this.walk(e.typeAnnotationComment),this._addTypeDeclarationForVariable(e.leftExpression,e.typeAnnotationComment)),this.walk(e.rightExpression),this._addInferredTypeAssignmentForVariable(e.leftExpression,e.rightExpression),this._createAssignmentTargetFlowNodes(e.leftExpression),this.walk(e.leftExpression),!1)}visitAssignmentExpression(e){this.walk(e.rightExpression),this._addInferredTypeAssignmentForVariable(e.name,e.rightExpression);const t=p.getEvaluationNodeForAssignmentExpression(e);if(t){const n=l.getScope(t);let r=this._currentScope;for(;r&&r!==n;){if(r.lookUpSymbol(e.name.value)){this._addError(`Assignment expression target '${e.name.value}' `+"cannot use same name as comprehension for target",e.name);break}r=r.parent}this._bindNameToScope(n,e.name.value)}else this._addError("Assignment expression must be within module, function or lambda",e);return this._createAssignmentTargetFlowNodes(e.name),this.walk(e.name),!1}visitAugmentedAssignment(e){return this.walk(e.leftExpression),this.walk(e.rightExpression),this._addInferredTypeAssignmentForVariable(e.destExpression,e.rightExpression),this._bindPossibleTupleNamedTarget(e.destExpression),this._createAssignmentTargetFlowNodes(e.destExpression),!1}visitDel(e){return e.expressions.forEach(e=>{this._bindPossibleTupleNamedTarget(e),this.walk(e),this._createAssignmentTargetFlowNodes(e,!0)}),!1}visitTypeAnnotation(e){return!this._handleTypingStubAssignmentOrAnnotation(e)&&(this._bindPossibleTupleNamedTarget(e.valueExpression),this._addTypeDeclarationForVariable(e.valueExpression,e.typeAnnotation),!0)}visitFor(e){this._bindPossibleTupleNamedTarget(e.targetExpression),this._addInferredTypeAssignmentForVariable(e.targetExpression,e),this.walk(e.iterableExpression);const t=this._createLoopLabel(),n=this._createBranchLabel(),r=this._createBranchLabel();return this._addAntecedent(t,this._currentFlowNode),this._currentFlowNode=t,this._addAntecedent(n,this._currentFlowNode),this._createAssignmentTargetFlowNodes(e.targetExpression),this.walk(e.targetExpression),this._bindLoopStatement(t,r,()=>{this.walk(e.forSuite),this._addAntecedent(t,this._currentFlowNode)}),this._currentFlowNode=this._finishFlowLabel(n),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),!1}visitContinue(e){return this._currentContinueTarget&&this._addAntecedent(this._currentContinueTarget,this._currentFlowNode),this._currentFlowNode=y._unreachableFlowNode,!1}visitBreak(e){return this._currentBreakTarget&&this._addAntecedent(this._currentBreakTarget,this._currentFlowNode),this._currentFlowNode=y._unreachableFlowNode,!1}visitReturn(e){return this._targetFunctionDeclaration&&(this._targetFunctionDeclaration.returnExpressions||(this._targetFunctionDeclaration.returnExpressions=[]),this._targetFunctionDeclaration.returnExpressions.push(e)),e.returnExpression&&this.walk(e.returnExpression),l.setFlowNode(e,this._currentFlowNode),this._currentReturnTarget&&this._addAntecedent(this._currentReturnTarget,this._currentFlowNode),this._currentFinallyTarget&&this._addAntecedent(this._currentFinallyTarget,this._currentFlowNode),this._currentFlowNode=y._unreachableFlowNode,!1}visitYield(e){return this._bindYield(e),!1}visitYieldFrom(e){return this._bindYield(e),!1}visitMemberAccess(e){return l.setFlowNode(e,this._currentFlowNode),!0}visitName(e){return l.setFlowNode(e,this._currentFlowNode),!1}visitIf(e){const t=this._createBranchLabel(),n=this._createBranchLabel(),r=this._createBranchLabel(),s=f.evaluateStaticBoolLikeExpression(e.testExpression,this._fileInfo.executionEnvironment);return this._bindConditional(e.testExpression,t,n),this._currentFlowNode=!1===s?y._unreachableFlowNode:this._finishFlowLabel(t),this.walk(e.ifSuite),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=!0===s?y._unreachableFlowNode:this._finishFlowLabel(n),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),!1}visitWhile(e){const t=this._createBranchLabel(),n=this._createBranchLabel(),r=this._createBranchLabel(),s=f.evaluateStaticBoolLikeExpression(e.testExpression,this._fileInfo.executionEnvironment),i=this._createLoopLabel();return this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=i,this._bindConditional(e.testExpression,t,n),this._currentFlowNode=!1===s?y._unreachableFlowNode:this._finishFlowLabel(t),this._bindLoopStatement(i,r,()=>{this.walk(e.whileSuite)}),this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=!0===s?y._unreachableFlowNode:this._finishFlowLabel(n),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),!1}visitAssert(e){const t=this._createBranchLabel(),n=this._createBranchLabel();return this._bindConditional(e.testExpression,t,n),e.exceptionExpression&&(this._currentFlowNode=this._finishFlowLabel(n),this.walk(e.exceptionExpression)),this._currentFlowNode=this._finishFlowLabel(t),!1}visitExcept(e){if(e.typeExpression&&this.walk(e.typeExpression),e.name){const t=this._bindNameToScope(this._currentScope,e.name.value);if(this._createAssignmentTargetFlowNodes(e.name),this.walk(e.name),t){const n={type:1,node:e.name,isConstant:m.isConstantName(e.name.value),path:this._fileInfo.filePath,range:i.convertOffsetsToRange(e.name.start,a.TextRange.getEnd(e.name),this._fileInfo.lines)};t.addDeclaration(n)}}return this.walk(e.exceptSuite),e.name&&this._createFlowAssignment(e.name,!0),!1}visitRaise(e){return e.typeExpression||0!==this._nestedExceptDepth||this._addError("Raise requires parameter(s) when used outside of except clause ",e),e.typeExpression&&this.walk(e.typeExpression),e.valueExpression&&this.walk(e.valueExpression),e.tracebackExpression&&this.walk(e.tracebackExpression),this._currentFinallyTarget&&this._addAntecedent(this._currentFinallyTarget,this._currentFlowNode),this._currentFlowNode=y._unreachableFlowNode,!1}visitTry(e){const t=e.exceptClauses.map(()=>this._createBranchLabel()),n=this._createBranchLabel(),r=this._createBranchLabel();let s=!1;const i={flags:u.FlowFlags.PreFinallyGate,id:u.getUniqueFlowNodeId(),antecedent:r,isGateClosed:!1};e.finallySuite&&this._addAntecedent(n,i),t.forEach(e=>{this._addAntecedent(e,this._currentFlowNode)});const o=this._currentFinallyTarget;this._currentFinallyTarget=e.finallySuite?r:void 0;const a=this._currentExceptTargets;if(this._currentExceptTargets=t,this.walk(e.trySuite),this._currentExceptTargets=a,e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(n,this._currentFlowNode),this._isCodeUnreachable()||(s=!0),this._nestedExceptDepth++,e.exceptClauses.forEach((e,r)=>{this._currentFlowNode=this._finishFlowLabel(t[r]),this.walk(e),this._addAntecedent(n,this._currentFlowNode),this._isCodeUnreachable()||(s=!0)}),this._nestedExceptDepth--,this._currentFinallyTarget=o,this._currentFlowNode=this._finishFlowLabel(n),e.finallySuite){this.walk(e.finallySuite);const t={flags:u.FlowFlags.PostFinally,id:u.getUniqueFlowNodeId(),antecedent:this._currentFlowNode,preFinallyGate:i};this._currentFlowNode=s?t:y._unreachableFlowNode}return!1}visitAwait(e){const t=p.getEnclosingFunction(e);return void 0!==t&&t.isAsync||this._addError("'await' allowed only within async function",e),!0}visitStringList(e){for(const t of e.strings)if(t.hasUnescapeErrors){c.getUnescapedString(t.token).unescapeErrors.forEach(e=>{const n={start:t.token.start+t.token.prefixLength+t.token.quoteMarkLength+e.offset,length:e.length};0===e.errorType?this._addDiagnostic(this._fileInfo.diagnosticSettings.reportInvalidStringEscapeSequence,"reportInvalidStringEscapeSequence","Unsupported escape sequence in string literal",n):1===e.errorType?this._addError("Escape sequence (backslash) not allowed in expression portion of f-string",n):2===e.errorType?this._addError("Single close brace not allowed within f-string literal; use double close brace",n):3===e.errorType&&this._addError("Unterminated expression in f-string; missing close brace",n)})}return!0}visitGlobal(e){const t=this._currentScope.getGlobalScope();return e.nameList.forEach(e=>{const n=e.value;0===this._notLocalBindings.get(n)&&this._addError(`'${n}' was already declared nonlocal`,e);const r=this._currentScope.lookUpSymbolRecursive(n);r&&r.scope===this._currentScope&&this._addError(`'${n}' is assigned before global declaration`,e),this._bindNameToScope(t,n),this._currentScope!==t&&this._notLocalBindings.set(n,1)}),!0}visitNonlocal(e){const t=this._currentScope.getGlobalScope();return this._currentScope===t?this._addError("Nonlocal declaration not allowed at module level",e):e.nameList.forEach(e=>{const n=e.value;1===this._notLocalBindings.get(n)&&this._addError(`'${n}' was already declared global`,e);const r=this._currentScope.lookUpSymbolRecursive(n);r&&r.scope===this._currentScope?this._addError(`'${n}' is assigned before nonlocal declaration`,e):r&&r.scope!==t||this._addError(`No binding for nonlocal '${n}' found`,e),this._notLocalBindings.set(n,0)}),!0}visitImportAs(e){if(e.module.nameParts.length>0){const t=e.module.nameParts[0].value;let n;n=e.alias?e.alias.value:t;const i=this._bindNameToScope(this._currentScope,n);i&&this._fileInfo.isStubFile&&!e.alias&&i.setIsExternallyHidden();const o=l.getImportInfo(e.module);if(r(void 0!==o),o&&o.isImportFound&&o.resolvedPaths.length>0&&i){const n=i.getDeclarations().find(e=>6===e.type&&e.firstNamePart===t),r=n||{type:6,node:e,path:"",range:s.getEmptyRange(),firstNamePart:t};if(e.alias||1===e.module.nameParts.length)r.path=o.resolvedPaths[o.resolvedPaths.length-1],this._addImplicitImportsToLoaderActions(o,r);else{let t=r;for(let n=1;n<e.module.nameParts.length&&!(n>=o.resolvedPaths.length);n++){const r=e.module.nameParts[n].value;let s=t.implicitImports?t.implicitImports.get(r):void 0;s||(s={path:"",implicitImports:new Map},t.implicitImports||(t.implicitImports=new Map),t.implicitImports.set(r,s)),n===e.module.nameParts.length-1&&(s.path=o.resolvedPaths[n],this._addImplicitImportsToLoaderActions(o,s)),t=s}}n||i.addDeclaration(r)}this._createFlowAssignment(e.alias?e.alias:e.module.nameParts[0])}return!0}visitImportFrom(e){const t=l.getImportInfo(e.module);let n="";if(t&&t.isImportFound&&(n=t.resolvedPaths[t.resolvedPaths.length-1]),e.isWildcardImport){if((p.getEnclosingClass(e)||p.getEnclosingFunction(e))&&this._addError("Wildcard import is not allowed within a class or function",e),t){const r=[],i=this._fileInfo.importLookup(n);if(i){this._getWildcardImportNames(i).forEach(t=>{if(!i.symbolTable.get(t).isIgnoredForProtocolMatch()){const i=this._bindNameToScope(this._currentScope,t);if(i){const o={type:6,node:e,path:n,range:s.getEmptyRange(),symbolName:t};i.addDeclaration(o),r.push(t)}}})}t.implicitImports.forEach(t=>{if(!r.some(e=>e===t.name)){const i=this._bindNameToScope(this._currentScope,t.name);if(i){const o={type:6,node:e,path:t.path,range:s.getEmptyRange()},a={type:6,node:e,path:n,symbolName:t.name,submoduleFallback:o,range:s.getEmptyRange()};i.addDeclaration(a),r.push(t.name)}}}),this._createFlowWildcardImport(e,r)}}else e.imports.forEach(r=>{const i=r.name.value,o=r.alias||r.name,a=this._bindNameToScope(this._currentScope,o.value);if(a){let o,c;this._fileInfo.isStubFile&&!r.alias&&a.setIsExternallyHidden(),t&&t.implicitImports&&(o=t.implicitImports.find(e=>e.name===i)),o&&(c={type:6,node:r,path:o.path,range:s.getEmptyRange()},0===e.module.nameParts.length&&(n=""));const l={type:6,node:r,path:n,symbolName:i,submoduleFallback:c,range:s.getEmptyRange()};a.addDeclaration(l),this._createFlowAssignment(r.alias||r.name)}});return!0}visitWith(e){return e.withItems.forEach(e=>{this.walk(e.expression),e.target&&(this._bindPossibleTupleNamedTarget(e.target),this._addInferredTypeAssignmentForVariable(e.target,e),this._createAssignmentTargetFlowNodes(e.target),this.walk(e.target))}),this.walk(e.suite),!1}visitTernary(e){const t=this._createBranchLabel(),n=this._createBranchLabel(),r=this._createBranchLabel();return this._bindConditional(e.testExpression,t,n),this._currentFlowNode=this._finishFlowLabel(t),this.walk(e.ifExpression),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(n),this.walk(e.elseExpression),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(r),!1}visitUnaryOperation(e){if(37===e.operator&&this._currentFalseTarget&&this._currentTrueTarget)this._bindConditional(e.expression,this._currentFalseTarget,this._currentTrueTarget);else{const t=this._currentTrueTarget,n=this._currentFalseTarget;this._currentTrueTarget=void 0,this._currentFalseTarget=void 0,this.walk(e.expression),this._currentFalseTarget=n,this._currentTrueTarget=t}return!1}visitBinaryOperation(e){if(35===e.operator||36===e.operator){let t,n=this._currentTrueTarget,r=this._currentFalseTarget;n&&r||(t=this._createBranchLabel(),n=r=t);const s=this._createBranchLabel();35===e.operator?this._bindConditional(e.leftExpression,s,r):this._bindConditional(e.leftExpression,n,s),this._currentFlowNode=this._finishFlowLabel(s),this._bindConditional(e.rightExpression,n,r),t&&(this._currentFlowNode=this._finishFlowLabel(t))}else{const t=this._currentTrueTarget,n=this._currentFalseTarget;this._currentTrueTarget=void 0,this._currentFalseTarget=void 0,this.walk(e.leftExpression),this.walk(e.rightExpression),this._currentFalseTarget=n,this._currentTrueTarget=t}return!1}visitListComprehension(e){return this._createNewScope(0,this._currentScope,()=>{l.setScope(e,this._currentScope);const t=this._createBranchLabel(),n=[];for(let t=0;t<e.comprehensions.length;t++){const r=e.comprehensions[t],s=new Map;34===r.nodeType&&this._bindPossibleTupleNamedTarget(r.targetExpression,s),n.push(s)}for(let r=0;r<e.comprehensions.length;r++){const s=e.comprehensions[r];if(34===s.nodeType){const e=n[r];for(const t of e){const e=this._currentScope.parent.lookUpSymbol(t[0]);e&&this._createAssignmentAliasFlowNode(t[1].id,e.id)}this.walk(s.iterableExpression),this._createAssignmentTargetFlowNodes(s.targetExpression),this.walk(s.targetExpression)}else{const e=this._createBranchLabel();this._bindConditional(s.testExpression,e,t),this._currentFlowNode=this._finishFlowLabel(e)}}this.walk(e.expression),this._addAntecedent(t,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(t)}),!1}_getWildcardImportNames(e){const t=[],n=e.symbolTable.get("__all__");if(n){const r=n.getDeclarations();if(1===r.length&&1===r[0].type){const n=r[0];if(n.node.parent&&3===n.node.parent.nodeType){const r=n.node.parent.rightExpression;if(32===r.nodeType)return r.entries.forEach(n=>{if(49===n.nodeType&&1===n.strings.length&&50===n.strings[0].nodeType){const r=n.strings[0].value;e.symbolTable.get(r)&&t.push(r)}}),t}}}return e.symbolTable.forEach((e,n)=>{n.startsWith("_")||t.push(n)}),t}_walkStatementsAndReportUnreachable(e){let t=!1;for(const n of e){if(l.setFlowNode(n,this._currentFlowNode),this._isCodeUnreachable()&&!t){const r=n.start,s=e[e.length-1],i=a.TextRange.getEnd(s);this._addUnusedCode({start:r,length:i-r}),t=!0}if(t){if(this._targetFunctionDeclaration&&!this._targetFunctionDeclaration.isGenerator){(new _).checkContainsYield(n)&&(this._targetFunctionDeclaration.isGenerator=!0)}}else this.walk(n)}return!1}_createStartFlowNode(){return{flags:u.FlowFlags.Start,id:u.getUniqueFlowNodeId()}}_createBranchLabel(){return{flags:u.FlowFlags.BranchLabel,id:u.getUniqueFlowNodeId(),antecedents:[]}}_createLoopLabel(){return{flags:u.FlowFlags.LoopLabel,id:u.getUniqueFlowNodeId(),antecedents:[]}}_finishFlowLabel(e){return 0===e.antecedents.length?y._unreachableFlowNode:1===e.antecedents.length?e.antecedents[0]:e}_bindConditional(e,t,n){const r=this._currentTrueTarget,s=this._currentFalseTarget;this._currentTrueTarget=t,this._currentFalseTarget=n,this.walk(e),this._currentTrueTarget=r,this._currentFalseTarget=s,this._isLogicalExpression(e)||(this._addAntecedent(t,this._createFlowConditional(u.FlowFlags.TrueCondition,this._currentFlowNode,e)),this._addAntecedent(n,this._createFlowConditional(u.FlowFlags.FalseCondition,this._currentFlowNode,e)))}_createFlowConditional(e,t,n){if(t.flags&u.FlowFlags.Unreachable)return t;const r=f.evaluateStaticBoolLikeExpression(n,this._fileInfo.executionEnvironment);if(!0===r&&e&u.FlowFlags.FalseCondition||!1===r&&e&u.FlowFlags.TrueCondition)return y._unreachableFlowNode;const s=[];if(!this._isNarrowingExpression(n,s))return t;s.forEach(e=>{const t=u.createKeyForReference(e);this._currentExecutionScopeReferenceMap.set(t,t)});const i={flags:e,id:u.getUniqueFlowNodeId(),expression:n,antecedent:t};return this._addExceptTargets(i),i}_isLogicalExpression(e){switch(e.nodeType){case 56:return 37===e.operator;case 7:return 35===e.operator||36===e.operator}return!1}_isNarrowingExpression(e,t){switch(e.nodeType){case 39:case 36:return!!u.isCodeFlowSupportedForReference(e)&&(t.push(e),!0);case 4:return!!this._isNarrowingExpression(e.rightExpression,t)&&(t.push(e.name),!0);case 7:{const n=38===e.operator||39===e.operator,r=12===e.operator||27===e.operator;if(n||r){if(11===e.rightExpression.nodeType&&24===e.rightExpression.constType)return this._isNarrowingExpression(e.leftExpression,t);if(n&&9===e.leftExpression.nodeType&&39===e.leftExpression.leftExpression.nodeType&&"type"===e.leftExpression.leftExpression.value&&1===e.leftExpression.arguments.length&&0===e.leftExpression.arguments[0].argumentCategory)return this._isNarrowingExpression(e.leftExpression.arguments[0].valueExpression,t)}return!1}case 56:return 37===e.operator&&this._isNarrowingExpression(e.expression,t);case 5:return this._isNarrowingExpression(e.rightExpression,t);case 9:if(39===e.leftExpression.nodeType&&("isinstance"===e.leftExpression.value||"issubclass"===e.leftExpression.value)&&2===e.arguments.length)return this._isNarrowingExpression(e.arguments[0].valueExpression,t)}return!1}_createAssignmentTargetFlowNodes(e,t=!1){switch(e.nodeType){case 39:case 36:this._createFlowAssignment(e,t);break;case 53:e.expressions.forEach(e=>{this._createAssignmentTargetFlowNodes(e,t)});break;case 55:this._createAssignmentTargetFlowNodes(e.valueExpression,t);break;case 57:this._createAssignmentTargetFlowNodes(e.expression,t);break;case 32:e.entries.forEach(e=>{this._createAssignmentTargetFlowNodes(e,t)})}}_createCallFlowNode(e){if(!this._isCodeUnreachable()){const t={flags:u.FlowFlags.Call,id:u.getUniqueFlowNodeId(),node:e,antecedent:this._currentFlowNode};this._currentFlowNode=t}}_createAssignmentAliasFlowNode(e,t){if(!this._isCodeUnreachable()){const n={flags:u.FlowFlags.AssignmentAlias,id:u.getUniqueFlowNodeId(),antecedent:this._currentFlowNode,targetSymbolId:e,aliasSymbolId:t};this._currentFlowNode=n}}_createFlowAssignment(e,t=!1){let n=g.indeterminateSymbolId;if(39===e.nodeType){const t=this._currentScope.lookUpSymbolRecursive(e.value);r(void 0!==t),n=t.symbol.id}const s=this._currentFlowNode;if(!this._isCodeUnreachable()&&u.isCodeFlowSupportedForReference(e)){const r={flags:u.FlowFlags.Assignment,id:u.getUniqueFlowNodeId(),node:e,antecedent:this._currentFlowNode,targetSymbolId:n},s=u.createKeyForReference(e);this._currentExecutionScopeReferenceMap.set(s,s),t&&(r.flags|=u.FlowFlags.Unbind),this._addExceptTargets(r),this._currentFlowNode=r}l.setFlowNode(e,t?s:this._currentFlowNode)}_createFlowWildcardImport(e,t){if(!this._isCodeUnreachable()){const n={flags:u.FlowFlags.WildcardImport,id:u.getUniqueFlowNodeId(),node:e,names:t,antecedent:this._currentFlowNode};this._addExceptTargets(n),this._currentFlowNode=n}l.setFlowNode(e,this._currentFlowNode)}_isCodeUnreachable(){return!!(this._currentFlowNode.flags&u.FlowFlags.Unreachable)}_addExceptTargets(e){this._currentExceptTargets&&this._currentExceptTargets.forEach(t=>{this._addAntecedent(t,e)})}_bindLoopStatement(e,t,n){const r=this._currentContinueTarget,s=this._currentBreakTarget;this._currentContinueTarget=e,this._currentBreakTarget=t,n(),this._currentContinueTarget=r,this._currentBreakTarget=s}_addAntecedent(e,t){this._currentFlowNode.flags&u.FlowFlags.Unreachable||e.antecedents.some(e=>e.id===t.id)||e.antecedents.push(t)}_bindNameToScope(e,t,n){if(void 0===this._notLocalBindings.get(t)){let r=e.lookUpSymbol(t);return r||(r=e.addSymbol(t,5),this._fileInfo.isStubFile&&m.isPrivateOrProtectedName(t)&&r.setIsExternallyHidden(),n&&n.set(t,r)),r}}_bindPossibleTupleNamedTarget(e,t){switch(e.nodeType){case 39:this._bindNameToScope(this._currentScope,e.value,t);break;case 53:e.expressions.forEach(e=>{this._bindPossibleTupleNamedTarget(e,t)});break;case 32:e.entries.forEach(e=>{this._bindPossibleTupleNamedTarget(e,t)});break;case 55:this._bindPossibleTupleNamedTarget(e.valueExpression,t);break;case 57:this._bindPossibleTupleNamedTarget(e.expression,t)}}_addBuiltInSymbolToCurrentScope(e,t,n){const r=this._addSymbolToCurrentScope(e,!1);r&&(r.addDeclaration({type:0,node:t,intrinsicType:n,path:this._fileInfo.filePath,range:s.getEmptyRange()}),r.setIsIgnoredForProtocolMatch())}_addSymbolToCurrentScope(e,t){let n=this._currentScope.lookUpSymbol(e);if(!n){let r=0;t&&(r|=1),2===this._currentScope.type&&(r|=4),this._fileInfo.isStubFile&&m.isPrivateOrProtectedName(e)&&(r|=2),n=this._currentScope.addSymbol(e,r)}return n}_createNewScope(e,t,n){const r=this._currentScope;this._currentScope=new h.Scope(e,t);const s=4===e||3===e||1===e,i=this._currentExecutionScopeReferenceMap;s&&(this._currentExecutionScopeReferenceMap=new Map);const o=this._notLocalBindings;this._notLocalBindings=new Map,n(),this._currentExecutionScopeReferenceMap=i,this._currentScope=r,this._notLocalBindings=o}_addInferredTypeAssignmentForVariable(e,t){switch(e.nodeType){case 39:{const n=e,r=this._currentScope.lookUpSymbolRecursive(n.value);if(r&&r.symbol){const s={type:1,node:e,isConstant:m.isConstantName(e.value),inferredTypeSource:t,path:this._fileInfo.filePath,range:i.convertOffsetsToRange(n.start,a.TextRange.getEnd(n),this._fileInfo.lines)};r.symbol.addDeclaration(s)}break}case 36:{const n=this._getMemberAccessInfo(e);if(n){const r=e.memberName;let s=n.classScope.lookUpSymbol(r.value);if(!s){s=n.classScope.addSymbol(r.value,1);const e="none"!==this._fileInfo.diagnosticSettings.reportPrivateUsage;m.isPrivateOrProtectedName(r.value)&&e&&s.setIsPrivateMember()}n.isInstanceMember?s.setIsInstanceMember():s.setIsClassMember();const o={type:1,node:e.memberName,isConstant:m.isConstantName(r.value),inferredTypeSource:t,path:this._fileInfo.filePath,range:i.convertOffsetsToRange(e.memberName.start,e.memberName.start+e.memberName.length,this._fileInfo.lines)};s.addDeclaration(o)}break}case 53:e.expressions.forEach(e=>{this._addInferredTypeAssignmentForVariable(e,t)});break;case 55:this._addInferredTypeAssignmentForVariable(e.valueExpression,t);break;case 57:this._addInferredTypeAssignmentForVariable(e.expression,t);break;case 32:e.entries.forEach(e=>{this._addInferredTypeAssignmentForVariable(e,t)})}}_addTypeDeclarationForVariable(e,t){let n=!1;switch(e.nodeType){case 39:{const r=e,s=this._currentScope.lookUpSymbolRecursive(r.value);if(s&&s.symbol){const n=this._isAnnotationFinal(t),o={type:1,node:e,isConstant:m.isConstantName(r.value),isFinal:n.isFinal,path:this._fileInfo.filePath,typeAnnotationNode:n.isFinal?n.finalTypeNode:t,range:i.convertOffsetsToRange(r.start,a.TextRange.getEnd(r),this._fileInfo.lines)};s.symbol.addDeclaration(o)}n=!0;break}case 36:{const r=this._getMemberAccessInfo(e);if(r){const s=e.memberName;let o=r.classScope.lookUpSymbol(s.value);if(!o){o=r.classScope.addSymbol(s.value,1);const e="none"!==this._fileInfo.diagnosticSettings.reportPrivateUsage;m.isPrivateOrProtectedName(s.value)&&e&&o.setIsPrivateMember()}r.isInstanceMember?o.setIsInstanceMember():o.setIsClassMember();const a=this._isAnnotationFinal(t),c={type:1,node:e.memberName,isConstant:m.isConstantName(s.value),isFinal:a.isFinal,path:this._fileInfo.filePath,typeAnnotationNode:a.isFinal?a.finalTypeNode:t,range:i.convertOffsetsToRange(e.memberName.start,e.memberName.start+e.memberName.length,this._fileInfo.lines)};o.addDeclaration(c),n=!0}break}}n||this._addError("Type annotation not supported for this type of expression",t)}_isAnnotationFinal(e){let t,n=!1;if(e)if(39==e.nodeType)"Final"===e.value&&(n=!0);else if(36===e.nodeType)39===e.leftExpression.nodeType&&"typing"===e.leftExpression.value&&"Final"===e.memberName.value&&(n=!0);else if(24===e.nodeType&&1===e.items.items.length){this._isAnnotationFinal(e.baseExpression).isFinal&&(n=!0,t=e.items.items[0])}return{isFinal:n,finalTypeNode:t}}_getMemberAccessInfo(e){if(39!==e.leftExpression.nodeType)return;const t=e.leftExpression.value,n=p.getEnclosingFunction(e);if(!n)return;const s=p.getEnclosingClass(n);if(!s)return;let i=!1;if(n.parameters.length<1||!n.parameters[0].name)return;const o=s.name.value,a=n.parameters[0].name.value;if(t===o)i=!1;else{if(t!==a)return;if("__new__"===n.name.value)i=!1;else{i=!0;for(const e of n.decorators)if(39===e.leftExpression.nodeType){const t=e.leftExpression.value;if("staticmethod"===t)return;if("classmethod"===t){i=!1;break}}}}const c=l.getScope(s);return r(void 0!==c),{classNode:s,methodNode:n,classScope:c,isInstanceMember:i}}_addImplicitImportsToLoaderActions(e,t){e.implicitImports.forEach(e=>{const n=t.implicitImports?t.implicitImports.get(e.name):void 0;n?n.path=e.path:(t.implicitImports||(t.implicitImports=new Map),t.implicitImports.set(e.name,{path:e.path,implicitImports:new Map}))})}_handleTypingStubAssignmentOrAnnotation(e){if(!this._fileInfo.isTypingStubFile)return!1;let t;if(55===e.nodeType)t=e;else{if(55!==e.leftExpression.nodeType)return!1;t=e.leftExpression}if(39!==t.valueExpression.nodeType)return!1;const n=t.valueExpression.value;if(!{Tuple:!0,Generic:!0,Protocol:!0,Callable:!0,Type:!0,ClassVar:!0,Final:!0,Literal:!0,TypedDict:!0}[n])return!1;const r=this._bindNameToScope(this._currentScope,n);return r&&r.addDeclaration({type:5,node:t,path:this._fileInfo.filePath,range:i.convertOffsetsToRange(t.start,a.TextRange.getEnd(t),this._fileInfo.lines)}),!0}_deferBinding(e){this._deferredBindingTasks.push({scope:this._currentScope,nonLocalBindingsMap:this._notLocalBindings,codeFlowExpressionMap:this._currentExecutionScopeReferenceMap,callback:e})}_bindDeferred(){for(;this._deferredBindingTasks.length>0;){const e=this._deferredBindingTasks.shift();this._currentScope=e.scope,this._notLocalBindings=e.nonLocalBindingsMap,this._nestedExceptDepth=0,this._currentExecutionScopeReferenceMap=e.codeFlowExpressionMap,e.callback()}}_bindYield(e){const t=p.getEnclosingFunction(e);t?t.isAsync&&62===e.nodeType&&this._addError("'yield from' not allowed in an async function",e):this._addError("'yield' not allowed outside of a function",e),this._targetFunctionDeclaration&&(this._targetFunctionDeclaration.yieldExpressions||(this._targetFunctionDeclaration.yieldExpressions=[]),this._targetFunctionDeclaration.yieldExpressions.push(e),this._targetFunctionDeclaration.isGenerator=!0),e.expression&&this.walk(e.expression),l.setFlowNode(e,this._currentFlowNode)}_addDiagnostic(e,t,n,r){if("error"===e){const e=this._addError(n,r);return e.setRule(t),e}if("warning"===e){const e=this._addWarning(n,r);return e.setRule(t),e}}_addUnusedCode(e){return this._fileInfo.diagnosticSink.addUnusedCodeWithTextRange("Code is unreachable",e)}_addError(e,t){return this._fileInfo.diagnosticSink.addErrorWithTextRange(e,t)}_addWarning(e,t){return this._fileInfo.diagnosticSink.addWarningWithTextRange(e,t)}}t.Binder=y,y._unreachableFlowNode={flags:u.FlowFlags.Unreachable,id:u.getUniqueFlowNodeId()};class _ extends d.ParseTreeWalker{constructor(){super(...arguments),this._containsYield=!1}checkContainsYield(e){return this.walk(e),this._containsYield}visitYield(e){return this._containsYield=!0,!1}visitYieldFrom(e){return this._containsYield=!0,!1}}t.YieldFinder=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(27);t.Scope=class{constructor(e,t){this.symbolTable=new Map,this.type=e,this.parent=t}getGlobalScope(){let e=this;for(;e;){if(3===e.type||4===e.type)return e;e=e.parent}return r.fail("failed to find scope"),this}isIndependentlyExecutable(){return 3===this.type||1===this.type}lookUpSymbol(e){return this.symbolTable.get(e)}lookUpSymbolRecursive(e){return this._lookUpSymbolRecursiveInternal(e,!1,!1)}addSymbol(e,t){const n=new s.Symbol(t);return this.symbolTable.set(e,n),n}_lookUpSymbolRecursiveInternal(e,t,n){const r=this.symbolTable.get(e);if(r){if(t&&r.isExternallyHidden())return;return{symbol:r,isOutsideCallerModule:t,isBeyondExecutionScope:n,scope:this}}if(this.parent)return this.parent._lookUpSymbolRecursiveInternal(e,t||3===this.type,n||this.isIndependentlyExecutable())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(8),i=n(3),o=n(5),a=n(25),c=n(6),l=n(10),u=n(11),p=n(19),d=n(12),h=n(13),f=n(26);class g extends l.ParseTreeWalker{constructor(e,t){super(),this._scopedNodes=[],this._moduleNode=e,this._fileInfo=o.getFileInfo(e),this._evaluator=t}check(){this._scopedNodes.push(this._moduleNode),this.walkMultiple(this._moduleNode.statements),this._validateSymbolTables(),this._reportDuplicateImports()}walk(e){o.isCodeUnreachable(e)||super.walk(e)}visitClass(e){const t=this._evaluator.getTypeOfClass(e);return this.walk(e.suite),this.walkMultiple(e.decorators),this.walkMultiple(e.arguments),t&&(this._validateClassMethods(t.classType),this._validateFinalMemberOverrides(t.classType),d.ClassType.isTypedDictClass(t.classType)&&this._validateTypedDictClassSuite(e.suite)),this._scopedNodes.push(e),!1}visitFunction(e){const t=this._evaluator.getTypeOfFunction(e),n=c.getEnclosingClass(e,!0);return t&&(e.parameters.forEach((e,n)=>{if(e.name){const r=t.functionType.details.parameters[n].type;if(1===r.category)this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownParameterType,"reportUnknownParameterType",`Type of parameter '${e.name.value}' is unknown`,e.name);else if(h.containsUnknown(r)){const t=new s.DiagnosticAddendum;t.addMessage(`Parameter type is '${this._evaluator.printType(r)}'`),this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownParameterType,"reportUnknownParameterType",`Type of parameter '${e.name.value}' is partially unknown`+t.getString(),e.name)}}}),n&&this._validateMethod(e,t.functionType,n)),e.parameters.forEach(e=>{e.defaultValue&&this.walk(e.defaultValue),e.typeAnnotation&&this.walk(e.typeAnnotation)}),e.returnTypeAnnotation&&this.walk(e.returnTypeAnnotation),this.walkMultiple(e.decorators),e.parameters.forEach(e=>{e.name&&this.walk(e.name)}),this.walk(e.suite),t&&this._validateFunctionReturn(e,t.functionType),this._scopedNodes.push(e),!1}visitLambda(e){this._evaluator.getType(e),this.walkMultiple([...e.parameters,e.expression]),e.parameters.forEach(e=>{if(e.name){const t=this._evaluator.getType(e.name);t&&(1===t.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownLambdaType,"reportUnknownLambdaType",`Type of '${e.name.value}' is unknown`,e.name):h.containsUnknown(t)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownLambdaType,"reportUnknownLambdaType",`Type of '${e.name.value}', `+`'${this._evaluator.printType(t)}', is partially unknown`,e.name))}});const t=this._evaluator.getType(e.expression);return t&&(1===t.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownLambdaType,"reportUnknownLambdaType","Type of lambda expression is unknown",e.expression):h.containsUnknown(t)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownLambdaType,"reportUnknownLambdaType",`Type of lambda expression, '${this._evaluator.printType(t)}', is partially unknown`,e.expression)),this._scopedNodes.push(e),!1}visitCall(e){return this._evaluator.getType(e),this._validateIsInstanceCallNecessary(e),c.isWithinDefaultParamInitializer(e)&&!this._fileInfo.isStubFile&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportCallInDefaultInitializer,"reportCallInDefaultInitializer","Function calls within default value initializer are not permitted",e),!0}visitFor(e){return this._evaluator.evaluateTypesForStatement(e),!0}visitListComprehension(e){return this._scopedNodes.push(e),!0}visitIf(e){return this._evaluator.getType(e.testExpression),!0}visitWhile(e){return this._evaluator.getType(e.testExpression),!0}visitWith(e){return e.withItems.forEach(e=>{this._evaluator.evaluateTypesForStatement(e)}),!0}visitReturn(e){let t;const n=c.getEnclosingFunction(e),r=n?this._evaluator.getFunctionDeclaredReturnType(n):void 0;if(t=e.returnExpression?this._evaluator.getType(e.returnExpression)||d.UnknownType.create():d.NoneType.create(),this._evaluator.isNodeReachable(e)&&n){if(r)if(h.isNoReturnType(r))this._evaluator.addError("Function with declared return type 'NoReturn' cannot include a return statement",e);else{const n=new s.DiagnosticAddendum,i=h.specializeType(r,void 0);this._evaluator.canAssignType(i,t,n)||this._evaluator.addError(`Expression of type '${this._evaluator.printType(t)}' cannot be assigned `+`to return type '${this._evaluator.printType(i)}'`+n.getString(),e.returnExpression?e.returnExpression:e)}1===t.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownVariableType,"reportUnknownVariableType","Return type is unknown",e.returnExpression):h.containsUnknown(t)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownVariableType,"reportUnknownVariableType",`Return type, '${this._evaluator.printType(t)}', is partially unknown`,e.returnExpression)}return!0}visitYield(e){const t=e.expression?this._evaluator.getType(e.expression):d.NoneType.create();let n=t;const r=this._evaluator.getBuiltInType(e,"Iterator");return n=t&&7===r.category?d.ObjectType.create(d.ClassType.cloneForSpecialization(r,[t])):d.UnknownType.create(),this._validateYieldType(e,n),!0}visitYieldFrom(e){const t=this._evaluator.getType(e.expression);return t&&this._validateYieldType(e,t),!0}visitRaise(e){const t=this._evaluator.getBuiltInType(e,"BaseException");if(e.typeExpression){const n=this._evaluator.getType(e.typeExpression);if(n&&t&&7===t.category){const r=new s.DiagnosticAddendum;h.doForSubtypes(n,e=>(d.isAnyOrUnknown(e)||(7===e.category?h.derivesFromClassRecursive(e,t)||r.addMessage(`'${this._evaluator.printType(e)}' does not derive from BaseException`):8===e.category&&h.derivesFromClassRecursive(e.classType,t)||r.addMessage(`'${this._evaluator.printType(e)}' does not derive from BaseException`)),e)),r.getMessageCount()>0&&this._evaluator.addError("Expected exception class or object"+r.getString(),e.typeExpression)}}if(e.valueExpression){const n=this._evaluator.getType(e.valueExpression);if(n&&t&&7===t.category){const r=new s.DiagnosticAddendum;h.doForSubtypes(n,e=>(d.isAnyOrUnknown(e)||d.isNoneOrNever(e)||8===e.category&&h.derivesFromClassRecursive(e.classType,t)||r.addMessage(`'${this._evaluator.printType(e)}' does not derive from BaseException`),e)),r.getMessageCount()>0&&this._evaluator.addError("Expected exception object or None"+r.getString(),e.valueExpression)}}return!0}visitExcept(e){if(e.typeExpression){this._evaluator.evaluateTypesForStatement(e);const t=this._evaluator.getType(e.typeExpression);t&&this._validateExceptionType(t,e.typeExpression)}return!0}visitAssert(e){e.exceptionExpression&&this._evaluator.getType(e.exceptionExpression);const t=this._evaluator.getType(e.testExpression);return t&&8===t.category&&d.ClassType.isBuiltIn(t.classType,"Tuple")&&t.classType.typeArguments&&t.classType.typeArguments.length>0&&this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticSettings.reportAssertAlwaysTrue,"reportAssertAlwaysTrue","Assert expression always evaluates to true",e.testExpression),!0}visitAssignment(e){return this._evaluator.evaluateTypesForStatement(e),e.typeAnnotationComment&&this._evaluator.getType(e.typeAnnotationComment),!0}visitAssignmentExpression(e){return this._evaluator.getType(e),!0}visitAugmentedAssignment(e){return this._evaluator.evaluateTypesForStatement(e),!0}visitIndex(e){return this._evaluator.getType(e),!0}visitBinaryOperation(e){return this._evaluator.getType(e),!0}visitSlice(e){return this._evaluator.getType(e),!0}visitUnpack(e){return this._evaluator.getType(e),!0}visitTuple(e){return this._evaluator.getType(e),!0}visitUnaryOperation(e){return this._evaluator.getType(e),!0}visitTernary(e){return this._evaluator.getType(e),!0}visitStringList(e){return e.typeAnnotation&&this._evaluator.getType(e),e.strings.length>1&&this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticSettings.reportImplicitStringConcatenation,"reportImplicitStringConcatenation","Implicit string concatenation not allowed",e),!0}visitFormatString(e){return e.expressions.forEach(e=>{this._evaluator.getType(e)}),!0}visitName(e){return this._conditionallyReportPrivateUsage(e),!0}visitDel(e){return e.expressions.forEach(e=>{this._evaluator.verifyDeleteExpression(e)}),!0}visitMemberAccess(e){return this._evaluator.getType(e),this._conditionallyReportPrivateUsage(e.memberName),this.walk(e.leftExpression),!1}visitImportAs(e){return this._evaluator.evaluateTypesForStatement(e),!1}visitImportFrom(e){return e.isWildcardImport||e.imports.forEach(e=>{this._evaluator.evaluateTypesForStatement(e)}),!1}visitTypeAnnotation(e){return this._evaluator.getType(e.typeAnnotation),!0}visitError(e){return e.child&&this._evaluator.getType(e.child),!1}_validateExceptionType(e,t){const n=this._evaluator.getBuiltInType(t,"BaseException"),r=e=>!n||7!==n.category||h.derivesFromClassRecursive(e,n),i=new s.DiagnosticAddendum;let o;if(d.isAnyOrUnknown(e))o=e;else if(7===e.category)r(e)||i.addMessage(`'${this._evaluator.printType(e)}' does not derive from BaseException`),o=d.ObjectType.create(e);else if(8===e.category){const n=this._evaluator.getTypeFromIterable(e,!1,t,!1);o=h.doForSubtypes(n,t=>{if(d.isAnyOrUnknown(t))return t;const n=h.transformTypeObjectToClass(t);return 7===n.category?(r(n)||i.addMessage(`'${this._evaluator.printType(e)}' does not derive from BaseException`),d.ObjectType.create(n)):(i.addMessage(`'${this._evaluator.printType(e)}' does not derive from BaseException`),d.UnknownType.create())})}return i.getMessageCount()>0&&this._evaluator.addError(`'${this._evaluator.printType(e)}' is not valid exception class`+i.getString(),t),o||d.UnknownType.create()}_validateSymbolTables(){if(!this._fileInfo.isStubFile)for(const e of this._scopedNodes){const t=o.getScope(e);t.symbolTable.forEach((e,n)=>{this._conditionallyReportUnusedSymbol(n,e,t.type),this._reportIncompatibleDeclarations(n,e),this._reportMultipleFinalDeclarations(n,e)})}}_reportMultipleFinalDeclarations(e,t){if(!p.isFinalVariable(t))return;const n=t.getDeclarations();let r=!1,s=!1;if(n.forEach(t=>{f.isFinalVariableDeclaration(t)&&(r&&this._evaluator.addError(`'${e}' was previously declared as Final`,t.node),r=!0),1===t.type&&t.inferredTypeSource&&(s&&this._evaluator.addError(`'${e}' is declared Final and can be assigned only once`,t.node),s=!0)}),!s&&!this._fileInfo.isStubFile){const t=n.find(e=>1===e.type&&e.isFinal);t&&this._evaluator.addError(`'${e}' is declared Final, but value is not assigned`,t.node)}}_reportIncompatibleDeclarations(e,t){const n=p.getLastTypedDeclaredForSymbol(t);if(!n)return;let r=t.getDeclarations().filter(e=>e!==n);if(3===n.type&&(r=r.filter(e=>3!==e.type)),0===r.length)return;let s="";3===n.type?s=n.isMethod?"method ":"function ":4===n.type?s="class ":2===n.type?s="parameter ":1===n.type&&(s="variable ");const i=e=>{if(e){let t;3===n.type||4===n.type?t=n.node.name:1===n.type?39===n.node.nodeType&&(t=n.node):2===n.type&&n.node.name&&(t=n.node.name),t&&e.addRelatedInfo(`See ${s}declaration`,n.path,n.range)}};for(const t of r)if(4===t.type){i(this._evaluator.addError(`Class declaration '${e}' is obscured by a ${s}`+"declaration of the same name",t.node.name))}else if(3===t.type){i(this._evaluator.addError(`Function declaration '${e}' is obscured by a ${s}`+"declaration of the same name",t.node.name))}else if(2===t.type){if(t.node.name){i(this._evaluator.addError(`Parameter '${e}' is obscured by a ${s}`+"declaration of the same name",t.node.name))}}else if(1===t.type){const r=this._evaluator.getTypeForDeclaration(n);if(t.typeAnnotationNode){if(39===t.node.nodeType){let o=!1;if(1===n.type){const e=this._evaluator.getTypeForDeclaration(t);r&&e&&d.isTypeSame(r,e)&&(o=!0)}if(!o){i(this._evaluator.addError(`Declared type for '${e}' is obscured by an `+`incompatible ${s}declaration`,t.node))}}}else if(r&&!h.isProperty(r)&&(3===n.type||4===n.type)){i(this._evaluator.addError(`Declared ${s} already exists for '${e}'`,t.node))}}}_conditionallyReportUnusedSymbol(e,t,n){const r=this._fileInfo.accessedSymbolMap;t.isIgnoredForProtocolMatch()||r.has(t.id)||"_"!==e&&(u.isDunderName(e)||t.getDeclarations().forEach(t=>{this._conditionallyReportUnusedDeclaration(t,this._isSymbolPrivate(e,n))}))}_conditionallyReportUnusedDeclaration(e,t){let n,r,s,o;switch(e.type){case 6:if(n=this._fileInfo.diagnosticSettings.reportUnusedImport,o="reportUnusedImport",21===e.node.nodeType)if(e.node.alias)r=e.node.alias;else{const t=e.node.module.nameParts;if(t.length>0){const e=t.map(e=>e.value).join("."),n={start:t[0].start,length:t[0].length};return i.TextRange.extend(n,t[t.length-1]),this._fileInfo.diagnosticSink.addUnusedCodeWithTextRange(`'${e}' is not accessed`,n),void this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticSettings.reportUnusedImport,"reportUnusedImport",`Import '${e}' is not accessed`,n)}}else if(23===e.node.nodeType){const t=e.node.parent;(0===t.module.nameParts.length||"__future__"!==t.module.nameParts[0].value&&!this._fileInfo.filePath.endsWith("_pb2.py"))&&(r=e.node.alias||e.node.name)}r&&(s=`Import '${r.value}' is not accessed`);break;case 1:case 2:if(!t)return;n=this._fileInfo.diagnosticSettings.reportUnusedVariable,39===e.node.nodeType&&(r=e.node,o="reportUnusedVariable",s=`Variable '${r.value}' is not accessed`);break;case 4:if(!t)return;n=this._fileInfo.diagnosticSettings.reportUnusedClass,r=e.node.name,o="reportUnusedClass",s=`Class '${r.value}' is not accessed`;break;case 3:if(!t)return;n=this._fileInfo.diagnosticSettings.reportUnusedFunction,r=e.node.name,o="reportUnusedFunction",s=`Function '${r.value}' is not accessed`;break;default:return}r&&void 0!==o&&s&&(this._fileInfo.diagnosticSink.addUnusedCodeWithTextRange(`'${r.value}' is not accessed`,r),this._evaluator.addDiagnostic(n,o,s,r))}_validateIsInstanceCallNecessary(e){if(39!==e.leftExpression.nodeType||"isinstance"!==e.leftExpression.value&&"issubclass"!==e.leftExpression.value||2!==e.arguments.length)return;let t=e;for(;t;){if(2===t.nodeType)return;t=t.parent}const n=e.leftExpression.value,r="isinstance"===n;let s=this._evaluator.getType(e.arguments[0].valueExpression);if(!s)return;if(s=h.doForSubtypes(s,e=>h.transformTypeObjectToClass(e)),d.isAnyOrUnknown(s))return;const i=this._evaluator.getType(e.arguments[1].valueExpression);if(!i)return;const o=[];if(7===i.category)o.push(i);else{if(8!==i.category)return;{const e=i.classType;d.ClassType.isBuiltIn(e,"Tuple")&&e.typeArguments&&e.typeArguments.forEach(e=>{7===e.category&&o.push(e)})}}o.some(e=>d.ClassType.isProtocol(e))&&this._evaluator.addError(`Protocol class cannot be used in ${n} call`,e.arguments[1].valueExpression);const a=e=>d.combineTypes(e),c=e=>{const t=[];for(const n of o){const r=d.ClassType.isDerivedFrom(e,n),s=d.ClassType.isDerivedFrom(n,e);r?t.push(e):s&&t.push(n)}return r?t.map(e=>d.ObjectType.create(e)):t};let l;if(r&&8===s.category){l=a(c(s.classType))}else if(r||7!==s.category){if(10!==s.category)return;{let e=[],t=!1;if(s.subtypes.forEach(n=>{d.isAnyOrUnknown(n)&&(t=!0),r&&8===n.category?e=e.concat(c(n.classType)):r||7!==n.category||(e=e.concat(c(n)))}),l=a(e),t)return}}else{l=a(c(s))}const u=()=>{const e=o.map(e=>d.ObjectType.create(e));return d.combineTypes(e)},p=r?"instance":"subclass";4===l.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnnecessaryIsInstance,"reportUnnecessaryIsInstance",`Unnecessary ${n} call: '${this._evaluator.printType(s)}' `+`is never ${p} of '${this._evaluator.printType(u())}'`,e):d.isTypeSame(l,s)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnnecessaryIsInstance,"reportUnnecessaryIsInstance",`Unnecessary ${n} call: '${this._evaluator.printType(s)}' `+`is always ${p} of '${this._evaluator.printType(u())}'`,e)}_isSymbolPrivate(e,t){if(1===t||0===t)return!0;if(u.isPrivateName(e))return!0;if(u.isProtectedName(e)){return!(2===t)}return!1}_conditionallyReportPrivateUsage(e){if("none"===this._fileInfo.diagnosticSettings.reportPrivateUsage)return;if(this._fileInfo.isStubFile)return;const t=e.value,n=u.isPrivateName(t),r=u.isProtectedName(t);if(!n&&!r)return;const s=this._evaluator.getDeclarationsForNameNode(e);let i,o=s&&s.length>0?s[s.length-1]:void 0;if(!o||o.node===e)return;if(o=this._evaluator.resolveAliasDeclaration(o),!o||o.node===e)return;o.node&&(i=c.getEnclosingClassOrModule(o.node)),o.node&&o.node.parent&&o.node.parent===i&&10===i.nodeType&&(i=c.getEnclosingClassOrModule(i));let a=!1;if(i&&10===i.nodeType&&r){const t=this._evaluator.getTypeOfClass(i);if(t&&7===t.decoratedType.category){a=!0;const n=c.getEnclosingClass(e);if(n){a=!0;const e=this._evaluator.getTypeOfClass(n);if(e&&7===e.decoratedType.category&&h.derivesFromClassRecursive(e.decoratedType,t.decoratedType))return}}}if(i&&!c.isNodeContainedWithin(e,i))if(a)this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportPrivateUsage,"reportPrivateUsage",`'${t}' is protected and used outside of a derived class`,e);else{const n=10===i.nodeType?"class":"module";this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportPrivateUsage,"reportPrivateUsage",`'${t}' is private and used outside of the ${n} in which it is declared`,e)}}_validateTypedDictClassSuite(e){const t=e=>{this._evaluator.addError("TypedDict classes can contain only type annotations",e)};e.statements.forEach(e=>{if(!o.isCodeUnreachable(e))if(48===e.nodeType)for(const n of e.statements)55!==n.nodeType&&18!==n.nodeType&&49!==n.nodeType&&43!==n.nodeType&&t(n);else t(e)})}_validateFunctionReturn(e,t){if(!this._fileInfo.isStubFile)if(e.returnTypeAnnotation){const n=!this._evaluator.isAfterNodeReachable(e),r=this._evaluator.isAfterNodeReachable(e.suite);let i=t.details.declaredReturnType;if(i&&(1===i.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownVariableType,"reportUnknownVariableType","Declared return type is unknown",e.returnTypeAnnotation):h.containsUnknown(i)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownVariableType,"reportUnknownVariableType",`Declared return type, '${this._evaluator.printType(i)}', is partially unknown`,e.returnTypeAnnotation)),d.FunctionType.isGenerator(t)&&(i=h.getDeclaredGeneratorReturnType(t)),i&&!n&&r)if(h.isNoReturnType(i))c.isSuiteEmpty(e.suite)||this._evaluator.addError("Function with declared type of 'NoReturn' cannot return 'None'",e.returnTypeAnnotation);else if(!d.FunctionType.isAbstractMethod(t)){const t=new s.DiagnosticAddendum;this._evaluator.canAssignType(i,d.NoneType.create(),t)||c.isSuiteEmpty(e.suite)||this._evaluator.addError(`Function with declared type of '${this._evaluator.printType(i)}'`+" must return value"+t.getString(),e.returnTypeAnnotation)}}else{const n=this._evaluator.getFunctionInferredReturnType(t);1===n.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownParameterType,"reportUnknownParameterType","Inferred return type is unknown",e.name):h.containsUnknown(n)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportUnknownParameterType,"reportUnknownParameterType",`Return type '${this._evaluator.printType(n)}' is partially unknown`,e.name)}}_validateFinalMemberOverrides(e){e.details.fields.forEach((t,n)=>{const r=h.getSymbolFromBaseClasses(e,n);if(r&&p.isFinalVariable(r.symbol)){const e=t.getDeclarations()[0];this._evaluator.addError(`'${n}' cannot be redeclared because parent class `+`'${r.class.details.name}' declares it as Final`,e.node)}})}_validateClassMethods(e){this._fileInfo.isStubFile||this._validateOveriddenMethods(e)}_validateOveriddenMethods(e){e.details.fields.forEach((t,n)=>{if(t.isClassMember()&&!u.isDunderName(n)){const r=this._evaluator.getEffectiveTypeOfSymbol(t);if(5===r.category){const i=h.getSymbolFromBaseClasses(e,n);if(i){const e=this._evaluator.getEffectiveTypeOfSymbol(i.symbol),o=new s.DiagnosticAddendum;if(!this._evaluator.canOverrideMethod(e,r,o)){const e=p.getLastTypedDeclaredForSymbol(t);if(e&&3===e.type){const t=this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportIncompatibleMethodOverride,"reportIncompatibleMethodOverride",`Method '${n}' overrides class '${i.class.details.name}' `+"in an incompatible manner"+o.getString(),e.node.name),r=p.getLastTypedDeclaredForSymbol(i.symbol);t&&r&&t.addRelatedInfo("Overridden method",r.path,r.range)}}if(5===e.category&&d.FunctionType.isFinal(e)){const e=p.getLastTypedDeclaredForSymbol(t);if(e&&3===e.type){const t=this._evaluator.addError(`Method '${n}' cannot override final method defined `+`in class '${i.class.details.name}'`,e.node.name),r=p.getLastTypedDeclaredForSymbol(i.symbol);t&&r&&t.addRelatedInfo("Final method",r.path,r.range)}}}}}})}_validateMethod(e,t,n){if(e.name&&"__new__"===e.name.value)(0===e.parameters.length||!e.parameters[0].name||"cls"!==e.parameters[0].name.value&&"mcs"!==e.parameters[0].name.value)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportSelfClsParameterName,"reportSelfClsParameterName","The __new__ override should take a 'cls' parameter",e.parameters.length>0?e.parameters[0]:e.name);else if(e.name&&"__init_subclass__"===e.name.value)0!==e.parameters.length&&e.parameters[0].name&&"cls"===e.parameters[0].name.value||this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportSelfClsParameterName,"reportSelfClsParameterName","The __init_subclass__ override should take a 'cls' parameter",e.parameters.length>0?e.parameters[0]:e.name);else if(d.FunctionType.isStaticMethod(t)){if(e.parameters.length>0&&e.parameters[0].name){const t=e.parameters[0].name.value;"self"!==t&&"cls"!==t||this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportSelfClsParameterName,"reportSelfClsParameterName","Static methods should not take a 'self' or 'cls' parameter",e.parameters[0].name)}}else if(d.FunctionType.isClassMethod(t)){let t="";e.parameters.length>0&&e.parameters[0].name&&(t=e.parameters[0].name.value),"cls"!==t&&(this._fileInfo.isStubFile&&(t.startsWith("_")||"metacls"===t)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportSelfClsParameterName,"reportSelfClsParameterName","Class methods should take a 'cls' parameter",e.parameters.length>0?e.parameters[0]:e.name))}else if(0===e.decorators.length){let t="",r=!0;if(e.parameters.length>0&&(e.parameters[0].name&&(t=e.parameters[0].name.value),0!==e.parameters[0].category&&(r=!1)),r&&"self"!==t){let r=!1;if("cls"===t){const e=this._evaluator.getTypeOfClass(n),t=this._evaluator.getBuiltInType(n,"type");t&&7===t.category&&e&&7===e.classType.category&&h.derivesFromClassRecursive(e.classType,t)&&(r=!0)}r||this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportSelfClsParameterName,"reportSelfClsParameterName","Instance methods should take a 'self' parameter",e.parameters.length>0?e.parameters[0]:e.name)}}}_validateYieldType(e,t){let n;const i=c.getEnclosingFunction(e);if(i){const t=this._evaluator.getTypeOfFunction(i);if(t){r(5===t.functionType.category);const s=this._evaluator.getBuiltInType(e,"Iterator");n=h.getDeclaredGeneratorYieldType(t.functionType,s)}}if(this._evaluator.isNodeReachable(e)&&n)if(h.isNoReturnType(n))this._evaluator.addError("Function with declared return type 'NoReturn' cannot include a yield statement",e);else{const r=new s.DiagnosticAddendum;this._evaluator.canAssignType(n,t,r)||this._evaluator.addError(`Expression of type '${this._evaluator.printType(t)}' cannot be assigned `+`to yield type '${this._evaluator.printType(n)}'`+r.getString(),e.expression||e)}}_reportDuplicateImports(){const e=a.getTopLevelImports(this._moduleNode),t=new Map;e.orderedImports.forEach(e=>{if(22===e.node.nodeType){const t=new Map;e.node.imports.forEach(e=>{if(!e.alias){t.get(e.name.value)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportDuplicateImport,"reportDuplicateImport",`'${e.name.value}' is imported more than once`,e.name):t.set(e.name.value,e)}})}else if(e.subnode&&!e.subnode.alias){t.get(e.moduleName)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticSettings.reportDuplicateImport,"reportDuplicateImport",`'${e.moduleName}' is imported more than once`,e.subnode):t.set(e.moduleName,e.subnode)}})}}t.Checker=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);function s(e){const t=r.getStrictDiagnosticSettings(),n=r.getBooleanDiagnosticSettings(),s=r.getDiagLevelSettings();for(const r of n)t[r]&&(e[r]=!0);for(const n of s){const r=t[n],s=e[n];("error"===r||"warning"===r&&"error"!==s)&&(e[n]=r)}}function i(e,t){if(e.startsWith("pyright:")){const n=e.substr("pyright:".length).trim().split(",").map(e=>e.trim());n.some(e=>"strict"===e)&&s(t);for(const e of n)t=o(e,t)}return t}function o(e,t){const n=e.split("=").map(e=>e.trim());if(2!==n.length)return t;const s=n[0],i=r.getBooleanDiagnosticSettings();if(r.getDiagLevelSettings().find(e=>e===s)){const e=function(e){if("false"===e||"none"===e)return"none";if("warning"===e)return"warning";if("true"===e||"error"===e)return"error";return}(n[1]);void 0!==e&&(t[s]=e)}else if(i.find(e=>e===s)){const e=function(e){if("false"===e)return!1;if("true"===e)return!0;return}(n[1]);void 0!==e&&(t[s]=e)}return t}t.getFileLevelDirectives=function(e,t,n){let o=r.cloneDiagnosticSettings(t);n&&s(o);for(let t=0;t<e.count;t++){const n=e.getItemAt(t);if(n.comments)for(const e of n.comments){o=i(e.value.trim(),o)}}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),s=n(10);class i extends s.ParseTreeWalker{constructor(e){super(),this._parseTree=e}clean(){this.walk(this._parseTree)}visitNode(e){return r.cleanNodeAnalysisInfo(e),super.visitNode(e)}}t.ParseTreeCleanerWalker=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(10),i=n(3);class o extends s.ParseTreeWalker{constructor(){super()}visitNode(e){const t=super.visitNode(e);return this._verifyParentChildLinks(e,t),this._verifyChildRanges(e,t),t}_verifyParentChildLinks(e,t){t.forEach(t=>{t&&t.parent!==e&&r.fail(`Child node ${t.nodeType} does not `+`contain a reference to its parent ${e.nodeType}`)})}_verifyChildRanges(e,t){let n;t.forEach(t=>{if(t){let s=!1;3===e.nodeType&&t===e.typeAnnotationComment&&(s=!0),49===e.nodeType&&t===e.typeAnnotation&&(s=!0),s||((t.start<e.start||i.TextRange.getEnd(t)>i.TextRange.getEnd(e))&&r.fail(`Child node ${t.nodeType} is not `+`contained within its parent ${e.nodeType}`),n&&t.start<i.TextRange.getEnd(n)&&r.fail("Child node is not after previous child node"),n=t)}})}}t.TestWalker=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(8),i=n(2),o=n(17),a=n(3),c=n(18),l=n(5),u=n(37),p=n(6),d=n(60),h=n(59),f=n(27),g=n(11),m=n(19),y=n(12),_=n(13),T=n(53),v=n(55),b={0:["__add__","__radd__"],32:["__sub__","__rsub__"],25:["__mul__","__rmul__"],13:["__floordiv__","__rfloordiv__"],10:["__truediv__","__rtruediv__"],23:["__mod__","__rmod__"],28:["__pow__","__rpow__"],21:["__matmul__",""]},E={3:["__and__","__rand__"],6:["__or__","__ror__"],8:["__xor__","__rxor__"],17:["__lshift__","__rlshift__"],30:["__rshift__","__rrshift__"]},C={12:["__eq__","__ne__"],27:["__ne__","__eq__"],19:["__lt__","__gt__"],20:["__le__","__ge__"],15:["__gt__","__lt__"],16:["__ge__","__le__"]},x={35:!0,36:!0,38:!0,39:!0,40:!0,41:!0};let S=1;const k=0,w=-1,I=3;t.createTypeEvaluator=function(e){const t=[],n=new Map,F=new Map,N=new Map,R=new Map,P=new Map;let A=k;const D=[];let O;function L(e){let t;if(t=O&&U(e)?O.get(e.id):P.get(e.id),void 0!==t){if(t.category===w){if(!gt())return;const e=t;if(e.speculativeModeId<A)return;return e.type}return t}}function M(e,t){const n=gt()?{category:w,speculativeModeId:A,type:t}:t;O&&U(e)?O.set(e.id,n):P.set(e.id,n)}function U(e){const t=D.length;if(0===t)return!1;const n=D[t-1];let r=e;for(;r;){if(r===n.functionNode)return!0;r=r.parent}return!1}function $(e,n){return t.findIndex(t=>t.symbolId===e.id&&t.declaration===n)}function W(e,n){const r=$(e,n);if(r>=0){for(let e=r+1;e<t.length;e++)t[e].isResultValid=!1;return!1}return t.push({symbolId:e.id,declaration:n,isResultValid:!0}),!0}function B(e){const n=t.pop();return r(n.symbolId===e.id),n.isResultValid}function V(e,n,r){const s=$(e,n);s>=0&&(t[s].partialType=r)}function q(e,n){const r=$(e,n);if(r>=0)return t[r].partialType}function j(e){if(!l.isCodeUnreachable(e))return et(e),L(e)}function z(e,t,n=0){const i=L(e);if(i)return{type:i,node:e};let o;switch(e.nodeType){case 39:o=function(e,t){const n=mt(e),r=e.value;let s;const i=ht(e,r);if(i){const o=i.symbol,a=bt(o);let c=!(!!a&&7===a.category&&y.ClassType.isSpecialBuiltIn(a));if(4&t&&(c=!1),n.isStubFile){const e=m.getLastTypedDeclaredForSymbol(i.symbol);e&&4===e.type&&(c=!1)}if(s=a,c){const t=i.isBeyondExecutionScope||!o.isInitiallyUnbound()?a:y.UnboundType.create(),n=it(e,o.id,t);n&&(s=n)}if(!(2&t))if(7===s.category)s.typeArguments||(s=lt(s,void 0,e));else if(8===s.category){const e=ge(s);e&&(s=e)}y.isUnbound(s)?oe(`'${r}' is unbound`,e):y.isPossiblyUnbound(s)&&oe(`'${r}' is possibly unbound`,e),pe(n,o)}else"reveal_type"!==r&&oe(`'${r}' is not defined`,e),s=y.UnknownType.create();return{type:s,node:e}}(e,n);break;case 36:o=function(e,t){const n=z(e.leftExpression,void 0,2),r=fe(e,n,{method:"get"},t);if(u.isCodeFlowSupportedForReference(e)){M(e,r.type),M(e.memberName,r.type);const t=it(e,f.indeterminateSymbolId,r.type);t&&(r.type=t)}return M(e.memberName,r.type),r}(e,n);break;case 24:o=function(e,t,n=0){const r=z(e.baseExpression,void 0,2|n);return ye(e,r.type,{method:"get",expectedType:t},n)}(e,t,n);break;case 9:o=function(e,t,n){const r=z(e.leftExpression,void 0,2);if(39===e.leftExpression.nodeType&&"super"===e.leftExpression.value)return{type:Te(e),node:e};if(y.isAnyOrUnknown(r.type)&&39===e.leftExpression.nodeType&&"reveal_type"===e.leftExpression.value&&1===e.arguments.length&&0===e.arguments[0].argumentCategory&&void 0===e.arguments[0].name){const t=z(e.arguments[0].valueExpression).type;return ie(`Type of '${p.printExpression(e.arguments[0].valueExpression)}' is '${Wt(t)}'`,e.arguments[0]),{type:y.AnyType.create(),node:e}}const s=e.arguments.map(e=>{return{valueExpression:e.valueExpression,argumentCategory:e.argumentCategory,name:e.name}});return ve(e,s,r,t,-3&n)}(e,t,n);break;case 53:o=function(e,t){const n=[];if(t&&8===t.category){const r=t.classType;if(y.ClassType.isBuiltIn(r,"Tuple")&&r.typeArguments)if(2===r.typeArguments.length&&_.isEllipsisType(r.typeArguments[1]))for(let t=0;t<e.expressions.length;t++)n.push(r.typeArguments[0]);else r.typeArguments.forEach(e=>{n.push(e)})}const r=e.expressions.map((e,t)=>z(e,t<n.length?n[t]:void 0));let s=y.UnknownType.create();const i=pt(e,"Tuple");if(7===i.category){let e=[];for(const t of r)if(t.unpackedType){if(8!==t.unpackedType.category||!y.ClassType.isBuiltIn(t.unpackedType.classType,"Tuple")){e=[y.AnyType.create(!1),y.AnyType.create(!0)];break}{const n=t.unpackedType.classType.typeArguments;if(!n||n.some(e=>2===e.category&&e.isEllipsis)){e=[y.AnyType.create(!1),y.AnyType.create(!0)];break}for(const t of n)e.push(t)}}else e.push(t.type);s=_.convertClassToObject(y.ClassType.cloneForSpecialization(i,e))}return{type:s,node:e}}(e,t);break;case 11:o=function(e){let t;24===e.constType?t=y.NoneType.create():31!==e.constType&&14!==e.constType&&8!==e.constType||(t=dt(e,"bool"),t&&8===t.category&&(31===e.constType?t=y.ObjectType.cloneWithLiteral(t,!0):14===e.constType&&(t=y.ObjectType.cloneWithLiteral(t,!1))));if(!t)return;return{type:t,node:e}}(e);break;case 49:{const t=0!=(16&n)&&!function(e){if(e.parent&&25===e.parent.nodeType){const t=e.parent;if(t.parent&&24===t.parent.nodeType){const e=z(t.parent.baseExpression).type;if(e&&7===e.category&&y.ClassType.isSpecialBuiltIn(e,"Literal"))return!0}}return!1}(e);if(t)if(e.typeAnnotation)o=z(e.typeAnnotation,void 0,4|n);else if(!e.typeAnnotation&&1===e.strings.length){const t=function(e){const t=mt(e),n=new v.Parser,r=e.strings[0].value,s=e.strings[0].start+e.strings[0].token.prefixLength+e.strings[0].token.quoteMarkLength,i=new v.ParseOptions;i.isStubFile=t.isStubFile,i.pythonVersion=t.executionEnvironment.pythonVersion;const o=n.parseTextExpression(t.fileContents,s,r.length,i,!0);if(o.parseTree)return o.diagnostics.forEach(t=>{oe(t.message,e)}),o.parseTree.parent=e,o.parseTree;return}(e);t&&(o=z(t,void 0,4|n))}if(t)o||(oe("Expecting type but received a string literal",e),o={node:e,type:y.UnknownType.create()});else{e.strings.forEach(e=>{28===e.nodeType&&e.expressions.forEach(e=>{z(e)})});const t=0!=(32&e.strings[0].token.flags);o=e.strings.some(e=>28===e.nodeType)?{node:e,type:dt(e,t?"bytes":"str")}:{node:e,type:De(e,t?"bytes":"str",e.strings.map(e=>e.value).join(""))}}break}case 41:{let t="float";e.isImaginary?t="complex":e.isInteger&&(t="int"),o={node:e,type:De(e,t,e.value)};break}case 18:if(0!=(1&n))o={type:y.AnyType.create(!0),node:e};else{o={type:pt(e,"ellipsis")||y.AnyType.create(),node:e}}break;case 56:o=function(e){let t=z(e.expression).type;11===t.category&&(t=_.specializeType(t,void 0));const n={0:"__pos__",32:"__neg__",5:"__invert__"};let r;37!==e.operator&&_.isOptionalType(t)&&(ae(mt(e).diagnosticSettings.reportOptionalOperand,"reportOptionalOperand",`Operator '${p.printOperator(e.operator)}' not `+"supported for 'None' type",e.expression),t=y.removeNoneFromUnion(t));if(37===e.operator)r=dt(e,"bool"),r||(r=y.UnknownType.create());else{if(y.isAnyOrUnknown(t))r=t;else{const s=n[e.operator];r=Re(t,[],s,e)}r||(oe(`Operator '${p.printOperator(e.operator)}'`+` not supported for type '${Wt(t)}'`,e),r=y.UnknownType.create())}return{type:r,node:e}}(e);break;case 7:o=function(e){let t=e.leftExpression;C[e.operator]&&7===e.leftExpression.nodeType&&C[e.leftExpression.operator]&&(t=e.leftExpression.rightExpression);let n=z(t).type;11===n.category&&(n=_.specializeType(n,void 0));let r=z(e.rightExpression).type;11===r.category&&(r=_.specializeType(r,void 0));void 0===x[e.operator]&&(_.isOptionalType(n)&&(12!==e.operator&&27!==e.operator&&ae(mt(e).diagnosticSettings.reportOptionalOperand,"reportOptionalOperand",`Operator '${p.printOperator(e.operator)}' not `+"supported for 'None' type",e.leftExpression),n=y.removeNoneFromUnion(n)),12!==e.operator&&27!==e.operator||(r=y.removeNoneFromUnion(r)));return{type:Ne(e.operator,n,r,e),node:e}}(e);break;case 5:{const t=Fe(e);ue(e.destExpression,t,e.rightExpression),o={type:t,node:e};break}case 32:o=function(e,t){let n=e.entries.map(e=>33===e.nodeType?Ae(e):z(e).type);if(t&&n.length>0){const r=_.doForSubtypes(t,e=>{if(8===e.category){const t=e.classType.details.aliasClass||e.classType;if(y.ClassType.isBuiltIn(t,"list")&&e.classType.typeArguments){const t=e.classType.typeArguments[0],r=new T.TypeVarMap;for(const e of n)if(!Rt(t,e,new s.DiagnosticAddendum,r))return;return _.specializeType(e,r)}}});if(4!==r.category)return{type:r,node:e}}n=n.map(e=>_.stripLiteralValue(e));let r=y.AnyType.create();n.length>0&&(r=mt(e).diagnosticSettings.strictListInference?y.combineTypes(n):_.areTypesSame(n)?n[0]:y.UnknownType.create());return{type:dt(e,"list",[r]),node:e}}(e,t);break;case 47:o=function(e){const t=dt(e,"int"),n=y.combineTypes([t,y.NoneType.create()]),r=e=>{const t=_.stripLiteralValue(z(e).type),r=new s.DiagnosticAddendum;Rt(n,t,r)||oe("Index for slice operation must be an int value or None"+r.getString(),e)};e.startValue&&r(e.startValue);e.endValue&&r(e.endValue);e.stepValue&&r(e.stepValue);return{type:dt(e,"slice"),node:e}}(e);break;case 6:o=z(e.expression,void 0,n),o={type:J(o.type,e.expression),node:e};break;case 52:o=function(e,t){z(e.testExpression);const n=z(e.ifExpression,void 0,t),r=z(e.elseExpression,void 0,t);return{type:y.combineTypes([n.type,r.type]),node:e}}(e,n);break;case 33:o=function(e){const t=Ae(e);let n=y.UnknownType.create();const r=ne(e,"Generator");r&&7===r.category&&(n=y.ObjectType.create(y.ClassType.cloneForSpecialization(r,[t])));return{type:n,node:e}}(e);break;case 15:o=function(e,t){let n,i,o=y.AnyType.create(),a=y.AnyType.create(),c=[],l=[];if(t&&8===t.category){const e=t.classType;(y.ClassType.isBuiltIn(e,"Dict")||y.ClassType.isBuiltIn(e,"dict"))&&e.typeArguments&&2===e.typeArguments.length&&(n=_.specializeType(e.typeArguments[0],void 0),i=_.specializeType(e.typeArguments[1],void 0))}if(e.entries.forEach(t=>{let r=!0;if(17===t.nodeType)c.push(z(t.keyExpression,n).type),l.push(z(t.valueExpression,i).type),r=!1;else if(16===t.nodeType){const e=z(t.expandExpression).type;if(y.isAnyOrUnknown(e))r=!1;else if(8===e.category){const t=e.classType,n=t.details.aliasClass||t;if(y.ClassType.isBuiltIn(n,"dict")){const e=t.typeArguments;e&&e.length>=2&&(c.push(e[0]),l.push(e[1]),r=!1)}}}else if(33===t.nodeType){const t=Ae(e.entries[0]);if(8===t.category){const e=t.classType;if(y.ClassType.isBuiltIn(e,"Tuple")){const t=e.typeArguments;t&&2===t.length&&(c.push(t[0]),l.push(t[1]),r=!1)}}}r&&(c.push(y.UnknownType.create()),l.push(y.UnknownType.create()))}),t){const n=_.doForSubtypes(t,e=>{if(8!==e.category)return;if(y.ClassType.isTypedDictClass(e.classType)&&function(e,t,n){r(y.ClassType.isTypedDictClass(e)),r(t.length===n.length);let i=!0;const o=Ot(e),a=new s.DiagnosticAddendum;if(t.forEach((e,t)=>{if(8===e.category&&y.ClassType.isBuiltIn(e.classType,"str")&&e.literalValue){const r=e.literalValue,s=o.get(r);s?(Rt(s.valueType,n[t],a)||(i=!1),s.isProvided=!0):i=!1}else i=!1}),!i)return!1;return o.forEach(e=>{e.isRequired&&!e.isProvided&&(i=!1)}),i}(e.classType,c,l))return e;const t=e.classType.details.aliasClass||e.classType;if(y.ClassType.isBuiltIn(t,"dict")&&e.classType.typeArguments){const t=e.classType.typeArguments[0],n=e.classType.typeArguments[1],r=new T.TypeVarMap;for(const e of c)if(!Rt(t,e,new s.DiagnosticAddendum,r))return;for(const e of l)if(!Rt(n,e,new s.DiagnosticAddendum,r))return;return _.specializeType(e,r)}});if(4!==n.category)return{type:n,node:e}}c=c.map(e=>_.stripLiteralValue(e)),l=l.map(e=>_.stripLiteralValue(e)),o=c.length>0?y.combineTypes(c):y.AnyType.create(),a=l.length>0?mt(e).diagnosticSettings.strictDictionaryInference?y.combineTypes(l):_.areTypesSame(l)?l[0]:y.UnknownType.create():y.AnyType.create();return{type:dt(e,"dict",[o,a]),node:e}}(e,t);break;case 31:o=function(e,t){const n=y.FunctionType.create(0);let r;M(e,n),t&&(5===t.category?r=t:10===t.category&&(r=t.subtypes.find(e=>5===e.category)));return e.parameters.forEach((e,t)=>{let s=y.UnknownType.create();r&&t<r.details.parameters.length&&(s=y.FunctionType.getEffectiveParameterType(r,t),s=_.specializeType(s,void 0,!0)),e.name&&M(e.name,s);const i={category:e.category,name:e.name?e.name.value:void 0,hasDefault:!!e.defaultValue,type:s};y.FunctionType.addParameter(n,i)}),n.inferredReturnType=z(e.expression).type,{type:n,node:e}}(e,t);break;case 46:o=function(e,t){const n=e.entries.map(e=>33===e.nodeType?Ae(e):z(e).type);if(t&&n.length>0){const r=_.doForSubtypes(t,e=>{if(8===e.category){const t=e.classType.details.aliasClass||e.classType;if(y.ClassType.isBuiltIn(t,"set")&&e.classType.typeArguments){const t=e.classType.typeArguments[0],r=new T.TypeVarMap;for(const e of n)if(!Rt(t,e,new s.DiagnosticAddendum,r))return;return _.specializeType(e,r)}}});if(4!==r.category)return{type:r,node:e}}const r=n.length>0?y.combineTypes(n.map(e=>_.stripLiteralValue(e))):y.AnyType.create();return{type:dt(e,"set",[r]),node:e}}(e,t);break;case 3:o=z(e.rightExpression),ue(e.leftExpression,o.type,e.rightExpression);break;case 4:o=z(e.rightExpression),ue(e.name,o.type,e.rightExpression);break;case 61:case 62:o=function(e){let t;const n=p.getEnclosingFunction(e);if(n){const e=Ve(n);e&&(t=_.getDeclaredGeneratorSendType(e.functionType))}t||(t=y.UnknownType.create());e.expression&&z(e.expression,t);return{type:t,node:e}}(e);break;case 57:{const n=z(e.expression,t).type;o={type:Z(n,!1,e,!1),unpackedType:n,node:e};break}case 55:o=z(e.typeAnnotation,void 0,16);break;case 0:ft(()=>{e.child&&z(e.child)}),o={type:y.UnknownType.create(),node:e}}return o||(r.fail(`Unhandled expression type '${p.printExpression(e)}'`),o={type:y.UnknownType.create(),node:e}),M(e,o.type),o}function H(e){const t=mt(e);if(t.isTypingStubFile){const t=function(e){if(!e.parent||55!==e.parent.nodeType)return;if(39!==e.parent.valueExpression.nodeType)return;const t=e.parent.valueExpression.value,n={Tuple:{alias:"tuple",module:"builtins"},Generic:{alias:"",module:"builtins"},Protocol:{alias:"",module:"builtins"},Callable:{alias:"",module:"builtins"},Type:{alias:"type",module:"builtins"},ClassVar:{alias:"",module:"builtins"},Final:{alias:"",module:"builtins"},Literal:{alias:"",module:"builtins"},TypedDict:{alias:"_TypedDict",module:"self"}}[t];if(n)return Me(e,t,n);return}(e);if(t)return M(e,t),t}let n=17;return(void 0!==t.futureImports.get("annotations")||t.isStubFile)&&(n|=4),_.convertClassToObject(z(e,void 0,n).type)}function K(e,t){let n=z(e.leftExpression,void 0,2);if(e.arguments){const t=e.arguments.map(e=>{return{valueExpression:e.valueExpression,argumentCategory:e.argumentCategory,name:e.name}});n=ve(e.leftExpression,t,n,void 0,8)}const r=[{argumentCategory:0,type:t}];return ve(e.leftExpression,r,n,void 0,8).type}function G(e,t,n,r,s,i=0,o){const a=me(e,t.classType,n,r,s,i);let c=a?a.type:void 0;return c&&(5!==c.category&&6!==c.category||a.isClassMember&&(c=Lt(o||t,c,!!o))),c}function Y(e,t,n,r,s,i=0){const o=me(e,t,n,r,s,1|i);let a=o?o.type:void 0;return a&&(5!==a.category&&6!==a.category||o.isClassMember&&(a=Lt(t,a))),a}function Q(t,n,r){const s=t.details.aliasClass;s&&(t=s);const i=_.lookUpClassMember(t,n,e,12);if(i){const e=kt(i);if(5===e.category||6===e.category){const n=Lt(y.ObjectType.create(t),e,r);if(5===n.category||6===n.category)return n}}}function X(t){let n,r;switch(t.nodeType){case 39:{const e=ht(t,t.value);e&&(n=e.symbol);break}case 55:return X(t.valueExpression);case 36:{const s=z(t.leftExpression).type;let i;8===s.category?(i=_.lookUpObjectMember(s,t.memberName.value,e,16),r=s):7===s.category&&(i=_.lookUpClassMember(s,t.memberName.value,e,24),r=s),i&&(n=i.symbol);break}case 24:{const n=X(t.baseExpression);if(n&&8===n.category){const t=_.lookUpClassMember(n.classType,"__setitem__",e);if(t){const e=kt(t);if(5===e.category){const t=Lt(n,e);if(5===t.category&&2===t.details.parameters.length)return y.FunctionType.getEffectiveParameterType(t,1)}}}break}}if(n){let t=Et(n);if(t){if(_.isProperty(t)){const n=_.lookUpClassMember(t.classType,"fset",e),r=n?kt(n):void 0;if(!r||5!==r.category||r.details.parameters.length<2)return;t=r.details.parameters[1].type}return r&&(t=Lt(r,t)),t}}}function J(e,t){return _.doForSubtypes(e,e=>{if(y.isAnyOrUnknown(e))return e;const n=de(e);if(n)return n;if(8===e.category){const t=he(e,"__await__");if(t){if(y.isAnyOrUnknown(t))return t;if(8===t.category){if(he(t,"__iter__")){const e=de(t);if(e)return e}}}}return t&&oe(`'${Wt(e)}' is not awaitable`,t),y.UnknownType.create()})}function Z(t,n,r,i){const o=n?"__aiter__":"__iter__",a=n?"__anext__":"__next__",c=i?"__getitem__":"";11===t.category&&(t=_.specializeType(t,void 0)),10===t.category&&t.subtypes.some(e=>y.isNoneOrNever(e))&&(r&&ae(mt(r).diagnosticSettings.reportOptionalIterable,"reportOptionalIterable","Object of type 'None' cannot be used as iterable value",r),t=y.removeNoneFromUnion(t));const l=(t,s,i)=>{const l=s?function(t,n,r){const s=_.lookUpObjectMember(y.ObjectType.create(t),r,e,8);if(!s)return;const i=kt(s);if(y.isAnyOrUnknown(i))return i;if(5===i.category){return Ct(Lt(n,i,!0))}return}(s,t.classType,o):he(t,o);if(l){if(y.isAnyOrUnknown(l))return l;if(8===l.category){const e=he(l,a);if(e)return n?J(e,r):e;i.addMessage(`'${a}' method not defined on type `+`'${Wt(l)}'`)}else i.addMessage(`'${o}' method does not return an object`)}else{if(c){const e=he(t,c);if(e)return e}i.addMessage(`'${o}' method not defined`)}};return _.doForSubtypes(t,e=>{if(y.isAnyOrUnknown(e))return e;const t=new s.DiagnosticAddendum;if(8===e.category){const n=l(e,void 0,t);if(n)return n}else if(7===e.category){const n=_.getMetaclass(e);if(n&&7===n.category){const r=l(y.ObjectType.create(e),n,t);if(r)return r}}return r&&oe(`'${Wt(e)}' is not iterable`+t.getString(),r),y.UnknownType.create()})}function ee(e,t,n){r(y.ClassType.isDataClass(t));const s=y.FunctionType.create(65),i=y.FunctionType.create(64);y.FunctionType.addParameter(s,{category:0,name:"cls",type:t}),_.addDefaultFunctionParameters(s),s.details.declaredReturnType=y.ObjectType.create(t),y.FunctionType.addParameter(i,{category:0,name:"self",type:y.ObjectType.create(t)}),i.details.declaredReturnType=y.NoneType.create();const o=[],a=[];if(function e(t,n){t.details.baseClasses.forEach(t=>{7===t.category&&e(t,n)}),t.details.baseClasses.forEach(e=>{if(7===e.category){y.ClassType.getDataClassParameters(e).forEach(e=>{const t=n.findIndex(t=>t.name===e.name);t>=0?n[t]=e:n.push(e)})}})}(t,a),e.suite.statements.forEach(e=>{48===e.nodeType&&e.statements.forEach(e=>{let t,n,r=!1;if(3===e.nodeType?(39===e.leftExpression.nodeType?(t=e.leftExpression,n=_.stripLiteralValue(z(e.rightExpression).type)):55===e.leftExpression.nodeType&&39===e.leftExpression.valueExpression.nodeType&&(t=e.leftExpression.valueExpression,n=_.convertClassToObject(z(e.leftExpression.typeAnnotation,void 0,1).type)),r=!0):55===e.nodeType&&39===e.valueExpression.nodeType&&(t=e.valueExpression,n=_.convertClassToObject(z(e.typeAnnotation,void 0,17).type)),t&&n){const e=t.value,s={category:0,name:e,hasDefault:r,type:n};let i=o.findIndex(t=>t.name===e);i>=0?o[i]=s:o.push(s),i=a.findIndex(t=>t.name===e),i>=0?a[i]=s:(a.push(s),i=a.length-1);const c=a.findIndex(e=>e.hasDefault);!r&&c>=0&&c<i&&oe("Data fields without default value cannot appear after data fields with default values",t)}})}),t.details.dataClassParameters=o,!n){a.forEach(e=>{y.FunctionType.addParameter(i,e)});const e=t.details.fields;e.set("__init__",f.Symbol.createWithType(4,i)),e.set("__new__",f.Symbol.createWithType(4,s))}}function te(e,t){r(y.ClassType.isTypedDictClass(t));const n=y.FunctionType.create(65);y.FunctionType.addParameter(n,{category:0,name:"cls",type:t}),_.addDefaultFunctionParameters(n),n.details.declaredReturnType=y.ObjectType.create(t);const i=y.FunctionType.create(64);y.FunctionType.addParameter(i,{category:0,name:"self",type:y.ObjectType.create(t)}),i.details.declaredReturnType=y.NoneType.create(),y.FunctionType.addParameter(i,{category:1,type:y.AnyType.create()});const o=Ot(t);o.forEach((e,t)=>{y.FunctionType.addParameter(i,{category:0,name:t,hasDefault:!e.isRequired,type:e.valueType})});const a=t.details.fields;a.set("__init__",f.Symbol.createWithType(4,i)),a.set("__new__",f.Symbol.createWithType(4,n));const c=pt(e,"str");if(7===c.category){const n=[];if(o.forEach((e,r)=>{const s=y.FunctionType.create(320);y.FunctionType.addParameter(s,{category:0,name:"self",type:y.ObjectType.create(t)}),y.FunctionType.addParameter(s,{category:0,name:"k",type:y.ObjectType.cloneWithLiteral(y.ObjectType.create(c),r)}),y.FunctionType.addParameter(s,{category:0,name:"default",type:e.valueType,hasDefault:!0}),s.details.declaredReturnType=e.valueType,n.push(s)}),n.length>0){const t=pt(e,"Mapping");if(7===t.category){const r=me(e,t,"get",{method:"get"},new s.DiagnosticAddendum,2);r&&6===r.type.category&&n.push(r.type.overloads[r.type.overloads.length-1])}const r=y.OverloadedFunctionType.create();r.overloads=n,a.set("get",f.Symbol.createWithType(4,r))}}}function ne(t,n){const r=mt(t).typingModulePath;if(!r)return;const s=e(r);if(!s)return;const i=s.symbolTable.get(n);return i?bt(i):void 0}function re(e){const t=l.getFlowNode(e);return!t||at(t)}function se(e){const t=l.getAfterFlowNode(e);return!!t&&at(t)}function ie(e,t){if(!gt()){return mt(t).diagnosticSink.addWarningWithTextRange(e,t)}}function oe(e,t){if(!gt()){return mt(t).diagnosticSink.addErrorWithTextRange(e,t)}}function ae(e,t,n,r){let s;return"error"===e?s=oe(n,r):"warning"===e&&(s=ie(n,r)),s&&s.setRule(t),s}function ce(e,t,n){const i=e.value,o=ht(e,i);if(!o)return void r.fail(`Missing symbol '${i}'`);const a=o.symbol.getDeclarations(),c=Et(o.symbol),l=mt(e);let u=t;if(c&&n){const r=new s.DiagnosticAddendum;Rt(c,t,r)?u=At(c,t):(oe(`Expression of type '${Wt(t)}' cannot be `+`assigned to declared type '${Wt(c)}'`+r.getString(),n||e),u=c)}else{if(u=_.stripLiteralTypeArgsValue(u),2===d.getScopeForNode(e).type){const t=g.isConstantName(i),n=g.isPrivateOrProtectedName(i);t||n&&"none"!==mt(e).diagnosticSettings.reportPrivateUsage||(u=_.stripLiteralValue(u))}}const p=a.find(e=>1===e.type);p&&1===p.type&&n&&p.isConstant&&e!==a[0].node&&ae(l.diagnosticSettings.reportConstantRedefinition,"reportConstantRedefinition",`'${i}' is constant and cannot be redefined`,e),M(e,u)}function le(t,n,i,o){const a=t.memberName.value,c=mt(t),l=p.getEnclosingClass(t);if(!l)return;let u=n;const d=We(l);if(d&&7===d.classType.category){let l=_.lookUpClassMember(d.classType,a,e,i?0:8);const h=d.classType.details.fields;if(l){if(7===l.classType.category&&y.ClassType.isSameGenericClass(d.classType,l.classType)&&l.isInstanceMember===i){const e=h.get(a);r(void 0!==e);const n=e.getDeclarations();let s=m.isFinalVariable(e);if(n.length>0&&1===n[0].type&&o&&t.memberName!==n[0].node){n[0].isConstant&&ae(c.diagnosticSettings.reportConstantRedefinition,"reportConstantRedefinition",`'${t.memberName.value}' is constant and cannot be redefined`,t.memberName);const e=p.getEnclosingFunction(t);e&&"__init__"===e.name.value&&(s=!1),s&&oe(`'${t.memberName.value}' is declared as Final and cannot be reassigned`,t.memberName)}}else{const e=Et(l.symbol);if(e&&!_.isProperty(e)&&!l.isInstanceMember&&i){pe(c,l.symbol);const e=kt(l);n=y.combineTypes([n,e])}}}if(l=_.lookUpClassMember(d.classType,a,e,16),l){const e=Et(l.symbol);if(e&&!y.isAnyOrUnknown(e))if(5===e.category);else if(_.isProperty(e));else{Rt(e,n,new s.DiagnosticAddendum)&&(u=At(u,n))}}else o&&Pe(c.diagnosticSettings.reportUnknownMemberType,"reportUnknownMemberType",t.memberName,n,t)}}function ue(e,t,n){switch(e.nodeType){case 39:if("__all__"===e.value&&n){const t=d.getScopeForNode(e);if(3===t.type&&32===n.nodeType){const r=mt(e);n.entries.forEach(e=>{if(49===e.nodeType||50===e.nodeType){const n=50===e.nodeType?e.value:e.strings.map(e=>e.value).join(""),s=t.lookUpSymbolRecursive(n);s&&pe(r,s.symbol)}})}}Pe(mt(e).diagnosticSettings.reportUnknownVariableType,"reportUnknownVariableType",e,t,e),ce(e,t,n);break;case 36:!function(e,t,n){const r=z(e.leftExpression);if(39===e.leftExpression.nodeType){const s=p.getEnclosingClass(e);if(s){const i=We(s);i&&7===i.classType.category&&(8===r.type.category?y.ClassType.isSameGenericClass(r.type.classType,i.classType)&&le(e,t,!0,n):7===r.type.category&&y.ClassType.isSameGenericClass(r.type,i.classType)&&le(e,t,!1,n))}}fe(e,r,{method:"set",setType:t,setErrorNode:n},0),M(e.memberName,t),M(e,t)}(e,t,n);break;case 24:{const r=z(e.baseExpression,void 0,2),s=ye(e,r.type,{method:"set",setType:t,setErrorNode:n},0);M(e,s.type);break}case 53:!function(e,t,n){const r=new Array(e.expressions.length);for(let t=0;t<e.expressions.length;t++)r[t]=[];_.doForSubtypes(t,t=>{const s=_.getSpecializedTupleType(t);if(s&&s.typeArguments){const t=s.typeArguments;let n=t.length;const i=n>1&&_.isEllipsisType(t[n-1]);if(i&&n--,e.expressions.length>0&&57===e.expressions[e.expressions.length-1].nodeType)if(n>=e.expressions.length){for(let s=0;s<e.expressions.length-1;s++){const e=s<n?t[s]:y.UnknownType.create();r[s].push(e)}const s=[];for(let r=e.expressions.length-1;r<n;r++){const e=t[r];s.push(e)}r[e.expressions.length-1].push(y.combineTypes(s))}else oe(`Tuple size mismatch: expected at least ${e.expressions.length} entries`+` but got ${n}`,e);else if(e.expressions.length===n||i)for(let s=0;s<e.expressions.length;s++){const e=s<n?t[s]:t[n-1];r[s].push(e)}else oe(`Tuple size mismatch: expected ${e.expressions.length}`+` but got ${n}`,e)}else{const s=Z(t,!1,n,!1);for(let t=0;t<e.expressions.length;t++)r[t].push(s)}}),e.expressions.forEach((e,t)=>{const s=r[t];ue(e,0===s.length?y.UnknownType.create():y.combineTypes(s),n)}),M(e,t)}(e,t,n);break;case 55:{const r=H(e.typeAnnotation);Rt(r,t,new s.DiagnosticAddendum)&&(t=At(r,t)),ue(e.valueExpression,t,n);break}case 57:if(39===e.expression.nodeType){if(!y.isAnyOrUnknown(t)){const n=pt(e,"List");t=7===n.category?y.ObjectType.create(y.ClassType.cloneForSpecialization(n,[t])):y.UnknownType.create()}ce(e.expression,t)}break;case 32:{const r=Z(t,!1,n,!1);e.entries.forEach(e=>{ue(e,r,n)});break}case 0:ft(()=>{e.child&&z(e.child)});break;default:oe("Expression cannot be assignment target",e)}}function pe(e,t){gt()||e.accessedSymbolMap.set(t.id,!0)}function de(e){if(y.isAnyOrUnknown(e))return e;if(8===e.category){const t=e.classType;if(y.ClassType.isBuiltIn(t,"Generator")){const e=t.typeArguments;if(e&&e.length>=3)return e[2]}}}function he(t,n){const r=_.lookUpObjectMember(t,n,e,8);if(!r)return;const s=kt(r);if(y.isAnyOrUnknown(s))return s;if(5===s.category){return Ct(Lt(t,s))}}function fe(e,t,n,r){const i=t.type,o=e.memberName.value,a=new s.DiagnosticAddendum;let c;switch(i.category){case 2:case 1:c=i;break;case 7:c=Y(e.memberName,i,e.memberName.value,n,a);break;case 11:return fe(e,{type:_.specializeType(i,void 0),node:e},n,0);case 8:{const s=ge(i);if(s)return fe(e,{type:s,node:t.node},n,r);c=G(e.memberName,i,e.memberName.value,n,a,0);break}case 9:{const t=y.ModuleType.getField(i,o);t?("get"===n.method&&pe(mt(e),t),c=bt(t),0===c.category&&(c=y.UnknownType.create())):(oe(`'${o}' is not a known member of module`,e.memberName),c=y.UnknownType.create());break}case 10:c=_.doForSubtypes(i,t=>{if(y.isNoneOrNever(t))ae(mt(e).diagnosticSettings.reportOptionalMemberAccess,"reportOptionalMemberAccess",`'${o}' is not a known member of 'None'`,e.memberName);else if(0!==t.category){return fe(e,{type:t,node:e},n,0).type}});break;case 5:case 6:c=y.UnknownType.create();break;default:a.addMessage(`Unsupported type '${Wt(i)}'`)}if(!c){let t="access";"set"===n.method?t="assign":"del"===n.method&&(t="delete"),oe(`Cannot ${t} member '${o}' `+`for type '${Wt(i)}'`+a.getString(),e.memberName),c=y.UnknownType.create()}return 0==(2&r)&&(7!==c.category||c.typeArguments||(c=lt(c,void 0,e))),{type:c,node:e}}function ge(e){const t=e.classType;if(y.ClassType.isBuiltIn(t,"Type")){const e=t.typeArguments;if(e&&e.length>0){let t=e[0];if(11===t.category&&(t=_.getConcreteTypeFromTypeVar(t)),8===t.category)return t.classType}return y.AnyType.create()}}function me(t,n,i,o,a,c){n.details.aliasClass&&(n=n.details.aliasClass);let l=0;1&c&&(l|=8),2&c&&(l|=2),4&c&&(l|=4);let u=_.lookUpClassMember(n,i,e,16|l);if(u||(u=_.lookUpClassMember(n,i,e,l)),u){let r;if(r="get"===o.method?kt(u):Et(u.symbol)||y.UnknownType.create(),y.ClassType.isTypedDictClass(n)){const e=u.symbol.getTypedDeclarations();if(e.length>0&&1===e[0].type)return void a.addMessage(`Member '${i}' is unknown`)}if("get"===o.method&&u.classType===n&&pe(mt(t),u.symbol),!(16&c)&&8===r.category){let s;s="get"===o.method?"__get__":"set"===o.method?"__set__":"__delete__";const l=r.classType,p=_.lookUpClassMember(l,s,e,8);if(y.ClassType.isPropertyClass(r.classType))if("set"===o.method){if(!p)return void a.addMessage(`Property '${i}' has no defined setter`)}else if("del"===o.method&&!p)return void a.addMessage(`Property '${i}' has no defined deleter`);if(p){let e=kt(p);if(6===e.category){const r=[{argumentCategory:0,type:y.ObjectType.create(l)},{argumentCategory:0,type:1&c?y.NoneType.create():y.ObjectType.create(n)},{argumentCategory:0,type:y.AnyType.create()}],s=be(t,r,e);s&&(e=s)}if(5===e.category)if(e=Lt(y.ObjectType.create(n),e),"get"===o.method)r=Ct(e),r=_.partiallySpecializeType(r,n);else{if("set"===o.method&&e.details.parameters.length>=2){if(!Rt(e.details.parameters[1].type,o.setType,a))return}r=y.AnyType.create()}return{type:r,isClassMember:!u.isInstanceMember}}}if("set"===o.method){let e=!1;if(u.symbol.hasTypedDeclarations()?e=!0:u.symbol.getDeclarations().some(e=>e.node===t)||(e=!0),e){let e=r;if(0==(1&c)&&(u.isInstanceMember||5!==r.category||(y.FunctionType.isClassMethod(r)||y.FunctionType.isInstanceMethod(r))&&(e=_.stripFirstParameter(r))),!Rt(e,o.setType,a.createAddendum()))return void a.addMessage(`Expression of type '${Wt(o.setType)}'`+` cannot be assigned to member '${i}'`+` of class '${Ut(n)}'`)}}return{type:r,isClassMember:!u.isInstanceMember}}if(!(8&c))if("get"===o.method){const e=Y(t,n,"__getattribute__",{method:"get"},new s.DiagnosticAddendum,29);if(e&&5===e.category)return{type:Ct(e),isClassMember:!1};const r=Y(t,n,"__getattr__",{method:"get"},new s.DiagnosticAddendum,25);if(r&&5===r.category)return{type:Ct(r),isClassMember:!1}}else if("set"===o.method){if(Y(t,n,"__setattr__",{method:"get"},new s.DiagnosticAddendum,29))return{type:y.AnyType.create(),isClassMember:!1}}else{if(r("del"===o.method),Y(t,n,"__detattr__",{method:"get"},new s.DiagnosticAddendum,29))return{type:y.AnyType.create(),isClassMember:!1}}a.addMessage(`Member '${i}' is unknown`)}function ye(e,t,n,i){if(10===t.category){const n=[];let r=!0;if(t.subtypes.forEach(e=>{7===e.category||11===e.category?_.addTypeVarsToListIfUnique(n,_.getTypeVarArgumentsRecursive(e)):r=!1}),r){const r=_e(e.items,i).map(e=>e.type),s=_.buildTypeVarMap(n,r);return{type:_.specializeType(t,s),node:e}}}const o=_.doForSubtypes(t,o=>{if(11===o.category&&(o=_.specializeType(t,void 0)),y.isAnyOrUnknown(o))return o;if(7===o.category){if("set"===n.method?oe("Generic class type cannot be assigned",e.baseExpression):"del"===n.method&&oe("Generic class type cannot be deleted",e.baseExpression),y.ClassType.isSpecialBuiltIn(o,"Literal"))return function(e){if(0===e.items.items.length)return oe("Expected a type parameter after Literal",e.baseExpression),y.UnknownType.create();const t=[];for(const n of e.items.items){let r;if(49===n.nodeType){const t=0!=(32&n.strings[0].token.flags),s=n.strings.map(e=>e.value).join("");r=De(e,t?"bytes":"str",s)}else 41===n.nodeType?!n.isImaginary&&n.isInteger&&(r=De(e,"int",n.value)):11===n.nodeType&&(31===n.constType?r=De(e,"bool",!0):14===n.constType?r=De(e,"bool",!1):24===n.constType&&(r=y.NoneType.create()));r||(oe("Type arguments for Literal must be None, int, bool, str, or bytes value",n),r=y.UnknownType.create()),t.push(r)}return _.convertClassToObject(y.combineTypes(t))}(e);if(y.ClassType.isBuiltIn(o,"InitVar")){const t=_e(e.items,i);return 1===t.length?t[0].type:(oe(`Expected one type argument for 'InitVar' but got ${t.length}`,e.baseExpression),y.UnknownType.create())}if(y.ClassType.isEnumClass(o))return y.ObjectType.create(o);return lt(o,_e(e.items,i),e.items)}return 8===o.category?function(e,t,n){if(y.ClassType.isTypedDictClass(t.classType)){if(1!==e.items.items.length)return oe("Expected a one index argument",e),y.UnknownType.create();const r=Ot(t.classType),i=z(e.items.items[0]).type,o=new s.DiagnosticAddendum,a=_.doForSubtypes(i,s=>{if(y.isAnyOrUnknown(s))return s;if(8===s.category&&y.ClassType.isBuiltIn(s.classType,"str")){if(!s.literalValue)return y.UnknownType.create();const i=s.literalValue,a=r.get(i);return a?("set"===n.method?Rt(a.valueType,n.setType,o):"del"===n.method&&a.isRequired&&oe(`'${i}' is a required key and cannot be deleted`,e),a.valueType):(o.addMessage(`'${i}' is not a defined key in '${Wt(t)}'`),y.UnknownType.create())}return o.addMessage(`'${Wt(s)}' is not a string literal`),y.UnknownType.create()});if(o.getMessageCount()>0){let t="get";"set"===n.method?t="set":"del"===n.method&&(t="delete"),oe(`Could not ${t} item in TypedDict`+o.getString(),e)}return a}let i;"get"===n.method?i="__getitem__":"set"===n.method?i="__setitem__":(r("del"===n.method),i="__delitem__");const o=G(e,t,i,{method:"get"},new s.DiagnosticAddendum,25);if(!o)return oe(`Object of type '${Wt(t)}' does not define `+`'${i}'`,e.baseExpression),y.UnknownType.create();const a=e.items.items.map(e=>z(e).type);let c;if(1===a.length){c=a[0];const n=t.classType;if(7===n.category&&y.ClassType.isBuiltIn(n,"Tuple")&&n.typeArguments&&41===e.items.items[0].nodeType&&e.items.items[0].isInteger&&!e.items.items[0].isImaginary){const t=e.items.items[0];if(t.isInteger&&t.value>=0&&t.value<n.typeArguments.length)return n.typeArguments[t.value]}}else{const t=pt(e,"Tuple");c=7===t.category?_.convertClassToObject(y.ClassType.cloneForSpecialization(t,a)):y.UnknownType.create()}const l=[{argumentCategory:0,type:c}];"set"===n.method&&l.push({argumentCategory:0,type:n.setType||y.AnyType.create()});return xe(e,l,o,new T.TypeVarMap,!1).returnType||y.UnknownType.create()}(e,o,n):y.isNoneOrNever(o)?(ae(mt(e).diagnosticSettings.reportOptionalSubscript,"reportOptionalSubscript","Optional of type 'None' cannot be subscripted",e.baseExpression),y.UnknownType.create()):(y.isUnbound(o)||oe(`Object of type '${Wt(o)}' cannot be subscripted`,e.baseExpression),y.UnknownType.create())});return e.items.items.forEach(e=>{z(e)}),{type:o,node:e}}function _e(e,t){const n=[];return e.items.forEach(e=>{n.push(function(e,t){let n;n=32===e.nodeType?{type:y.UnknownType.create(),typeList:e.entries.map(e=>z(e,void 0,t)),node:e}:z(e,void 0,17|t);return n}(e,t))}),n}function Te(t){let n,r;if(t.arguments.length>2&&oe("Expecting no more than two arguments to super'",t.arguments[2]),t.arguments.length>0)n=z(t.arguments[0].valueExpression).type,y.isAnyOrUnknown(n)||7===n.category||oe("Expected class type as first argument to super() call but received "+`'${Wt(n)}'`,t.arguments[0].valueExpression);else{const e=p.getEnclosingClass(t);if(e){const t=We(e);n=t?t.classType:y.UnknownType.create()}else oe("Zero-argument form of super call is valid only within a class'",t.leftExpression),n=y.UnknownType.create()}if(t.arguments.length>1){r=z(t.arguments[1].valueExpression).type;let e=!1;if(y.isAnyOrUnknown(r));else if(8===r.category){const t=r.classType;7===n.category&&(_.derivesFromClassRecursive(t,n)||(e=!0))}else 7===r.category?7===n.category&&(_.derivesFromClassRecursive(r,n)||(e=!0)):e=!0;e&&oe(`Second argument to super() call must be object or class that derives from '${Wt(n)}'`,t.arguments[1].valueExpression)}const s=t.parent;if(36===s.nodeType){const t=s.memberName.value,r=_.lookUpClassMember(n,t,e,1);if(r&&7===r.classType.category)return y.ObjectType.create(r.classType)}if(7===n.category){const e=n.details.baseClasses;if(e.length>0){const t=e[0];if(7===t.category)return y.ObjectType.create(t)}}return y.UnknownType.create()}function ve(e,t,n,o,c){let l,u=n.type;const d=0!=(8&c);switch(11===u.category&&(u=_.specializeType(u,void 0)),u.category){case 7:if(y.ClassType.isBuiltIn(u)){const n=u.details.name;if("type"===n){if(t.length>=1){const e=ut(t[0]);8===e.category&&(l=e.classType)}l||(l=y.AnyType.create())}else"TypeVar"===n?l=function(e,t){let n="";if(0===t.length)return void oe("Expected name of type var",e);const r=t[0];r.valueExpression&&49===r.valueExpression.nodeType?n=r.valueExpression.strings.map(e=>e.value).join(""):oe("Expected name of type var as first parameter",r.valueExpression||e);const s=y.TypeVarType.create(n);for(let n=1;n<t.length;n++){const r=t[n].name,i=r?r.value:void 0,o=new Map;if(i){if(o.get(i)&&oe(`Duplicate parameter name '${i}' not allowed`,t[n].valueExpression||e),"bound"===i)if(s.constraints.length>0)oe("A TypeVar cannot be both bound and constrained",t[n].valueExpression||e);else{const r=ut(t[n],!0);_.requiresSpecialization(r)&&oe("A TypeVar bound type cannot be generic",t[n].valueExpression||e),s.boundType=_.convertClassToObject(r)}else"covariant"===i?t[n].valueExpression&&we(t[n].valueExpression)&&(s.isContravariant?oe("A TypeVar cannot be both covariant and contravariant",t[n].valueExpression):s.isCovariant=!0):"contravariant"===i?t[n].valueExpression&&we(t[n].valueExpression)&&(s.isContravariant?oe("A TypeVar cannot be both covariant and contravariant",t[n].valueExpression):s.isContravariant=!0):oe(`'${i}' is unknown parameter to TypeVar`,t[n].valueExpression||e);o.set(i,i)}else if(s.boundType)oe("A TypeVar cannot be both bound and constrained",t[n].valueExpression||e);else{const r=ut(t[n],!0);_.requiresSpecialization(r)&&oe("A TypeVar constraint type cannot be generic",t[n].valueExpression||e),y.TypeVarType.addConstraint(s,_.convertClassToObject(r))}}return s}(e,t):"NamedTuple"===n?l=Ie(e,t,!0):"Protocol"===n||"Generic"===n||"Callable"===n||"Type"===n?oe(`'${n}' cannot be instantiated directly`,e):"Enum"===n||"IntEnum"===n||"Flag"===n||"IntFlag"===n?l=function(e,t,n){let s="enum";if(0===n.length)oe("Expected enum class name as first parameter",e);else{const t=n[0];0!==t.argumentCategory?oe("Expected enum class name as first parameter",n[0].valueExpression||e):t.valueExpression&&49===t.valueExpression.nodeType&&(s=t.valueExpression.strings.map(e=>e.value).join(""))}const o=y.ClassType.create(s,64,e.id);o.details.baseClasses.push(t);const c=o.details.fields;if(c.set("__class__",f.Symbol.createWithType(36,o)),n.length<2)oe("Expected enum item string as second parameter",e);else{const t=n[1];if(0===t.argumentCategory&&t.valueExpression&&49===t.valueExpression.nodeType){t.valueExpression.strings.map(e=>e.value).join("").split(" ").forEach(n=>{if(n=n.trim()){const s=y.UnknownType.create(),o=f.Symbol.createWithType(4,s),l=t.valueExpression;r(49===l.nodeType);const u={type:1,node:l,path:mt(e).filePath,range:i.convertOffsetsToRange(l.start,a.TextRange.getEnd(l),mt(e).lines)};o.addDeclaration(u),c.set(n,o)}})}else oe("Expected enum item string as second parameter",e)}return o}(e,u,t):"TypedDict"===n?l=function(e,t,n){let r="TypedDict";if(0===n.length)oe("Expected TypedDict class name as first parameter",e);else{const t=n[0];0===t.argumentCategory&&t.valueExpression&&49===t.valueExpression.nodeType?r=t.valueExpression.strings.map(e=>e.value).join(""):oe("Expected TypedDict class name as first parameter",n[0].valueExpression||e)}const s=y.ClassType.create(r,16,e.id);s.details.baseClasses.push(t),n.length>=3&&(!n[2].name||"total"!==n[2].name.value||!n[2].valueExpression||11!==n[2].valueExpression.nodeType||14!==n[2].valueExpression.constType&&31!==n[2].valueExpression.constType?oe("Expected 'total' parameter to have a value of 'True' or 'False'",n[2].valueExpression||e):14===n[2].valueExpression.constType&&(s.details.flags|=32));n.length>3&&oe("Extra TypedDict arguments not supported",n[3].valueExpression||e);const o=s.details.fields;if(o.set("__class__",f.Symbol.createWithType(36,s)),n.length<2)oe("Expected dict as second parameter",e);else{const t=n[1];if(0===t.argumentCategory&&t.valueExpression&&15===t.valueExpression.nodeType){const n=t.valueExpression,r=new Map;n.entries.forEach(t=>{if(17!==t.nodeType)return void oe("Expected simple dictionary entry",t);if(49!==t.keyExpression.nodeType)return void oe("Expected string literal for entry name",t.keyExpression);const n=t.keyExpression.strings.map(e=>e.value).join("");if(!n)return void oe("Names within a TypedDict cannot be empty",t.keyExpression);if(r.get(n))return void oe("Names within a named tuple must be unique",t.keyExpression);r.set(n,!0),H(t.valueExpression);const s=new f.Symbol(8),c={type:1,node:t.keyExpression,path:mt(e).filePath,typeAnnotationNode:t.valueExpression,range:i.convertOffsetsToRange(t.keyExpression.start,a.TextRange.getEnd(t.keyExpression),mt(e).lines)};s.addDeclaration(c),o.set(n,s)})}else oe("Expected dict as second parameter",e)}return te(e,s),s}(e,u,t):"auto"===n&&0===t.length&&(l=dt(e,"int"))}else if(y.ClassType.hasAbstractMethods(u)){const t=new Map;Dt(u,t);const n=new s.DiagnosticAddendum,r=[...t.keys()],i=2;r.forEach((e,s)=>{if(s===i)n.addMessage(`and ${r.length-i} more...`);else if(s<i){const r=t.get(e);if(r&&7===r.classType.category){const t=r.classType.details.name;n.addMessage(`'${t}.${e}' is abstract`)}}}),oe(`Cannot instantiate abstract class '${u.details.name}'`+n.getString(),e)}l||(l=Ee(e,t,u,d,o).returnType);break;case 5:if("namedtuple"===u.details.builtInName)ae(mt(e).diagnosticSettings.reportUntypedNamedTuple,"reportUntypedNamedTuple","'namedtuple' provides no types for tuple entries. Use 'NamedTuple' instead.",e),l=Ie(e,t,!1);else if("NewType"===u.details.builtInName){const n=xe(e,t,u,new T.TypeVarMap,d);l=n.argumentErrors?n.returnType:function(e,t){let n="_";if(t.length>=1){const e=t[0];0===e.argumentCategory&&e.valueExpression&&49===e.valueExpression.nodeType&&(n=e.valueExpression.strings.map(e=>e.value).join(""))}if(t.length>=2){const r=ut(t[1],!0);if(7===r.category){const t=-4&r.details.flags,s=y.ClassType.create(n,t,e.id);return s.details.baseClasses.push(r),s}}return}(e,t)}else l=xe(e,t,u,new T.TypeVarMap,d).returnType,"__import__"===u.details.builtInName&&(l=y.AnyType.create());l||(l=y.UnknownType.create());break;case 6:{const n=be(e,t,u);if(n){if("cast"===n.details.builtInName&&2===t.length){const n=ut(t[0],!0),r=ut(t[1]);7===n.category&&8===r.category&&y.isTypeSame(n,r.classType)&&ae(mt(e).diagnosticSettings.reportUnnecessaryCast,"reportUnnecessaryCast",`Unnecessary call to cast: type is already ${Wt(r)}`,e)}l=xe(e,t,u,new T.TypeVarMap,d).returnType,l||(l=y.UnknownType.create())}else{const n=p.printExpression(e),r=new s.DiagnosticAddendum,i=t.map(e=>Wt(ut(e)));r.addMessage(`Argument types: (${i.join(", ")})`),oe(`No overloads for '${n}' match parameters`+r.getString(),e),l=y.UnknownType.create()}break}case 8:{const n=ge(u);if(n)y.isAnyOrUnknown(n)?l=n:7===n.category&&(l=Ee(e,t,n,d,o).returnType);else{const n=G(e,u,"__call__",{method:"get"},new s.DiagnosticAddendum,25);n&&(l=xe(e,t,n,new T.TypeVarMap,d).returnType,l||(l=y.UnknownType.create()))}break}case 10:{const r=[];u.subtypes.forEach(s=>{if(y.isNoneOrNever(s))ae(mt(e).diagnosticSettings.reportOptionalCall,"reportOptionalCall","Object of type 'None' cannot be called",e);else{const i=ve(e,t,{type:s,node:n.node},o,c);i&&r.push(i.type)}}),r.length>0&&(l=y.combineTypes(r));break}case 2:case 1:t.forEach(e=>ut(e)),l=u}return l||(oe(`'${p.printExpression(e)}' has type `+`'${Wt(u)}' and is not callable`,e),l=y.UnknownType.create()),0==(2&c)&&7===l.category&&(l=lt(l,void 0,e)),{type:l,node:n.node}}function be(e,t,n){let r;for(const s of n.overloads)if(ft(()=>{xe(e,t,s,new T.TypeVarMap,!0).argumentErrors||(r=s)}),r)break;return r}function Ee(e,t,n,r,i){let o,a=!1,c=!1;const l=e=>5===e.category&&y.FunctionType.isSkipConstructorCheck(e),u=G(e,y.ObjectType.create(n),"__init__",{method:"get"},new s.DiagnosticAddendum,29);if(u&&!l(u)){const s=new T.TypeVarMap;if(xe(e,t,u,s,r).argumentErrors)c=!0;else{const e=Ce(_.specializeType(n,s),i);o=y.ObjectType.create(e)}a=!0,r=!0}if(!c){const u=me(e,n,"__new__",{method:"get"},new s.DiagnosticAddendum,29);if(u&&!l(u.type)){const s=Lt(n,u.type,!0),l=new T.TypeVarMap;if(xe(e,t,s,l,r).argumentErrors||(c=!0),!o){const e=Ce(_.specializeType(n,l),i);o=y.ObjectType.create(e)}a=!0}}if(!a&&t.length>0)oe(`Expected no arguments to '${n.details.name}' constructor`,e);else if(!o){const e=Ce(n,i);o=y.ObjectType.create(e)}return{argumentErrors:c,returnType:o}}function Ce(e,t){if(!t)return e;const n=y.removeNoneFromUnion(t);if(8!==n.category)return e;if(8!==n.category)return e;const r=n.classType,i=new T.TypeVarMap;if(Rt(r,e,new s.DiagnosticAddendum,i))return _.specializeType(r,i);if(y.ClassType.isSameGenericClass(e,r)&&r.typeArguments&&e.typeArguments&&r.typeArguments.length===e.typeArguments.length){let t=!0;if(r.typeArguments.forEach((n,r)=>{Rt(n,e.typeArguments[r],new s.DiagnosticAddendum,i)||(t=!1)}),t)return _.specializeType(r,i)}return e}function xe(e,t,n,r,i){let o={argumentErrors:!1};switch(n.category){case 1:case 2:t.forEach(e=>ut(e)),o.returnType=n;break;case 5:o=Se(e,t,n,r,i);break;case 6:{const a=be(e,t,n);if(a)o=Se(e,t,a,r,i);else{const n=p.printExpression(e),r=new s.DiagnosticAddendum,i=t.map(e=>Wt(ut(e)));r.addMessage(`Argument types: (${i.join(", ")})`),oe(`No overloads for '${n}' match parameters`+r.getString(),e)}break}case 7:y.ClassType.isSpecialBuiltIn(n)?oe(`'${n.details.name}' cannot be instantiated`,e):o=Ee(e,t,n,i);break;case 8:{const a=G(e,n,"__call__",{method:"get"},new s.DiagnosticAddendum,25);if(a&&5===a.category){o=xe(e,t,_.stripFirstParameter(a),r,i)}break}case 10:{const s=[];for(const o of n.subtypes)if(y.isNoneOrNever(o))ae(mt(e).diagnosticSettings.reportOptionalCall,"reportOptionalCall","Object of type 'None' cannot be called",e);else{const n=xe(e,t,o,r,i);n.returnType&&s.push(n.returnType)}s.length>0&&(o.returnType=y.combineTypes(s));break}}return o}function Se(e,t,n,s,i){let o=0;const a=n.details.parameters,c=a.find(e=>2===e.category);let l=!1;const u=new Map;a.forEach(e=>{e.name&&u.set(e.name,{argsNeeded:0!==e.category||e.hasDefault?0:1,argsReceived:0})});let p=a.findIndex(e=>1===e.category&&!e.name);const d=a.findIndex(e=>0===e.category&&!e.name);p<0&&(p=a.findIndex(e=>1===e.category),p>=0&&p++),p<0&&(p=a.findIndex(e=>2===e.category)),p<0&&(p=a.length);let h=t.findIndex(e=>2===e.argumentCategory||void 0!==e.name);h<0&&(h=t.length),d>=0&&h<d&&(h=Math.min(d,t.length));const f=[];let g=0;for(;o<h;){if(g===d){g++;continue}if(o<d&&t[o].name&&oe("Expected positional argument",t[o].name),g>=p){if(1!==t[o].argumentCategory){oe(`Expected ${p} positional `+`${1===p?"argument":"arguments"}`,t[o].valueExpression||e),l=!0}break}const r=y.FunctionType.getEffectiveParameterType(n,g);if(1===t[o].argumentCategory){if(t[o].valueExpression){const n={argumentCategory:0,type:Z(ut(t[o]),!1,t[o].valueExpression,!1)};f.push({paramType:r,requiresTypeVarMatching:_.requiresSpecialization(r),argument:n,errorNode:t[o].valueExpression||e})}break}if(1===a[g].category)f.push({paramType:r,requiresTypeVarMatching:_.requiresSpecialization(r),argument:t[o],errorNode:t[o].valueExpression||e,paramName:a[g].name}),o++;else{f.push({paramType:r,requiresTypeVarMatching:_.requiresSpecialization(r),argument:t[o],errorNode:t[o].valueExpression||e,paramName:a[g].name});const n=a[g].name;n&&u.get(n).argsReceived++,o++,g++}}if(!l){let s=!1;const i=void 0!==t.find(e=>1===e.argumentCategory);for(;o<t.length;){if(2===t[o].argumentCategory)ut(t[o]),s=!0;else{const s=t[o].name;if(s){const i=s.value,p=u.get(i);if(p)if(p.argsReceived>0)oe(`Parameter '${i}' is already assigned`,s),l=!0;else{u.get(s.value).argsReceived++;const c=a.findIndex(e=>e.name===i);r(c>=0);const l=y.FunctionType.getEffectiveParameterType(n,c);f.push({paramType:l,requiresTypeVarMatching:_.requiresSpecialization(l),argument:t[o],errorNode:t[o].valueExpression||e,paramName:i})}else c?f.push({paramType:c.type,requiresTypeVarMatching:_.requiresSpecialization(c.type),argument:t[o],errorNode:t[o].valueExpression||e,paramName:i}):(oe(`No parameter named '${s.value}'`,s),l=!0)}}o++}if(!s&&!i&&!y.FunctionType.isDefaultParameterCheckDisabled(n)){const t=[...u.keys()].filter(e=>{const t=u.get(e);return t.argsReceived<t.argsNeeded});t.length>0&&(oe(`Argument missing for parameter${1===t.length?"":"s"} `+t.map(e=>`'${e}'`).join(", "),e),l=!0)}}["cast","isinstance","issubclass"].some(e=>e===n.details.builtInName)&&(i=!0),f.some(e=>e.requiresTypeVarMatching)&&ft(()=>{f.forEach(e=>{e.requiresTypeVarMatching&&ke(e,s,i)})}),f.forEach(e=>{ke(e,s,i)||(l=!0)}),gt()||t.forEach(e=>{e.valueExpression&&(f.some(t=>t.argument===e)||z(e.valueExpression))});const m=_.specializeType(Ct(n,f),s);return{argumentErrors:l,returnType:m}}function ke(e,t,n){let r;if(e.argument.valueExpression){let n=_.specializeType(e.paramType,t);1===n.category&&(n=void 0),r=z(e.argument.valueExpression,n).type,e.argument&&e.argument.name&&!gt()&&M(e.argument.name,r)}else r=ut(e.argument);const i=new s.DiagnosticAddendum;if(!Rt(e.paramType,r,i.createAddendum(),t)){const t=e.paramName?`'${e.paramName}' `:"";return oe(`Argument of type '${Wt(r)}'`+` cannot be assigned to parameter ${t}`+`of type '${Wt(e.paramType)}'`+i.getString(),e.errorNode),!1}if(!n){const t=y.removeUnboundFromUnion(r),n=mt(e.errorNode);if(1===t.category)ae(n.diagnosticSettings.reportUnknownArgumentType,"reportUnknownArgumentType","Type of argument is unknown",e.errorNode);else if(_.containsUnknown(t,!0)&&!_.containsUnknown(e.paramType)&&7!==t.category){const r=new s.DiagnosticAddendum;r.addMessage(`Argument type is '${Wt(t)}'`),ae(n.diagnosticSettings.reportUnknownArgumentType,"reportUnknownArgumentType","Type of argument is partially unknown"+r.getString(),e.errorNode)}}return!0}function we(e){if(11===e.nodeType){if(14===e.constType)return!1;if(31===e.constType)return!0}return oe("Expected True or False",e),!1}function Ie(e,t,n){let r="namedtuple";if(0===t.length)oe("Expected named tuple class name as first parameter",e);else{const n=t[0];0!==n.argumentCategory?oe("Expected named tuple class name as first parameter",t[0].valueExpression||e):n.valueExpression&&49===n.valueExpression.nodeType&&(r=n.valueExpression.strings.map(e=>e.value).join(""))}const s=y.ClassType.create(r,0,e.id),o=ne(e,"NamedTuple")||y.UnknownType.create();s.details.baseClasses.push(o);const c=s.details.fields;if(c.set("__class__",f.Symbol.createWithType(36,s)),7===pt(e,"Tuple").category){const r=y.FunctionType.create(65);r.details.declaredReturnType=y.ObjectType.create(s),p.isAssignmentToDefaultsFollowingNamedTuple(e)&&(r.details.flags|=32),y.FunctionType.addParameter(r,{category:0,name:"cls",type:s});const o={category:0,name:"self",type:y.ObjectType.create(s)};let l=!1;if(t.length<2)oe("Expected named tuple entry list as second parameter",e),l=!0;else{const s=t[1];if(0!==s.argumentCategory)l=!0;else if(!n&&s.valueExpression&&49===s.valueExpression.nodeType){s.valueExpression.strings.map(e=>e.value).join("").split(/[,\s]+/).forEach(t=>{if(t=t.trim()){const n=y.UnknownType.create(),o={category:0,name:t,type:n};y.FunctionType.addParameter(r,o);const l=f.Symbol.createWithType(8,n),u=s.valueExpression,p={type:1,node:u,path:mt(e).filePath,range:i.convertOffsetsToRange(u.start,a.TextRange.getEnd(u),mt(e).lines)};l.addDeclaration(p),c.set(t,l)}})}else if(s.valueExpression&&32===s.valueExpression.nodeType){const t=s.valueExpression,o=new Map;t.entries.forEach((t,s)=>{let l,u,p,d="";if(n)if(53===t.nodeType&&2===t.expressions.length){p=t.expressions[0],l=t.expressions[1];const e=z(l,void 0,16);e&&(u=_.convertClassToObject(e.type))}else oe("Expected two-entry tuple specifying entry name and type",t);else p=t,u=y.UnknownType.create();p&&49===p.nodeType?(d=p.strings.map(e=>e.value).join(""),d||oe("Names within a named tuple cannot be empty",p)):oe("Expected string literal for entry name",p||t),d||(d=`_${s.toString()}`),o.has(d)&&oe("Names within a named tuple must be unique",p||t),o.set(d,d),u||(u=y.UnknownType.create());const h={category:0,name:d,type:u};y.FunctionType.addParameter(r,h);const g=f.Symbol.createWithType(8,u);if(p&&49===p.nodeType){const t={type:1,node:p,path:mt(e).filePath,typeAnnotationNode:l,range:i.convertOffsetsToRange(p.start,a.TextRange.getEnd(p),mt(e).lines)};g.addDeclaration(t)}c.set(d,g)})}else l=!0}l&&_.addDefaultFunctionParameters(r);const u=y.FunctionType.create(192);y.FunctionType.addParameter(u,o),_.addDefaultFunctionParameters(u),u.details.declaredReturnType=y.NoneType.create(),c.set("__new__",f.Symbol.createWithType(4,r)),c.set("__init__",f.Symbol.createWithType(4,u));const d=y.FunctionType.create(64);d.details.declaredReturnType=dt(e,"list",[dt(e,"str")]),c.set("keys",f.Symbol.createWithType(8,d)),c.set("items",f.Symbol.createWithType(8,d));const h=y.FunctionType.create(64);if(h.details.declaredReturnType=dt(e,"int"),y.FunctionType.addParameter(h,o),c.set("__len__",f.Symbol.createWithType(4,h)),l){const t=y.FunctionType.create(64);t.details.declaredReturnType=y.AnyType.create(),y.FunctionType.addParameter(t,o),y.FunctionType.addParameter(t,{category:0,name:"name",type:dt(e,"str")}),c.set("__getattribute__",f.Symbol.createWithType(4,t))}}return s}function Fe(e){const t={1:["__iadd__",0],33:["__isub__",32],26:["__imul__",25],14:["__ifloordiv__",13],11:["__itruediv__",10],24:["__imod__",23],29:["__ipow__",28],22:["__imatmul__",21],4:["__iand__",3],7:["__ior__",6],9:["__ixor__",8],18:["__ilshift__",17],31:["__irshift__",30]};let n,r;ft(()=>{r=z(e.leftExpression).type}),11===r.category&&(r=_.specializeType(r,void 0));let s=z(e.rightExpression).type;if(11===s.category&&(s=_.specializeType(s,void 0)),n=_.doForSubtypes(r,n=>_.doForSubtypes(s,r=>{if(y.isAnyOrUnknown(n)||y.isAnyOrUnknown(r))return 1===n.category||1===r.category?y.UnknownType.create():y.AnyType.create();const s=t[e.operator][0];return Re(n,[r],s,e)})),!n||4===n.category){n=Ne(t[e.operator][1],r,s,e)}return n}function Ne(t,n,r,s){let i;return b[t]?i=_.doForSubtypes(n,e=>_.doForSubtypes(r,n=>{if(y.isAnyOrUnknown(e)||y.isAnyOrUnknown(n))return 1===e.category||1===n.category?y.UnknownType.create():y.AnyType.create();const r=b[t][0],i=Re(e,[n],r,s);if(i)return i;const o=b[t][1];return Re(n,[e],o,s)})):E[t]?i=_.doForSubtypes(n,e=>_.doForSubtypes(r,n=>{if(y.isAnyOrUnknown(e)||y.isAnyOrUnknown(n))return 1===e.category||1===n.category?y.UnknownType.create():y.AnyType.create();const r=E[t][0];return Re(e,[n],r,s)})):C[t]?i=_.doForSubtypes(n,e=>_.doForSubtypes(r,n=>{if(y.isAnyOrUnknown(e)||y.isAnyOrUnknown(n))return 1===e.category||1===n.category?y.UnknownType.create():y.AnyType.create();const r=C[t][0],i=Re(e,[n],r,s);if(i)return i;const o=C[t][1];return Re(n,[e],o,s)})):x[t]&&(35===t?n=_.removeTruthinessFromType(n,e):36===t&&(n=_.removeFalsinessFromType(n)),i=_.doForSubtypes(n,e=>_.doForSubtypes(r,n=>35===t||36===t?y.combineTypes([e,n]):dt(s,"bool")))),i&&4!==i.category||(oe(`Operator '${p.printOperator(t)}' not `+`supported for types '${Wt(n)}' and '${Wt(r)}'`,s),i=y.UnknownType.create()),i}function Re(e,t,n,r){let i=!0;const o=(e,o)=>{const a=G(r,e,n,{method:"get"},new s.DiagnosticAddendum,25,o);if(a){const e=t.map(e=>({argumentCategory:0,type:e}));let n;return ft(()=>{n=xe(r,e,a,new T.TypeVarMap,!0)}),n.argumentErrors&&(i=!1),n.returnType}i=!1},a=_.doForSubtypes(e,e=>{if(y.isAnyOrUnknown(e))return e;if(8===e.category)return o(e);if(7===e.category){const t=_.getMetaclass(e);if(t&&7===t.category)return o(y.ObjectType.create(t),e)}else if(y.isNoneOrNever(e)){const e=dt(r,"object");if(8===e.category)return o(e)}i=!1});if(i)return a}function Pe(e,t,n,r,i){if("none"===e)return;const o=n.value,a=y.removeUnboundFromUnion(r);if(1===a.category)ae(e,t,`Type of '${o}' is unknown`,i);else if(_.containsUnknown(a)){const n=new s.DiagnosticAddendum;n.addMessage(`Type of ${o} is '${Wt(a)}'`),ae(e,t,`Type of '${o}' is partially unknown`+n.getString(),i)}}function Ae(e){for(const t of e.comprehensions)if(34===t.nodeType){const e=Z(_.stripLiteralValue(z(t.iterableExpression).type),!!t.isAsync,t.iterableExpression,!1);ue(t.targetExpression,e,t.iterableExpression)}else r(35===t.nodeType),z(t.testExpression);let t=y.UnknownType.create();if(17===e.expression.nodeType){t=dt(e,"Tuple",[_.stripLiteralValue(z(e.expression.keyExpression).type),_.stripLiteralValue(z(e.expression.valueExpression).type)])}else 16===e.expression.nodeType?z(e.expression.expandExpression):c.isExpressionNode(e)&&(t=_.stripLiteralValue(z(e.expression).type));return t}function De(e,t,n){let r=dt(e,t);return 8===r.category&&(r=y.ObjectType.cloneWithLiteral(r,n)),r}function Oe(e,t,n,r=!1){t&&t.forEach((e,n)=>{_.isEllipsisType(e.type)&&(r?2===t.length&&1===n||oe("'...' allowed only as the second of two arguments",t[n].node):oe("'...' not allowed in this context",t[n].node),9===e.type.category&&oe("Module not allowed in this context",e.node))});let s=t?t.map(e=>_.convertClassToObject(e.type)):[];if(void 0!==n)if(t&&s.length>n)oe(`Expected at most ${n} type `+`${1===n?"argument":"arguments"}`,t[n].node),s=s.slice(0,n);else if(s.length<n)for(;s.length<n;)s.push(y.UnknownType.create());return!t&&r&&(s.push(y.AnyType.create(!1)),s.push(y.AnyType.create(!0))),y.ClassType.cloneForSpecialization(e,s)}function Le(e,t){const n=p.getEnclosingClass(e,!0);if(n){const e=We(n);if(e&&y.ClassType.isEnumClass(e.classType)){if(y.ClassType.isBuiltIn(e.classType)){const n=e.classType.details.name;if(["Enum","IntEnum","Flag","IntFlag"].find(e=>e===n))return t}return y.ObjectType.create(e.classType)}}return t}function Me(t,n,r){const s=y.ClassType.create(n,3,t.id),i=r.alias?r.alias:"object";let o;if("builtins"===r.module)o=pt(t,i);else if("collections"===r.module){const n=mt(t);if(n.collectionsModulePath){const t=e(n.collectionsModulePath);if(t){const e=t.symbolTable.get(i);e&&(o=bt(e))}}}else if("self"===r.module){const e=ht(t,i);e&&(o=bt(e.symbol))}return o&&7===o.category&&7===s.category?(s.details.baseClasses.push(o),r.alias&&(s.details.aliasClass=o)):s.details.baseClasses.push(y.UnknownType.create()),s}function Ue(e){const t=mt(e);if(L(e))return;let n=L(e.rightExpression);if(!n&&(t.isTypingStubFile&&(n=function(e){if(39!==e.leftExpression.nodeType)return;const t=e.leftExpression.value;if("Any"===t)return y.AnyType.create();const n={overload:{alias:"",module:"builtins"},TypeVar:{alias:"",module:"builtins"},_promote:{alias:"",module:"builtins"},no_type_check:{alias:"",module:"builtins"},NoReturn:{alias:"",module:"builtins"},Union:{alias:"",module:"builtins"},Optional:{alias:"",module:"builtins"},List:{alias:"list",module:"builtins"},Dict:{alias:"dict",module:"builtins"},DefaultDict:{alias:"defaultdict",module:"collections"},Set:{alias:"set",module:"builtins"},FrozenSet:{alias:"frozenset",module:"builtins"},Deque:{alias:"deque",module:"collections"},ChainMap:{alias:"ChainMap",module:"collections"}}[t];return n?Me(e,t,n):void 0}(e),n&&M(e.rightExpression,n)),!n)){const r=X(e.leftExpression);let i=2;t.isStubFile&&(i|=1);let o=z(e.rightExpression,r,i).type;const a=h.evaluateStaticBoolExpression(e.rightExpression,t.executionEnvironment);if(void 0!==a){const t=dt(e,"bool");8===t.category&&(o=y.ObjectType.cloneWithLiteral(t,a))}if(r){Rt(r,o,new s.DiagnosticAddendum)&&(o=At(r,o))}n=o,39!==e.leftExpression.nodeType||e.typeAnnotationComment||(n=Le(e.leftExpression,n))}ue(e.leftExpression,n,e.rightExpression),M(e,n)}function $e(e){if(L(e))return;const t=Fe(e);ue(e.destExpression,t,e.rightExpression),M(e,t)}function We(t){let n=L(t.name),r=L(t);if(n)return{classType:n,decoratedType:r||y.UnknownType.create()};const s=d.getScopeForNode(t),i=mt(t);let a=0;(4===s.type||i.isTypingStubFile||i.isBuiltInStubFile)&&(a|=1,"property"===t.name.value&&(a|=512)),n=y.ClassType.create(t.name.value,a,t.id,p.getDocString(t.suite.statements)),V(s.lookUpSymbol(t.name.value),l.getDeclaration(t),n),M(t,n),M(t.name,n);const c=[];let u,f=!1,g=0;t.arguments.forEach(e=>{if(e.name&&"metaclass"!==e.name.value){if("total"===e.name.value&&y.ClassType.isTypedDictClass(n)){const t=h.evaluateStaticBoolExpression(e.valueExpression,i.executionEnvironment);void 0===t?oe("Value for total parameter must be True or False",e.valueExpression):t||(n.details.flags|=32)}}else{let t=z(e.valueExpression).type;const r=!!e.name;if(r&&(f&&oe("Only one metaclass can be provided",e),f=!0),10===t.category&&(t=y.removeUnboundFromUnion(t)),y.isAnyOrUnknown(t)||0===t.category||(t=_.transformTypeObjectToClass(t),7!==t.category?(oe("Argument to class must be a base class",e),t=y.UnknownType.create()):(y.ClassType.isBuiltIn(t,"Protocol")&&!i.isStubFile&&i.executionEnvironment.pythonVersion<o.PythonVersion.V37&&oe("Use of 'Protocol' requires Python 3.7 or newer",e.valueExpression),y.ClassType.isBuiltIn(t,"property")&&(n.details.flags|=512),i.executionEnvironment.pythonVersion>=o.PythonVersion.V36&&y.ClassType.isBuiltIn(t,"NamedTuple")&&(n.details.flags|=4),y.ClassType.isBuiltIn(t,"TypedDict")||y.ClassType.isTypedDictClass(t)?n.details.flags|=16:y.ClassType.isTypedDictClass(n)&&!y.ClassType.isTypedDictClass(t)&&oe("All base classes for TypedDict classes must als be TypedDict classes",e),_.derivesFromClassRecursive(t,n)&&(oe("Class cannot derive from itself",e),t=y.UnknownType.create()))),(1===t.category||10===t.category&&t.subtypes.some(e=>1===e.category))&&ae(i.diagnosticSettings.reportUntypedBaseClass,"reportUntypedBaseClass","Base class type is unknown, obscuring type of derived class",e),r)n.details.metaClass=t,7===t.category&&(y.ClassType.isBuiltIn(t,"EnumMeta")?n.details.flags|=64:y.ClassType.isBuiltIn(t,"ABCMeta")&&(n.details.flags|=128));else if(n.details.baseClasses.push(t),7===t.category&&(y.ClassType.isEnumClass(t)&&(n.details.flags|=64),y.ClassType.supportsAbstractMethods(t)&&(n.details.flags|=128),y.ClassType.isPropertyClass(t)&&(n.details.flags|=512),y.ClassType.isFinal(t))){oe(`Base class '${Ut(t)}' is marked final and cannot be subclassed`,e.valueExpression)}_.addTypeVarsToListIfUnique(c,_.getTypeVarArgumentsRecursive(t)),7===t.category&&y.ClassType.isBuiltIn(t,"Generic")&&(u?oe("Class cannot derive from 'Generic' more than once",e.valueExpression):(u=[],_.addTypeVarsToListIfUnique(u,_.getTypeVarArgumentsRecursive(t)))),r||g++}}),0===g&&(y.ClassType.isBuiltIn(n,"object")||n.details.baseClasses.push(pt(t,"object"))),n.details.typeParameters=u||c;const m=d.getScopeForNode(t.suite);n.details.fields=m.symbolTable,y.ClassType.isTypedDictClass(n)&&te(t,n),y.ClassType.supportsAbstractMethods(n)&&function(e){const t=new Map;return Dt(e,t),t.size>0}(n)&&(n.details.flags|=256),r=n;let T=!1;for(let e=t.decorators.length-1;e>=0;e--){const s=t.decorators[e],o=Be(r,n,s);1===o.category?T||(ae(i.diagnosticSettings.reportUntypedClassDecorator,"reportUntypedClassDecorator","Untyped class decorator obscures type of class, ignoring decorator",t.decorators[e].leftExpression),T=!0):r=o}if(y.ClassType.isDataClass(n)){let r=y.ClassType.isSkipSynthesizedInit(n);if(!r){const t=_.lookUpClassMember(n,"__init__",e,2);if(t){const e=kt(t);5===e.category&&y.FunctionType.isSynthesizedMethod(e)||(r=!0)}}ee(t,n,r)}return M(t.name,n),M(t,r),{classType:n,decoratedType:r}}function Be(e,t,n){const r=z(n.leftExpression).type;if(6===r.category){const s=r.overloads;if(s.length>0&&"dataclass"===s[0].details.builtInName){let r=!1;return n.arguments&&n.arguments.forEach(e=>{if(e.name&&"init"===e.name.value&&e.valueExpression){const t=mt(n);h.evaluateStaticBoolExpression(e.valueExpression,t.executionEnvironment)||(r=!0)}}),t.details.flags|=4,r&&(t.details.flags|=8),e}}else 5===r.category&&"final"===r.details.builtInName&&(t.details.flags|=1024);return K(n,e)}function Ve(e){const t=mt(e);let n=L(e.name),r=L(e);if(n)return{functionType:n,decoratedType:r||y.UnknownType.create()};const i=l.getDeclaration(e),o=p.getEnclosingClass(e,!0);let a;if(o){const e=We(o);if(!e)return;a=e.classType}let c=je(e,!!o);if(i.isGenerator&&(c|=16),t.isStubFile&&(c|=2048),e.isAsync&&(c|=512),n=y.FunctionType.create(c,p.getDocString(e.suite.statements)),(t.isBuiltInStubFile||t.isTypingStubFile)&&(n.details.builtInName=e.name.value),n.details.declaration=i,V(d.getScopeForNode(e).lookUpSymbol(e.name.value),i,n),M(e,n),M(e.name,n),e.returnTypeAnnotation){const t=H(e.returnTypeAnnotation);n.details.declaredReturnType=t}const u=[];if(e.parameters.forEach(r=>{let i,o,a,c,l=!1;if(r.typeAnnotation&&(o=H(r.typeAnnotation),r.defaultValue&&11===r.defaultValue.nodeType&&24===r.defaultValue.constType&&(l=!0,t.diagnosticSettings.strictParameterNoneValue||(o=y.combineTypes([o,y.NoneType.create()]))),a=_.specializeType(o,void 0)),r.defaultValue&&(c=z(r.defaultValue,o,1).type),r.typeAnnotation&&o){if(r.defaultValue&&c&&a){const e=new s.DiagnosticAddendum;if(!Rt(a,c,e)){const t=oe(`Value of type '${Wt(c)}' cannot`+` be assigned to parameter of type '${Wt(o)}'`+e.getString(),r.defaultValue);if(l){const e={action:"pyright.addoptionalforparam",offsetOfTypeNode:r.typeAnnotation.start+1};t&&t.addAction(e)}}}i=o}const p={category:r.category,name:r.name?r.name.value:void 0,hasDefault:!!r.defaultValue,type:i||y.UnknownType.create()};if(y.FunctionType.addParameter(n,p),r.name){const t=function(e,t,n){switch(t){case 0:return n;case 1:{const t=ne(e,"Tuple");return t&&7===t.category?y.ObjectType.create(y.ClassType.cloneForSpecialization(t,[n,y.AnyType.create(!0)])):y.UnknownType.create()}case 2:{const t=pt(e,"Dict"),r=dt(e,"str");return 7===t.category&&8===r.category?y.ObjectType.create(y.ClassType.cloneForSpecialization(t,[r,n])):y.UnknownType.create()}}}(e,r.category,p.type);u.push(t)}else u.push(p.type)}),o&&n.details.parameters.length>0&&!e.parameters[0].typeAnnotation&&a){const e=qe(n.details.flags,a);e&&(n.details.parameters[0].type=e,u[0]=e)}u.forEach((t,r)=>{const s=e.parameters[r].name;s&&(1===t.category&&(n.details.flags|=8192),M(s,t))}),r=e.isAsync?function(e,t){const n=y.FunctionType.clone(t);t.details.declaredReturnType&&(n.details.declaredReturnType=He(e,t.details.declaredReturnType));return n.details.flags|=1024,n}(e,n):n;let h=!1;for(let s=e.decorators.length-1;s>=0;s--){const i=e.decorators[s],o=ze(r,n,i);1===o.category?h||(ae(t.diagnosticSettings.reportUntypedFunctionDecorator,"reportUntypedFunctionDecorator","Untyped function decorator obscures type of function, ignoring decorator",e.decorators[s].leftExpression),h=!0):r=o}return r===n&&(r=function(e,t){const n=l.getDeclaration(e),r=ht(e,e.name.value);if(r){const e=r.symbol.getDeclarations();let s=e.findIndex(e=>e===n);if(s>0){const n=[t];for(;s>0;){const t=e[s-1];if(3!==t.type)break;const r=Ve(t.node);if(!r)break;if(!y.FunctionType.isOverloaded(r.functionType))break;n.unshift(r.functionType),s--}if(n.length>1){const e=y.OverloadedFunctionType.create();return e.overloads=n,e}}}return t}(e,r)),M(e.name,n),M(e,r),{functionType:n,decoratedType:r}}function qe(e,t){if(0==(4&e)&&t){if(y.ClassType.isProtocol(t))return y.AnyType.create();if(3&e)return _.selfSpecializeClassType(t,!0);if(0==(4&e)){const e=_.selfSpecializeClassType(t);return y.ObjectType.create(e)}}}function je(e,t){let n=0;"__new__"===e.name.value&&t&&(n|=1);for(const r of e.decorators){const e=z(r.leftExpression,void 0,2).type;5===e.category?"abstractmethod"===e.details.builtInName?t&&(n|=8):"final"===e.details.builtInName&&(n|=4096):7===e.category&&(y.ClassType.isBuiltIn(e,"staticmethod")?t&&(n|=4):y.ClassType.isBuiltIn(e,"classmethod")&&t&&(n|=2))}return n}function ze(e,t,n){const r=z(n.leftExpression,void 0,2).type;if(7===r.category&&y.ClassType.isSpecialBuiltIn(r,"overload")&&5===e.category)return e.details.flags|=256,e;const s=K(n,e);if(5===r.category){if("abstractmethod"===r.details.builtInName)return e;if(36===n.leftExpression.nodeType){const e=z(n.leftExpression.leftExpression).type;if(_.isProperty(e)){const r=n.leftExpression.memberName.value;if("setter"===r)return function(e,t){if(!_.isProperty(e))return e;const n=e.classType,r=y.ClassType.create(n.details.name,n.details.flags,n.details.typeSourceId),s=y.ObjectType.create(r),i=r.details.fields;n.details.fields.forEach((e,t)=>{e.isIgnoredForProtocolMatch()||i.set(t,e)});const o=f.Symbol.createWithType(4,t);i.set("fset",o);const a=y.FunctionType.create(64);a.details.parameters.push({category:0,name:"self",type:t.details.parameters.length>0?t.details.parameters[0].type:y.AnyType.create()}),a.details.parameters.push({category:0,name:"obj",type:s}),a.details.declaredReturnType=y.NoneType.create();let c=y.UnknownType.create();t.details.parameters.length>=2&&0===t.details.parameters[1].category&&t.details.parameters[1].name&&(c=t.details.parameters[1].type);a.details.parameters.push({category:0,name:"value",type:c});const l=f.Symbol.createWithType(4,a);return i.set("__set__",l),s}(e,t);if("deleter"===r)return function(e,t){if(!_.isProperty(e))return e;const n=e.classType,r=y.ClassType.create(n.details.name,n.details.flags,n.details.typeSourceId),s=y.ObjectType.create(r),i=r.details.fields;n.details.fields.forEach((e,t)=>{e.isIgnoredForProtocolMatch()||i.set(t,e)});const o=f.Symbol.createWithType(4,t);i.set("fdel",o);const a=y.FunctionType.create(64);a.details.parameters.push({category:0,name:"self",type:t.details.parameters.length>0?t.details.parameters[0].type:y.AnyType.create()}),a.details.parameters.push({category:0,name:"obj",type:s}),a.details.declaredReturnType=y.NoneType.create();const c=f.Symbol.createWithType(4,a);return i.set("__delete__",c),s}(e,t)}}}else if(7===r.category){if(y.ClassType.isBuiltIn(r))switch(r.details.name){case"classmethod":case"staticmethod":return e}if(y.ClassType.isPropertyClass(r)&&5===e.category)return function(e,t,n){const r=y.ClassType.create(e,512,n),s=y.ObjectType.create(r),i=r.details.fields,o=f.Symbol.createWithType(4,t);i.set("fget",o);const a=y.FunctionType.create(64);a.details.parameters.push({category:0,name:"self",type:t.details.parameters.length>0?t.details.parameters[0].type:y.AnyType.create()}),a.details.parameters.push({category:0,name:"obj",type:s}),a.details.declaredReturnType=t.details.declaredReturnType,a.details.declaration=t.details.declaration;const c=f.Symbol.createWithType(4,a);i.set("__get__",c);const l=y.FunctionType.create(64);l.details.parameters.push({category:0,name:"self",type:s}),l.details.parameters.push({category:0,name:"accessor",type:y.AnyType.create()}),l.details.declaredReturnType=s;const u=f.Symbol.createWithType(4,l);return i.set("getter",u),i.set("setter",u),i.set("deleter",u),s}(r.details.name,e,n.id)}return s}function He(e,t){let n;if(8===t.category){const r=t.classType;if(y.ClassType.isBuiltIn(r))if("Generator"===r.details.name){const t=ne(e,"AsyncGenerator");if(t&&7===t.category){const e=[],s=r.typeArguments;s&&s.length>0&&e.push(s[0]),s&&s.length>1&&e.push(s[1]),n=y.ObjectType.create(y.ClassType.cloneForSpecialization(t,e))}}else["AsyncGenerator","AsyncIterator","AsyncIterable"].some(e=>e===r.details.name)&&(n=t)}if(!n){const r=ne(e,"Awaitable");n=r&&7===r.category?y.ObjectType.create(y.ClassType.cloneForSpecialization(r,[t])):y.UnknownType.create()}return n}function Ke(e,t){r(!e.returnTypeAnnotation);let n=L(e.suite);if(n)return n;if(!F.has(e.id)){F.set(e.id,!0);const r=l.getDeclaration(e);if(r.yieldExpressions){const t=[];r.yieldExpressions.forEach(e=>{if(re(e))if(e.expression){const n=z(e.expression).type;t.push(n||y.UnknownType.create())}else t.push(y.NoneType.create())}),0===t.length&&t.push(y.NoneType.create()),n=y.combineTypes(t);const s=ne(e,"Generator");n=s&&7===s.category?y.ObjectType.create(y.ClassType.cloneForSpecialization(s,[n])):y.UnknownType.create()}else{const s=!se(e),i=se(e.suite);if(mt(e).isStubFile)n=y.UnknownType.create();else if(s)if(t)n=y.UnknownType.create();else{const t=ne(e,"NoReturn");n=t&&7===t.category?y.ObjectType.create(t):y.UnknownType.create()}else{const e=[];r.returnExpressions&&r.returnExpressions.forEach(t=>{if(re(t))if(t.returnExpression){const n=z(t.returnExpression).type;e.push(n||y.UnknownType.create())}else e.push(y.NoneType.create())}),!s&&i&&e.push(y.NoneType.create()),n=y.combineTypes(e)}}n=y.removeUnboundFromUnion(n),M(e.suite,n),F.delete(e.id)}return n}function Ge(e){if(L(e))return;const t=Z(z(e.iterableExpression).type,!!e.isAsync,e.iterableExpression,!e.isAsync);ue(e.targetExpression,t,e.targetExpression),M(e,t)}function Ye(e){if(r(void 0!==e.typeExpression),L(e))return;const t=z(e.typeExpression).type;function n(e,t){if(y.isAnyOrUnknown(e))return e;if(7===e.category)return y.ObjectType.create(e);if(8===e.category){const n=Z(e,!1,t,!1);return _.doForSubtypes(n,e=>{if(y.isAnyOrUnknown(e))return e;const t=_.transformTypeObjectToClass(e);return 7===t.category?y.ObjectType.create(t):y.UnknownType.create()})}return y.UnknownType.create()}const s=_.doForSubtypes(t,t=>{const r=_.getSpecializedTupleType(t);if(r&&r.typeArguments){const t=r.typeArguments.map(t=>n(t,e.typeExpression));return y.combineTypes(t)}return n(t,e.typeExpression)});e.name&&ue(e.name,s),M(e,s)}function Qe(e){if(L(e))return;let t=z(e.expression).type;const n=e.parent&&59===e.parent.nodeType&&!!e.parent.isAsync;if(_.isOptionalType(t)){ae(mt(e).diagnosticSettings.reportOptionalContextManager,"reportOptionalContextManager","Object of type 'None' cannot be used with 'with'",e.expression),t=y.removeNoneFromUnion(t)}const r=n?"__aenter__":"__enter__",i=_.doForSubtypes(t,t=>{if(y.isAnyOrUnknown(t))return t;const i=new s.DiagnosticAddendum;if(8===t.category){const s=G(e.expression,t,r,{method:"get"},i,0);if(s){let t;return t=5===s.category?Ct(s):y.UnknownType.create(),n&&(t=J(t,e)),t}}return oe(`Type ${Wt(t)} cannot be used `+`with 'with' because it does not implement '${r}'`+i.getString(),e.expression),y.UnknownType.create()});e.target&&ue(e.target,i,e.target),M(e,i)}function Xe(e){if(L(e))return;let t;if(t=e.alias?e.alias:e.module.nameParts[0],!t)return;let n=Ze(e,t.value)||y.UnknownType.create();const r=L(e);r&&9===r.category&&n&&y.isTypeSame(n,r)&&(n=r),ce(t,n),M(e,n)}function Je(t){if(L(t))return;const n=t.alias||t.name;let s=Ze(t,n.value);if(!s){const n=t.parent;r(n&&22===n.nodeType),r(!n.isWildcardImport);const i=l.getImportInfo(n.module);if(i&&i.isImportFound){const n=i.resolvedPaths[i.resolvedPaths.length-1],r=e(n);if(r){(mt(t).executionEnvironment.pythonVersion<o.PythonVersion.V37||!r.symbolTable.get("__getattr__"))&&oe(`'${t.name.value}' is unknown import symbol`,t.name)}}s=y.UnknownType.create()}ce(n,s),M(t,s)}function Ze(e,t){const n=ht(e,t);if(!n)return;const r=n.symbol.getDeclarations().find(e=>6===e.type);if(!r)return;const s=vt(r);return s?Tt(r):s}function et(e){let t=e,n=e;function r(e){return 9===e.nodeType||15===e.nodeType||28===e.nodeType||32===e.nodeType||31===e.nodeType||36===e.nodeType||46===e.nodeType||50===e.nodeType||53===e.nodeType||57===e.nodeType||17===e.nodeType||16===e.nodeType||33===e.nodeType}for(;n&&(c.isExpressionNode(n)||r(n));)r(n)&&(t=n),n=n.parent;const s=t.parent;if(3!==s.nodeType)if(5!==s.nodeType)if(55!==s.nodeType){if(38!==s.nodeType)if(45===s.nodeType&&s.returnExpression){const t=p.getEnclosingFunction(e),n=t?St(t):void 0;z(s.returnExpression,n,0)}else z(c.isExpressionNode(s)&&0!==s.nodeType?s:t)}else H(s.typeAnnotation);else $e(s);else t===s.typeAnnotationComment?H(t):Ue(s)}function tt(e){r(e.name);const t=e.parent;if(31===t.nodeType)return void et(t);r(29===t.nodeType);const n=t;if(e.typeAnnotation)M(e.name,H(e.typeAnnotation));else{if(0===n.parameters.findIndex(t=>t===e)){const t=p.getEnclosingClass(n,!0);if(t){const r=We(t);if(r){const t=qe(je(n,!0),r.classType);return void M(e.name,t||y.UnknownType.create())}}}M(e.name,y.UnknownType.create())}}function nt(e){let t=e;for(;t;){switch(t.nodeType){case 3:return void Ue(t);case 4:return void z(t);case 5:return void $e(t);case 10:return void We(t);case 42:return void tt(t);case 31:return void et(t);case 29:return void Ve(t);case 27:return void Ge(t);case 26:return void Ye(t);case 60:return void Qe(t);case 34:{const e=t.parent;return r(33===e.nodeType),void et(e)}case 21:return void Xe(t);case 23:return void Je(t)}t=t.parent}r.fail("Unexpected assignment target")}function rt(e,t){const n=l.getImportInfo(e.node.module);r(n&&n.isImportFound),r(e.node.isWildcardImport);const s=ht(e.node,t);r(s);const i=s.symbol.getDeclarations().find(t=>t.node===e.node);return i&&Tt(i)||y.UnknownType.create()}function st(t){if(N.has(t.id))return N.get(t.id);N.set(t.id,!1);let n=!1;const r=function t(n){if(39===n.nodeType){const e=ht(n,n.value);if(!e)return;const t=e.symbol,r=Et(t);if(r)return r;const s=t.getDeclarations();if(0===s.length)return;const i=s[s.length-1];return 2===i.type?(tt(i.node),L(i.node.name)):6===i.type?Tt(i):void 0}if(36===n.nodeType){const r=n.memberName.value,s=t(n.leftExpression);if(!s)return;let i;if(9===s.category)i=y.ModuleType.getField(s,r);else if(7===s.category){const t=_.lookUpClassMember(s,r,e);i=t?t.symbol:void 0}else if(8===s.category){const t=_.lookUpClassMember(s.classType,r,e);i=t?t.symbol:void 0}if(!i)return;return Et(i)}}(t.leftExpression);if(r){let e;if(5===r.category)e=r;else if(6===r.category){const t=r;e=t.overloads[t.overloads.length-1]}e&&(e.details.declaredReturnType?n=_.isNoReturnType(e.details.declaredReturnType):e.inferredReturnType?n=_.isNoReturnType(e.inferredReturnType):e.details.declaration&&(e.details.declaration.yieldExpressions||y.FunctionType.isAbstractMethod(e)||y.FunctionType.isStubDefinition(e)||(n=!se(e.details.declaration.node))))}return N.set(t.id,n),n}function it(e,t,n){const s=u.createKeyForReference(e),i=p.getExecutionScopeNode(e),o=l.getCodeFlowExpressions(i);if(r(void 0!==o),!o.has(s))return;const a=p.getExecutionScopeNode(e);let c;return U(a)?c=function(){const e=D.length;return r(e>0),D[e-1].codeFlowAnalyzer}():(c=R.get(a.id),c||(c=ot(),R.set(a.id,c))),c.getTypeFromCodeFlow(e,t,n).type}function ot(){const e=new Map;return{getTypeFromCodeFlow:function(t,n,s){const i=l.getFlowNode(t),o=u.createKeyForReference(t)+`.${n.toString()}`;let a=e.get(o);function c(e,t,n){const r=gt()||n?{category:w,type:t,speculativeModeId:A,isIncomplete:n}:t;return a.set(e.id,r),{type:t,isIncomplete:n}}function d(e){a.delete(e.id)}function h(e){const t=a.get(e.id);if(!t)return;if(t.category!==w)return{type:t,isIncomplete:!1};const n=t;return n.speculativeModeId===k||gt()?{type:n.type,isIncomplete:!!n.isIncomplete}:void 0}function f(e){let t=e.node;const n=e.node.parent;n&&(29!==n.nodeType&&10!==n.nodeType||(t=n));let s=L(t);return s||(nt(e.node),s=L(t),s||(r.fail("evaluateAssignmentFlowNode failed to evaluate target"),s=y.UnknownType.create())),s}return a||(a=new Map,e.set(o,a)),i?function e(t,n,s,i){let o=t;for(;;){const t=h(o);if(t)return t;if(o.flags&u.FlowFlags.Unreachable)return c(o,void 0,!1);if(o.flags&u.FlowFlags.Call){const e=o;if(st(e.node))return c(o,void 0,!1);o=e.antecedent}else if(o.flags&u.FlowFlags.Assignment){const e=o;if(s===e.targetSymbolId&&p.isMatchingExpression(n,e.node)){if(o.flags&u.FlowFlags.Unbind)return c(o,y.UnboundType.create(),!1);c(o,void 0,!1);const t=f(e);return c(o,t,!1)}o=e.antecedent}else if(o.flags&u.FlowFlags.AssignmentAlias){const e=o;s===e.targetSymbolId&&(s=e.aliasSymbolId),o=e.antecedent}else{if(o.flags&(u.FlowFlags.BranchLabel|u.FlowFlags.LoopLabel)){const t=o,r=[];let a,l=!1,p=!1;const h=0!=(o.flags&u.FlowFlags.LoopLabel);return h&&c(o,void 0,!0),t.antecedents.map((t,u)=>{const d=e(t,n,s,i);d.isIncomplete&&(l=!0,0===u&&(p=!0)),d.type&&(r.push(d.type),a=y.combineTypes(r),h&&c(o,a,!0))}),h?p?(d(o),{type:a,isIncomplete:!0}):c(o,a,p):l?{type:a,isIncomplete:!0}:c(o,a,!1)}if(o.flags&(u.FlowFlags.TrueCondition|u.FlowFlags.FalseCondition)){const t=o,r=ct(n,t);if(r){const a=e(t.antecedent,n,s,i);let l=a.type;return l&&(l=r(l)),a.isIncomplete?{type:l,isIncomplete:!0}:c(o,l,!1)}o=t.antecedent}else if(o.flags&u.FlowFlags.PreFinallyGate){const e=o;if(e.isGateClosed)return{type:void 0,isIncomplete:!1};o=e.antecedent}else{if(o.flags&u.FlowFlags.PostFinally){const t=o,r=t.preFinallyGate.isGateClosed;t.preFinallyGate.isGateClosed=!0;const a=e(t.antecedent,n,s,i);return t.preFinallyGate.isGateClosed=r,a.isIncomplete?a:c(o,a.type,!1)}if(o.flags&u.FlowFlags.Start)return c(o,i,!1);if(!(o.flags&u.FlowFlags.WildcardImport))return r.fail("Unexpected flow node flags"),c(o,void 0,!1);{const e=o;if(39===n.nodeType){const t=n.value;if(e.names.some(e=>e===t)){const n=rt(e,t);return c(o,n,!1)}}o=e.antecedent}}}}}(i,t,n,s):{type:s,isIncomplete:!1}}}}function at(e){const t=new Map;if(n.has(e.id))return!0;n.set(e.id,!0);const s=function e(n){let s=n;for(;;){if(t.has(s.id))return!1;if(t.set(s.id,!0),s.flags&u.FlowFlags.Unreachable)return!1;if(s.flags&u.FlowFlags.Call){const e=s;if(st(e.node))return!1;s=e.antecedent}else if(s.flags&u.FlowFlags.Assignment){s=s.antecedent}else if(s.flags&u.FlowFlags.AssignmentAlias){s=s.antecedent}else{if(s.flags&(u.FlowFlags.BranchLabel|u.FlowFlags.LoopLabel)){const t=s;for(const n of t.antecedents)if(e(n))return!0;return!1}if(s.flags&(u.FlowFlags.TrueCondition|u.FlowFlags.FalseCondition)){s=s.antecedent}else if(s.flags&u.FlowFlags.PreFinallyGate){const e=s;if(e.isGateClosed)return!1;s=e.antecedent}else{if(s.flags&u.FlowFlags.PostFinally){const t=s,n=t.preFinallyGate.isGateClosed;t.preFinallyGate.isGateClosed=!0;const r=e(t.antecedent);return t.preFinallyGate.isGateClosed=n,r}if(s.flags&u.FlowFlags.Start)return!0;if(!(s.flags&u.FlowFlags.WildcardImport))return r.fail("Unexpected flow node flags"),!1;s=s.antecedent}}}}(e);return n.delete(e.id),s}function ct(t,n){let r=n.expression;const s=!!(n.flags&u.FlowFlags.TrueCondition);if(4===r.nodeType&&(p.isMatchingExpression(t,r.rightExpression)?r=r.rightExpression:p.isMatchingExpression(t,r.name)&&(r=r.name)),7===r.nodeType){const e=38===r.operator||39===r.operator,n=12===r.operator||27===r.operator;if(e||n){const n=38===r.operator||12===r.operator?s:!s;if(11===r.rightExpression.nodeType&&24===r.rightExpression.constType&&p.isMatchingExpression(t,r.leftExpression))return e=>{if(10===e.category){const t=e.subtypes.filter(e=>!!y.isAnyOrUnknown(e)||y.isNoneOrNever(e)===n);return y.combineTypes(t)}return y.isNoneOrNever(e)&&!n?y.NeverType.create():e};if(e&&9===r.leftExpression.nodeType){const e=z(r.leftExpression.leftExpression).type;if(7===e.category&&y.ClassType.isBuiltIn(e,"type")&&1===r.leftExpression.arguments.length&&0===r.leftExpression.arguments[0].argumentCategory){const e=r.leftExpression.arguments[0].valueExpression;if(p.isMatchingExpression(t,e)){const e=z(r.rightExpression).type;if(7===e.category)return t=>_.doForSubtypes(t,t=>{if(8===t.category){const r=y.ClassType.isSameGenericClass(t.classType,e);return n?r?t:void 0:r?void 0:t}return y.isNoneOrNever(t)&&n?void 0:t})}}}}}if(9===r.nodeType&&39===r.leftExpression.nodeType&&("isinstance"===r.leftExpression.value||"issubclass"===r.leftExpression.value)&&2===r.arguments.length){const e="isinstance"===r.leftExpression.value,n=r.arguments[0].valueExpression,i=r.arguments[1].valueExpression;if(p.isMatchingExpression(t,n)){const t=function(e){if(7===e.category)return[e];if(8===e.category){const t=e.classType;if(y.ClassType.isBuiltIn(t,"Tuple")&&t.typeArguments){let e=!1;const n=[];if(t.typeArguments.forEach(t=>{7===t.category?n.push(t):e=!0}),!e)return n}}return}(z(i).type);if(t)return n=>(function(e,t,n,r){const s=_.doForSubtypes(e,e=>_.transformTypeObjectToClass(e)),i=e=>{const s=[];let i=!1;for(const n of t){const t=y.ClassType.isDerivedFrom(e,n),o=y.ClassType.isDerivedFrom(n,e);t&&(i=!0),r&&(t?s.push(e):o&&s.push(n))}return r||i||s.push(e),n?s.map(e=>y.ObjectType.create(e)):s};if(n&&8===s.category){const e=i(s.classType);return y.combineTypes(e)}if(!n&&7===s.category){const e=i(s);return y.combineTypes(e)}if(10===s.category){let e=[];return s.subtypes.forEach(t=>{y.isAnyOrUnknown(t)?e.push(t):n&&8===t.category?e=e.concat(i(t.classType)):n||7!==t.category?r||e.push(t):e=e.concat(i(t))}),y.combineTypes(e)}return e})(n,t,e,s)}}if(p.isMatchingExpression(t,r))return t=>_.doForSubtypes(t,t=>{if(s){if(_.canBeTruthy(t))return t}else if(_.canBeFalsy(t,e))return t})}function lt(e,t,n){if(y.ClassType.isSpecialBuiltIn(e))switch(e.details.name){case"Callable":return function(e){const t=y.FunctionType.create(0);return t.details.declaredReturnType=y.AnyType.create(),e&&e.length>0?e[0].typeList?e[0].typeList.forEach((e,n)=>{_.isEllipsisType(e.type)?oe("'...' not allowed in this context",e.node):9===e.type.category&&oe("Module not allowed in this context",e.node),y.FunctionType.addParameter(t,{category:0,name:`p${n.toString()}`,isNameSynthesized:!0,type:_.convertClassToObject(e.type)})}):_.isEllipsisType(e[0].type)?_.addDefaultFunctionParameters(t):oe("Expected parameter type list or '...'",e[0].node):_.addDefaultFunctionParameters(t),e&&e.length>1?(_.isEllipsisType(e[1].type)?oe("'...' not allowed in this context",e[1].node):9===e[1].type.category&&oe("Module not allowed in this context",e[1].node),t.details.declaredReturnType=_.convertClassToObject(e[1].type)):t.details.declaredReturnType=y.AnyType.create(),e&&e.length>2&&oe("Expected only two type arguments to 'Callable'",e[2].node),t}(t);case"Optional":return function(e,t){return t&&1===t.length?(_.isEllipsisType(t[0].type)?oe("'...' not allowed in this context",t[0].node):9===t[0].type.category&&oe("Module not allowed in this context",t[0].node),y.combineTypes([_.convertClassToObject(t[0].type),y.NoneType.create()])):(oe("Expected one type parameter after Optional",e),y.UnknownType.create())}(n,t);case"Type":return Oe(e,t,1);case"ClassVar":return function(e,t){if(!t||0===t.length)return oe("Expected a type argument after ClassVar",e),y.UnknownType.create();if(t.length>1)return oe("Expected only one type argument after ClassVar",t[1].node),y.UnknownType.create();let n=t[0].type;return _.requiresSpecialization(n)&&(n=_.specializeType(n,void 0)),_.convertClassToObject(n)}(n,t);case"Deque":case"List":case"FrozenSet":case"Set":return Oe(e,t,1);case"ChainMap":case"Dict":case"DefaultDict":return Oe(e,t,2);case"Protocol":return Oe(e,t,void 0);case"Tuple":return Oe(e,t,void 0,!0);case"Union":return function(e){const t=[];if(e)for(const n of e)t.push(n.type),_.isEllipsisType(n.type)?oe("'...' not allowed in this context",n.node):9===n.type.category&&oe("Module not allowed in this context",n.node);return t.length>0?y.combineTypes(t):y.NeverType.create()}(t);case"Generic":return function(e,t,n){n&&0!==n.length||oe("'Generic' requires at least one type argument",e);const r=[];return n&&n.forEach(e=>{if(11!==e.type.category)oe("Type argument for 'Generic' must be a type variable",e.node);else{for(const t of r)if(t===e.type){oe("Type argument for 'Generic' must be unique",e.node);break}r.push(e.type)}}),Oe(t,n)}(n,e,t);case"Final":return function(e,t){return t&&0!==t.length?(t.length>1&&oe("Expected a single type argument after Final",e),t[0].type):y.AnyType.create()}(n,t)}let r=t?t.length:0;const i=y.ClassType.getTypeParameters(e);if(0===i.length&&0===r)return e;t&&r>i.length&&(0===i.length?oe("Expected no type arguments",t[i.length].node):oe(`Expected at most ${i.length} `+`type ${1===i.length?"argument":"arguments"} `,t[i.length].node),r=i.length),t&&t.forEach(e=>{_.isEllipsisType(e.type)?oe("'...' not allowed in this context",e.node):9===e.type.category&&oe("Module not allowed in this context",e.node)});const o=t?t.map(e=>_.convertClassToObject(e.type)):[],a=y.ClassType.getTypeParameters(e);for(let e=o.length;e<a.length;e++)o.push(_.getConcreteTypeFromTypeVar(a[e]));return o.forEach((e,n)=>{if(n<r){const r=new s.DiagnosticAddendum;(function(e,t,n,r=0,s=0){if(s>y.maxTypeRecursionCount)return!0;if(y.isAnyOrUnknown(t))return!0;let i=t;if(11===t.category){if(y.isTypeSame(t,e))return!0;i=_.getConcreteTypeFromTypeVar(t,s+1)}const o=e.boundType;if(o&&!Rt(o,i,n.createAddendum(),void 0,r,s+1))return n.addMessage(`Type '${Wt(i)}' is not compatible with `+`bound type '${Wt(o)}' for TypeVar '${e.name}'`),!1;const a=e.constraints;if(0===a.length)return!0;for(const e of a){if(y.isAnyOrUnknown(e))return!0;if(10===i.category){if(i.subtypes.find(t=>y.isSameWithoutLiteralValue(e,t)))return!0}else if(y.isSameWithoutLiteralValue(e,i))return!0}return n.addMessage(`Type '${Wt(i)}' is not compatible with `+`constraints imposed by TypeVar '${e.name}'`),!1})(i[n],e,r)||oe(`Type '${Wt(e)}' `+`cannot be assigned to type variable '${i[n].name}'`+r.getString(),t[n].node)}}),y.ClassType.cloneForSpecialization(e,o)}function ut(e,t=!1){return e.type?e.type:z(e.valueExpression,void 0,t?16:0).type}function pt(e,t){const n=d.getScopeForNode(e),r=d.getBuiltInScope(n).lookUpSymbol(t);return r?bt(r):y.UnknownType.create()}function dt(e,t,n){const r=pt(e,t);if(7===r.category){let e=r;return n&&(e=y.ClassType.cloneForSpecialization(e,n)),y.ObjectType.create(e)}return r}function ht(e,t){return d.getScopeForNode(e).lookUpSymbolRecursive(t)}function ft(e){const t=A;A=S++,e(),A=t}function gt(){return A!==k}function mt(e){for(;37!==e.nodeType;)e=e.parent;return l.getFileInfo(e)}function yt(e,t){if(5===e.category&&e.details.declaration){const n=e.details.declaration;if(3===n.type){const e=n.node,r=l.getScope(e).lookUpSymbol(t);if(r)return r.getDeclarations().find(e=>2===e.type)}}}function _t(e){switch(e.type){case 0:{if("Any"===e.intrinsicType)return y.AnyType.create();if("class"===e.intrinsicType){const t=We(p.getEnclosingClass(e.node));return t?t.classType:void 0}const t=dt(e.node,"str");if(8===t.category){if("str"===e.intrinsicType)return t;const n=pt(e.node,"Iterable");if(7===n.category)return y.ObjectType.create(y.ClassType.cloneForSpecialization(n,[t]))}return y.UnknownType.create()}case 4:{const t=We(e.node);return t?t.decoratedType:void 0}case 5:return H(e.node.typeAnnotation);case 3:{const t=Ve(e.node);return t?t.decoratedType:void 0}case 2:{let t=e.node.typeAnnotation;if(t&&49===t.nodeType&&(t=t.typeAnnotation),t){const e=H(t);if(e)return _.convertClassToObject(e)}return}case 1:{let t=e.typeAnnotationNode;if(t&&49===t.nodeType&&(t=t.typeAnnotation),t){let n=H(t);if(n)return 39===e.node.nodeType&&(n=Le(e.node,n)),_.convertClassToObject(n)}return}case 6:return}}function Tt(t){const n=vt(t);if(!n)return y.UnknownType.create();function r(e,t,n){if(t.path){const r=n(t.path);if(!r)return y.UnknownType.create();e.fields=r.symbolTable,e.docString=r.docString}return t.implicitImports&&t.implicitImports.forEach((t,s)=>{const i=r(y.ModuleType.create(),t,n),o=f.Symbol.createWithType(0,i);e.loaderFields.set(s,o)}),e}if(6===n.type){const t=y.ModuleType.create();if(!n.symbolName)return r(t,n,e);if(n.submoduleFallback)return r(t,n.symbolName&&n.submoduleFallback?n.submoduleFallback:n,e)}const s=_t(n);if(s)return s;if(2===n.type){const e=L(n.node.name);return e||(tt(n.node),L(n.node.name))}if(1===n.type&&n.inferredTypeSource){let e=L(n.node);return e||(nt(n.inferredTypeSource),e=L(n.node)),e&&39===n.node.nodeType&&(e=Le(n.node,e)),e}}function vt(t){let n=t;const r=[];for(;;){if(6!==n.type)return n;if(!n.symbolName)return n;let s;if(n.path&&(s=e(n.path),!s))return;const i=s?s.symbolTable.get(n.symbolName):void 0;if(!i)return n.submoduleFallback?vt(n.submoduleFallback):void 0;let o=i.getTypedDeclarations();if(0===o.length&&(o=i.getDeclarations(),0===o.length))return;if(n=o[o.length-1],r.find(e=>e===n))return t;r.push(n)}}function bt(e){if(e.hasTypedDeclarations())return Et(e)||y.UnknownType.create();const t=[],n=e.isPrivateMember(),r=e.getDeclarations(),s=m.isFinalVariable(e);return r.forEach(r=>{if(W(e,r)){let i=Tt(r);if(B(e),i){const e=1===r.type&&!!r.isConstant;i=_.stripLiteralTypeArgsValue(i),n||e||s||(i=_.stripLiteralValue(i)),t.push(i)}}}),t.length>0?y.combineTypes(t):y.UnboundType.create()}function Et(e){const t=e.getUndeclaredType();if(t)return t;const n=e.getTypedDeclarations();if(0===n.length)return;let r=n.length-1;for(;r>=0;){const t=n[r];if($(e,t)<0){const n=q(e,t);if(n)return n;if(W(e,t)){const n=_t(t);if(!B(e))return;return n}break}r--}}function Ct(e,t){const n=y.FunctionType.getSpecializedReturnType(e);return n||xt(e,t)}function xt(e,t){let n;if(e.inferredReturnType)n=e.inferredReturnType;else{if(e.details.declaration){const t=e.details.declaration.node;r(!t.returnTypeAnnotation),function(e){const t=A;A=k,e(),A=t}(()=>{n=Ke(t,y.FunctionType.isAbstractMethod(e))}),n&&y.FunctionType.isWrapReturnTypeInAwait(e)&&!_.isNoReturnType(n)&&(n=He(t,n))}n||(n=y.UnknownType.create()),e.inferredReturnType=n}if(_.containsUnknown(n)&&y.FunctionType.hasUnannotatedParams(e)&&!y.FunctionType.isStubDefinition(e)&&t){const r=function(e,t){let n;if(!e.details.declaration)return;const r=e.details.declaration.node;if(t.some(e=>!e.paramName))return;if(D.some(e=>e.functionNode===r))return;const s=Ve(r);if(!s)return;if(D.length>=I)return;if(ft(()=>{const i=O;D.push({functionNode:r,codeFlowAnalyzer:ot()}),O=new Map;let o=!0;r.parameters.forEach((e,n)=>{if(e.name){let i;const a=t.find(t=>e.name.value===t.paramName);a&&a.argument.valueExpression?(i=z(a.argument.valueExpression).type,o=!1):e.defaultValue?(i=z(e.defaultValue).type,o=!1):0===n&&(y.FunctionType.isInstanceMethod(s.functionType)||y.FunctionType.isInstanceMethod(s.functionType))&&s.functionType.details.parameters.length>0&&r.parameters[0].name&&(i=s.functionType.details.parameters[0].type),i||(i=y.UnknownType.create()),M(e.name,i)}}),o||(n=Ke(r,y.FunctionType.isAbstractMethod(e))),D.pop(),O=i}),n)return y.FunctionType.isWrapReturnTypeInAwait(e)&&!_.isNoReturnType(n)&&(n=He(r,n)),n;return}(e,t);r&&(n=r)}return n}function St(e){const t=Ve(e);return t?y.FunctionType.isAbstractMethod(t.functionType)?y.AnyType.create():y.FunctionType.isGenerator(t.functionType)?_.getDeclaredGeneratorReturnType(t.functionType):t.functionType.details.declaredReturnType:y.AnyType.create()}function kt(e){return 7===e.classType.category?_.partiallySpecializeType(bt(e.symbol),e.classType):y.UnknownType.create()}function wt(t,n,s,i,o,a,c){if(y.ClassType.isProtocol(t)){const r=t.details.fields;if(y.isTypeSame(n,t))return!0;const o=y.ClassType.cloneForSpecialization(t,void 0),c=new T.TypeVarMap;let l=!0;const u=_.buildTypeVarMapFromSpecializedClass(n);if(r.forEach((t,r)=>{if(t.isClassMember()&&!t.isIgnoredForProtocolMatch()){const i=_.lookUpClassMember(n,r,e,8);if(i){const e=Et(t);if(e){Rt(e,_.specializeType(kt(i),u,!1,a+1),s.createAddendum(),c,0,a+1)||(s.addMessage(`'${r}' is an incompatible type`),l=!1)}}else s.addMessage(`'${r}' is not present`),l=!1}}),l&&t.details.typeParameters.length>0){const e=_.specializeType(o,c,!1,a+1);Ft(t,e,s,i,a)||(l=!1)}return l}if(y.ClassType.isTypedDictClass(t)&&y.ClassType.isTypedDictClass(n)){let e=!0;const r=Ot(t),i=Ot(n);return r.forEach((r,o)=>{const c=i.get(o);c?(r.isRequired&&!c.isRequired?(s.addMessage(`'${o}' is required in ${Wt(t)}`),e=!1):!r.isRequired&&c.isRequired&&(s.addMessage(`'${o}' is not required in ${Wt(t)}`),e=!1),y.isTypeSame(r.valueType,c.valueType,a+1)||(s.addMessage(`'${o}' is an incompatible type`),e=!1)):(s.addMessage(`'${o}' is missing from ${Wt(n)}`),e=!1)}),e}if(y.ClassType.isBuiltIn(t,"float")&&y.ClassType.isBuiltIn(n,"int")&&0==(1&o))return!0;if(y.ClassType.isBuiltIn(t,"complex")&&(y.ClassType.isBuiltIn(n,"int")||y.ClassType.isBuiltIn(n,"float"))&&0==(1&o))return!0;if(0!=(1&o)&&!y.ClassType.isSameGenericClass(n,t)){const e=c?y.ObjectType.create(t):t,r=c?y.ObjectType.create(n):n;return s.addMessage(`'${Wt(r)}' is incompatible with `+`'${Wt(e)}'`),!1}const l=[];if(y.ClassType.isDerivedFrom(n,t,l))return r(l.length>0),function(e,t,n,r,s,i){let o=t;for(let t=n.length-1;t>=0;t--){const a=n[t];if(1===a.category)return!0;if(y.ClassType.isBuiltIn(a,"object"))return!0;if(t<n.length-1&&(o=It(o,a,i+1)),0===t&&y.ClassType.isSpecialBuiltIn(e)&&"Tuple"===e.details.name){const t=e.typeArguments||[];let n=t.length;const a=2===n&&_.isEllipsisType(t[1]);a&&(n=1);const c=o.typeArguments||[];let l=c.length;const u=2===l&&_.isEllipsisType(c[1]);if(u&&(l=1),l>0&&n>0){if(c.length!==n&&!a&&!u)return r.addMessage(`Tuple size mismatch: expected ${n}`+` but got ${c.length}`),!1;for(let e=0;e<Math.max(n,l);e++){const n=a?t[0]:t[e],o=u?c[0]:c[e];if(!Rt(n,o,r.createAddendum(),s,0,i+1))return r.addMessage(`Tuple entry ${e+1} is incorrect type`),!1}}return!0}if(0!==y.ClassType.getTypeParameters(a).length){if(!a.typeArguments)return!0;if(!Ft(a,o,r,s,i))return!1}}if(e.typeArguments&&!Ft(e,o,r,s,i))return!1;return!0}(t,n,l,s,i,a+1);const u=c?y.ObjectType.create(t):t,p=c?y.ObjectType.create(n):n;return s.addMessage(`'${Wt(p)}' is incompatible with `+`'${Wt(u)}'`),!1}function It(e,t,n){if(0===y.ClassType.getTypeParameters(t).length)return t;const s=_.buildTypeVarMapFromSpecializedClass(e),i=_.specializeType(t,s,!1,n+1);return r(7===i.category),i}function Ft(e,t,n,s,i){r(y.ClassType.isSameGenericClass(e,t));const o=y.ClassType.getTypeParameters(e),a=e.typeArguments;r(void 0!==a);const c=t.typeArguments;if(c&&(y.ClassType.isSpecialBuiltIn(t)||c.length===o.length))for(let e=0;e<c.length;e++){const t=c[e],r=e>=a.length?a.length-1:e,l=a[r],u=r<o.length?o[r]:void 0;if(!u||u.isCovariant){if(!Rt(l,t,n.createAddendum(),s,0,i+1))return!1}else if(u.isContravariant){if(!Rt(t,l,n.createAddendum(),s,2,i+1))return!1}else if(!Rt(l,t,n.createAddendum(),s,1,i+1))return!1}return!0}function Nt(e,t,n,r,i,o=0,a=0){const c=i.get(e.name);if(e.constraints.length>0){const n=e.constraints.find(e=>Rt(e,t,new s.DiagnosticAddendum));if(!n)return r.addMessage(`Type '${Wt(t)}' is not compatible with `+`constraints imposed by TypeVar '${e.name}'`),!1;if(c){if(!y.isTypeSame(c,n))return r.addMessage(`Type '${Wt(t)}' is not compatible with `+`constrained type '${Wt(c)}'`),!1}else i.set(e.name,n,!1);return!0}let l=t;const u=i.isNarrowable(e.name),p=n&&u;if(c){const e=new s.DiagnosticAddendum;if(n){if(u&&Rt(t,c,e,i,o,a+1))y.isAnyOrUnknown(c)||1===t.category||(l=c);else if(!Rt(c,t,new s.DiagnosticAddendum,i,o,a+1))return r.addMessage(`Type '${Wt(t)}' cannot be assigned to `+`type '${Wt(c)}'`),!1}else Rt(c,t,e,i,o,a+1)?u||1!==c.category&&(l=c):Rt(t,c,new s.DiagnosticAddendum,i,o,a+1)||(l=y.combineTypes([c,t]))}return e.boundType&&!Rt(e.boundType,l,r.createAddendum(),void 0,o,a+1)?(r.addMessage(`Type '${Wt(l)}' is not compatible with `+`bound type '${Wt(e.boundType)}' for TypeVar '${e.name}'`),!1):(i.set(e.name,l,p),!0)}function Rt(t,n,r,i,o=0,a=0){if(a>y.maxTypeRecursionCount)return!0;if(t===n)return!0;if(0===t.category||0===n.category)return!0;const c=0!=(2&o);if(o&=-3,11===t.category)return!(i&&!Nt(t,n,!1,r,i,o,a+1));if(y.isAnyOrUnknown(t))return!0;if(y.isAnyOrUnknown(n)){if(i){const e=_.isEllipsisType(n)?y.AnyType.create():n;_.setTypeArgumentsRecursive(t,e,i)}return!0}if(11===n.category){if(c&&i)return!!Nt(n,t,!0,r,i,o,a+1);const e=_.getConcreteTypeFromTypeVar(n);return Rt(t,e,r,void 0,o,a+1)}if(a>y.maxTypeRecursionCount)return!0;if(1&o&&(10===n.category||10===t.category))return!!y.isTypeSame(n,t)||(r.addMessage(`Type '${Wt(n)}' cannot be assigned to `+`type '${Wt(t)}'`),!1);if(10===n.category){let e=!1;return n.subtypes.forEach(n=>{Rt(t,n,r.createAddendum(),i,o,a+1)||(r.addMessage(`Type '${Wt(n)}' cannot be assigned to `+`type '${Wt(t)}'`),e=!0)}),!e}if(10===t.category){const e=new s.DiagnosticAddendum;let c=!1;return t.subtypes.forEach(t=>{Rt(t,n,e,i,o,a+1)&&(c=!0)}),!!c||(r.addAddendum(e),!1)}if(3===t.category&&3===n.category)return!0;if(8===n.category&&y.ClassType.isBuiltIn(n.classType,"Type")){const e=n.classType.typeArguments;if(e&&e.length>=1){if(y.isAnyOrUnknown(e[0]))return!0;if(8===e[0].category)return Rt(t,e[0].classType,r.createAddendum(),i,o,a+1)}}if(7===t.category&&7===n.category)return wt(t,n,r,i,o,a+1,!1);if(8===t.category){const s=t.classType;if(y.ClassType.isBuiltIn(s,"type")&&(7===n.category||5===n.category||6===n.category))return!0;if(y.ClassType.isBuiltIn(s,"Type")){const e=s.typeArguments;if(e&&e.length>=1){if(y.isAnyOrUnknown(e[0]))return!0;if(8===e[0].category)return Rt(e[0].classType,n,r.createAddendum(),i,o,a+1);if(11===e[0].category){if(7===n.category)return Rt(e[0],y.ObjectType.create(n),r.createAddendum(),i,o,a+1);if(5===n.category||6===n.category)return Rt(e[0],n,r.createAddendum(),i,o,a+1)}}}if(8===n.category){const e=t.literalValue;if(void 0!==e){const s=n.literalValue;if(s!==e)return r.addMessage(`'${s?_.printLiteralType(n):Wt(n)}' `+`cannot be assigned to '${_.printLiteralType(t)}'`),!1}return!!wt(s,n.classType,r,i,o,a+1,!0)}if(5===n.category){const s=function(t){if(!y.ClassType.isProtocol(t.classType))return;const n=_.lookUpObjectMember(t,"__call__",e);if(!n)return;const r=kt(n);if(5===r.category)return Lt(t,r);return}(t);if(s)return!!Pt(s,n,r.createAddendum(),i,a+1,!0);if(y.ClassType.isBuiltIn(t.classType)&&"object"===t.classType.details.name)return!0}else if(9===n.category){if(y.ClassType.isBuiltIn(s,"ModuleType"))return!0}else if(7===n.category){if(y.ClassType.isBuiltIn(t.classType,"object"))return!0;const e=_.getMetaclass(n);if(e){if(y.isAnyOrUnknown(e))return!0;if(7===e.category)return i&&y.ClassType.isBuiltIn(e,"EnumMeta")&&i.set("_T",y.ObjectType.create(n),!1),wt(s,e,r,i,o,a+1,!1)}}}if(5===t.category){let s;if(6===n.category){const e=n.overloads,c=e.findIndex(e=>{const n=i?i.clone():void 0;return Rt(t,e,r.createAddendum(),n,o,a+1)});if(c<0)return r.addMessage(`No overloaded function matches type '${Wt(t)}'.`),!1;s=e[c]}else if(5===n.category)s=n;else if(8===n.category){const t=_.lookUpObjectMember(n,"__call__",e);if(t){const e=kt(t);5===e.category&&(s=_.stripFirstParameter(e))}}else if(7===n.category){const t=y.FunctionType.create(69);t.details.declaredReturnType=y.ObjectType.create(n);const r=_.lookUpClassMember(n,"__new__",e,12),i=r?kt(r):void 0;i&&5===i.category?i.details.parameters.forEach((e,n)=>{n>0&&y.FunctionType.addParameter(t,e)}):_.addDefaultFunctionParameters(t),s=t}if(s)return Pt(t,s,r.createAddendum(),i,a+1,!1)}if((y.isNoneOrNever(n)||9===n.category)&&8===t.category){const e=t.classType;if(y.ClassType.isBuiltIn(e,"object"))return!0}return y.isNoneOrNever(t)?(r.addMessage("Cannot assign to 'None'"),!1):(r.addMessage(`'${Wt(n)}' `+`cannot be assigned to '${Wt(t)}'`),!1)}function Pt(e,t,n,r,s,i){let o=!0;const a=t.details.parameters.length,c=e.details.parameters.length,l=Math.min(a,c);for(let i=0;i<l;i++){const a=t.details.parameters[i],c=e.details.parameters[i],l=n.createAddendum();if(0!==a.category||0!==c.category)break;const u=y.FunctionType.getEffectiveParameterType(t,i),p=y.FunctionType.getEffectiveParameterType(e,i);Rt(u,p,l.createAddendum(),r,2,s+1);const d=_.specializeType(p,r,!1,s+1);Rt(u,d,l.createAddendum(),void 0,0,s+1)||(l.addMessage(`Parameter ${i+1} of type `+`'${Wt(d)}' cannot be assigned to type `+`'${Wt(u)}'`),o=!1)}const u=t.details.parameters,p=e.details.parameters,d=void 0!==u.find(e=>0!==e.category),h=void 0!==p.find(e=>0!==e.category);if(i){const e=new Map;let t=!1;p.forEach(n=>{t?n.name&&0===n.category&&e.set(n.name,n):1===n.category&&(t=!0)});let i=!1;u.forEach(t=>{if(i){if(t.name&&0===t.category){const i=e.get(t.name),a=n.createAddendum();if(i){const n=_.specializeType(i.type,r,!1,s+1);Rt(t.type,n,a.createAddendum(),void 0,0,s+1)||(a.addMessage(`Named parameter '${t.name}' of type `+`'${Wt(n)}' cannot be assigned to type `+`'${Wt(t.type)}'`),o=!1),e.delete(t.name)}else a.addMessage(`Named parameter '${t.name}' is missing in destination`),o=!1}}else 1===t.category&&(i=!0)}),e.forEach((e,t)=>{n.createAddendum().addMessage(`Named parameter '${t}' is missing in source`),o=!1})}if(!d&&!h){const e=u.filter(e=>!e.hasDefault).length;c<e&&(n.addMessage("Function accepts too few parameters. Expected "+`${e} but got ${c}.`),o=!1),c>a&&(n.addMessage("Function accepts too many parameters. Expected "+`${a} but got ${c}.`),o=!1)}const f=Ct(e);if(!y.isAnyOrUnknown(f)){const e=Ct(t);Rt(f,e,n.createAddendum(),r,0,s+1)||(n.addMessage(`Function return type '${Wt(e)}' `+`is not compatible with type '${Wt(f)}'.`),o=!1)}return o}function At(e,t){const n=new s.DiagnosticAddendum;return 10===e.category?_.doForSubtypes(e,e=>10===t.category?t.subtypes.some(t=>Rt(e,t,n))?e:void 0:Rt(e,t,n)?e:void 0):Rt(e,t,n)?e:y.NeverType.create()}function Dt(e,t,n=0){if(n>y.maxTypeRecursionCount)return;const r=[];if(e.details.baseClasses.forEach(e=>{7===e.category&&r.push(e)}),r.some(e=>y.ClassType.hasAbstractMethods(e)))for(const e of r)Dt(e,t,n+1);e.details.fields.forEach((n,r)=>{const s=m.getLastTypedDeclaredForSymbol(n);if(n.isClassMember()&&s&&3===s.type){8&je(s.node,!0)?t.set(r,{symbol:n,isInstanceMember:!1,classType:e}):t.delete(r)}})}function Ot(e){const t=new Map;return function e(t,n,s=0){if(r(y.ClassType.isTypedDictClass(t)),s>y.maxTypeRecursionCount)return;t.details.baseClasses.forEach(t=>{7===t.category&&y.ClassType.isTypedDictClass(t)&&e(t,n,s+1)}),t.details.fields.forEach((e,r)=>{if(!e.isIgnoredForProtocolMatch()){const s=m.getLastTypedDeclaredForSymbol(e);s&&1===s.type&&n.set(r,{valueType:Et(e)||y.UnknownType.create(),isRequired:!y.ClassType.isCanOmitDictValues(t),isProvided:!1})}})}(e,t),t}function Lt(e,t,n=!1){if(5===t.category){if(!e)return _.stripFirstParameter(t);if(y.FunctionType.isInstanceMethod(t)&&!n){if(8===e.category)return Mt(e,t)}else if(y.FunctionType.isClassMethod(t)||n)return Mt(7===e.category?e:e.classType,t)}else if(6===t.category){const r=y.OverloadedFunctionType.create();return t.overloads.forEach(t=>{y.OverloadedFunctionType.addOverload(r,Lt(e,t,n))}),r}return t}function Mt(e,t){const n=7===e.category?e:e.classType,r=n.typeArguments?_.buildTypeVarMapFromSpecializedClass(n):new T.TypeVarMap;if(t.details.parameters.length>0){Rt(t.details.parameters[0].type,e,new s.DiagnosticAddendum,r)}const i=_.specializeType(t,r,!1);return _.stripFirstParameter(i)}function Ut(e,t=0){let n=e.details.name;if(e.typeArguments)e.typeArguments.length>0?n+="["+e.typeArguments.map(e=>Wt(e,t+1)).join(", ")+"]":y.ClassType.isBuiltIn(e,"Tuple")&&(n+="[()]");else{const r=y.ClassType.getTypeParameters(e);r.length>0&&(n+="["+r.map(e=>Wt(e,t+1)).join(", ")+"]")}return n}function $t(e,t=0){const n=e.details.parameters.map((n,r)=>{let s="";if(1===n.category?s+="*":2===n.category&&(s+="**"),n.name&&(s+=n.name),0===n.category){const n=y.FunctionType.getEffectiveParameterType(e,r);s+=": "+(t<y.maxTypeRecursionCount?Wt(n,t+1):"")}if(e.details.declaration){const t=e.ignoreFirstParamOfDeclaration?r+1:r,n=e.details.declaration.node.parameters[t];n.defaultValue&&(s+=" = "+p.printExpression(n.defaultValue))}return s}),r=Ct(e);return[n,t<y.maxTypeRecursionCount?Wt(r,t+1):""]}function Wt(t,n=0){if(n>=y.maxTypeRecursionCount)return"";switch(t.category){case 0:return"Unbound";case 1:return"Unknown";case 9:return"Module";case 7:return"Type["+Ut(t,n+1)+"]";case 8:{const r=t;if(void 0!==r.literalValue)return _.printLiteralType(r);if(_.isProperty(t)){const r=_.lookUpObjectMember(t,"fget",e);if(r){const e=kt(r);if(5===e.category){return Wt(Ct(e),n+1)}}}return Ut(r.classType,n+1)}case 5:{const e=$t(t,n);return`(${e[0].join(", ")}) -> ${e[1]}`}case 6:return`Overload[${t.overloads.map(e=>Wt(e,n+1)).join(", ")}]`;case 10:{const e=t;let r=e.subtypes;if(void 0!==r.find(e=>3===e.category)){return"Optional["+Wt(y.removeNoneFromUnion(e),n+1)+"]"}r=[],r=r.concat(...e.subtypes);const s=e=>8===e.category&&void 0!==e.literalValue,i=[];for(;r.length>0;){const e=r.shift();if(s(e)){const t=r.filter(e=>s(e));t.unshift(e);const n=t.map(e=>_.printLiteralValue(e));i.push(`Literal[${n.join(", ")}]`),t.length>1&&(r=r.filter(e=>!s(e)))}else i.push(Wt(e,n+1))}return 1===i.length?i[0]:`Union[${i.join(", ")}]`}case 11:{const e=t,r=e.name;if(n>0)return r;const s=[`'${r}'`];for(const t of e.constraints)s.push(Wt(t,n+1));return"TypeVar["+s.join(", ")+"]"}case 3:return"None";case 4:return"Never";case 2:return t.isEllipsis?"...":"Any"}return""}return{getType:j,getTypeOfClass:We,getTypeOfFunction:Ve,evaluateTypesForStatement:nt,getDeclaredTypeForExpression:X,verifyDeleteExpression:function(e){switch(e.nodeType){case 39:z(e);break;case 36:{const t=z(e.leftExpression),n=fe(e,t,{method:"del"},0);M(e.memberName,n.type);break}case 24:{const t=z(e.baseExpression,void 0,2);ye(e,t.type,{method:"del"},0),M(e,y.UnboundType.create());break}case 0:ft(()=>{e.child&&z(e.child)});break;default:oe("Expression cannot be deleted",e)}},isAfterNodeReachable:se,isNodeReachable:re,getDeclarationsForNameNode:function(t){if(l.isCodeUnreachable(t))return;const n=[],r=t.value;if(!t.parent||23!==t.parent.nodeType||!t.parent.alias||t!==t.parent.name){if(t.parent&&36===t.parent.nodeType&&t===t.parent.memberName){const r=j(t.parent.leftExpression);if(r){const s=t.parent.memberName.value;_.doForSubtypes(r,t=>{let r;if(7===t.category){let n=_.lookUpClassMember(t,s,e,16);n||(n=_.lookUpClassMember(t,s,e)),n&&(r=n.symbol)}else if(8===t.category){let n=_.lookUpObjectMember(t,s,e,16);n||(n=_.lookUpObjectMember(t,s,e)),n&&(r=n.symbol)}else 9===t.category&&(r=y.ModuleType.getField(t,s));if(r){const e=r.getTypedDeclarations();e.length>0?n.push(...e):n.push(...r.getDeclarations())}return t})}}else if(t.parent&&38===t.parent.nodeType){const e=t.parent.nameParts.findIndex(e=>e===t),r=l.getImportInfo(t.parent);if(e>=0&&r&&e<r.resolvedPaths.length&&r.resolvedPaths[e]){const t={type:6,node:void 0,path:r.resolvedPaths[e],range:s.getEmptyRange(),implicitImports:new Map};n.push(t)}}else if(t.parent&&1===t.parent.nodeType&&t===t.parent.name){const e=t.parent,r=t.value;if(e.parent&&9===e.parent.nodeType){const t=j(e.parent.leftExpression);if(t)if(5===t.category&&t.details.declaration){const e=yt(t,r);e&&n.push(e)}else if(7===t.category){const i=G(e.parent.leftExpression,y.ObjectType.create(t),"__init__",{method:"get"},new s.DiagnosticAddendum,29);if(i&&5===i.category){const e=yt(i,r);e&&n.push(e)}}}}else{const e=d.getScopeForNode(t);if(e){const t=e.lookUpSymbolRecursive(r);if(!t)return;n.push(...t.symbol.getDeclarations())}}return n}},getTypeForDeclaration:_t,resolveAliasDeclaration:vt,getTypeFromIterable:Z,getTypedDictMembersForClass:Ot,getEffectiveTypeOfSymbol:bt,getFunctionDeclaredReturnType:St,getFunctionInferredReturnType:xt,getBuiltInType:pt,getTypeOfMember:kt,bindFunctionToClassOrObject:Lt,getBoundMethod:Q,getCallSignatureInfo:function(e,t){let n,r=e;for(;void 0!==r;){if(9===r.nodeType||13===r.nodeType){n=r;break}r=r.parent}if(!n||!n.arguments)return;if(t>a.TextRange.getEnd(n))return;const s=[];let i,o=0;const c=j(n.leftExpression);if(void 0===c)return;const l=n.arguments;for(let e=l.length-1;e>=0;e--){if(t>a.TextRange.getEnd(l[e].valueExpression)){o=e+1;break}if(t>=l[e].valueExpression.start){o=e;break}}if(o<n.arguments.length){const e=n.arguments[o].name;e&&(i=e.value)}function u(e){5===e.category?s.push(e):s.push(...e.overloads)}return _.doForSubtypes(c,e=>{switch(e.category){case 5:case 6:u(e);break;case 7:{let t=Q(e,"__new__",!0);t||(t=Q(e,"__init__",!1)),t&&u(t);break}case 8:{const t=Q(e.classType,"__call__",!1);t&&u(t);break}}}),0!==s.length?{callNode:n,signatures:s,activeArgumentIndex:o,activeArgumentName:i}:void 0},canAssignType:Rt,canOverrideMethod:function(e,t,n){if(6===e.category&&(e=e.overloads[e.overloads.length-1]),5!==e.category)return n.addMessage(`Base class defines type as ${Wt(e)}`),!1;let r=!0;const s=e.details.parameters,i=t.details.parameters;if(s.length!==i.length)return n.addMessage("Parameter count mismatch: base method has "+`${s.length}, but override has ${i.length}`),!1;const o=Math.min(s.length,i.length);for(let a=0;a<o;a++){const o=s[a],c=i[a];if(o.name!==c.name)n.addMessage(`Parameter ${a+1} name mismatch: `+`base parameter is named '${o.name||"*"}, `+`override parameter is named '${c.name||"*"}'`),r=!1;else{const s=y.FunctionType.getEffectiveParameterType(e,a),i=y.FunctionType.getEffectiveParameterType(t,a);Rt(s,i,n.createAddendum())||(n.addMessage(`Parameter ${a+1} type mismatch: `+`base method parameter is type '${Wt(s)}, `+`override is type '${Wt(i)}'`),r=!1)}}const a=Ct(e),c=Ct(t);return Rt(a,c,n.createAddendum())||(n.addMessage("Return type mismatch: "+`base method returns type '${Wt(a)}', `+`override is type '${Wt(c)}'`),r=!1),r},addError:oe,addWarning:ie,addDiagnostic:ae,addDiagnosticForTextRange:function(e,t,n,r,s){let i;return"error"===t?i=e.diagnosticSink.addErrorWithTextRange(r,s):"warning"===t&&(i=e.diagnosticSink.addWarningWithTextRange(r,s)),i&&i.setRule(n),i},printType:Wt,printFunctionParts:$t,hasGrownTooLarge:function(){return P.size>75e4}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),s=n(5),i=n(6),o=n(10),a=n(60),c=n(11),l=n(12),u=n(13);class p{constructor(e){this.importName=e,this.isAccessed=!1}}class d extends p{constructor(e,t,n){super(e),this.alias=t,this.symbol=n}}class h extends p{constructor(e,t,n){super(e),this.isWildcardImport=t,this.node=n,this.symbols=[]}addSymbol(e,t,n,r=!1){this.symbols.find(e=>e.name===t)||this.symbols.push({symbol:e,name:t,alias:n,isAccessed:r})}}class f extends o.ParseTreeWalker{constructor(e,t){super(),this._accessedImportedSymbols=e,this._treatStringsAsSymbols=t}analyze(e){this.walk(e)}walk(e){s.isCodeUnreachable(e)||super.walk(e)}visitName(e){return this._accessedImportedSymbols.set(e.value,!0),!0}visitString(e){return this._treatStringsAsSymbols&&this._accessedImportedSymbols.set(e.value,!0),!0}}class g extends o.ParseTreeWalker{constructor(e,t,n){super(),this._typingsPath=e,this._sourceFile=t,this._evaluator=n,this._indentAmount=0,this._includeAllImports=!1,this._typeStubText="",this._lineEnd="\n",this._tab="    ",this._classNestCount=0,this._functionNestCount=0,this._ifNestCount=0,this._emittedSuite=!1,this._emitDocString=!0,this._trackedImportAs=new Map,this._trackedImportFrom=new Map,this._accessedImportedSymbols=new Map,this._typingsPath.endsWith("__init__.pyi")&&(this._includeAllImports=!0)}write(){const e=this._sourceFile.getParseResults();this._lineEnd=e.tokenizerOutput.predominantEndOfLineSequence,this._tab=e.tokenizerOutput.predominantTabSequence,this.walk(e.parseTree),this._writeFile()}walk(e){s.isCodeUnreachable(e)||super.walk(e)}visitClass(e){const t=e.name.value;this._emittedSuite=!0,this._emitDocString=!0,this._emitDecorators(e.decorators);let n=`class ${t}`;return e.arguments.length>0&&(n+=`(${e.arguments.map(e=>{let t="";return e.name&&(t=e.name.value+"="),t+=this._printExpression(e.valueExpression),t}).join(", ")})`),n+=":",this._emitLine(n),this._emitSuite(()=>{this._classNestCount++,this.walk(e.suite),this._classNestCount--}),this._emitLine(""),this._emitLine(""),!1}visitFunction(e){const t=e.name.value;if(0===this._functionNestCount){this._emittedSuite=!0,this._emitDocString=!0,this._emitDecorators(e.decorators);let n=e.isAsync?"async ":"";n+=`def ${t}`,n+=`(${e.parameters.map(e=>this._printParameter(e)).join(", ")})`,e.returnTypeAnnotation&&(n+=" -> "+this._printExpression(e.returnTypeAnnotation,!0)),n+=":",this._emitLine(n),this._emitSuite(()=>{this._functionNestCount++,this.walk(e.suite),this._functionNestCount--}),this._emitLine("")}return!1}visitWhile(e){return this._emitDocString=!1,!1}visitFor(e){return this._emitDocString=!1,!1}visitTry(e){return this._emitDocString=!1,!1}visitWith(e){return this._emitDocString=!1,!1}visitIf(e){if(this._emitDocString=!1,0===this._functionNestCount&&0===this._ifNestCount){this._ifNestCount++,this._emittedSuite=!0,this._emitLine("if "+this._printExpression(e.testExpression)+":"),this._emitSuite(()=>{this.walkMultiple(e.ifSuite.statements)});const t=e.elseSuite;t&&(this._emitLine("else:"),this._emitSuite(()=>{19===t.nodeType?this.walkMultiple([t.testExpression,t.ifSuite,t.elseSuite]):this.walkMultiple(t.statements)})),this._ifNestCount--}return!1}visitAssignment(e){let t="";if(39===e.leftExpression.nodeType){if("__all__"===e.leftExpression.value)return this._emitLine(this._printExpression(e,!1,!0)),!1;0===this._functionNestCount&&(t=this._printExpression(e.leftExpression))}else if(36===e.leftExpression.nodeType){const n=e.leftExpression.leftExpression;if(39===n.nodeType&&"self"===n.value){const n=e.leftExpression.memberName.value;c.isPrivateOrProtectedName(n)||(t=this._printExpression(e.leftExpression))}}if(t){const n=0===this._functionNestCount&&0===this._classNestCount;this._emittedSuite=!0,t+=" = ",t+=n?this._printExpression(e.rightExpression):"...",this._emitLine(t)}return!1}visitAugmentedAssignment(e){return 0===this._classNestCount&&0===this._functionNestCount&&39===e.leftExpression.nodeType&&"__all__"===e.leftExpression.value&&this._emitLine(this._printExpression(e,!1,!0)),!1}visitTypeAnnotation(e){if(0===this._functionNestCount){let t="";if(39===e.valueExpression.nodeType)t=this._printExpression(e.valueExpression);else if(36===e.valueExpression.nodeType){const n=e.valueExpression.leftExpression;if(39===n.nodeType&&"self"===n.value){const n=e.valueExpression.memberName.value;c.isPrivateOrProtectedName(n)||(t=this._printExpression(e.valueExpression))}}t&&(t+=": "+this._printExpression(e.typeAnnotation,!0),this._emitLine(t))}return!1}visitImport(e){if(this._functionNestCount>0||this._classNestCount>0)return!1;const t=a.getScopeForNode(e);return t&&e.list.forEach(e=>{const n=this._printModuleName(e.module);if(!this._trackedImportAs.has(n)){const r=e.alias?e.alias.value:e.module.nameParts.length>0?e.module.nameParts[0].value:"",s=t.lookUpSymbolRecursive(r);if(s){const t=new d(n,e.alias?e.alias.value:void 0,s.symbol);this._trackedImportAs.set(n,t)}}}),!1}visitImportFrom(e){if(this._functionNestCount>0||this._classNestCount>0)return!1;const t=a.getScopeForNode(e);if(t){const n=this._printModuleName(e.module);let r=this._trackedImportFrom.get(n);r||(r=new h(n,e.isWildcardImport,e),this._trackedImportFrom.set(n,r)),e.imports.forEach(e=>{const n=e.alias?e.alias.value:e.name.value,s=t.lookUpSymbolRecursive(n);s&&r.addSymbol(s.symbol,e.name.value,e.alias?e.alias.value:void 0,!1)})}return!1}visitStatementList(e){return e.statements.length>0&&49===e.statements[0].nodeType&&!this._emittedSuite&&this._emitDocString&&this._emitLine(this._printExpression(e.statements[0])),this._emitDocString=!1,this.walkMultiple(e.statements),!1}_emitSuite(e){this._increaseIndent(()=>{const t=this._emittedSuite;this._emittedSuite=!1,e(),this._emittedSuite||this._emitLine("..."),this._emittedSuite=t})}_increaseIndent(e){this._indentAmount++,e(),this._indentAmount--}_emitDecorators(e){e.forEach(e=>{let t="@"+this._printExpression(e.leftExpression);e.arguments&&(t+=`(${e.arguments.map(e=>this._printArgument(e)).join(", ")})`),this._emitLine(t)})}_printHeaderDocString(){return'"""'+this._lineEnd+"This type stub file was generated by pyright."+this._lineEnd+'"""'+this._lineEnd+this._lineEnd}_emitLine(e){for(let e=0;e<this._indentAmount;e++)this._typeStubText+=this._tab;this._typeStubText+=e+this._lineEnd}_printModuleName(e){let t="";for(let n=0;n<e.leadingDots;n++)t+=".";return t+=e.nameParts.map(e=>e.value).join("."),t}_addImplicitImportFrom(e,t){let n=this._trackedImportFrom.get(e);n||(n=new h(e,!1),this._trackedImportFrom.set(e,n)),t.forEach(e=>{n.addSymbol(void 0,e,void 0,!0)})}_printParameter(e){let t="";1===e.category?t+="*":2===e.category&&(t+="**"),e.name&&(t+=e.name.value);let n="";if(e.typeAnnotation)n=this._printExpression(e.typeAnnotation,!0);else if(e.defaultValue){const t=this._evaluator.getType(e.defaultValue);if(t&&!u.containsUnknown(t))if(l.isNoneOrNever(t))n="Optional[Any]",this._addImplicitImportFrom("typing",["Any","Optional"]);else if(8===t.category){const e=t.classType;l.ClassType.isBuiltIn(e,"bool")&&(n="bool")}}return n&&(t+=": "+n),e.defaultValue&&(t+=n?" = ...":"=..."),t}_printArgument(e){let t="";return 1===e.argumentCategory?t+="*":2===e.argumentCategory&&(t+="**"),e.name&&(t+=e.name.value+"="),t+this._printExpression(e.valueExpression)}_printExpression(e,t=!1,n=!1){return new f(this._accessedImportedSymbols,n).analyze(e),i.printExpression(e,t?1:0)}_printTrackedImports(){let e="",t=!1;return this._trackedImportAs.forEach(n=>{this._accessedImportedSymbols.get(n.alias||n.importName)&&(n.isAccessed=!0),(n.isAccessed||this._includeAllImports)&&(e+=`import ${n.importName}`,n.alias&&(e+=` as ${n.alias}`),e+=this._lineEnd,t=!0)}),this._trackedImportFrom.forEach(n=>{n.symbols.forEach(e=>{this._accessedImportedSymbols.get(e.alias||e.name)&&(e.isAccessed=!0)}),n.isWildcardImport&&(e+=`from ${n.importName} import *`+this._lineEnd,t=!0);const r=n.symbols.filter(e=>e.isAccessed||this._includeAllImports).sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0);r.length>0&&(e+=`from ${n.importName} import `,e+=r.map(e=>{let t=e.name;return e.alias&&(t+=" as "+e.alias),t}).join(", "),e+=this._lineEnd,t=!0)}),t&&(e+=this._lineEnd),e}_writeFile(){let e=this._printHeaderDocString();e+=this._printTrackedImports(),e+=this._typeStubText,r.writeFileSync(this._typingsPath,e,{encoding:"utf8"})}}t.TypeStubWriter=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CommandLineOptions=class{constructor(e,t){this.fileSpecs=[],this.executionRoot=e,this.fromVsCodeExtension=t}}}]);
//# sourceMappingURL=server.bundle.js.map